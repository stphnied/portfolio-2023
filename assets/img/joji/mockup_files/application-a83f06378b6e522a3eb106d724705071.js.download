/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */
function empLoader(e){"undefined"==typeof empLogger&&(empLogger=new Cobalt.Console({from:"Public Page",loggers:[new Cobalt.Logger.EMPLogger]})),"undefined"==typeof empInstance&&(empInstance=new EMPEngine({lithium:Li,cobaltInstance:empLogger})),empInstance._engine(e)}!function(e,t){function i(e){var t=e.length,i=ue.type(e);return ue.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||"function"!==i&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function n(e){var t=ke[e]={};return ue.each(e.match(he)||[],function(e,i){t[i]=!0}),t}function s(e,i,n,s){if(ue.acceptData(e)){var r,o,a=ue.expando,l=e.nodeType,c=l?ue.cache:e,u=l?e[a]:e[a]&&a;if(u&&c[u]&&(s||c[u].data)||n!==t||"string"!=typeof i)return u||(u=l?e[a]=te.pop()||ue.guid++:a),c[u]||(c[u]=l?{}:{toJSON:ue.noop}),("object"==typeof i||"function"==typeof i)&&(s?c[u]=ue.extend(c[u],i):c[u].data=ue.extend(c[u].data,i)),o=c[u],s||(o.data||(o.data={}),o=o.data),n!==t&&(o[ue.camelCase(i)]=n),"string"==typeof i?(r=o[i],null==r&&(r=o[ue.camelCase(i)])):r=o,r}}function r(e,t,i){if(ue.acceptData(e)){var n,s,r=e.nodeType,o=r?ue.cache:e,l=r?e[ue.expando]:ue.expando;if(o[l]){if(t&&(n=i?o[l]:o[l].data)){ue.isArray(t)?t=t.concat(ue.map(t,ue.camelCase)):t in n?t=[t]:(t=ue.camelCase(t),t=t in n?[t]:t.split(" ")),s=t.length;for(;s--;)delete n[t[s]];if(i?!a(n):!ue.isEmptyObject(n))return}(i||(delete o[l].data,a(o[l])))&&(r?ue.cleanData([e],!0):ue.support.deleteExpando||o!=o.window?delete o[l]:o[l]=null)}}}function o(e,i,n){if(n===t&&1===e.nodeType){var s="data-"+i.replace(Ie,"-$1").toLowerCase();if(n=e.getAttribute(s),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Ee.test(n)?ue.parseJSON(n):n}catch(r){}ue.data(e,i,n)}else n=t}return n}function a(e){var t;for(t in e)if(("data"!==t||!ue.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(){return!0}function c(){return!1}function u(){try{return Q.activeElement}catch(e){}}function d(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function h(e,t,i){if(ue.isFunction(t))return ue.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return ue.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(je.test(t))return ue.filter(t,e,i);t=ue.filter(t,e)}return ue.grep(e,function(e){return ue.inArray(e,t)>=0!==i})}function p(e){var t=qe.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function f(e,t){return ue.nodeName(e,"table")&&ue.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function m(e){return e.type=(null!==ue.find.attr(e,"type"))+"/"+e.type,e}function g(e){var t=st.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function v(e,t){for(var i,n=0;null!=(i=e[n]);n++)ue._data(i,"globalEval",!t||ue._data(t[n],"globalEval"))}function y(e,t){if(1===t.nodeType&&ue.hasData(e)){var i,n,s,r=ue._data(e),o=ue._data(t,r),a=r.events;if(a){delete o.handle,o.events={};for(i in a)for(n=0,s=a[i].length;s>n;n++)ue.event.add(t,i,a[i][n])}o.data&&(o.data=ue.extend({},o.data))}}function b(e,t){var i,n,s;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!ue.support.noCloneEvent&&t[ue.expando]){s=ue._data(t);for(n in s.events)ue.removeEvent(t,n,s.handle);t.removeAttribute(ue.expando)}"script"===i&&t.text!==e.text?(m(t).text=e.text,g(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),ue.support.html5Clone&&e.innerHTML&&!ue.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&tt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}function _(e,i){var n,s,r=0,o=typeof e.getElementsByTagName!==Y?e.getElementsByTagName(i||"*"):typeof e.querySelectorAll!==Y?e.querySelectorAll(i||"*"):t;if(!o)for(o=[],n=e.childNodes||e;null!=(s=n[r]);r++)!i||ue.nodeName(s,i)?o.push(s):ue.merge(o,_(s,i));return i===t||i&&ue.nodeName(e,i)?ue.merge([e],o):o}function w(e){tt.test(e.type)&&(e.defaultChecked=e.checked)}function C(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,s=Tt.length;s--;)if(t=Tt[s]+i,t in e)return t;return n}function S(e,t){return e=t||e,"none"===ue.css(e,"display")||!ue.contains(e.ownerDocument,e)}function T(e,t){for(var i,n,s,r=[],o=0,a=e.length;a>o;o++)n=e[o],n.style&&(r[o]=ue._data(n,"olddisplay"),i=n.style.display,t?(r[o]||"none"!==i||(n.style.display=""),""===n.style.display&&S(n)&&(r[o]=ue._data(n,"olddisplay",x(n.nodeName)))):r[o]||(s=S(n),(i&&"none"!==i||!s)&&ue._data(n,"olddisplay",s?i:ue.css(n,"display"))));for(o=0;a>o;o++)n=e[o],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?r[o]||"":"none"));return e}function k(e,t,i){var n=vt.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function E(e,t,i,n,s){for(var r=i===(n?"border":"content")?4:"width"===t?1:0,o=0;4>r;r+=2)"margin"===i&&(o+=ue.css(e,i+St[r],!0,s)),n?("content"===i&&(o-=ue.css(e,"padding"+St[r],!0,s)),"margin"!==i&&(o-=ue.css(e,"border"+St[r]+"Width",!0,s))):(o+=ue.css(e,"padding"+St[r],!0,s),"padding"!==i&&(o+=ue.css(e,"border"+St[r]+"Width",!0,s)));return o}function I(e,t,i){var n=!0,s="width"===t?e.offsetWidth:e.offsetHeight,r=ut(e),o=ue.support.boxSizing&&"border-box"===ue.css(e,"boxSizing",!1,r);if(0>=s||null==s){if(s=dt(e,t,r),(0>s||null==s)&&(s=e.style[t]),yt.test(s))return s;n=o&&(ue.support.boxSizingReliable||s===e.style[t]),s=parseFloat(s)||0}return s+E(e,t,i||(o?"border":"content"),n,r)+"px"}function x(e){var t=Q,i=_t[e];return i||(i=P(e,t),"none"!==i&&i||(ct=(ct||ue("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(ct[0].contentWindow||ct[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),i=P(e,t),ct.detach()),_t[e]=i),i}function P(e,t){var i=ue(t.createElement(e)).appendTo(t.body),n=ue.css(i[0],"display");return i.remove(),n}function A(e,t,i,n){var s;if(ue.isArray(t))ue.each(t,function(t,s){i||Et.test(e)?n(e,s):A(e+"["+("object"==typeof s?t:"")+"]",s,i,n)});else if(i||"object"!==ue.type(t))n(e,t);else for(s in t)A(e+"["+s+"]",t[s],i,n)}function D(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,s=0,r=t.toLowerCase().match(he)||[];if(ue.isFunction(i))for(;n=r[s++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function L(e,t,i,n){function s(a){var l;return r[a]=!0,ue.each(e[a]||[],function(e,a){var c=a(t,i,n);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),l}var r={},o=e===zt;return s(t.dataTypes[0])||!r["*"]&&s("*")}function O(e,i){var n,s,r=ue.ajaxSettings.flatOptions||{};for(s in i)i[s]!==t&&((r[s]?e:n||(n={}))[s]=i[s]);return n&&ue.extend(!0,e,n),e}function M(e,i,n){for(var s,r,o,a,l=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),r===t&&(r=e.mimeType||i.getResponseHeader("Content-Type"));if(r)for(a in l)if(l[a]&&l[a].test(r)){c.unshift(a);break}if(c[0]in n)o=c[0];else{for(a in n){if(!c[0]||e.converters[a+" "+c[0]]){o=a;break}s||(s=a)}o=o||s}return o?(o!==c[0]&&c.unshift(o),n[o]):void 0}function N(e,t,i,n){var s,r,o,a,l,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(r=u.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(o=c[l+" "+r]||c["* "+r],!o)for(s in c)if(a=s.split(" "),a[1]===r&&(o=c[l+" "+a[0]]||c["* "+a[0]])){o===!0?o=c[s]:c[s]!==!0&&(r=a[0],u.unshift(a[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(d){return{state:"parsererror",error:o?d:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}function R(){try{return new e.XMLHttpRequest}catch(t){}}function U(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $(){return setTimeout(function(){Jt=t}),Jt=ue.now()}function H(e,t,i){for(var n,s=(si[t]||[]).concat(si["*"]),r=0,o=s.length;o>r;r++)if(n=s[r].call(i,t,e))return n}function B(e,t,i){var n,s,r=0,o=ni.length,a=ue.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=Jt||$(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,r=1-n,o=0,l=c.tweens.length;l>o;o++)c.tweens[o].run(r);return a.notifyWith(e,[c,r,i]),1>r&&l?i:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:ue.extend({},t),opts:ue.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Jt||$(),duration:i.duration,tweens:[],createTween:function(t,i){var n=ue.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)c.tweens[i].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(F(u,c.opts.specialEasing);o>r;r++)if(n=ni[r].call(c,e,u,c.opts))return n;return ue.map(u,H,c),ue.isFunction(c.opts.start)&&c.opts.start.call(e,c),ue.fx.timer(ue.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function F(e,t){var i,n,s,r,o;for(i in e)if(n=ue.camelCase(i),s=t[n],r=e[i],ue.isArray(r)&&(s=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),o=ue.cssHooks[n],o&&"expand"in o){r=o.expand(r),delete e[n];for(i in r)i in e||(e[i]=r[i],t[i]=s)}else t[n]=s}function j(e,t,i){var n,s,r,o,a,l,c=this,u={},d=e.style,h=e.nodeType&&S(e),p=ue._data(e,"fxshow");i.queue||(a=ue._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,ue.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===ue.css(e,"display")&&"none"===ue.css(e,"float")&&(ue.support.inlineBlockNeedsLayout&&"inline"!==x(e.nodeName)?d.zoom=1:d.display="inline-block")),i.overflow&&(d.overflow="hidden",ue.support.shrinkWrapBlocks||c.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in t)if(s=t[n],ei.exec(s)){if(delete t[n],r=r||"toggle"===s,s===(h?"hide":"show"))continue;u[n]=p&&p[n]||ue.style(e,n)}if(!ue.isEmptyObject(u)){p?"hidden"in p&&(h=p.hidden):p=ue._data(e,"fxshow",{}),r&&(p.hidden=!h),h?ue(e).show():c.done(function(){ue(e).hide()}),c.done(function(){var t;ue._removeData(e,"fxshow");for(t in u)ue.style(e,t,u[t])});for(n in u)o=H(h?p[n]:0,n,c),n in p||(p[n]=o.start,h&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function z(e,t,i,n,s){return new z.prototype.init(e,t,i,n,s)}function W(e,t){var i,n={height:e},s=0;for(t=t?1:0;4>s;s+=2-t)i=St[s],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function V(e){return ue.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var q,G,Y=typeof t,X=e.location,Q=e.document,K=Q.documentElement,J=e.jQuery,Z=e.$,ee={},te=[],ie="1.10.2",ne=te.concat,se=te.push,re=te.slice,oe=te.indexOf,ae=ee.toString,le=ee.hasOwnProperty,ce=ie.trim,ue=function(e,t){return new ue.fn.init(e,t,G)},de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,he=/\S+/g,pe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,fe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,me=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ge=/^[\],:{}\s]*$/,ve=/(?:^|:|,)(?:\s*\[)+/g,ye=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,be=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,_e=/^-ms-/,we=/-([\da-z])/gi,Ce=function(e,t){return t.toUpperCase()},Se=function(e){(Q.addEventListener||"load"===e.type||"complete"===Q.readyState)&&(Te(),ue.ready())},Te=function(){Q.addEventListener?(Q.removeEventListener("DOMContentLoaded",Se,!1),e.removeEventListener("load",Se,!1)):(Q.detachEvent("onreadystatechange",Se),e.detachEvent("onload",Se))};ue.fn=ue.prototype={jquery:ie,constructor:ue,init:function(e,i,n){var s,r;if(!e)return this;if("string"==typeof e){if(s="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:fe.exec(e),!s||!s[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(s[1]){if(i=i instanceof ue?i[0]:i,ue.merge(this,ue.parseHTML(s[1],i&&i.nodeType?i.ownerDocument||i:Q,!0)),me.test(s[1])&&ue.isPlainObject(i))for(s in i)ue.isFunction(this[s])?this[s](i[s]):this.attr(s,i[s]);return this}if(r=Q.getElementById(s[2]),r&&r.parentNode){if(r.id!==s[2])return n.find(e);this.length=1,this[0]=r}return this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ue.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),ue.makeArray(e,this))},selector:"",length:0,toArray:function(){return re.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=ue.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ue.each(this,e,t)},ready:function(e){return ue.ready.promise().done(e),this},slice:function(){return this.pushStack(re.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},map:function(e){return this.pushStack(ue.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:se,sort:[].sort,splice:[].splice},ue.fn.init.prototype=ue.fn,ue.extend=ue.fn.extend=function(){var e,i,n,s,r,o,a=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),"object"==typeof a||ue.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(r=arguments[l]))for(s in r)e=a[s],n=r[s],a!==n&&(u&&n&&(ue.isPlainObject(n)||(i=ue.isArray(n)))?(i?(i=!1,o=e&&ue.isArray(e)?e:[]):o=e&&ue.isPlainObject(e)?e:{},a[s]=ue.extend(u,o,n)):n!==t&&(a[s]=n));return a},ue.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===ue&&(e.$=Z),t&&e.jQuery===ue&&(e.jQuery=J),ue},isReady:!1,readyWait:1,holdReady:function(e){e?ue.readyWait++:ue.ready(!0)},ready:function(e){if(e===!0?!--ue.readyWait:!ue.isReady){if(!Q.body)return setTimeout(ue.ready);ue.isReady=!0,e!==!0&&--ue.readyWait>0||(q.resolveWith(Q,[ue]),ue.fn.trigger&&ue(Q).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===ue.type(e)},isArray:Array.isArray||function(e){return"array"===ue.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?ee[ae.call(e)]||"object":typeof e},isPlainObject:function(e){var i;if(!e||"object"!==ue.type(e)||e.nodeType||ue.isWindow(e))return!1;try{if(e.constructor&&!le.call(e,"constructor")&&!le.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ue.support.ownLast)for(i in e)return le.call(e,i);for(i in e);return i===t||le.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||Q;var n=me.exec(e),s=!i&&[];return n?[t.createElement(n[1])]:(n=ue.buildFragment([e],t,s),s&&ue(s).remove(),ue.merge([],n.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=ue.trim(t),t&&ge.test(t.replace(ye,"@").replace(be,"]").replace(ve,"")))?new Function("return "+t)():void ue.error("Invalid JSON: "+t)},parseXML:function(i){var n,s;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(s=new DOMParser,n=s.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(r){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ue.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&ue.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(_e,"ms-").replace(we,Ce)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var s,r=0,o=e.length,a=i(e);if(n){if(a)for(;o>r&&(s=t.apply(e[r],n),s!==!1);r++);else for(r in e)if(s=t.apply(e[r],n),s===!1)break}else if(a)for(;o>r&&(s=t.call(e[r],r,e[r]),s!==!1);r++);else for(r in e)if(s=t.call(e[r],r,e[r]),s===!1)break;return e},trim:ce&&!ce.call("\ufeff\xa0")?function(e){return null==e?"":ce.call(e)}:function(e){return null==e?"":(e+"").replace(pe,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?ue.merge(n,"string"==typeof e?[e]:e):se.call(n,e)),n},inArray:function(e,t,i){var n;if(t){if(oe)return oe.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=i.length,s=e.length,r=0;if("number"==typeof n)for(;n>r;r++)e[s++]=i[r];else for(;i[r]!==t;)e[s++]=i[r++];return e.length=s,e},grep:function(e,t,i){var n,s=[],r=0,o=e.length;for(i=!!i;o>r;r++)n=!!t(e[r],r),i!==n&&s.push(e[r]);return s},map:function(e,t,n){var s,r=0,o=e.length,a=i(e),l=[];if(a)for(;o>r;r++)s=t(e[r],r,n),null!=s&&(l[l.length]=s);else for(r in e)s=t(e[r],r,n),null!=s&&(l[l.length]=s);return ne.apply([],l)},guid:1,proxy:function(e,i){var n,s,r;return"string"==typeof i&&(r=e[i],i=e,e=r),ue.isFunction(e)?(n=re.call(arguments,2),s=function(){return e.apply(i||this,n.concat(re.call(arguments)))},s.guid=e.guid=e.guid||ue.guid++,s):t},access:function(e,i,n,s,r,o,a){var l=0,c=e.length,u=null==n;if("object"===ue.type(n)){r=!0;for(l in n)ue.access(e,i,l,n[l],!0,o,a)}else if(s!==t&&(r=!0,ue.isFunction(s)||(a=!0),u&&(a?(i.call(e,s),i=null):(u=i,i=function(e,t,i){return u.call(ue(e),i)})),i))for(;c>l;l++)i(e[l],n,a?s:s.call(e[l],l,i(e[l],n)));return r?e:u?i.call(e):c?i(e[0],n):o},now:function(){return(new Date).getTime()},swap:function(e,t,i,n){var s,r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];s=i.apply(e,n||[]);for(r in t)e.style[r]=o[r];return s}}),ue.ready.promise=function(t){if(!q)if(q=ue.Deferred(),"complete"===Q.readyState)setTimeout(ue.ready);else if(Q.addEventListener)Q.addEventListener("DOMContentLoaded",Se,!1),e.addEventListener("load",Se,!1);else{Q.attachEvent("onreadystatechange",Se),e.attachEvent("onload",Se);var i=!1;try{i=null==e.frameElement&&Q.documentElement}catch(n){}i&&i.doScroll&&!function s(){if(!ue.isReady){try{i.doScroll("left")}catch(e){return setTimeout(s,50)}Te(),ue.ready()}}()}return q.promise(t)},ue.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()}),G=ue(Q),/*!
 * Sizzle CSS Selector Engine v1.10.2
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03
 */
function(e,t){function i(e,t,i,n){var s,r,o,a,l,c,u,d,f,m;if((t?t.ownerDocument||t:B)!==L&&D(t),t=t||L,i=i||[],!e||"string"!=typeof e)return i;if(1!==(a=t.nodeType)&&9!==a)return[];if(M&&!n){if(s=be.exec(e))if(o=s[1]){if(9===a){if(r=t.getElementById(o),!r||!r.parentNode)return i;if(r.id===o)return i.push(r),i}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(o))&&$(t,r)&&r.id===o)return i.push(r),i}else{if(s[2])return ee.apply(i,t.getElementsByTagName(e)),i;if((o=s[3])&&S.getElementsByClassName&&t.getElementsByClassName)return ee.apply(i,t.getElementsByClassName(o)),i}if(S.qsa&&(!N||!N.test(e))){if(d=u=H,f=t,m=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=h(e),(u=t.getAttribute("id"))?d=u.replace(Ce,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",l=c.length;l--;)c[l]=d+p(c[l]);f=pe.test(e)&&t.parentNode||t,m=c.join(",")}if(m)try{return ee.apply(i,f.querySelectorAll(m)),i}catch(g){}finally{u||t.removeAttribute("id")}}}return w(e.replace(ce,"$1"),t,i,n)}function n(){function e(i,n){return t.push(i+=" ")>k.cacheLength&&delete e[t.shift()],e[i]=n}var t=[];return e}function s(e){return e[H]=!0,e}function r(e){var t=L.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var i=e.split("|"),n=e.length;n--;)k.attrHandle[i[n]]=t}function a(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function l(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function c(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function u(e){return s(function(t){return t=+t,s(function(i,n){for(var s,r=e([],i.length,t),o=r.length;o--;)i[s=r[o]]&&(i[s]=!(n[s]=i[s]))})})}function d(){}function h(e,t){var n,s,r,o,a,l,c,u=W[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=k.preFilter;a;){(!n||(s=de.exec(a)))&&(s&&(a=a.slice(s[0].length)||a),l.push(r=[])),n=!1,(s=he.exec(a))&&(n=s.shift(),r.push({value:n,type:s[0].replace(ce," ")}),a=a.slice(n.length));for(o in k.filter)!(s=ve[o].exec(a))||c[o]&&!(s=c[o](s))||(n=s.shift(),r.push({value:n,type:o,matches:s}),a=a.slice(n.length));if(!n)break}return t?a.length:a?i.error(e):W(e,l).slice(0)}function p(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function f(e,t,i){var n=t.dir,s=i&&"parentNode"===n,r=j++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||s)return e(t,i,r)}:function(t,i,o){var a,l,c,u=F+" "+r;if(o){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,i,o))return!0}else for(;t=t[n];)if(1===t.nodeType||s)if(c=t[H]||(t[H]={}),(l=c[n])&&l[0]===u){if((a=l[1])===!0||a===T)return a===!0}else if(l=c[n]=[u],l[1]=e(t,i,o)||T,l[1]===!0)return!0}}function m(e){return e.length>1?function(t,i,n){for(var s=e.length;s--;)if(!e[s](t,i,n))return!1;return!0}:e[0]}function g(e,t,i,n,s){for(var r,o=[],a=0,l=e.length,c=null!=t;l>a;a++)(r=e[a])&&(!i||i(r,n,s))&&(o.push(r),c&&t.push(a));return o}function v(e,t,i,n,r,o){return n&&!n[H]&&(n=v(n)),r&&!r[H]&&(r=v(r,o)),s(function(s,o,a,l){var c,u,d,h=[],p=[],f=o.length,m=s||_(t||"*",a.nodeType?[a]:a,[]),v=!e||!s&&t?m:g(m,h,e,a,l),y=i?r||(s?e:f||n)?[]:o:v;if(i&&i(v,y,a,l),n)for(c=g(y,p),n(c,[],a,l),u=c.length;u--;)(d=c[u])&&(y[p[u]]=!(v[p[u]]=d));if(s){if(r||e){if(r){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(v[u]=d);r(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=r?ie.call(s,d):h[u])>-1&&(s[c]=!(o[c]=d))}}else y=g(y===o?y.splice(f,y.length):y),r?r(null,o,y,l):ee.apply(o,y)})}function y(e){for(var t,i,n,s=e.length,r=k.relative[e[0].type],o=r||k.relative[" "],a=r?1:0,l=f(function(e){return e===t},o,!0),c=f(function(e){return ie.call(t,e)>-1},o,!0),u=[function(e,i,n){return!r&&(n||i!==P)||((t=i).nodeType?l(e,i,n):c(e,i,n))}];s>a;a++)if(i=k.relative[e[a].type])u=[f(m(u),i)];else{if(i=k.filter[e[a].type].apply(null,e[a].matches),i[H]){for(n=++a;s>n&&!k.relative[e[n].type];n++);return v(a>1&&m(u),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ce,"$1"),i,n>a&&y(e.slice(a,n)),s>n&&y(e=e.slice(n)),s>n&&p(e))}u.push(i)}return m(u)}function b(e,t){var n=0,r=t.length>0,o=e.length>0,a=function(s,a,l,c,u){var d,h,p,f=[],m=0,v="0",y=s&&[],b=null!=u,_=P,w=s||o&&k.find.TAG("*",u&&a.parentNode||a),C=F+=null==_?1:Math.random()||.1;for(b&&(P=a!==L&&a,T=n);null!=(d=w[v]);v++){if(o&&d){for(h=0;p=e[h++];)if(p(d,a,l)){c.push(d);break}b&&(F=C,T=++n)}r&&((d=!p&&d)&&m--,s&&y.push(d))}if(m+=v,r&&v!==m){for(h=0;p=t[h++];)p(y,f,a,l);if(s){if(m>0)for(;v--;)y[v]||f[v]||(f[v]=J.call(c));f=g(f)}ee.apply(c,f),b&&!s&&f.length>0&&m+t.length>1&&i.uniqueSort(c)}return b&&(F=C,P=_),y};return r?s(a):a}function _(e,t,n){for(var s=0,r=t.length;r>s;s++)i(e,t[s],n);return n}function w(e,t,i,n){var s,r,o,a,l,c=h(e);if(!n&&1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(o=r[0]).type&&S.getById&&9===t.nodeType&&M&&k.relative[r[1].type]){if(t=(k.find.ID(o.matches[0].replace(Se,Te),t)||[])[0],!t)return i;e=e.slice(r.shift().value.length)}for(s=ve.needsContext.test(e)?0:r.length;s--&&(o=r[s],!k.relative[a=o.type]);)if((l=k.find[a])&&(n=l(o.matches[0].replace(Se,Te),pe.test(r[0].type)&&t.parentNode||t))){if(r.splice(s,1),e=n.length&&p(r),!e)return ee.apply(i,n),i;break}}return x(e,c)(n,t,!M,i,pe.test(e)),i}var C,S,T,k,E,I,x,P,A,D,L,O,M,N,R,U,$,H="sizzle"+-new Date,B=e.document,F=0,j=0,z=n(),W=n(),V=n(),q=!1,G=function(e,t){return e===t?(q=!0,0):0},Y=typeof t,X=1<<31,Q={}.hasOwnProperty,K=[],J=K.pop,Z=K.push,ee=K.push,te=K.slice,ie=K.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",se="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=re.replace("w","w#"),ae="\\["+se+"*("+re+")"+se+"*(?:([*^$|!~]?=)"+se+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+oe+")|)|)"+se+"*\\]",le=":("+re+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ae.replace(3,8)+")*)|.*)\\)|)",ce=new RegExp("^"+se+"+|((?:^|[^\\\\])(?:\\\\.)*)"+se+"+$","g"),de=new RegExp("^"+se+"*,"+se+"*"),he=new RegExp("^"+se+"*([>+~]|"+se+")"+se+"*"),pe=new RegExp(se+"*[+~]"),fe=new RegExp("="+se+"*([^\\]'\"]*)"+se+"*\\]","g"),me=new RegExp(le),ge=new RegExp("^"+oe+"$"),ve={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+le),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+se+"*(even|odd|(([+-]|)(\\d*)n|)"+se+"*(?:([+-]|)"+se+"*(\\d+)|))"+se+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+se+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+se+"*((?:-\\d)?\\d*)"+se+"*\\)|)(?=[^-]|$)","i")},ye=/^[^{]+\{\s*\[native \w/,be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/^(?:input|select|textarea|button)$/i,we=/^h\d$/i,Ce=/'|\\/g,Se=new RegExp("\\\\([\\da-f]{1,6}"+se+"?|("+se+")|.)","ig"),Te=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{ee.apply(K=te.call(B.childNodes),B.childNodes),K[B.childNodes.length].nodeType}catch(ke){ee={apply:K.length?function(e,t){Z.apply(e,te.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}I=i.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},S=i.support={},D=i.setDocument=function(e){var t=e?e.ownerDocument||e:B,i=t.defaultView;return t!==L&&9===t.nodeType&&t.documentElement?(L=t,O=t.documentElement,M=!I(t),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){D()}),S.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),S.getElementsByTagName=r(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),S.getElementsByClassName=r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),S.getById=r(function(e){return O.appendChild(e).id=H,!t.getElementsByName||!t.getElementsByName(H).length}),S.getById?(k.find.ID=function(e,t){if(typeof t.getElementById!==Y&&M){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},k.filter.ID=function(e){var t=e.replace(Se,Te);return function(e){return e.getAttribute("id")===t}}):(delete k.find.ID,k.filter.ID=function(e){var t=e.replace(Se,Te);return function(e){var i=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return i&&i.value===t}}),k.find.TAG=S.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Y?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],s=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[s++];)1===i.nodeType&&n.push(i);return n}return r},k.find.CLASS=S.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Y&&M?t.getElementsByClassName(e):void 0},R=[],N=[],(S.qsa=ye.test(t.querySelectorAll))&&(r(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||N.push("\\["+se+"*(?:value|"+ne+")"),e.querySelectorAll(":checked").length||N.push(":checked")}),r(function(e){var i=t.createElement("input");i.setAttribute("type","hidden"),e.appendChild(i).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&N.push("[*^$]="+se+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),N.push(",.*:")})),(S.matchesSelector=ye.test(U=O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(e){S.disconnectedMatch=U.call(e,"div"),U.call(e,"[s!='']:x"),R.push("!=",le)}),N=N.length&&new RegExp(N.join("|")),R=R.length&&new RegExp(R.join("|")),$=ye.test(O.contains)||O.compareDocumentPosition?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=O.compareDocumentPosition?function(e,i){if(e===i)return q=!0,0;var n=i.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(i);return n?1&n||!S.sortDetached&&i.compareDocumentPosition(e)===n?e===t||$(B,e)?-1:i===t||$(B,i)?1:A?ie.call(A,e)-ie.call(A,i):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,i){var n,s=0,r=e.parentNode,o=i.parentNode,l=[e],c=[i];if(e===i)return q=!0,0;if(!r||!o)return e===t?-1:i===t?1:r?-1:o?1:A?ie.call(A,e)-ie.call(A,i):0;if(r===o)return a(e,i);for(n=e;n=n.parentNode;)l.unshift(n);for(n=i;n=n.parentNode;)c.unshift(n);for(;l[s]===c[s];)s++;return s?a(l[s],c[s]):l[s]===B?-1:c[s]===B?1:0},t):L},i.matches=function(e,t){return i(e,null,null,t)},i.matchesSelector=function(e,t){if((e.ownerDocument||e)!==L&&D(e),t=t.replace(fe,"='$1']"),S.matchesSelector&&M&&(!R||!R.test(t))&&(!N||!N.test(t)))try{var n=U.call(e,t);if(n||S.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(s){}return i(t,L,null,[e]).length>0},i.contains=function(e,t){return(e.ownerDocument||e)!==L&&D(e),$(e,t)},i.attr=function(e,i){(e.ownerDocument||e)!==L&&D(e);var n=k.attrHandle[i.toLowerCase()],s=n&&Q.call(k.attrHandle,i.toLowerCase())?n(e,i,!M):t;return s===t?S.attributes||!M?e.getAttribute(i):(s=e.getAttributeNode(i))&&s.specified?s.value:null:s},i.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},i.uniqueSort=function(e){var t,i=[],n=0,s=0;if(q=!S.detectDuplicates,A=!S.sortStable&&e.slice(0),e.sort(G),q){for(;t=e[s++];)t===e[s]&&(n=i.push(s));for(;n--;)e.splice(i[n],1)}return e},E=i.getText=function(e){var t,i="",n=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=E(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[n];n++)i+=E(t);return i},k=i.selectors={cacheLength:50,createPseudo:s,match:ve,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Se,Te),e[3]=(e[4]||e[5]||"").replace(Se,Te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||i.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&i.error(e[0]),e},PSEUDO:function(e){var i,n=!e[5]&&e[2];return ve.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:n&&me.test(n)&&(i=h(n,!0))&&(i=n.indexOf(")",n.length-i)-n.length)&&(e[0]=e[0].slice(0,i),e[2]=n.slice(0,i)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Se,Te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+se+")"+e+"("+se+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(s){var r=i.attr(s,e);return null==r?"!="===t:t?(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r+" ").indexOf(n)>-1:"|="===t?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,s){var r="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===s?function(e){return!!e.parentNode}:function(t,i,l){var c,u,d,h,p,f,m=r!==o?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(g){if(r){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&y){for(u=g[H]||(g[H]={}),c=u[e]||[],p=c[0]===F&&c[1],h=c[0]===F&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[F,p,h];break}}else if(y&&(c=(t[H]||(t[H]={}))[e])&&c[0]===F)h=c[1];else for(;(d=++p&&d&&d[m]||(h=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(y&&((d[H]||(d[H]={}))[e]=[F,h]),d!==t)););return h-=s,h===n||h%n===0&&h/n>=0}}},PSEUDO:function(e,t){var n,r=k.pseudos[e]||k.setFilters[e.toLowerCase()]||i.error("unsupported pseudo: "+e);return r[H]?r(t):r.length>1?(n=[e,e,"",t],k.setFilters.hasOwnProperty(e.toLowerCase())?s(function(e,i){for(var n,s=r(e,t),o=s.length;o--;)n=ie.call(e,s[o]),e[n]=!(i[n]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:s(function(e){var t=[],i=[],n=x(e.replace(ce,"$1"));return n[H]?s(function(e,t,i,s){for(var r,o=n(e,null,s,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))}):function(e,s,r){return t[0]=e,n(t,null,r,i),!i.pop()}}),has:s(function(e){return function(t){return i(e,t).length>0}}),contains:s(function(e){return function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:s(function(e){return ge.test(e||"")||i.error("unsupported lang: "+e),e=e.replace(Se,Te).toLowerCase(),function(t){var i;do if(i=M?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return we.test(e.nodeName)},input:function(e){return _e.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,i){return[0>i?i+t:i]}),even:u(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:u(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:u(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:u(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},k.pseudos.nth=k.pseudos.eq;for(C in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[C]=l(C);for(C in{submit:!0,reset:!0})k.pseudos[C]=c(C);d.prototype=k.filters=k.pseudos,k.setFilters=new d,x=i.compile=function(e,t){var i,n=[],s=[],r=V[e+" "];if(!r){for(t||(t=h(e)),i=t.length;i--;)r=y(t[i]),r[H]?n.push(r):s.push(r);r=V(e,b(s,n))}return r},S.sortStable=H.split("").sort(G).join("")===H,S.detectDuplicates=q,D(),S.sortDetached=r(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),S.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(ne,function(e,t,i){var n;return i?void 0:(n=e.getAttributeNode(t))&&n.specified?n.value:e[t]===!0?t.toLowerCase():null}),ue.find=i,ue.expr=i.selectors,ue.expr[":"]=ue.expr.pseudos,ue.unique=i.uniqueSort,ue.text=i.getText,ue.isXMLDoc=i.isXML,ue.contains=i.contains}(e);var ke={};ue.Callbacks=function(e){e="string"==typeof e?ke[e]||n(e):ue.extend({},e);var i,s,r,o,a,l,c=[],u=!e.once&&[],d=function(t){for(s=e.memory&&t,r=!0,a=l||0,l=0,o=c.length,i=!0;c&&o>a;a++)if(c[a].apply(t[0],t[1])===!1&&e.stopOnFalse){s=!1;break}i=!1,c&&(u?u.length&&d(u.shift()):s?c=[]:h.disable())},h={add:function(){if(c){var t=c.length;!function n(t){ue.each(t,function(t,i){var s=ue.type(i);"function"===s?e.unique&&h.has(i)||c.push(i):i&&i.length&&"string"!==s&&n(i)})}(arguments),i?o=c.length:s&&(l=t,d(s))}return this},remove:function(){return c&&ue.each(arguments,function(e,t){for(var n;(n=ue.inArray(t,c,n))>-1;)c.splice(n,1),i&&(o>=n&&o--,a>=n&&a--)}),this},has:function(e){return e?ue.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],o=0,this},disable:function(){return c=u=s=t,this},disabled:function(){return!c},lock:function(){return u=t,s||h.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!c||r&&!u||(t=t||[],t=[e,t.slice?t.slice():t],i?u.push(t):d(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!r}};return h},ue.extend({Deferred:function(e){var t=[["resolve","done",ue.Callbacks("once memory"),"resolved"],["reject","fail",ue.Callbacks("once memory"),"rejected"],["notify","progress",ue.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ue.Deferred(function(i){ue.each(t,function(t,r){var o=r[0],a=ue.isFunction(e[t])&&e[t];s[r[1]](function(){var e=a&&a.apply(this,arguments);e&&ue.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o+"With"](this===n?i.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ue.extend(e,n):n}},s={};return n.pipe=n.then,ue.each(t,function(e,r){var o=r[2],a=r[3];n[r[1]]=o.add,a&&o.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),s[r[0]]=function(){return s[r[0]+"With"](this===s?n:this,arguments),this},s[r[0]+"With"]=o.fireWith}),n.promise(s),e&&e.call(s,s),s},when:function(e){var t,i,n,s=0,r=re.call(arguments),o=r.length,a=1!==o||e&&ue.isFunction(e.promise)?o:0,l=1===a?e:ue.Deferred(),c=function(e,i,n){return function(s){i[e]=this,n[e]=arguments.length>1?re.call(arguments):s,n===t?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(o>1)for(t=new Array(o),i=new Array(o),n=new Array(o);o>s;s++)r[s]&&ue.isFunction(r[s].promise)?r[s].promise().done(c(s,n,r)).fail(l.reject).progress(c(s,i,t)):--a;return a||l.resolveWith(n,r),l.promise()}}),ue.support=function(t){var i,n,s,r,o,a,l,c,u,d=Q.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=d.getElementsByTagName("*")||[],n=d.getElementsByTagName("a")[0],!n||!n.style||!i.length)return t;r=Q.createElement("select"),a=r.appendChild(Q.createElement("option")),s=d.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(n.getAttribute("style")),t.hrefNormalized="/a"===n.getAttribute("href"),t.opacity=/^0.5/.test(n.style.opacity),t.cssFloat=!!n.style.cssFloat,t.checkOn=!!s.value,t.optSelected=a.selected,t.enctype=!!Q.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==Q.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!a.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}s=Q.createElement("input"),s.setAttribute("value",""),t.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),o=Q.createDocumentFragment(),o.appendChild(s),t.appendChecked=s.checked,t.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(u in{submit:!0,change:!0,focusin:!0})d.setAttribute(l="on"+u,"t"),t[u+"Bubbles"]=l in e||d.attributes[l].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip;for(u in ue(t))break;return t.ownLast="0"!==u,ue(function(){var i,n,s,r="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",o=Q.getElementsByTagName("body")[0];o&&(i=Q.createElement("div"),i.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",o.appendChild(i).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=d.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&0===s[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ue.swap(o,null!=o.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,n=d.appendChild(Q.createElement("div")),n.style.cssText=d.style.cssText=r,n.style.marginRight=n.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight)),typeof d.style.zoom!==Y&&(d.innerHTML="",d.style.cssText=r+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(o.style.zoom=1)),o.removeChild(i),i=d=s=n=null)}),i=r=o=a=n=s=null,t}({});var Ee=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ie=/([A-Z])/g;ue.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ue.cache[e[ue.expando]]:e[ue.expando],!!e&&!a(e)},data:function(e,t,i){return s(e,t,i)},removeData:function(e,t){return r(e,t)},_data:function(e,t,i){return s(e,t,i,!0)},_removeData:function(e,t){return r(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&ue.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),ue.fn.extend({data:function(e,i){var n,s,r=null,a=0,l=this[0];if(e===t){if(this.length&&(r=ue.data(l),1===l.nodeType&&!ue._data(l,"parsedAttrs"))){for(n=l.attributes;a<n.length;a++)s=n[a].name,0===s.indexOf("data-")&&(s=ue.camelCase(s.slice(5)),o(l,s,r[s]));ue._data(l,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ue.data(this,e)}):arguments.length>1?this.each(function(){ue.data(this,e,i)}):l?o(l,e,ue.data(l,e)):null},removeData:function(e){return this.each(function(){ue.removeData(this,e)})}}),ue.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=ue._data(e,t),i&&(!n||ue.isArray(i)?n=ue._data(e,t,ue.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=ue.queue(e,t),n=i.length,s=i.shift(),r=ue._queueHooks(e,t),o=function(){ue.dequeue(e,t)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===t&&i.unshift("inprogress"),delete r.stop,s.call(e,o,r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return ue._data(e,i)||ue._data(e,i,{empty:ue.Callbacks("once memory").add(function(){ue._removeData(e,t+"queue"),ue._removeData(e,i)})})}}),ue.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),arguments.length<n?ue.queue(this[0],e):i===t?this:this.each(function(){var t=ue.queue(this,e,i);ue._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ue.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ue.dequeue(this,e)})},delay:function(e,t){return e=ue.fx?ue.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var n,s=1,r=ue.Deferred(),o=this,a=this.length,l=function(){--s||r.resolveWith(o,[o])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";a--;)n=ue._data(o[a],e+"queueHooks"),n&&n.empty&&(s++,n.empty.add(l));return l(),r.promise(i)}});var xe,Pe,Ae=/[\t\r\n\f]/g,De=/\r/g,Le=/^(?:input|select|textarea|button|object)$/i,Oe=/^(?:a|area)$/i,Me=/^(?:checked|selected)$/i,Ne=ue.support.getSetAttribute,Re=ue.support.input;ue.fn.extend({attr:function(e,t){return ue.access(this,ue.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ue.removeAttr(this,e)})},prop:function(e,t){return ue.access(this,ue.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ue.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,n,s,r,o=0,a=this.length,l="string"==typeof e&&e;if(ue.isFunction(e))return this.each(function(t){ue(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(he)||[];a>o;o++)if(i=this[o],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ae," "):" ")){for(r=0;s=t[r++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");i.className=ue.trim(n)}return this},removeClass:function(e){var t,i,n,s,r,o=0,a=this.length,l=0===arguments.length||"string"==typeof e&&e;if(ue.isFunction(e))return this.each(function(t){ue(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(he)||[];a>o;o++)if(i=this[o],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ae," "):"")){for(r=0;s=t[r++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");i.className=e?ue.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):ue.isFunction(e)?this.each(function(i){ue(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var t,n=0,s=ue(this),r=e.match(he)||[];t=r[n++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else(i===Y||"boolean"===i)&&(this.className&&ue._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ue._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ae," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,n,s,r=this[0];{if(arguments.length)return s=ue.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=s?e.call(this,i,ue(this).val()):e,null==r?r="":"number"==typeof r?r+="":ue.isArray(r)&&(r=ue.map(r,function(e){return null==e?"":e+""})),n=ue.valHooks[this.type]||ue.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,r,"value")!==t||(this.value=r))});if(r)return n=ue.valHooks[r.type]||ue.valHooks[r.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(r,"value"))!==t?i:(i=r.value,"string"==typeof i?i.replace(De,""):null==i?"":i)}}}),ue.extend({valHooks:{option:{get:function(e){var t=ue.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,i,n=e.options,s=e.selectedIndex,r="select-one"===e.type||0>s,o=r?null:[],a=r?s+1:n.length,l=0>s?a:r?s:0;a>l;l++)if(i=n[l],(i.selected||l===s)&&(ue.support.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!ue.nodeName(i.parentNode,"optgroup"))){if(t=ue(i).val(),r)return t;o.push(t)}return o},set:function(e,t){for(var i,n,s=e.options,r=ue.makeArray(t),o=s.length;o--;)n=s[o],(n.selected=ue.inArray(ue(n).val(),r)>=0)&&(i=!0);return i||(e.selectedIndex=-1),r}}},attr:function(e,i,n){var s,r,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Y?ue.prop(e,i,n):(1===o&&ue.isXMLDoc(e)||(i=i.toLowerCase(),s=ue.attrHooks[i]||(ue.expr.match.bool.test(i)?Pe:xe)),n===t?s&&"get"in s&&null!==(r=s.get(e,i))?r:(r=ue.find.attr(e,i),null==r?t:r):null!==n?s&&"set"in s&&(r=s.set(e,n,i))!==t?r:(e.setAttribute(i,n+""),n):void ue.removeAttr(e,i))},removeAttr:function(e,t){var i,n,s=0,r=t&&t.match(he);if(r&&1===e.nodeType)for(;i=r[s++];)n=ue.propFix[i]||i,ue.expr.match.bool.test(i)?Re&&Ne||!Me.test(i)?e[n]=!1:e[ue.camelCase("default-"+i)]=e[n]=!1:ue.attr(e,i,""),e.removeAttribute(Ne?i:n)},attrHooks:{type:{set:function(e,t){if(!ue.support.radioValue&&"radio"===t&&ue.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,i,n){var s,r,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!ue.isXMLDoc(e),o&&(i=ue.propFix[i]||i,r=ue.propHooks[i]),n!==t?r&&"set"in r&&(s=r.set(e,n,i))!==t?s:e[i]=n:r&&"get"in r&&null!==(s=r.get(e,i))?s:e[i]},propHooks:{tabIndex:{get:function(e){var t=ue.find.attr(e,"tabindex");return t?parseInt(t,10):Le.test(e.nodeName)||Oe.test(e.nodeName)&&e.href?0:-1}}}}),Pe={set:function(e,t,i){return t===!1?ue.removeAttr(e,i):Re&&Ne||!Me.test(i)?e.setAttribute(!Ne&&ue.propFix[i]||i,i):e[ue.camelCase("default-"+i)]=e[i]=!0,i}},ue.each(ue.expr.match.bool.source.match(/\w+/g),function(e,i){var n=ue.expr.attrHandle[i]||ue.find.attr;ue.expr.attrHandle[i]=Re&&Ne||!Me.test(i)?function(e,i,s){var r=ue.expr.attrHandle[i],o=s?t:(ue.expr.attrHandle[i]=t)!=n(e,i,s)?i.toLowerCase():null;return ue.expr.attrHandle[i]=r,o}:function(e,i,n){return n?t:e[ue.camelCase("default-"+i)]?i.toLowerCase():null}}),Re&&Ne||(ue.attrHooks.value={set:function(e,t,i){return ue.nodeName(e,"input")?void(e.defaultValue=t):xe&&xe.set(e,t,i)}}),Ne||(xe={set:function(e,i,n){var s=e.getAttributeNode(n);return s||e.setAttributeNode(s=e.ownerDocument.createAttribute(n)),s.value=i+="","value"===n||i===e.getAttribute(n)?i:t}},ue.expr.attrHandle.id=ue.expr.attrHandle.name=ue.expr.attrHandle.coords=function(e,i,n){var s;return n?t:(s=e.getAttributeNode(i))&&""!==s.value?s.value:null},ue.valHooks.button={get:function(e,i){var n=e.getAttributeNode(i);return n&&n.specified?n.value:t},set:xe.set},ue.attrHooks.contenteditable={set:function(e,t,i){xe.set(e,""===t?!1:t,i)}},ue.each(["width","height"],function(e,t){ue.attrHooks[t]={set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}}})),ue.support.hrefNormalized||ue.each(["href","src"],function(e,t){ue.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ue.support.style||(ue.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){
return e.style.cssText=t+""}}),ue.support.optSelected||(ue.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ue.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ue.propFix[this.toLowerCase()]=this}),ue.support.enctype||(ue.propFix.enctype="encoding"),ue.each(["radio","checkbox"],function(){ue.valHooks[this]={set:function(e,t){return ue.isArray(t)?e.checked=ue.inArray(ue(e).val(),t)>=0:void 0}},ue.support.checkOn||(ue.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Ue=/^(?:input|select|textarea)$/i,$e=/^key/,He=/^(?:mouse|contextmenu)|click/,Be=/^(?:focusinfocus|focusoutblur)$/,Fe=/^([^.]*)(?:\.(.+)|)$/;ue.event={global:{},add:function(e,i,n,s,r){var o,a,l,c,u,d,h,p,f,m,g,v=ue._data(e);if(v){for(n.handler&&(c=n,n=c.handler,r=c.selector),n.guid||(n.guid=ue.guid++),(a=v.events)||(a=v.events={}),(d=v.handle)||(d=v.handle=function(e){return typeof ue===Y||e&&ue.event.triggered===e.type?t:ue.event.dispatch.apply(d.elem,arguments)},d.elem=e),i=(i||"").match(he)||[""],l=i.length;l--;)o=Fe.exec(i[l])||[],f=g=o[1],m=(o[2]||"").split(".").sort(),f&&(u=ue.event.special[f]||{},f=(r?u.delegateType:u.bindType)||f,u=ue.event.special[f]||{},h=ue.extend({type:f,origType:g,data:s,handler:n,guid:n.guid,selector:r,needsContext:r&&ue.expr.match.needsContext.test(r),namespace:m.join(".")},c),(p=a[f])||(p=a[f]=[],p.delegateCount=0,u.setup&&u.setup.call(e,s,m,d)!==!1||(e.addEventListener?e.addEventListener(f,d,!1):e.attachEvent&&e.attachEvent("on"+f,d))),u.add&&(u.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,h):p.push(h),ue.event.global[f]=!0);e=null}},remove:function(e,t,i,n,s){var r,o,a,l,c,u,d,h,p,f,m,g=ue.hasData(e)&&ue._data(e);if(g&&(u=g.events)){for(t=(t||"").match(he)||[""],c=t.length;c--;)if(a=Fe.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(d=ue.event.special[p]||{},p=(n?d.delegateType:d.bindType)||p,h=u[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=h.length;r--;)o=h[r],!s&&m!==o.origType||i&&i.guid!==o.guid||a&&!a.test(o.namespace)||n&&n!==o.selector&&("**"!==n||!o.selector)||(h.splice(r,1),o.selector&&h.delegateCount--,d.remove&&d.remove.call(e,o));l&&!h.length&&(d.teardown&&d.teardown.call(e,f,g.handle)!==!1||ue.removeEvent(e,p,g.handle),delete u[p])}else for(p in u)ue.event.remove(e,p+t[c],i,n,!0);ue.isEmptyObject(u)&&(delete g.handle,ue._removeData(e,"events"))}},trigger:function(i,n,s,r){var o,a,l,c,u,d,h,p=[s||Q],f=le.call(i,"type")?i.type:i,m=le.call(i,"namespace")?i.namespace.split("."):[];if(l=d=s=s||Q,3!==s.nodeType&&8!==s.nodeType&&!Be.test(f+ue.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),a=f.indexOf(":")<0&&"on"+f,i=i[ue.expando]?i:new ue.Event(f,"object"==typeof i&&i),i.isTrigger=r?2:3,i.namespace=m.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=t,i.target||(i.target=s),n=null==n?[i]:ue.makeArray(n,[i]),u=ue.event.special[f]||{},r||!u.trigger||u.trigger.apply(s,n)!==!1)){if(!r&&!u.noBubble&&!ue.isWindow(s)){for(c=u.delegateType||f,Be.test(c+f)||(l=l.parentNode);l;l=l.parentNode)p.push(l),d=l;d===(s.ownerDocument||Q)&&p.push(d.defaultView||d.parentWindow||e)}for(h=0;(l=p[h++])&&!i.isPropagationStopped();)i.type=h>1?c:u.bindType||f,o=(ue._data(l,"events")||{})[i.type]&&ue._data(l,"handle"),o&&o.apply(l,n),o=a&&l[a],o&&ue.acceptData(l)&&o.apply&&o.apply(l,n)===!1&&i.preventDefault();if(i.type=f,!r&&!i.isDefaultPrevented()&&(!u._default||u._default.apply(p.pop(),n)===!1)&&ue.acceptData(s)&&a&&s[f]&&!ue.isWindow(s)){d=s[a],d&&(s[a]=null),ue.event.triggered=f;try{s[f]()}catch(g){}ue.event.triggered=t,d&&(s[a]=d)}return i.result}},dispatch:function(e){e=ue.event.fix(e);var i,n,s,r,o,a=[],l=re.call(arguments),c=(ue._data(this,"events")||{})[e.type]||[],u=ue.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=ue.event.handlers.call(this,e,c),i=0;(r=a[i++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,o=0;(s=r.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,n=((ue.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l),n!==t&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,i){var n,s,r,o,a=[],l=i.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(r=[],o=0;l>o;o++)s=i[o],n=s.selector+" ",r[n]===t&&(r[n]=s.needsContext?ue(n,this).index(c)>=0:ue.find(n,this,null,[c]).length),r[n]&&r.push(s);r.length&&a.push({elem:c,handlers:r})}return l<i.length&&a.push({elem:this,handlers:i.slice(l)}),a},fix:function(e){if(e[ue.expando])return e;var t,i,n,s=e.type,r=e,o=this.fixHooks[s];for(o||(this.fixHooks[s]=o=He.test(s)?this.mouseHooks:$e.test(s)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,e=new ue.Event(r),t=n.length;t--;)i=n[t],e[i]=r[i];return e.target||(e.target=r.srcElement||Q),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,s,r,o=i.button,a=i.fromElement;return null==e.pageX&&null!=i.clientX&&(s=e.target.ownerDocument||Q,r=s.documentElement,n=s.body,e.pageX=i.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=i.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?i.toElement:a),e.which||o===t||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==u()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ue.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ue.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var s=ue.extend(new ue.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?ue.event.trigger(s,null,t):ue.event.dispatch.call(t,s),s.isDefaultPrevented()&&i.preventDefault()}},ue.removeEvent=Q.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===Y&&(e[n]=null),e.detachEvent(n,i))},ue.Event=function(e,t){return this instanceof ue.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?l:c):this.type=e,t&&ue.extend(this,t),this.timeStamp=e&&e.timeStamp||ue.now(),void(this[ue.expando]=!0)):new ue.Event(e,t)},ue.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},ue.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ue.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,s=e.relatedTarget,r=e.handleObj;return(!s||s!==n&&!ue.contains(n,s))&&(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),ue.support.submitBubbles||(ue.event.special.submit={setup:function(){return ue.nodeName(this,"form")?!1:void ue.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=ue.nodeName(i,"input")||ue.nodeName(i,"button")?i.form:t;n&&!ue._data(n,"submitBubbles")&&(ue.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ue._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ue.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ue.nodeName(this,"form")?!1:void ue.event.remove(this,"._submit")}}),ue.support.changeBubbles||(ue.event.special.change={setup:function(){return Ue.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ue.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ue.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ue.event.simulate("change",this,e,!0)})),!1):void ue.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ue.test(t.nodeName)&&!ue._data(t,"changeBubbles")&&(ue.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ue.event.simulate("change",this.parentNode,e,!0)}),ue._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ue.event.remove(this,"._change"),!Ue.test(this.nodeName)}}),ue.support.focusinBubbles||ue.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){ue.event.simulate(t,e.target,ue.event.fix(e),!0)};ue.event.special[t]={setup:function(){0===i++&&Q.addEventListener(e,n,!0)},teardown:function(){0===--i&&Q.removeEventListener(e,n,!0)}}}),ue.fn.extend({on:function(e,i,n,s,r){var o,a;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=t);for(o in e)this.on(o,i,n,e[o],r);return this}if(null==n&&null==s?(s=i,n=i=t):null==s&&("string"==typeof i?(s=n,n=t):(s=n,n=i,i=t)),s===!1)s=c;else if(!s)return this;return 1===r&&(a=s,s=function(e){return ue().off(e),a.apply(this,arguments)},s.guid=a.guid||(a.guid=ue.guid++)),this.each(function(){ue.event.add(this,e,s,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){var s,r;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,ue(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof e){for(r in e)this.off(r,i,e[r]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=t),n===!1&&(n=c),this.each(function(){ue.event.remove(this,e,n,i)})},trigger:function(e,t){return this.each(function(){ue.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?ue.event.trigger(e,t,i,!0):void 0}});var je=/^.[^:#\[\.,]*$/,ze=/^(?:parents|prev(?:Until|All))/,We=ue.expr.match.needsContext,Ve={children:!0,contents:!0,next:!0,prev:!0};ue.fn.extend({find:function(e){var t,i=[],n=this,s=n.length;if("string"!=typeof e)return this.pushStack(ue(e).filter(function(){for(t=0;s>t;t++)if(ue.contains(n[t],this))return!0}));for(t=0;s>t;t++)ue.find(e,n[t],i);return i=this.pushStack(s>1?ue.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},has:function(e){var t,i=ue(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(ue.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(h(this,e||[],!0))},filter:function(e){return this.pushStack(h(this,e||[],!1))},is:function(e){return!!h(this,"string"==typeof e&&We.test(e)?ue(e):e||[],!1).length},closest:function(e,t){for(var i,n=0,s=this.length,r=[],o=We.test(e)||"string"!=typeof e?ue(e,t||this.context):0;s>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&ue.find.matchesSelector(i,e))){i=r.push(i);break}return this.pushStack(r.length>1?ue.unique(r):r)},index:function(e){return e?"string"==typeof e?ue.inArray(this[0],ue(e)):ue.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var i="string"==typeof e?ue(e,t):ue.makeArray(e&&e.nodeType?[e]:e),n=ue.merge(this.get(),i);return this.pushStack(ue.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ue.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ue.dir(e,"parentNode")},parentsUntil:function(e,t,i){return ue.dir(e,"parentNode",i)},next:function(e){return d(e,"nextSibling")},prev:function(e){return d(e,"previousSibling")},nextAll:function(e){return ue.dir(e,"nextSibling")},prevAll:function(e){return ue.dir(e,"previousSibling")},nextUntil:function(e,t,i){return ue.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return ue.dir(e,"previousSibling",i)},siblings:function(e){return ue.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ue.sibling(e.firstChild)},contents:function(e){return ue.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ue.merge([],e.childNodes)}},function(e,t){ue.fn[e]=function(i,n){var s=ue.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=ue.filter(n,s)),this.length>1&&(Ve[e]||(s=ue.unique(s)),ze.test(e)&&(s=s.reverse())),this.pushStack(s)}}),ue.extend({filter:function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?ue.find.matchesSelector(n,e)?[n]:[]:ue.find.matches(e,ue.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,i,n){for(var s=[],r=e[i];r&&9!==r.nodeType&&(n===t||1!==r.nodeType||!ue(r).is(n));)1===r.nodeType&&s.push(r),r=r[i];return s},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var qe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ge=/ jQuery\d+="(?:null|\d+)"/g,Ye=new RegExp("<(?:"+qe+")[\\s/>]","i"),Xe=/^\s+/,Qe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ke=/<([\w:]+)/,Je=/<tbody/i,Ze=/<|&#?\w+;/,et=/<(?:script|style|link)/i,tt=/^(?:checkbox|radio)$/i,it=/checked\s*(?:[^=]|=\s*.checked.)/i,nt=/^$|\/(?:java|ecma)script/i,st=/^true\/(.*)/,rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ot={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ue.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},at=p(Q),lt=at.appendChild(Q.createElement("div"));ot.optgroup=ot.option,ot.tbody=ot.tfoot=ot.colgroup=ot.caption=ot.thead,ot.th=ot.td,ue.fn.extend({text:function(e){return ue.access(this,function(e){return e===t?ue.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Q).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?ue.filter(e,this):this,s=0;null!=(i=n[s]);s++)t||1!==i.nodeType||ue.cleanData(_(i)),i.parentNode&&(t&&ue.contains(i.ownerDocument,i)&&v(_(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ue.cleanData(_(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ue.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ue.clone(this,e,t)})},html:function(e){return ue.access(this,function(e){var i=this[0]||{},n=0,s=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(Ge,""):t;if("string"==typeof e&&!et.test(e)&&(ue.support.htmlSerialize||!Ye.test(e))&&(ue.support.leadingWhitespace||!Xe.test(e))&&!ot[(Ke.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Qe,"<$1></$2>");try{for(;s>n;n++)i=this[n]||{},1===i.nodeType&&(ue.cleanData(_(i,!1)),i.innerHTML=e);i=0}catch(r){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=ue.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(i){var n=e[t++],s=e[t++];s&&(n&&n.parentNode!==s&&(n=this.nextSibling),ue(this).remove(),s.insertBefore(i,n))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,i){e=ne.apply([],e);var n,s,r,o,a,l,c=0,u=this.length,d=this,h=u-1,p=e[0],f=ue.isFunction(p);if(f||!(1>=u||"string"!=typeof p||ue.support.checkClone)&&it.test(p))return this.each(function(n){var s=d.eq(n);f&&(e[0]=p.call(this,n,s.html())),s.domManip(e,t,i)});if(u&&(l=ue.buildFragment(e,this[0].ownerDocument,!1,!i&&this),n=l.firstChild,1===l.childNodes.length&&(l=n),n)){for(o=ue.map(_(l,"script"),m),r=o.length;u>c;c++)s=l,c!==h&&(s=ue.clone(s,!0,!0),r&&ue.merge(o,_(s,"script"))),t.call(this[c],s,c);if(r)for(a=o[o.length-1].ownerDocument,ue.map(o,g),c=0;r>c;c++)s=o[c],nt.test(s.type||"")&&!ue._data(s,"globalEval")&&ue.contains(a,s)&&(s.src?ue._evalUrl(s.src):ue.globalEval((s.text||s.textContent||s.innerHTML||"").replace(rt,"")));l=n=null}return this}}),ue.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ue.fn[e]=function(e){for(var i,n=0,s=[],r=ue(e),o=r.length-1;o>=n;n++)i=n===o?this:this.clone(!0),ue(r[n])[t](i),se.apply(s,i.get());return this.pushStack(s)}}),ue.extend({clone:function(e,t,i){var n,s,r,o,a,l=ue.contains(e.ownerDocument,e);if(ue.support.html5Clone||ue.isXMLDoc(e)||!Ye.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(lt.innerHTML=e.outerHTML,lt.removeChild(r=lt.firstChild)),!(ue.support.noCloneEvent&&ue.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ue.isXMLDoc(e)))for(n=_(r),a=_(e),o=0;null!=(s=a[o]);++o)n[o]&&b(s,n[o]);if(t)if(i)for(a=a||_(e),n=n||_(r),o=0;null!=(s=a[o]);o++)y(s,n[o]);else y(e,r);return n=_(r,"script"),n.length>0&&v(n,!l&&_(e,"script")),n=a=s=null,r},buildFragment:function(e,t,i,n){for(var s,r,o,a,l,c,u,d=e.length,h=p(t),f=[],m=0;d>m;m++)if(r=e[m],r||0===r)if("object"===ue.type(r))ue.merge(f,r.nodeType?[r]:r);else if(Ze.test(r)){for(a=a||h.appendChild(t.createElement("div")),l=(Ke.exec(r)||["",""])[1].toLowerCase(),u=ot[l]||ot._default,a.innerHTML=u[1]+r.replace(Qe,"<$1></$2>")+u[2],s=u[0];s--;)a=a.lastChild;if(!ue.support.leadingWhitespace&&Xe.test(r)&&f.push(t.createTextNode(Xe.exec(r)[0])),!ue.support.tbody)for(r="table"!==l||Je.test(r)?"<table>"!==u[1]||Je.test(r)?0:a:a.firstChild,s=r&&r.childNodes.length;s--;)ue.nodeName(c=r.childNodes[s],"tbody")&&!c.childNodes.length&&r.removeChild(c);for(ue.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=h.lastChild}else f.push(t.createTextNode(r));for(a&&h.removeChild(a),ue.support.appendChecked||ue.grep(_(f,"input"),w),m=0;r=f[m++];)if((!n||-1===ue.inArray(r,n))&&(o=ue.contains(r.ownerDocument,r),a=_(h.appendChild(r),"script"),o&&v(a),i))for(s=0;r=a[s++];)nt.test(r.type||"")&&i.push(r);return a=null,h},cleanData:function(e,t){for(var i,n,s,r,o=0,a=ue.expando,l=ue.cache,c=ue.support.deleteExpando,u=ue.event.special;null!=(i=e[o]);o++)if((t||ue.acceptData(i))&&(s=i[a],r=s&&l[s])){if(r.events)for(n in r.events)u[n]?ue.event.remove(i,n):ue.removeEvent(i,n,r.handle);l[s]&&(delete l[s],c?delete i[a]:typeof i.removeAttribute!==Y?i.removeAttribute(a):i[a]=null,te.push(s))}},_evalUrl:function(e){return ue.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ue.fn.extend({wrapAll:function(e){if(ue.isFunction(e))return this.each(function(t){ue(this).wrapAll(e.call(this,t))});if(this[0]){var t=ue(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ue.isFunction(e)?this.each(function(t){ue(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ue(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=ue.isFunction(e);return this.each(function(i){ue(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){ue.nodeName(this,"body")||ue(this).replaceWith(this.childNodes)}).end()}});var ct,ut,dt,ht=/alpha\([^)]*\)/i,pt=/opacity\s*=\s*([^)]*)/,ft=/^(top|right|bottom|left)$/,mt=/^(none|table(?!-c[ea]).+)/,gt=/^margin/,vt=new RegExp("^("+de+")(.*)$","i"),yt=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),bt=new RegExp("^([+-])=("+de+")","i"),_t={BODY:"block"},wt={position:"absolute",visibility:"hidden",display:"block"},Ct={letterSpacing:0,fontWeight:400},St=["Top","Right","Bottom","Left"],Tt=["Webkit","O","Moz","ms"];ue.fn.extend({css:function(e,i){return ue.access(this,function(e,i,n){var s,r,o={},a=0;if(ue.isArray(i)){for(r=ut(e),s=i.length;s>a;a++)o[i[a]]=ue.css(e,i[a],!1,r);return o}return n!==t?ue.style(e,i,n):ue.css(e,i)},e,i,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){S(this)?ue(this).show():ue(this).hide()})}}),ue.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=dt(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ue.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,l=ue.camelCase(i),c=e.style;if(i=ue.cssProps[l]||(ue.cssProps[l]=C(c,l)),a=ue.cssHooks[i]||ue.cssHooks[l],n===t)return a&&"get"in a&&(r=a.get(e,!1,s))!==t?r:c[i];if(o=typeof n,"string"===o&&(r=bt.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(ue.css(e,i)),o="number"),!(null==n||"number"===o&&isNaN(n)||("number"!==o||ue.cssNumber[l]||(n+="px"),ue.support.clearCloneStyle||""!==n||0!==i.indexOf("background")||(c[i]="inherit"),a&&"set"in a&&(n=a.set(e,n,s))===t)))try{c[i]=n}catch(u){}}},css:function(e,i,n,s){var r,o,a,l=ue.camelCase(i);return i=ue.cssProps[l]||(ue.cssProps[l]=C(e.style,l)),a=ue.cssHooks[i]||ue.cssHooks[l],a&&"get"in a&&(o=a.get(e,!0,n)),o===t&&(o=dt(e,i,s)),"normal"===o&&i in Ct&&(o=Ct[i]),""===n||n?(r=parseFloat(o),n===!0||ue.isNumeric(r)?r||0:o):o}}),e.getComputedStyle?(ut=function(t){return e.getComputedStyle(t,null)},dt=function(e,i,n){var s,r,o,a=n||ut(e),l=a?a.getPropertyValue(i)||a[i]:t,c=e.style;return a&&(""!==l||ue.contains(e.ownerDocument,e)||(l=ue.style(e,i)),yt.test(l)&&gt.test(i)&&(s=c.width,r=c.minWidth,o=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=s,c.minWidth=r,c.maxWidth=o)),l}):Q.documentElement.currentStyle&&(ut=function(e){return e.currentStyle},dt=function(e,i,n){var s,r,o,a=n||ut(e),l=a?a[i]:t,c=e.style;return null==l&&c&&c[i]&&(l=c[i]),yt.test(l)&&!ft.test(i)&&(s=c.left,r=e.runtimeStyle,o=r&&r.left,o&&(r.left=e.currentStyle.left),c.left="fontSize"===i?"1em":l,l=c.pixelLeft+"px",c.left=s,o&&(r.left=o)),""===l?"auto":l}),ue.each(["height","width"],function(e,t){ue.cssHooks[t]={get:function(e,i,n){return i?0===e.offsetWidth&&mt.test(ue.css(e,"display"))?ue.swap(e,wt,function(){return I(e,t,n)}):I(e,t,n):void 0},set:function(e,i,n){var s=n&&ut(e);return k(e,i,n?E(e,t,n,ue.support.boxSizing&&"border-box"===ue.css(e,"boxSizing",!1,s),s):0)}}}),ue.support.opacity||(ue.cssHooks.opacity={get:function(e,t){return pt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,s=ue.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===ue.trim(r.replace(ht,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=ht.test(r)?r.replace(ht,s):r+" "+s)}}),ue(function(){ue.support.reliableMarginRight||(ue.cssHooks.marginRight={get:function(e,t){return t?ue.swap(e,{display:"inline-block"},dt,[e,"marginRight"]):void 0}}),!ue.support.pixelPosition&&ue.fn.position&&ue.each(["top","left"],function(e,t){ue.cssHooks[t]={get:function(e,i){return i?(i=dt(e,t),yt.test(i)?ue(e).position()[t]+"px":i):void 0}}})}),ue.expr&&ue.expr.filters&&(ue.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ue.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ue.css(e,"display"))},ue.expr.filters.visible=function(e){return!ue.expr.filters.hidden(e)}),ue.each({margin:"",padding:"",border:"Width"},function(e,t){ue.cssHooks[e+t]={expand:function(i){for(var n=0,s={},r="string"==typeof i?i.split(" "):[i];4>n;n++)s[e+St[n]+t]=r[n]||r[n-2]||r[0];return s}},gt.test(e)||(ue.cssHooks[e+t].set=k)});var kt=/%20/g,Et=/\[\]$/,It=/\r?\n/g,xt=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;ue.fn.extend({serialize:function(){return ue.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ue.prop(this,"elements");return e?ue.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ue(this).is(":disabled")&&Pt.test(this.nodeName)&&!xt.test(e)&&(this.checked||!tt.test(e))}).map(function(e,t){var i=ue(this).val();return null==i?null:ue.isArray(i)?ue.map(i,function(e){return{name:t.name,value:e.replace(It,"\r\n")}}):{name:t.name,value:i.replace(It,"\r\n")}}).get()}}),ue.param=function(e,i){var n,s=[],r=function(e,t){t=ue.isFunction(t)?t():null==t?"":t,s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=ue.ajaxSettings&&ue.ajaxSettings.traditional),ue.isArray(e)||e.jquery&&!ue.isPlainObject(e))ue.each(e,function(){r(this.name,this.value)});else for(n in e)A(n,e[n],i,r);return s.join("&").replace(kt,"+")},ue.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ue.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),ue.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var At,Dt,Lt=ue.now(),Ot=/\?/,Mt=/#.*$/,Nt=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ut=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,$t=/^(?:GET|HEAD)$/,Ht=/^\/\//,Bt=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ft=ue.fn.load,jt={},zt={},Wt="*/".concat("*");try{Dt=X.href}catch(Vt){Dt=Q.createElement("a"),Dt.href="",Dt=Dt.href}At=Bt.exec(Dt.toLowerCase())||[],ue.fn.load=function(e,i,n){if("string"!=typeof e&&Ft)return Ft.apply(this,arguments);var s,r,o,a=this,l=e.indexOf(" ");return l>=0&&(s=e.slice(l,e.length),e=e.slice(0,l)),ue.isFunction(i)?(n=i,i=t):i&&"object"==typeof i&&(o="POST"),a.length>0&&ue.ajax({url:e,type:o,dataType:"html",data:i}).done(function(e){r=arguments,a.html(s?ue("<div>").append(ue.parseHTML(e)).find(s):e)}).complete(n&&function(e,t){a.each(n,r||[e.responseText,t,e])}),this},ue.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ue.fn[t]=function(e){return this.on(t,e)}}),ue.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Dt,type:"GET",isLocal:Ut.test(At[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ue.parseJSON,"text xml":ue.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?O(O(e,ue.ajaxSettings),t):O(ue.ajaxSettings,e)},ajaxPrefilter:D(jt),ajaxTransport:D(zt),ajax:function(e,i){function n(e,i,n,s){var r,d,y,b,w,S=i;2!==_&&(_=2,l&&clearTimeout(l),u=t,a=s||"",C.readyState=e>0?4:0,r=e>=200&&300>e||304===e,n&&(b=M(h,C,n)),b=N(h,b,C,r),r?(h.ifModified&&(w=C.getResponseHeader("Last-Modified"),w&&(ue.lastModified[o]=w),w=C.getResponseHeader("etag"),w&&(ue.etag[o]=w)),204===e||"HEAD"===h.type?S="nocontent":304===e?S="notmodified":(S=b.state,d=b.data,y=b.error,r=!y)):(y=S,(e||!S)&&(S="error",0>e&&(e=0))),C.status=e,C.statusText=(i||S)+"",r?m.resolveWith(p,[d,S,C]):m.rejectWith(p,[C,S,y]),C.statusCode(v),v=t,c&&f.trigger(r?"ajaxSuccess":"ajaxError",[C,h,r?d:y]),g.fireWith(p,[C,S]),c&&(f.trigger("ajaxComplete",[C,h]),--ue.active||ue.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=t),i=i||{};var s,r,o,a,l,c,u,d,h=ue.ajaxSetup({},i),p=h.context||h,f=h.context&&(p.nodeType||p.jquery)?ue(p):ue.event,m=ue.Deferred(),g=ue.Callbacks("once memory"),v=h.statusCode||{},y={},b={},_=0,w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!d)for(d={};t=Rt.exec(a);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return _||(e=b[i]=b[i]||e,y[e]=t),this},overrideMimeType:function(e){return _||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)v[t]=[v[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),n(0,t),this}};if(m.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,h.url=((e||h.url||Dt)+"").replace(Mt,"").replace(Ht,At[1]+"//"),h.type=i.method||i.type||h.method||h.type,h.dataTypes=ue.trim(h.dataType||"*").toLowerCase().match(he)||[""],null==h.crossDomain&&(s=Bt.exec(h.url.toLowerCase()),h.crossDomain=!(!s||s[1]===At[1]&&s[2]===At[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(At[3]||("http:"===At[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ue.param(h.data,h.traditional)),L(jt,h,i,C),2===_)return C;c=h.global,c&&0===ue.active++&&ue.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!$t.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(Ot.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Nt.test(o)?o.replace(Nt,"$1_="+Lt++):o+(Ot.test(o)?"&":"?")+"_="+Lt++)),h.ifModified&&(ue.lastModified[o]&&C.setRequestHeader("If-Modified-Since",ue.lastModified[o]),ue.etag[o]&&C.setRequestHeader("If-None-Match",ue.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||i.contentType)&&C.setRequestHeader("Content-Type",h.contentType),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Wt+"; q=0.01":""):h.accepts["*"]);for(r in h.headers)C.setRequestHeader(r,h.headers[r]);if(h.beforeSend&&(h.beforeSend.call(p,C,h)===!1||2===_))return C.abort();w="abort";for(r in{success:1,error:1,complete:1})C[r](h[r]);if(u=L(zt,h,i,C)){C.readyState=1,c&&f.trigger("ajaxSend",[C,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){C.abort("timeout")},h.timeout));try{_=1,u.send(y,n)}catch(S){if(!(2>_))throw S;n(-1,S)}}else n(-1,"No Transport");return C},getJSON:function(e,t,i){return ue.get(e,t,i,"json")},getScript:function(e,i){return ue.get(e,t,i,"script")}}),ue.each(["get","post"],function(e,i){ue[i]=function(e,n,s,r){return ue.isFunction(n)&&(r=r||s,s=n,n=t),ue.ajax({url:e,type:i,dataType:r,data:n,success:s})}}),ue.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ue.globalEval(e),e}}}),ue.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),
e.crossDomain&&(e.type="GET",e.global=!1)}),ue.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=Q.head||ue("head")[0]||Q.documentElement;return{send:function(t,s){i=Q.createElement("script"),i.async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,t||s(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(t,!0)}}}});var qt=[],Gt=/(=)\?(?=&|$)|\?\?/;ue.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=qt.pop()||ue.expando+"_"+Lt++;return this[e]=!0,e}}),ue.ajaxPrefilter("json jsonp",function(i,n,s){var r,o,a,l=i.jsonp!==!1&&(Gt.test(i.url)?"url":"string"==typeof i.data&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gt.test(i.data)&&"data");return l||"jsonp"===i.dataTypes[0]?(r=i.jsonpCallback=ue.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,l?i[l]=i[l].replace(Gt,"$1"+r):i.jsonp!==!1&&(i.url+=(Ot.test(i.url)?"&":"?")+i.jsonp+"="+r),i.converters["script json"]=function(){return a||ue.error(r+" was not called"),a[0]},i.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},s.always(function(){e[r]=o,i[r]&&(i.jsonpCallback=n.jsonpCallback,qt.push(r)),a&&ue.isFunction(o)&&o(a[0]),a=o=t}),"script"):void 0});var Yt,Xt,Qt=0,Kt=e.ActiveXObject&&function(){var e;for(e in Yt)Yt[e](t,!0)};ue.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&R()||U()}:R,Xt=ue.ajaxSettings.xhr(),ue.support.cors=!!Xt&&"withCredentials"in Xt,Xt=ue.support.ajax=!!Xt,Xt&&ue.ajaxTransport(function(i){if(!i.crossDomain||ue.support.cors){var n;return{send:function(s,r){var o,a,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)l[a]=i.xhrFields[a];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");try{for(a in s)l.setRequestHeader(a,s[a])}catch(c){}l.send(i.hasContent&&i.data||null),n=function(e,s){var a,c,u,d;try{if(n&&(s||4===l.readyState))if(n=t,o&&(l.onreadystatechange=ue.noop,Kt&&delete Yt[o]),s)4!==l.readyState&&l.abort();else{d={},a=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(d.text=l.responseText);try{u=l.statusText}catch(h){u=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=d.text?200:404}}catch(p){s||r(-1,p)}d&&r(a,u,d,c)},i.async?4===l.readyState?setTimeout(n):(o=++Qt,Kt&&(Yt||(Yt={},ue(e).unload(Kt)),Yt[o]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(t,!0)}}}});var Jt,Zt,ei=/^(?:toggle|show|hide)$/,ti=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),ii=/queueHooks$/,ni=[j],si={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),s=ti.exec(t),r=s&&s[3]||(ue.cssNumber[e]?"":"px"),o=(ue.cssNumber[e]||"px"!==r&&+n)&&ti.exec(ue.css(i.elem,e)),a=1,l=20;if(o&&o[3]!==r){r=r||o[3],s=s||[],o=+n||1;do a=a||".5",o/=a,ue.style(i.elem,e,o+r);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return s&&(o=i.start=+o||+n||0,i.unit=r,i.end=s[1]?o+(s[1]+1)*s[2]:+s[2]),i}]};ue.Animation=ue.extend(B,{tweener:function(e,t){ue.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,s=e.length;s>n;n++)i=e[n],si[i]=si[i]||[],si[i].unshift(t)},prefilter:function(e,t){t?ni.unshift(e):ni.push(e)}}),ue.Tween=z,z.prototype={constructor:z,init:function(e,t,i,n,s,r){this.elem=e,this.prop=i,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(ue.cssNumber[i]?"":"px")},cur:function(){var e=z.propHooks[this.prop];return e&&e.get?e.get(this):z.propHooks._default.get(this)},run:function(e){var t,i=z.propHooks[this.prop];return this.options.duration?this.pos=t=ue.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):z.propHooks._default.set(this),this}},z.prototype.init.prototype=z.prototype,z.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ue.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ue.fx.step[e.prop]?ue.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ue.cssProps[e.prop]]||ue.cssHooks[e.prop])?ue.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},z.propHooks.scrollTop=z.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ue.each(["toggle","show","hide"],function(e,t){var i=ue.fn[t];ue.fn[t]=function(e,n,s){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(W(t,!0),e,n,s)}}),ue.fn.extend({fadeTo:function(e,t,i,n){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var s=ue.isEmptyObject(e),r=ue.speed(t,i,n),o=function(){var t=B(this,ue.extend({},e),r);(s||ue._data(this,"finish"))&&t.stop(!0)};return o.finish=o,s||r.queue===!1?this.each(o):this.queue(r.queue,o)},stop:function(e,i,n){var s=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",r=ue.timers,o=ue._data(this);if(i)o[i]&&o[i].stop&&s(o[i]);else for(i in o)o[i]&&o[i].stop&&ii.test(i)&&s(o[i]);for(i=r.length;i--;)r[i].elem!==this||null!=e&&r[i].queue!==e||(r[i].anim.stop(n),t=!1,r.splice(i,1));(t||!n)&&ue.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=ue._data(this),n=i[e+"queue"],s=i[e+"queueHooks"],r=ue.timers,o=n?n.length:0;for(i.finish=!0,ue.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;o>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),ue.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ue.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),ue.speed=function(e,t,i){var n=e&&"object"==typeof e?ue.extend({},e):{complete:i||!i&&t||ue.isFunction(e)&&e,duration:e,easing:i&&t||t&&!ue.isFunction(t)&&t};return n.duration=ue.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ue.fx.speeds?ue.fx.speeds[n.duration]:ue.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){ue.isFunction(n.old)&&n.old.call(this),n.queue&&ue.dequeue(this,n.queue)},n},ue.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ue.timers=[],ue.fx=z.prototype.init,ue.fx.tick=function(){var e,i=ue.timers,n=0;for(Jt=ue.now();n<i.length;n++)e=i[n],e()||i[n]!==e||i.splice(n--,1);i.length||ue.fx.stop(),Jt=t},ue.fx.timer=function(e){e()&&ue.timers.push(e)&&ue.fx.start()},ue.fx.interval=13,ue.fx.start=function(){Zt||(Zt=setInterval(ue.fx.tick,ue.fx.interval))},ue.fx.stop=function(){clearInterval(Zt),Zt=null},ue.fx.speeds={slow:600,fast:200,_default:400},ue.fx.step={},ue.expr&&ue.expr.filters&&(ue.expr.filters.animated=function(e){return ue.grep(ue.timers,function(t){return e===t.elem}).length}),ue.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){ue.offset.setOffset(this,e,t)});var i,n,s={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return i=o.documentElement,ue.contains(i,r)?(typeof r.getBoundingClientRect!==Y&&(s=r.getBoundingClientRect()),n=V(o),{top:s.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0),left:s.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}):s},ue.offset={setOffset:function(e,t,i){var n=ue.css(e,"position");"static"===n&&(e.style.position="relative");var s,r,o=ue(e),a=o.offset(),l=ue.css(e,"top"),c=ue.css(e,"left"),u=("absolute"===n||"fixed"===n)&&ue.inArray("auto",[l,c])>-1,d={},h={};u?(h=o.position(),s=h.top,r=h.left):(s=parseFloat(l)||0,r=parseFloat(c)||0),ue.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(d.top=t.top-a.top+s),null!=t.left&&(d.left=t.left-a.left+r),"using"in t?t.using.call(e,d):o.css(d)}},ue.fn.extend({position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===ue.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ue.nodeName(e[0],"html")||(i=e.offset()),i.top+=ue.css(e[0],"borderTopWidth",!0),i.left+=ue.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-ue.css(n,"marginTop",!0),left:t.left-i.left-ue.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||K;e&&!ue.nodeName(e,"html")&&"static"===ue.css(e,"position");)e=e.offsetParent;return e||K})}}),ue.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);ue.fn[e]=function(s){return ue.access(this,function(e,s,r){var o=V(e);return r===t?o?i in o?o[i]:o.document.documentElement[s]:e[s]:void(o?o.scrollTo(n?ue(o).scrollLeft():r,n?r:ue(o).scrollTop()):e[s]=r)},e,s,arguments.length,null)}}),ue.each({Height:"height",Width:"width"},function(e,i){ue.each({padding:"inner"+e,content:i,"":"outer"+e},function(n,s){ue.fn[s]=function(s,r){var o=arguments.length&&(n||"boolean"!=typeof s),a=n||(s===!0||r===!0?"margin":"border");return ue.access(this,function(i,n,s){var r;return ue.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(r=i.documentElement,Math.max(i.body["scroll"+e],r["scroll"+e],i.body["offset"+e],r["offset"+e],r["client"+e])):s===t?ue.css(i,n,a):ue.style(i,n,s,a)},i,o?s:t,o,null)}})}),ue.fn.size=function(){return this.length},ue.fn.andSelf=ue.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ue:(e.jQuery=e.$=ue,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ue}))}(window),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var i,n=e(document);e.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var i=e('meta[name="csrf-token"]').attr("content");i&&t.setRequestHeader("X-CSRF-Token",i)},fire:function(t,i,n){var s=e.Event(i);return t.trigger(s,n),s.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var s,r,o,a,l,c,u,d;if(i.fire(n,"ajax:before")){if(a=n.data("cross-domain"),l=a===t?null:a,c=n.data("with-credentials")||null,u=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,n.is("form")){s=n.attr("method"),r=n.attr("action"),o=n.serializeArray();var h=n.data("ujs:submit-button");h&&(o.push(h),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(s=n.data("method"),r=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(s=n.data("method")||"get",r=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(s=n.data("method"),r=i.href(n),o=n.data("params")||null);d={type:s||"GET",data:o,dataType:u,beforeSend:function(e,s){return s.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+s.accepts.script),i.fire(n,"ajax:beforeSend",[e,s])},success:function(e,t,i){n.trigger("ajax:success",[e,t,i])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,i){n.trigger("ajax:error",[e,t,i])},crossDomain:l},c&&(d.xhrFields={withCredentials:c}),r&&(d.url=r);var p=i.ajax(d);return n.trigger("ajax:send",p),p}return!1},handleMethod:function(n){var s=i.href(n),r=n.data("method"),o=n.attr("target"),a=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+s+'"></form>'),u='<input name="_method" value="'+r+'" type="hidden" />';l!==t&&a!==t&&(u+='<input name="'+l+'" value="'+a+'" type="hidden" />'),o&&c.attr("target",o),c.hide().append(u).appendTo("body"),c.submit()},disableFormElements:function(t){t.find(i.disableSelector).each(function(){var t=e(this),i=t.is("button")?"html":"val";t.data("ujs:enable-with",t[i]()),t[i](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(i.enableSelector).each(function(){var t=e(this),i=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[i](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,n=e.data("confirm"),s=!1;return n?(i.fire(e,"confirm")&&(s=i.confirm(n),t=i.fire(e,"confirm:complete",[s])),s&&t):!0},blankInputs:function(t,i,n){var s,r,o=e(),a=i||"input,textarea",l=t.find(a);return l.each(function(){if(s=e(this),r=s.is("input[type=checkbox],input[type=radio]")?s.is(":checked"):s.val(),!r==!n){if(s.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+s.attr("name")+'"]').length)return!0;o=o.add(s)}}),o.length?o:!1},nonBlankInputs:function(e,t){return i.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return i.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||i.CSRFProtection(n)}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(e(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var s=e(this),r=s.data("method"),o=s.data("params");if(!i.allowAction(s))return i.stopEverything(n);if(s.is(i.linkDisableSelector)&&i.disableElement(s),s.data("remote")!==t){if((n.metaKey||n.ctrlKey)&&(!r||"GET"===r)&&!o)return!0;var a=i.handleRemote(s);return a===!1?i.enableElement(s):a.error(function(){i.enableElement(s)}),!1}return s.data("method")?(i.handleMethod(s),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(t){var n=e(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(t)}),n.delegate(i.inputChangeSelector,"change.rails",function(t){var n=e(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(t)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var s=e(this),r=s.data("remote")!==t,o=i.blankInputs(s,i.requiredInputSelector),a=i.nonBlankInputs(s,i.fileInputSelector);if(!i.allowAction(s))return i.stopEverything(n);if(o&&s.attr("novalidate")==t&&i.fire(s,"ajax:aborted:required",[o]))return i.stopEverything(n);if(r){if(a){setTimeout(function(){i.disableFormElements(s)},13);var l=i.fire(s,"ajax:aborted:file",[a]);return l||setTimeout(function(){i.enableFormElements(s)},13),l}return i.handleRemote(s),!1}setTimeout(function(){i.disableFormElements(s)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!i.allowAction(n))return i.stopEverything(t);var s=n.attr("name"),r=s?{name:s,value:n.val()}:null;n.closest("form").data("ujs:submit-button",r)}),n.delegate(i.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&i.disableFormElements(e(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&i.enableFormElements(e(this))}),e(function(){var t=e("meta[name=csrf-token]").attr("content"),i=e("meta[name=csrf-param]").attr("content");e('form input[name="'+i+'"]').val(t)}))}(jQuery);var Interface=function(e,t){var i,n,s;return i=e&&t?e:this,n=e&&t?t:e?e:"interface"+Math.random().toString(),s=function(e){return e.isInterface=!0,e.name=n,i[n]=e,i[n]}},Module=function(e,t){var i,n,s,r;return i=e&&t?e:this,n=e&&t?t:e?e:"module"+Math.random().toString(),r={moduleName:n,prototype:{},__includedModules:[],include:function(e){var t;for(t in e)e.hasOwnProperty(t)&&"prototype"!==t&&"isModule"!==t&&"__includedModules"!==t&&"include"!==t&&"moduleName"!==t&&(r[t]=e[t]);if(e.hasOwnProperty("prototype")&&e.prototype)for(t in e.prototype)e.prototype.hasOwnProperty(t)&&(r.prototype[t]=e.prototype[t]);return this.__includedModules.push(e),this}},s=function(e){var t;r.isModule=!0;for(t in e)e.hasOwnProperty(t)&&"prototype"!==t&&"isModule"!==t&&"__includedModules"!==t&&"include"!==t&&"moduleName"!==t&&(r[t]=e[t]);if(e.hasOwnProperty("prototype")&&e.prototype)for(t in e.prototype)e.prototype.hasOwnProperty(t)&&(r.prototype[t]=e.prototype[t]);return i[n]=r,i[n]},s.includes=function(){for(var e=0;e<arguments.length;e++)r.include(arguments[e]);return s},s},Class=function(e,t){var i,n,s;return i=e&&t?e:this,t=e&&t?t:e?e:"class"+Math.random().toString(),n=function(){this.init&&this.init.apply(this,arguments)},n.__descendants=[],n.__implementedInterfaces=[],n.__includedModules=[],n.className=t,n.include=function(e){var t;for(t in e)e.hasOwnProperty(t)&&"prototype"!=t&&"constructor"!=t&&"isModule"!=t&&"include"!=t&&"superClass"!=t&&(n[t]=e[t]);if(e.hasOwnProperty("prototype")&&e.prototype)for(t in e.prototype)e.prototype.hasOwnProperty(t)&&(n.prototype[t]=e.prototype[t]);return n.__includedModules.push(e),this},s=function(e){var s,r,o,a,l,c=e.prototype;if(c){for(l in c)c.hasOwnProperty(l)&&(n.prototype[l]=c[l]);delete e.prototype}for(l in e)e.hasOwnProperty(l)&&(n[l]=e[l]);for(s=0,r=n.__implementedInterfaces.length;r>s;s++){for(o=0,a=n.__implementedInterfaces[s].constructor.length;a>o;o++)if(!n[n.__implementedInterfaces[s].constructor[o]]){alert("must implement static "+n.__implementedInterfaces[s].name);break}if(n.__implementedInterfaces[s].hasOwnProperty("prototype")&&n.__implementedInterfaces[s].prototype)for(o=0,a=n.__implementedInterfaces[s].prototype.length;a>o;o++)if(!n.prototype[n.__implementedInterfaces[s].prototype[o]]){alert("must implement prototype "+n.__implementedInterfaces[s].name);break}}return window.Li&&window.Li.ObjectSpy&&window.Li.Spy&&window.enableLi&&(n.__objectSpy=new Li.ObjectSpy,n.__objectSpy.spy(n),n.__objectSpy.spy(n.prototype,{except:["constructor"]})),i[t]=n,n},s.inherits=function(e){var t,i;n.superClass=e,e.hasOwnProperty("__descendants")&&e.__descendants.push(n),i=function(){},i.prototype=e.prototype,n.prototype=new i,n.prototype.constructor=n;for(t in e)e.hasOwnProperty(t)&&"prototype"!=t&&"className"!==t&&"superClass"!==t&&"__descendants"!=t&&"include"!=t&&(n[t]=e[t]);return delete this.inherits,this},s.ensures=function(e){for(var t=0;t<arguments.length;t++)n.__implementedInterfaces.push(arguments[t]);return delete this.ensures,s},s.includes=function(){for(var e=0;e<arguments.length;e++)n.include(arguments[e]);return s},s};if(Module("BubblingSupport")({dispatch:function(e,t){t=t||{};var i=CustomEventSupport.prototype.dispatch.call(this,e,t);return i._stopPropagation!==!0&&this.parent&&this.parent.dispatch&&(t.target=i.target,t.currentTarget=this.parent,this.parent.dispatch(i.type,t)),i},prototype:{dispatch:function(e,t){t=t||{};var i=CustomEventSupport.prototype.dispatch.call(this,e,t);return i._stopPropagation!==!0&&this.parent&&this.parent.dispatch&&(t.target=i.target,t.currentTarget=this.parent,this.parent.dispatch(i.type,t)),i}}}),Class("NeonCustomEvent")({prototype:{init:function(e,t){this.type=e,this.data=t},stopPropagation:function(){this._stopPropagation=!0},preventDefault:function(){this._preventDefault=!0}}}),Module("CustomEventSupport")({eventListeners:null,bind:function(e,t){var i;return this.eventListeners||(this.eventListeners={}),this.eventListeners[e]||(this.eventListeners[e]=[]),i=!1,$(this.eventListeners[e]).each(function(e){return this==t?(i=!0,!1):void 0}),i||this.eventListeners[e].push(t),this},unbind:function(e,t){var i=0,n=!1;return this.eventListeners||(this.eventListeners={}),"undefined"==typeof t&&(this.eventListeners[e]=[]),$.each(this.eventListeners[e]||[],function(e){return this==t?(i=e,n=!0,!1):void 0}),n&&this.eventListeners[e].splice(i,1),this},dispatch:function(e,t){var i,n,s,r;return this.eventListeners||(this.eventListeners={}),i=new NeonCustomEvent(e,t),i.target=this,n=this.eventListeners[e]||[],s=this,i.allowDefault=!0,$(n).each(function(){return this.apply(s,[i,t]),i._preventDefault&&(r=!1),i._stop?!1:void 0}),i},prototype:{eventListeners:null,bind:function(e,t){var i;return this.eventListeners||(this.eventListeners={}),this.eventListeners[e]||(this.eventListeners[e]=[]),i=!1,$(this.eventListeners[e]).each(function(e){return this==t?(i=!0,!1):void 0}),i||this.eventListeners[e].push(t),this},unbind:function(e,t){var i=0,n=!1;return this.eventListeners||(this.eventListeners={}),"undefined"==typeof t&&(this.eventListeners[e]=[]),$.each(this.eventListeners[e]||[],function(e){return this==t?(i=e,n=!0,!1):void 0}),n&&this.eventListeners[e].splice(i,1),this},dispatch:function(e,t){var i,n,s,r;return this.eventListeners||(this.eventListeners={}),i=new NeonCustomEvent(e,t),i.target=this,n=this.eventListeners[e]||[],s=this,i.allowDefault=!0,$(n).each(function(){return this.apply(s,[i,t]),i._preventDefault&&(r=!1),i._stopPropagation?!1:void 0}),i}}}),Module("NodeSupport")({prototype:{appendChild:function(e){return this.children||(this.children=[]),this.children.push(e),e.setParent(this),e.name&&(this[e.name]=e),e},insertBefore:function(e,t){var i;return e.parent&&e.parent.removeChild(e),this.hasOwnProperty("children")||(this.children=[]),"undefined"==typeof t?this.appendChild(e):(i=this.children.indexOf(t),this.children.splice(i,0,e),this[e.name]=e,e.setParent(this)),e},getPreviousSibling:function(){return"undefined"!=typeof this.parent&&this.parent.children[0]!==this?this.parent.children[this.parent.children.indexOf(this)-1]:void 0},getNextSibling:function(){return"undefined"!=typeof this.parent&&this.parent.children[this.parent.children.length-1]!==this?this.parent.children[this.parent.children.indexOf(this)+1]:void 0},removeChild:function(e){this.children||(this.children=[]);var t,i=this.children.length;for(t=0;i>t;t++)if(this.children[t]===e){e.setParent(null),e.name&&delete this[e.name],this.children.splice(t,1);break}return this},setParent:function(e){return this.parent=e,this}}}),Class("Widget").includes(CustomEventSupport,NodeSupport)({elementClass:"placeit-widget",html:"        <div></div>    ",elementSource:null,activeClass:"active",prototype:{elementId:null,cssClass:null,init:function(e){this.children=[],$.extend(this,e),this.element||(this.constructor.elementSource||(this.constructor.elementSource=$(this.constructor.html)),this.element=this.constructor.elementSource.clone(),this.element.addClass(this.constructor.elementClass),this.elementId&&this.element.attr("id",this.elementId),this.cssClass&&this.element.addClass(this.cssClass))},activate:function(){return this.element.addClass(this.constructor.activeClass),this.dispatch("activate"),this},deactivate:function(){return this.element.removeClass(this.constructor.activeClass),this},hide:function(){return this.element.hide(),this},show:function(){return this.element.show(),this},isVisible:function(){return this.element.is(":visible")},getElement:function(){return this.element},render:function(e,t){return t?e.prepend(this.element):e.append(this.element),this.dispatch("render"),this},destroy:function(){if(this.children){var e,t,i=this.children.length;for(e=0;i>e;e++)t=this.children[e],t.setParent(null),t.name&&delete this[t.name],t.destroy()}this.children=[],this.parent&&this.parent.removeChild(this),this.element.remove(),this.element=null,this.dispatch("destroy")}}}),Class("Utils")({pollingTask:null,createPollingBuilder:function(e,t){return function(i){var n,s=new Promise(function(e,t){n=function(){t(new Error("Cancelation error"))}});return function(r){var o=function(){var e=function(e){var t={fulfilled:!0,value:e};return r(e)===!0?t:Promise.reject(t)},t=function(e){return Promise.resolve({fulfilled:!1,error:e})};return Promise.race([s,i()]).then(e,t)},a=P.retryableDelayed(o,e,t)(),l=new Promise(function(e,t){a.then(function(i){i.fulfilled===!1&&t(i.error),e(i.value)},function(e){e.fulfilled===!0&&t({error:"timeout"})})});return l.cancel=n,l}}},bindFn:function(e){return function(t){return function(){return t.apply(e,arguments)}}},tap:function(e){return function(t){return e(t),t}},createRetryableByConfirmation:function(e,t,i){return function(){var n,s,r,o,a,l;return o=arguments,a=new Promise(function(e,t){n=e,s=t}),l=function(e){return e.then(n)["catch"](r)},r=function(n){return e(n)===!1?void s(n):void t().then(function(){l(i.apply(null,o))})["catch"](function(){s(n)})},l(i.apply(null,o)),a}},currying:function(e){return 0===e.length?e():function(t){return Utils.currying(e.bind(null,t))}},promisifyEventBuilder:function(e){return function(t){return new Promise(function(i){var n=function(s){e.unbind(t,n),i(s)};e.bind(t,n)})}},anyUrlParam:function(e){return e.filter(function(e){return Boolean(Helpers.App.getUrlParam(e))}).length>0},moveScrollTop:function(e){$("html, body").animate({scrollTop:e},500,"swing")},treeWalker:function(e,t,i){var n=function s(e){i(e),Array.isArray(e[t])!==!1&&e[t].forEach(function(e){s(e)})};n(e)},pipe:function(){var e=Array.prototype.slice.call(arguments);return function(t){return e.reduce(function(e,t){return t(e)},t)}},negate:function(e){return function(){return!e.apply(this,arguments)}},getAttributesObjectFromElement:function(e){return Array.prototype.slice.call(e.attributes).reduce(function(e,t){return e[t.name]=t.value,e},{})},mapElementToObject:function(e,t){return Object.keys(e).reduce(function(i,n){return i[n]=t[e[n]],i},{})},filterObjectKeys:function(e,t){return Object.keys(e).reduce(function(e,i){return void 0!=t[i]&&(e[i]=t[i]),e},{})},cachedBuilder:function(e,t){var i=function(i){var n=JSON.stringify(i);return n in e?Promise.resolve(e[n]):t(i).then(function(t){return e[n]=t,t})};return i},arraysDif:function(e,t){return e.filter(function(e){return t.indexOf(e)<0})},deepCopy:function(e){return Boolean(e)===!1?e:Array.isArray(e)?$.extend(!0,[],e):$.extend(!0,{},e)},isHexadecimal:function(e){return null!==e.match("^[0-9A-Fa-f]+$")},validateData:function(e,t){return e.reduce(function(e,i){return"undefined"==typeof t[i]?e.concat(i):e},[])},isValidURL:function e(t){var e=!1;if("string"!=typeof t)return e;var i=/[-a-zA-Z0-9.:]{1,256}\.[a-z0-9]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&!//=]*)/g,n=t.match(i);return null!==n&&n.length>0&&(e=!0),e},getCleanedUpURL:function(e){var t,i=["http://http://","http://https://","https://http://","https://https://"],n=["http://","https://","http://","https://"];if(e.indexOf("http")>-1){for(var s=0;s<i.length;s++)e.indexOf(i[s])>-1&&(t=e.replace(i[s],n[s]));"undefined"==typeof t&&(t=e)}else t="http://"+e;return t},buildImageLoader:function(e){var t=new Image;return t.src=Helpers.App.isBase64Image(e)?e:e+"?"+Date.now(),t},generateMd5Hash:function(e){return $.md5(e)},uniqueObjArrayByKey:function(e,t){return e.reduce(function(e,i){var n=Boolean(e.find(function(e){return e[t]===i[t]}));return n===!1&&e.push(i),e},[])},isHexColor:function(e){return new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(e)},isTransparent:function(e){return null===e||"TRANSPARENT"===e},isHexColorOrTransparent:function(e){return Utils.isTransparent(e)?!0:Utils.isHexColor(e)},isBase64Valid:function(e){var t=new Image;return t.src="data:image/png;base64,"+e,new Promise(function(e){t.onload=function(){return 0===t.height||0===t.width?void e(!1):void e(!0)},t.onerror=function(){e(!1)}})}}),Class("PurchaseSupport")({ROUTES:[{url:"/subscriptions/{{token}}/transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:234,delay:1e3}},{url:"/subscriptions/quick_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:90,delay:1e3}},{url:"/api/v3/subscriptions/transaction",isPollingEnabled:!0,pingURL:"/api/v3/purchases/purchase_status?process_id=",pollingConfig:{times:234,delay:1e3}},{url:"/api/v3/subscriptions/quick_transaction",isPollingEnabled:!0,pingURL:"/api/v3/purchases/purchase_status?process_id=",pollingConfig:{times:90,delay:1e3}},{url:"/purchases/{{token}}/video_v4_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:234,delay:1e3}},{url:"/purchases/quick_smart_template_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:90,delay:1e3}},{url:"/purchases/quick_video_v4_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:90,delay:1e3}},{url:"/purchases/{{token}}/smart_template_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:234,delay:1e3}},{url:"/purchases/quick_video_v5_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:90,delay:1e3}},{url:"/purchases/{{token}}/video_v5_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:90,delay:1e3}},{url:"/purchases/{{token}}/multi_purchase_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:234,delay:2e3}}],getRequestDataByUrl:function(e){return PurchaseSupport.ROUTES.filter(function(t){return t.url===e})[0]},buildPolling:function(e){var t,i;return t=Utils.createPollingBuilder(e.times,e.delay),function(n){var s=function(){return P.ajax({url:e.pingURL+n.process_id})},r=function(e){return"Completed"===e.state};return i=t(s)(r)}}}),Module("SaleSupport")({JULY_4TH_SALE_COUPON:"d3twew6",JULY_4TH_SALE_POPUP_LOCAL_STORAGE_KEY:"july_4th_sale_popup_shown",prototype:{_startJuly4thPopup:function(){var e=window.localStorage.getItem(PageController.JULY_4TH_SALE_POPUP_LOCAL_STORAGE_KEY);if(!Boolean(e)){var t=Helpers.App.getSubscription();window.is_july_fourth_sale&&!t.is_annual&&(this.salePopUp=new SalePopup,this.salePopUp.render(this.$body).activate(),window.localStorage.setItem(PageController.JULY_4TH_SALE_POPUP_LOCAL_STORAGE_KEY,!0))}},activateMarketingCampaign:function(){var e=this,t=PageController.JULY_4TH_SALE_COUPON;if(window.is_july_fourth_campaign){var i=e.$body.find("#headerstrip");i.length&&e.appendChild(new UI.Headerstrip({name:"campaignHeaderstrip",element:i,pricingButton:e.appNavBar.pricingButton}))}window.is_july_fourth_sale&&(Helpers.CouponHelper.load(t),"pricingv2"!==pageType.type&&e._startJuly4thPopup()),this.createCyberweekHeaderstrip(),this.createHolidayHeaderstrip(),this.loadCyberWeekCoupon()},addSaleMenuBadge:function(){var e=this;e.mobileMenu?(e.mobileMenu.addBadge("July 4th","/4th-of-july-templates?f_tags=Apparel%2CPrint","july-fourth"),e.mobileMenu.addBadge("July 4th","/4th-of-july-templates?f_devices=Social%20Media%20Post%2CT-Shirt%20Design","july-fourth")):(e.desktopMenu.addBadge("July 4th","/4th-of-july-templates?f_tags=Apparel%2CPrint","july-fourth"),e.desktopMenu.addBadge("July 4th","/4th-of-july-templates?f_devices=Social%20Media%20Post%2CT-Shirt%20Design","july-fourth"))},addSummerCampaignBadge:function(e){e.mobileMenu?(e.mobileMenu.addBadge("Summer","/summer-templates?f_tags=Apparel%2CPrint","summer-campaign-badge"),e.mobileMenu.addBadge("Summer","/summer-templates?f_devices=T-Shirt%20Design","summer-campaign-badge"),e.mobileMenu.addBadge("Summer","/summer-templates?f_types=Video","summer-campaign-badge")):(e.desktopMenu.addBadge("Summer","/summer-templates?f_tags=Apparel%2CPrint","summer-campaign-badge"),e.desktopMenu.addBadge("Summer","/summer-templates?f_devices=T-Shirt%20Design","summer-campaign-badge"),e.desktopMenu.addBadge("Summer","/summer-templates?f_types=Video","summer-campaign-badge"))},shouldShowCampaignModal:function(){return!1},createCyberweekHeaderstrip:function(){var e=this.$body.find("#headerstrip");this.shouldShowCyberweekHeaderstrip()&&e.length&&(document.body.classList.add("cyberweek-headerstrip-open"),this.appendChild(new UI.Headerstrip({name:"campaignHeaderstrip",element:e})))},createHolidayHeaderstrip:function(){var e=this.$body.find("#headerstrip"),t=this,i=Helpers.App.getCookie("CW_HS_closed").includes("completed");(this.shouldShowHolidayHeaderstrip()||this.shouldShowHoliday9th())&&e.length&&!Helpers.App.isMobile()?(document.body.classList.add("holiday-headerstrip-open"),
this.appendChild(new UI.Headerstrip({name:"campaignHeaderstrip",element:e})),this.campaignHeaderstrip.bind("countdown.finished",function(){t.campaignHeaderstrip.destroy(),Helpers.App.setCookie("HD_HS_closed","completed"),t.createHolidayHeaderstrip()})):this.campaignHeaderstrip&&!i&&(this.campaignHeaderstrip._holidayHeaderstripClosed(),e.hide())},shouldShowCyberweekHeaderstrip:function(){var e=Helpers.App.getCookie("CW_HS_closed").includes("completed"),t=Helpers.App.getSubscription().is_annual;return window.is_cyberweek&&!e&&!t},shouldShowHolidayHeaderstrip:function(){var e=Helpers.App.getCookie("HD_HS_closed").includes("completed");return window.is_holiday_sale&&!e},shouldShowHoliday9th:function(){var e=Helpers.App.getCookie("HD_HS_closed").includes("completed");return window.is_holiday_9th&&!e},addHalloweenBadgeMenuBadge:function(){var e=this,t=["/halloween-templates?f_tags=Apparel","/halloween-templates?f_devices=T-Shirt%20Design","/c/videos/?f_tags=Horror%2CHalloween","/gaming-templates?f_tags=Horror"],i="/assets/navigation/pumpkin.svg";t.map(function(t){e.desktopMenu.addAnimatedBadge(t,"halloweenCampaign",i)})},initCyberweekUfo:function(){var e=Utils.bindFn(this);if(window.is_cyberweek){var t=P.cancelable(function(){return P.delay(3e3)});this.animationPromise=t(),this.animationPromise.then(e(function(){this.cyberweekUfo=new CyberweekUfo}))["catch"](function(){})}},destroyCyberweekUfo:function(){window.is_cyberweek&&(this.animationPromise&&this.animationPromise.cancel(),this.cyberweekUfo&&this.cyberweekUfo.detach())},loadHolidayCouponCookie:function(){if(window.is_holiday_coupon){var e={coupon_code:"holiday10"};$.cookie.json=!0,$.cookie("pl_coupon",e,{path:"/"})}},loadCyberWeekCoupon:function(e){var e=e||"cyberweeksale";window.is_cyberweek&&(Helpers.StageType.isStage()?P.delay(3e3).then(function(){Helpers.CouponHelper.remove(),Helpers.CouponHelper.load(e)}):(Helpers.CouponHelper.remove(),Helpers.CouponHelper.load(e)))},addHolidayMenuBadges:function(){this.desktopMenu.addAnimatedBadge("/christmas-templates?f_tags=Apparel","menu-badge","/assets/icons/holiday-mockups-badge.svg"),this.desktopMenu.addAnimatedBadge("/christmas-templates?f_devices=T-Shirt%20Design","menu-badge","/assets/icons/holiday-design-badge.svg")}}}),Widget.prototype.initOriginal=Widget.prototype.init,Widget.prototype.init=function(e){"function"==typeof this._translate&&this._translate(),"function"==typeof this._setCurrencyLabel&&this._setCurrencyLabel(),Widget.prototype.initOriginal.call(this,e)},window.TRANSLATIONS={SsoModal:{TEXT_TAB_SIGNUP:"Criar contra",TEXT_TAB_LOGIN:"Entrar"},SsoSignupModal:{TEXT_GIFT_CREATE_ACCOUNT:"Crie uma conta para fazer o download gratuito",TEXT_VALIDATE_SIGNUP_ERROR:"N\xe3o foi poss\xedvel completar o seu pedido, por favor tente novamente.",TEXT_CREATE_ACCOUNT_SUCCESS:"Sua conta foi criada!",TEXT_CREATE_ACCOUNT_ERROR:"Desculpe, n\xe3o foi poss\xedvel criar a sua conta. Por favor tente novamente mais tarde.",TEXT_VERIFY_TOKEN_SUCCESS:"Tudo pronto!",TEXT_VERIFY_TOKEN_ERROR:"A sua conta foi criada, mas n\xe3o foi poss\xedvel efetuar o login. Por favor tente novamente mais tarde.",TEXT_PASSWORD_CONTEXTUAL_HELP:"Escolha, pelo menos 7 caracteres e um s\xedmbolo",TEXT_PASSWORD_STRENGTH_GOOD:"Senha m\xe9dia!",TEXT_PASSWORD_STRENGTH_GREAT:"Senha forte!",TEXT_PASSWORD_STRENGTH_WEAK:"Tente de novo. Inlcua letras, n\xfameros e s\xedmbolos na sua senha!",html:'<div id="sso_signup_modal"><div class="header hidden" id="signup_continue_header"><h4>Fa\xe7a o seu cadastro para continuar</h4></div><div class="content"><form id="signup_form" class="sign-up-form"><div class="fields_container"><div class="floating-label-input email"><input autocomplete="off" class="form-control" id="signup_user_email" required="required" size="30" type="text" /><label class="placeholder">E-mail</label></div><div id="email_exists_warning" class="help-block text-left warning hidden">Este e-mail j\xe1 est\xe1 em uso. Tente outro. <a class="trigger_login_link" href="#">Fazer login</a></div><div id="email_error_warning" class="help-block text-left warning hidden"></div><div class="floating-label-input password"><input autocomplete="off" class="form-control" id="signup_user_password" required="required" type="password" /><label class="placeholder">Senha</label><div class="secret-eye eye-on"></div></div><div class="meter meter-init"><b class="meter-1"></b><b class="meter-2"></b><b class="meter-3"></b><b class="meter-4"></b></div><div id="bad_password_warning" class="help-block text-left">Escolha, pelo menos 7 caracteres e um s\xedmbolo</div><div class=""><p class="help-block checkboxes text-left"><span id="promotion-notifications" style="cursor: pointer;"> <input type="checkbox"> <span class="promotion-notifications">Receba freebies, inspira\xe7\xe3o e dicas para fazer crescer a sua marca diretamente na sua caixa de entrada.</span></input></span></p></div><div class="row form-group"><div id="recaptchaContainer" class="g-recaptcha col-xs-12"></div></div><div class="" id="signup_btn_container"><button id="submit_button" class="button primary" name="commit" type="submit" value="Sign Up">Cadastrar-se</button></div><div class=""><p class="help-block text-center new-policy">A Envato coleta e utiliza dados pessoais conforme a nossa <a class="strong block-link" target="_blank" href="https://envato.com/privacy/">Pol\xedtica de Privacidade</a>. Ao criar uma conta, voc\xea aceita os nossos <a class="strong block-link" target="_blank" href="https://placeit.net/terms-of-use">Termos e Condi\xe7\xf5es.</a>. </p><p class="help-block text-center">J\xe1 tem uma conta? <a href="#" class="trigger_login_link login-link" role="button">Fa\xe7a login</a></p></div><div class="envato-notice text-center"><span class="placeit-envato-logo-black"></span></div></div></form></div></div>'},SsoLoginModal:{TEXT_LOGIN_FAIL:"Erro ao inciar sess\xe3o",TEXT_ENABLE_ADMIN_MFA:"Os administradores devem ter a MFA habilitada, por favor habilite a MFA para autentifica\xe7\xe3o e tente novamente.",TEXT_INVALID_PLACEIT_CREDENTIALS:"Senha inv\xe1lida, verifique sua senha do Placeit",TEXT_AUTOLOGIN_CTA:"Entrar como {{username}}",TEXT_MIGRATE_ENVATO_ACCOUNT_SUCCESS:"Sua conta foi migrada! Voc\xea podera fazer o login usando a sua senha da Envato.",TEXT_LOGIN_ERROR:"N\xe3o foi poss\xedvel completar o seu login. Por favor tente novamente mais tarde.",TEXT_INVALID_CREDENTIALS:"Senha ou e-mail inv\xe1lidos. Voc\xea pode usar o seu e-mail da Envato para fazer login.",TEXT_ENVATO_PASSWORD:"Senha da sua conta Envato",TEXT_INVALID_TFA:"C\xf3digo TFA inv\xe1lido, confira e tente de novo.",TEXT_VERIFICATION_REQUIRED:"Parece que h\xe1 uma tentativa de login anormal. Enviamos o c\xf3digo de verifica\xe7\xe3o por e-mail. Copie e cole o c\xf3digo no campo de verifica\xe7\xf5a abaixo.",TEXT_WRONG_PASSWORD:'Senha errada! Confira que voc\xea inseriu a <strong>sua senha da Envato</strong>, n\xe3o a do Placeit. <a href="https://account.envato.com/reset_password" target="_blank">Voc\xea pode redefinir a sua senha aqui.</a>',html:'<div id="sso_login_modal"><div class="header hidden" id="confirm_placeit_password_header"><h4>Confirme sua conta do Placeit!</h4><p class="text-center">Coloque a sua senha para atualizar a sua conta e permitir o in\xedcio de sess\xe3o com o seu login da Envato a partir de agora.</p></div><div class="header" id="envato_account_header" hidden><h4>Conta Envato encontrada!</h4><p class="text-center">Insira a <span class="warning">sua senha da Envato (n\xe3o do Placeit)</span> compat\xedvel com o usu\xe1rio abaixo, para migrar a sua conta do Placeit e ser acess\xedvel com os seus dados da Envato.</p></div><div class="header" id="updating_account_header" hidden><h4>Atualizando a sua conta</h4><p class="text-center" style="font-size: 14px; font-family: \'SourceSansPro-Light\'; ">Mudamos a nossa Pol\xedtica de Privacidade e Termos de Uso. Estamos tamb\xe9m atualizando a sua conta para que possa entrar com a sua conta do Placeit nas propriedades da Envato. Selecione as caixas de verifica\xe7\xe3o abaixo e aceite para continuar.</p></div><div class="header hidden" id="login_continue_header"><h4>Fa\xe7a o login para continuar</h4></div><div class="content"><form id="login_form"><div class="fields_container"><div class="floating-label-input email" id="email_field_container"><input autocomplete="off" class="form-control" id="login_user_email" required="required" size="30" type="text" /><label class="placeholder">E-mail</label></div><div class="floating-label-input password" id="password_field_container"><input autocomplete="off" class="form-control" id="login_user_password" required="required" type="password" /><label class="placeholder">Senha</label><div id="password_secret_eye" class="secret-eye eye-on"></div></div><div class="floating-label-input email hidden" id="associated_email_field_container"><input autocomplete="off" class="form-control" id="associated_email" size="30" type="text" readonly/><label class="placeholder">E-mail no Placeit</label></div><div class="floating-label-input password hidden" id="placeit_password_field_container"><input autocomplete="off" class="form-control" id="user_placeit_password" type="password" /><label class="placeholder">Senha do Placeit</label><div id="placeit_password_secret_eye" class="secret-eye eye-on"></div></div><div class="floating-label-input tfa hidden" id="tfa-container"><input autocomplete="off" class="form-control" id="two_factor_code" name="two_factor_code" size="30" type="password"/><label class="placeholder">C\xf3digo da TFA</label></div><div class="floating-label-input hidden" id="signin_verification-container"><input autocomplete="off" class="form-control" id="signin_verification" name="signin_verification" size="30" type="password"/><label class="placeholder">C\xf3digo de verifica\xe7\xe3o (confira o seu e-mail)</label></div><div class="row"><div id="recaptcha_container" class="g-recaptcha col-xs-12" hidden></div></div><div id="privacy_policy_container" class="" hidden><p class="help-block text-left"><input type="checkbox" id="privacy_policy_alert"> <span class="agree" style="cursor: pointer">Concordo com a</span></input> <a href="https://envato.com/privacy/" target="_blank" role="button"> Pol\xedtica de Privacidade </a><br/><input type="checkbox" id="terms_conditions_alert"> <span class="terms_condition" style="cursor: pointer">Concordo com os</span></input> <a href="https://blog.placeit.net/terms-of-use/" target="_blank" role="button"> Termos de Uso </a></p></div><div id="migrate_account_hide"><div class="form-group text-right password-reset"><p class="help-block info-text"><a class="forgot" href="/password_resets/new" target="_blank">Esqueceu sua senha?</a></p></div><div class="row" id="login_btn_container"><div class="col-xs-12"><button class="button primary" name="commit" type="submit" value="Log in">Entrar</button></div></div><div class="row"><div class="col-xs-12"><p class="help-block text-center">N\xe3o tem uma conta? <a href="#" class="trigger_signup_link" role="button">Cadastre-se</a></p></div></div></div><div id="continue_btn" class="row" hidden><br/><div class="col-xs-12"><button class="button primary" name="commit" type="submit" value="Accept">Aceitar</button></div></div><div id="logged_in_notice" class="hidden"><div class="col-xs-12"><input id="logged_in_ok" class="button primary" name="commit" type="submit" value="Login as " /></div></div><div class="envato-notice text-center"><span class="placeit-envato-logo-black"></span></div></div></form></div></div>'},SubscriptionsPartial:{html:'            <div>                <div class="subscriptions-wrapper">                    <div class="label-wrapper">                        <div class="label-text"></div>                    </div>                    <div class="header">                        <div class="title"></div>                        <div class="subtitle"></div>                    </div>                    <div class="content-wrapper">                        <div class="categories"></div>                        <div class="carousel-wrapper"></div>                    </div>                    <div class="footer">                        <div class="period-wrapper">                            <div class="period-container plan-monthly">                                <div class="period-label">MENSAL<strong class="percent-discount discount"></strong></div>                                <button class="period" data-period="monthly">                                    <span class="price original-price"></span>                                    <span class="price final-price"></span>                                    <span class="price-label">/ M\xeas</span>                                </button>                            </div>                            <div class="period-container plan-annual">                                <div class="period-label">ANUAL<strong class="percent-discount discount"></strong></div>                                <button class="period" data-period="annual">                                    <span class="price original-price"></span>                                    <span class="price final-price">R$99.95</span>                                    <span class="price-label"> / Ano</span>                                    <small>Apenas <span class="annual-monthly-amount">R$8.33</span> / M\xeas, <strong class="annual-percent-discount">Economize <span class="annual-save">58</span>%</strong></small>                                </button>                            </div>                        </div>                        <div class="subscription-cta-container minimal"></div>                    </div>                </div>                <div class="disclaimer">                    <div class="coupon-disclaimer"></div>                    <span><strong>*Cancelar a qualquer momento.</strong> Todos os pre\xe7os s\xe3o cobrados anualmente em {{currency_label}}.</span>                    <span style="font-size: 10px">Compromisso m\xednimo de 1 m\xeas se os assinantes tiverem baixado algum modelo.</span>                </div>            </div>',TEXT_TITLE:"Assine o Plano Ilimitado!",TEXT_SUBTITLE:"Tenha acesso a todos os nossos Templates!",TEXT_SUBSCRIPTION_ACTIVATION_ERROR:"N\xe3o foi poss\xedvel ativar a sua assinatura, tente novamente mais tarde",TEXT_INVALID_OR_CANCELED_SUBSCRIPTION:"Assinatura inv\xe1lida ou cancelada",TEXT_ERROR_CHARGING_STORE_CARD:"Houve um erro no pagamento com seu cart\xe3o de cr\xe9dito cadastrado. Por favor, tente outra op\xe7\xe3o de pagamento.",TEXT_SUBSCRIPTION_SUCCESS:"A sua assinatura foi ativadda.",TEXT_TAX_MESSAGE_NOT_INCLUDED:"As taxas aplic\xe1veis n\xe3o est\xe3o inclusas nos valores.",TEXT_TAX_MESSAGE_INCLUDED:"{{amount}} adicional por {{taxType}}. Todos os pre\xe7os est\xe3o em {{currency_label}}",TEXT_TAX_MESSAGE_VAT_EXEMPT:"Isento de IVA. Todos os pre\xe7os est\xe3o em {{currency_label}}.",TEXT_CATEGORIES:[{id:"mockups",title:"Mockups",subtitle:"Ilimitados",features:[{content:"Voc\xea adquire os mesmos recursos que levaria se comprasse um de cada vez mas <br /> <strong>com Acesso ilimitado aos Mockups, Designs, V\xeddeos e Logos</strong>"},{content:"O maior cat\xe1logo no mundo com mais de {{mockupsStagesCount}} templates!"},{content:"Crie mockups perfeitos de forma r\xe1pida e f\xe1cil. \xc9 s\xf3 adicionar a sua imagem!"},{content:"Crie mockups para v\xeddeos incr\xedveis direto do seu navegador"}]},{id:"designs",title:"Designs",subtitle:"Ilimitados",features:[{content:"Voc\xea adquire os mesmos recursos que levaria se comprasse um de cada vez mas <br /> <strong>com Acesso ilimitado aos Mockups, Designs, V\xeddeos e Logos</strong>"},{content:"Escolha o seu template entre os mais de 5,700 designs maravilhosos"},{content:"Os templates s\xe3o f\xe1ceis de editar e voc\xea cria designs profissionais!"},{content:"Fa\xe7a o download de todos os tamanhos com apenas um clique!"}]},{id:"videos",title:"Videos",subtitle:"Ilimitados",features:[{content:"Voc\xea adquire os mesmos recursos que levaria se comprasse um de cada vez mas <br /> <strong>com Acesso ilimitado aos Mockups, Designs, V\xeddeos e Logos</strong>"},{content:"Centenas de templates para fazer v\xeddeos incr\xedveis"},{content:"Fazer um v\xeddeo nunca foi t\xe3o simples!"},{content:"S\xe3o mais de 1000 m\xfasicas para escolher gratuitamente!"},{content:"Fa\xe7a da sua apresenta\xe7\xe3o de slides algo incr\xedvel"}]},{id:"logos",title:"Logos",subtitle:"Ilimitados",features:[{content:"Obtenha acesso ilimitado a <strong>Todos os nossos Templates!</strong>"},{content:"<div>Escolha entre os mais de <strong>4,600+</strong> templates para customizar a sua logo</div>"},{content:"Crie a logo da sua empresa em alguns cliques!"},{content:"Baixe o seu logo vetorizado em arquivo PDF"}]}]},Purchases:{html:'            <div class="purchases" id="downloadOverlay" tabindex="-1" >                <div id="subscription-paused" style="display:none">                    <span class="info-close">                         <span>\xd7</span>                     </span>                     <p class="pause-title ">A sua assinatura foi interrompida</p>                    <p class="pause-note ">Ser\xe1 reativada automaticamente em {{pause_date}}</p>                    <p class="pause-note ">Se voc\xea precisar ativar hoje, entre em <a href="mailto:support@placeit.net" target="_blank">contato conosco</a></p>                </div>                <div id="subscription-past-due" style="display:none">                    <span class="info-close">                         <span>\xd7</span>                     </span>                     <p class="pause-title ">A sua conta est\xe1 vencida</p>                    <p class="pause-note ">N\xe3o ser\xe1 poss\xedvel fazer downloads gratuitos at\xe9 recebermos a atualiza\xe7\xe3o do seu pagamento.                     <a href="#" class="handle-fix-cta">Clique para atualizar</a></p>                </div>                <div class="purchases-content">                    <div class="purchases-header">                        <div class="purchase-header__discount-label">                             <span class="purchase-header__discount-amount">30% OFF</span>                         </div>                         <h5 class="purchase-header__title">1. Compre um \xfanico <span class="purchases__category-name"></span></h5>                        <h2 class="purchase-header__subtitle">Escolha apenas este <span class="purchases__category-name"></span></h2>                     </div>                    <div class="purchases-body">                        <div class="tab-content download-tabs__content">                        <div class="tab-pane active" id="normalDownload">                            <form class="form purchase-options-form" role="form" id="normalDownload">                            <div class="resolutions-container">                             <div class="row download-overlay__image-size resolution-options is_video_product">                                <div class="purchases__video-wrapper purchases__video-wrapper--paused">                                     <div class="purchases__video-play-button"></div>                                     <video muted playsinline></video>                                 </div>                             </div>                            <div class="row download-overlay__image-size resolution-options is_smart_template">                            </div>                            <p class="purchase-body__content-description">                                 <strong>{{res_watermarked}}</strong>, Alta resolu\xe7\xe3o {{res_title}} (<span class="res_dimensions"></span>).<br />Para uso comercial!                             </p>                             </div>                             <div class="button-container">                                <button class="button button--not-subscribed primary long purchase-price" type="submit">                                <span class="price-description">Compre <span class="only-highlight-underline">APENAS</span> Este <span class="purchases__category-name"></span> por                                     <span class="purchase-header__price purchase-header__price--original"></span>                                     <span class="purchase-header__price purchase-header__price--quantity"></span>                                 </span>                                <span class="price-free">                                </span>                                </button>                            </div>                            <p class="purchases__low-res-download">Ou <a>Obtenha o v\xeddeo gr\xe1tis com baixa resolu\xe7\xe3o e marca d\u2019\xe1gua.</a></p>                             </form>                        </div>                        <div class="coupon-field-container"></div>                        </div>                    </div>                </div>                <div class="widget-outer">                    <div class="disclaimer-wrapper">                        As taxas aplic\xe1veis n\xe3o est\xe3o inclusas nos valores.                    </div>                </div>            </div>',resItemTemplate:'            <div class="download-overlay__image-size-item">                <label>                    <input data-allowed-licenses="{{allowed_licenses}}" data-key="{{res_key}}" id="{{radio_id}}" name="resolution" type="radio" value="{{res_id}}" />                    <p class="overlay--radio-title">{{res_title}}</p>                    <p class="overlay--radio-desc res_dimensions">{{res_dimensions}}</p><br>                    <p class="overlay--radio-desc">{{res_watermarked}}</p>                    <p class="overlay--radio-desc ios_screenshot__purchase_disclaimer" style="display:none;">Quando voc\xea faz o upload das suas capturas de tela, a Apple oferece redimensionar as imagens de forma autom\xe1tica, para ajust\xe1-las ao tamanho da tela.</p>                    <b class="resolution-license-link-placeholder"></b>                </label>            </div>',taxAmountText:"{{amount}} adicional por {{taxType}}. Todos os pre\xe7os est\xe3o em {{currency_label}}",TEXT_VAT_EXEMPT_MESSAGE:"Isento de IVA. Todos os pre\xe7os est\xe3o em {{currency_label}}.",TEXT_FREE_DOWNLOAD_TITLE:"Fa\xe7a o Download gr\xe1tis",TEXT_DOWNLOAD_NOW:"Fa\xe7a o Download agora",TEXT_FREE_DOWNLOAD_CATEGORY_TITLE:'Fa\xe7a o Download gr\xe1tis <span class="purchases__category-name"></span>',TEXT_DOWNLOAD_CATEGORY_TITLE:"RECEBA A SUA {{categoryName}}!",TEXT_DISCOUNT_LABEL:"{{discount}} de desconto",TEXT_PAID_DOWNLOAD_CATEGORY_TITLE:'1. Compre um \xfanico <span class="purchases__category-name"></span>',TEXT_DISCLAIMER_DEFAULT:"As taxas aplic\xe1veis n\xe3o est\xe3o inclusas nos valores.",TEXT_PAID_DOWNLOAD_CATEGORY_SUBTITLE:'Escolha apenas este <span class="purchases__category-name"></span>'},PurchaseOverlay:{html:'            <div class="modal purchase-overlay fade br" id="purchaseOverlay" tabindex="-1" role="dialog" aria-labelledby="purchaseOverlayLabel" aria-hidden="true">            <button type="button" class="close m-close" data-dismiss="modal" aria-hidden="true">                <span aria-hidden="true">\xd7</span>            </button>            <div class="modal-dialog">                <div class="server_errors none"></div>                <div class="modal-content">                <div class="modal-body">                    <div class="text-center modal-spinner" style="opacity:0.5;margin-top: 60px;">                      <img src="/assets/fade-spinner.gif">                    </div>                    <div class="form-container">                    <form class="recurly">                        <div class="subscription-info" style="display: none;"></div>                        <div class="payment_method multiple">                            <div class="payment_option saved_card_option selected">                                <input type="radio" name="payment_method">                                <label></label>                                <div class="card_logo"></div>                            </div>                            <div class="payment_option card_option">                                <input type="radio" name="payment_method" checked>                                <label></label>                                <div class="accepted_cards"><div class="card visa">Visa</div>                                <div class="card mastercard">MasterCard</div>                                <div class="card discover">Discover</div>                                <div class="card american_express">American Express</div>                                </div>                            </div>                            <div class="payment_option paypal_option">                                <input type="radio" name="payment_method">                                <label></label>                                <div class="logo"></div>                            </div>                        </div>                        <div class="saved-card-container">                            <span>Usar cart\xe3o salvo</span>                            <div class="saved-card-info">                                <div class="card"></div>                                <span>Terminando com ****</span>                                <div class="card-last-four"></div>                            </div>                        </div>                        <div class="form-widget-container"></div>                        <div class="paypal" style="display: none;">                            <div class="paypal_message">                            Voc\xea ser\xe1 redirecionado para o sistema do PayPal para autentica\xe7\xe3o e autoriza\xe7\xe3o do pagamento.<br><br>Pagamentos realizados com conta do PayPal de endere\xe7o registrado nos Estados Unidos ou na  Austr\xe1lia est\xe3o sujeitos \xe0s taxas correspondentes.<br><br><strong>\xc9 necess\xe1rio desbloquear pop-ups.</strong>                            </div>                        </div>                        <div class="footer">                            <button id="saved_card" type="submit" class="button primary">                                <span> Realizar pagamento </span>                            </button>                            <button id="credit_card" type="submit" class="button primary">                                <span> Realizar pagamento </span>                            </button>                            <button id="paypal" style="display: none;" type="button" class="button primary">                                <span> Realizar pagamento com PayPal </span>                            </button>                        </div>                    </form>                    </div>                    <div class="information-container">                        <p class="information-title">                        Resumo do pedido                        <span class="view-order-details">view order details</span>                        <span class="view-order-details opened">hide order details</span>                        <span class="view-order-total-items"></span>                        </p>                        <div class="information-general-info">                            <div class="thumbnails-list"></div>                            <p class="information-title"></p>                            <p class="information-title subtitle"></p>                        </div>                        <div class="subscriptionp-type-selector">                            <div class="plan-annual">                                <input type="radio" name="plan-annual">                                <label class="br"></label>                                <p>Anual (<span class="amount-price">R$10</span>/m\xeas<span class="disclaimer">*</span>) <br /><span class="label">Voc\xea economiza 50%</span></p>                            </div>                            <div class="plan-monthly">                                <input type="radio" name="plan-monthly">                                <label class="br"></label>                                <p>Mensal (<span class="amount-price">R$19.95</span>/m\xeas<span class="disclaimer">*</span>) <br /></p>                            </div>                        </div>                        <div class="information-amount-info">                            <div class="amount price-section">                                <p class="amount-text"></p>                                <div class="amount-container">                                    <p class="amount-price"></p>                                    <p class="disclaimer price"></p><p class="disclaimer">&nbsp;por m\xeas)</p>                                </div>                            </div>                            <div class="amount discount-section">                                <p class="amount-text"></p>                                <div class="amount-container">                                    <p class="amount-price"></p>                                    <p class="disclaimer price"></p><p class="disclaimer">&nbsp;por m\xeas)</p>                                </div>                            </div>                            <hr>                            <div class="amount subtotal-section">                                <p class="amount-text">Subtotal</p>                                <p class="amount-price">0</p>                            </div>                            <div class="amount vat-section">                                <p class="amount-text"></p>                                <div class="amount-container">                                    <p class="amount-price"></p>                                    <p class="disclaimer price"></p><p class="disclaimer">&nbsp;por m\xeas)</p>                                </div>                            </div>                            <div class="amount total-section">                                <div class="amount-container">                                    <p class="amount-text total"></p>                                    <p class="disclaimer"></p>                                </div>                                <div class="amount-container">                                    <p class="amount-price"></p>                                    <p class="disclaimer">(Faturado hoje)</p>                                </div>                            </div>                        </div>                        <div class="resume-info"></div>                        <div class="secure-info">                            <img src="/assets/icons/lock.svg">                            <div class="secure-info-disclaimer">                                <p class="secure-info-header">Pagamentos Seguros</p>                                <p>Todas as transa\xe7\xf5es s\xe3o processadas</p>                                <p>pela nossa tecnologia segura.</p>                            </div>                        </div>                    </div>                </div>                </div>            </div>            </div>        ',PURCHASE:{PRICE_LABEL:"Valor",TOTAL_LABEL:"Total"},SUBSCRIPTION:{TITLE:"Plano Ilimitado",SUBTITLE:"Essa assinatura inclui o acesso a downloads ilimitados de templates de mockup, design, logo e v\xeddeo.",PRICE_LABEL_ANNUALY:"Anual",PRICE_LABEL_MONTHLY:"Mensal",TOTAL_LABEL:"Total Mensal",TOTAL_ANNUAL_LABEL:"Total Anual",TOTAL_WITH_MONTH:"(Primeiro{{period}} m\xeas)",RESUME_RENEW_TEXT:"Assinatura ilimitada \xe9 renovada mensalmente em {{currency_label}}.",RESUME_RENEW_TEXT_ANNUAL:"Assinatura ilimitada \xe9 renovada anualmente em {{currency_label}}.",RESUME_CANCEL_TEXT:"*Pode cancelar a sua assinatura a qualquer momento e continuar tendo acesso at\xe9 o final do seu ciclo de cobran\xe7a e evitar cobran\xe7as adicionais.",RESUME_DISCOUNT_TEXT:"O desconto \xe9 v\xe1lido para o seu primeiro {{period}} m\xeas.",RESUME_DISCOUNT_TEXT_ANNUAL:"O desconto \xe9 v\xe1lido para o seu primeiro {{period}} ano.",RESUME_BILLING_TEXT:"O valor cobrado pela assinatura ser\xe1 de {{amount}} a partir de {{date}}.",FORM_BUTTON_LABEL:"Assinar Plano",PAYPAL_BUTTON_LABEL:"Realizar pagamento com PayPal",MINIMUM_TIME:"Fidelidade m\xednima de 1 m\xeas caso seja baixado algum template.",UNUSED_SUBSCRIPTION:"",UNUSED_SUBSCRIPTION_ANNUAL:"As fun\xe7\xf5es n\xe3o utilizadas de sua assinatura s\xe3o reembols\xe1veis."},CURRENCY:"Pre\xe7os em {{currency_label}}.",SUBSCRIPTION_TOTAL_DISCOUNT_LABEL:"Total Primeiro M\xeas",DISCOUNT_LABEL:"Desconto de -{{discount}}",VAT_LABEL:"IVA: {{vat}}%",RESUME_USD_TEXT:"Todos os valores est\xe3o em {{currency_label}}.",
TEXT_SERVER_PAUSED_MESSAGE:' Entre em <a href="mailto:support@placeit.net">contato conosco</a> para reativar a sua assinatura',BILLING_VAT_TEXT:"({{totalAmount}} Assinatura + {{vatAmount}} IVA)"},BillingForm:{html:'<div class="widget billing-form variant">            <form class="recurly billing_form">            <div class="contact_info">                <div class="title">Contato para faturamento</div>                <div class="floating-label-input name">                <label class="">Nome<i class="field-dot-required">*</i></label>                <input id="recurly-first-name" data-recurly="first_name" required>                </div>                <div class="floating-label-input last-name">                <label class="">Sobrenome<i class="field-dot-required">*</i></label>                <input id="recurly-last-name" data-recurly="last_name" required>                </div>                <div class="floating-label-input business-name">                <label class="">Nome da empresa</label>                <input id="recurly-company" data-recurly="company">                </div>                <div class="floating-label-input email">                <label class="">E-mail</label>                <input type="email" class="form-control" id="recurly-email" required>                </div>            </div>            <div class="billing_info">                <div class="title">Informa\xe7\xe3o sobre faturamento </div>                <div class="floating-label-input card-number">                    <label class="">N\xfamero do cart\xe3o<i class="field-dot-required">*</i></label>                    <div id="recurly-number" class="card_number" data-recurly="number"></div>                </div>                <div class="floating-label-input month">                    <label class="">M\xeas de validade<i class="field-dot-required">*</i></label>                    <div id="recurly-month" data-recurly="month"></div>                </div>                <div class="floating-label-input year">                    <label class="">Ano de validade<i class="field-dot-required">*</i></label>                    <div id="recurly-year" data-recurly="year"></div>                </div>                <div class="floating-label-input cvv">                    <label class="">C\xf3digo de seguran\xe7a<i class="field-dot-required">*</i></label>                    <div id="recurly-cvv" class="card_number" data-recurly="cvv"></div>                </div>                <div class="floating-label-input country brazil-country">                    <label class="">Pa\xeds</label>                    <input class="recurly-country" autocomplete="nope">                    <input type="hidden" class="recurly-country_code" data-recurly="country" />                </div>                <div class="floating-label-input zip">                    <label class="">CEP<i class="field-dot-required">*</i></label>                    <input id="recurly-postal-code" data-recurly="postal_code">                </div>                <div class="floating-label-input vat">                    <label>Numero de IVA (opcional)</label>                    <input id="recurly-vat-number" data-recurly="vat_number" maxlength="20">                </div>            </form>            </div>',TEXT_FIELD_ERROR:"Erro",TEXT_FIELD_REQUIRED:"Exigido"},LogoPurchaseModal:{IMAGE_YOUR_BRAND_PATH:"/assets/your-brand-pt.svg",html:'            <div class="purchases logo-purchases" id="downloadOverlay" tabindex="-1" >                <div class="purchases-content">                    <div class="purchases-header">                        <div class="purchase-header__discount-label">                             <span class="purchase-header__discount-amount">30% OFF</span>                         </div>                         <h5 class="purchase-header__title">1. Compre um \xfanico Logo </h5>                        <h2 class="purchase-header__subtitle">Escolha apenas este Logo</h2>                     </div>                    <div class="purchases-body">                        <div class="tab-content download-tabs__content">                            <div class="tab-pane active" id="normalDownload">                                <form class="form purchase-options-form" role="form" id="normalDownload">                                    <div class="resolutions-container">                                         <div class="row download-overlay__image-size resolution-options is_smart_template">                                        </div>                                        <p class="purchase-body__content-description">                                             <strong>Sem marca d\u2019\xe1gua</strong>, Alta resolu\xe7\xe3o PNG (4000x4800px).<br />Para uso comercial!                                         </p>                                     </div>                                     <div class="button-container">                                        <button class="button button--not-subscribed primary long purchase-price" type="submit">                                            <span class="price-description">Compre APENAS Este Logo por                                                 <span class="purchase-header__price purchase-header__price--original"></span>                                                 <span class="purchase-header__price purchase-header__price--quantity"></span>                                             </span>                                        </button>                                    </div>                                </form>                            </div>                            <div class="coupon-field-container"></div>                        </div>                    </div>                </div>                <div class="widget-outer">                    <div class="disclaimer-wrapper">                        As taxas aplic\xe1veis n\xe3o est\xe3o inclusas nos valores.                    </div>                </div>            </div>'},PayPalModal:{html:'            <div class="modal paypal-modal fade" id="paypalModal" data-keyboard="false" role="dialog" aria-labelledby="modal-title" aria-hidden="true">                <div class="modal-dialog">                    <div class="modal-content">                        <div class="modal-header grayed">                            <h4 id="modal-title">Por favor aguarde...</h4>                        </div>                        <div class="modal-body">                            <div class="text-center content">                            <h3> Completar pagamento no PayPal </h3>                            <p> N\xe3o <b><u>not</b></u> fechar esta janela. Se der algum erro, <a id="retry"> clique aqui para reiniciar o processo </a>. </p>                            </div>                            <div class="text-center spinner">                            <img src="/assets/paypal_loader.gif">                            </div>                        </div>                    </div>                </div>            </div>'},SinglePurchasesModal:{html:'            <div class="modal single-purchase-overlay" tabindex="-1" role="dialog" aria-labelledby="downloadOverlayLabel" aria-hidden="true">                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">                    <span aria-hidden="true">\xd7</span>                </button>                <div class="animation-info">2 Op\xe7\xf5es de Compra!</div>                 <div class="modal-dialog">                    <div class="modal-content">                        <div class="modal-body">                            <div class="area1" data-area="left"></div>                            <div class="or-div">OU</div>                            <div class="area2" data-area="right"></div>                        </div>                    </div>                </div>            </div>',TEXT_SUBSCRIPTIONS_PARTIAL_TITLE:"2. Assine o Plano Ilimitado!"},PricingButton:{TEXT_PRICING:"Pre\xe7os",TEXT_UPGRADE_ANNUAL:"Economize {{annualDiscountPercentage}}%"},GoAnnualModal:{html:'            <div class="modal" tabindex="-1" role="dialog" aria-hidden="true">                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">                    <span aria-hidden="true">\xd7</span>                </button>                <div class="modal-dialog">                    <div class="modal-content">                    <div class="modal-body">                        <svg class="subscription-icon" xmlns="http://www.w3.org/2000/svg" width="29" height="26" fill="none"><g filter="url(#filter0_d)"><path fill="url(#paint0_linear)" d="M5.3 21.3c0-.5.5-1 1-1h16.4c.5 0 1 .5 1 1v1.4c0 .5-.5 1-1 1H6.3a1 1 0 01-1-1v-1.4z"/><path fill="url(#paint1_linear)" d="M26.5 6.6a1.2 1.2 0 00-1.3 0l-5.7 3.8-4-7.8a1.1 1.1 0 00-1-.6 1.1 1.1 0 00-1 .6l-4 7.8-5.7-3.8a1.2 1.2 0 00-1.3 0l-.4.5v.7l2.2 10c0 .2.2.5.4.6.2.2.5.3.7.3h18.2c.2 0 .5-.1.7-.3.2-.1.3-.4.4-.6l2.3-10a1.1 1.1 0 00-.5-1.2z"/></g><defs><linearGradient id="paint0_linear" x1="5.3" x2="23.7" y1="22" y2="22" gradientUnits="userSpaceOnUse"><stop stop-color="#501AA8"/><stop offset="1" stop-color="#870DE8"/></linearGradient><linearGradient id="paint1_linear" x1="2" x2="27" y1="10.3" y2="10.3" gradientUnits="userSpaceOnUse"><stop stop-color="#501AA8"/><stop offset="1" stop-color="#870DE8"/></linearGradient><filter id="filter0_d" width="29" height="25.7" x="0" y="0" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset/><feGaussianBlur stdDeviation="1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/><feBlend in="SourceGraphic" in2="effect1_dropShadow" result="shape"/></filter></defs></svg>                        <span class="modal-title">Fa\xe7a upgrade</span>                        <span class="savings-title">Economize <span class="savings"></span>%!</span>                        <span class="pricing"><span class="annual-price"></span>/Ano (Apenas <span class="annual-price-month"></span>/M\xeas)</span>                        <span class="message">Voc\xea agora paga <span class="monthly-price"></span>/M\xeas</span>                        <button id="goAnnual">Assine o Plano Anual!</button>                        <span class="footnote">Os cup\xf5es n\xe3o s\xe3o transfer\xedveis.<br>Todos os cup\xf5es ser\xe3o cancelados ap\xf3s a mudan\xe7a para o novo plano.</span>                    </div>                    </div>                </div>            </div>'},SubscriptionPlanChangeModal:{html:'            <div class="modal subscription-plan-change-modal" tabindex="-1" role="dialog" aria-labelledby="downloadOverlayLabel" aria-hidden="true">                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">                    <span aria-hidden="true">\xd7</span>                </button>                <div class="modal-dialog">                    <div class="modal-content">                    <div class="modal-body">                        <div class="plans-switch">                        <h1>Change your plan</h1>                        <p class="subtitle">Our Plans include unlimited downloads on mockups, designs, logos, and videos.</p>                        <ul class="plan-list">                            <li class="disabled" data-plan="monthly"><p>Monthly <br> <span id="cp-monthly-price"></span></p></li>                            <li class="disabled" data-plan="annual"><p>Yearly <br> <span id="cp-annual-price"></span><br><span>You save <span id="cp-annual-save"></span>%!</span></p></li>                        </ul>                        <button class="button primary change_plan btn-block">Change Plan</button>                        <p class="selected-plan-billing-info"></p>                        <p class="coupon-info">Coupons are non-transferable, any existing coupons will be cancelled after changing to a new plan.</p>                        </div>                        <div class="plans-confirmation">                        <p class="confirmation-text">Voc\xea est\xe1 prestes a mudar para um <br><strong>Plano de Assinatura <span class="plan-label"></span></strong>, continuar?</p>                        <button type="button" class="button secondary change-plan-cancel" data-dismiss="modal">Cancelar</button>                        <button type="button" class="button primary confirm-change-plan">Sim, continuar</button>                        </div>                    </div>                    </div>                </div>            </div>',BILLING_INFO:{annualLabel:"Anual",monthlyLabel:"Mensal"}},CelebrationModal:{TEXTS:{monthly:{title:"Parab\xe9ns!",subtitle:"Agora voc\xea \xe9 assinante!",footnote:'<span><b>Economize <span class="savings"></span>%</b> com a nossa assinatura anual!<button id="goAnnual" class="btn">Assine o Plano Anual!</button></span>'},annual:{title:"Parab\xe9ns!",subtitle:"Agora voc\xea \xe9 assinante anual!",footnote:'<span class="small">Se preferir voltar \xe0 sua assinatura mensal,<br> v\xe1 para a p\xe1gina da sua conta.</span>'}}},EnvatoUsername:{USERTYPE_LABELS:{unlimited:'<svg><use xlink:href="#subscription_icon"></use></svg><span class="subscribed">Acesso ilimitado</span>'}},CTABlockSection:{TEXT_TAX_MESSAGE_NOT_INCLUDED:"As taxas aplic\xe1veis n\xe3o est\xe3o inclusas nos valores.",TEXT_TAX_MESSAGE_INCLUDED:"{{amount}} adicional por {{taxType}}. Todos os pre\xe7os est\xe3o em {{currency_label}}",TEXT_TAX_MESSAGE_VAT_EXEMPT:"Isento de IVA. Todos os pre\xe7os est\xe3o em {{currency_label}}."},UnusualActivityModal:{TITLE:"Detectamos actividade n\xe3osual na sua conta",BODY:"Para proteger a sua conta na Placeit, assin\xe1mos a sua sa\xedda de todas as suas sess\xf5es. Verifique o seu e-mail e siga as instru\xe7\xf5es.<br><br>Se n\xe3o recebeu o e-mail, verifique a sua caixa de entrada de spam."},PricingPageVariantCD:{BENEFITS_FOOTER_TEXT:"<strong>*Cancelar a qualquer momento.</strong> Todos os pre\xe7os s\xe3o cobrados anualmente em {{currency_label}}.",FAQ_ANSWER_2_TEXT:'<p> Voc\xea sempre pode comprar por item, mas recomendamos totalmente nossa assinatura. </p> <p> Por R${{monthly_price}} {{currency_label}} por m\xeas* ou R${{annual_price}} {{currency_label}} por ano*, voc\xea ter\xe1 acesso a todos os  <span style="color: #9c19e0" ><a href="https://br.placeit.net/c/mockups" rel="noopener" style="color: #9c19e0" target="_blank" >mockups</a >, <a href="https://placeit.net/c/design-templates" rel="noopener" style="color: #9c19e0" target="_blank" >modelos de design</a >, </span ><a href="https://br.placeit.net/video-maker" rel="noopener" target="_blank" ><span style="color: #007ee4" ><span style="color: #9c19e0">v\xeddeos</span></span ></a > e <a href="https://br.placeit.net/logo-maker" ><span style="color: #9c19e0">logotipos</span></a >. da Placeit. </p> <p> Inclu\xedmos nossa <span style="color: #9c19e0" ><a href="https://br.placeit.net/#license" rel="noopener" style="color: #9c19e0" target="_blank" >licen\xe7a comercial</a ></span > para todas as compras! </p> <p style="font-size: 0.8em">*Impostos aplic\xe1veis n\xe3o inclu\xeddos</p>'},SubscriptionCtaBlockController:{TITLE:"Assinatura Ilimitada",SUBTITLE:"Baixadas ilimitadas",FROM:"Desde:",PER_MONTH:"/m\xeas",CTA_TEXT:"Comece agora",CTA_TEXT_UNLIMITED:"V\xe1 Ilimitado",MONTHLY_TITLE:"Assinatura Mensal",DISCOUNT_SUBTITLE:"Desconto por tempo limitado",YEARLY:"anualmente",MONTHLY:"mensalmente",MONTHLY_CANCEL_FOOTER:"<strong><span style='font-size: 0.8em'>*</span>Cancelar a qualquer momento.</strong> Todos os pre\xe7os s\xe3o cobrados mensalmente em {{currency_label}}.        <p style='font-size: 8.5px'>Compromisso m\xednimo de 1 m\xeas se os assinantes tiverem baixado algum template.</p>",ANNUAL_CANCEL_FOOTER:"<strong><span style='font-size: 0.8em'>*</span>Cancelar a qualquer momento.</strong> Todos os pre\xe7os s\xe3o cobrados anualmente em {{currency_label}}.        <p style='font-size: 8.5px'>Compromisso m\xednimo de 1 m\xeas se os assinantes tiverem baixado algum template.</p>"}},Module("Translator")({ALLOWED_LOCALE:"BR",prototype:{_translate:function(){var e,t,i;e=this,t=window.TRANSLATIONS[e.constructor.className],i=window._pl_locale,"undefined"!==t&&i===e.constructor.ALLOWED_LOCALE&&(console.log("Translate: "+e.constructor.className),$.extend(!0,e.constructor,t))}}}),Module("CurrencyLabelSetter")({KEYS_TO_EXCLUDE_FROM_SETTING_CURRENCY:["__includedModules","__descendants","__implementedInterfaces","elementSource","moduleName","include","KEYS_TO_EXCLUDE_FROM_SETTING_CURRENCY","ALLOWED_VALUES_TYPES_TO_SET_CURRENCY"],ALLOWED_VALUES_TYPES_TO_SET_CURRENCY:["string","object"],_isValidPropertyToSetCurrency:function(e,t){return this.KEYS_TO_EXCLUDE_FROM_SETTING_CURRENCY.includes(e)===!0?!1:this.ALLOWED_VALUES_TYPES_TO_SET_CURRENCY.includes(typeof t)===!1?!1:null===t?!1:!0},prototype:{_setCurrencyLabel:function(){var e=this,t=this.constructor,i=currencyHelper.getLabel(recurlyConfig.currency);Object.keys(t).forEach(function(n){var s=t[n];e.constructor._isValidPropertyToSetCurrency(n,s)!==!1&&("object"==typeof s?(s=JSON.stringify(s),s=s.replaceAll("{{currency_label}}",i),s=JSON.parse(s),t[n]=s):t[n]=s.replaceAll("{{currency_label}}",i))})}}}),Module("ThemeSupport")({themeStrategy:{free:"setFreeTheme",paid:"setPaidTheme",admin:"setAdminTheme",subscribed:"setSubscribedTheme"},FREE:"free",PAID:"paid",ADMIN:"admin",SUBSCRIBED:"subscribed",prototype:{setTheme:function(e){var t=ThemeSupport.themeStrategy[e];if(void 0===t)throw new Error(e+" is not a valid theme");this[t]()},setFreeTheme:function(){Helpers.GlobalEventTracker.noticeError("Theme method called but not implemented in class",{theme:"Free","class":this.constructor.className})},setPaidTheme:function(){Helpers.GlobalEventTracker.noticeError("Theme method called but not implemented in class",{theme:"Paid","class":this.constructor.className})},setAdminTheme:function(){Helpers.GlobalEventTracker.noticeError("Theme method called but not implemented in class",{theme:"Admin","class":this.constructor.className})},setSubscribedTheme:function(){Helpers.GlobalEventTracker.noticeError("Theme method called but not implemented in class",{theme:"Subscribed","class":this.constructor.className})}}}),window.performance=window.performance||{},performance.now=function(){return performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()}}(),Li={Engine:{before:[],error:[],after:[]},stack:[],events:[],network:[],previousError:[],performance:[],nest:0},Class(Li,"ObjectSpy")({prototype:{spies:null,init:function(){this.spies=[]},spy:function(e,t){t=t||{},Object.getOwnPropertyNames(e).forEach(function(i){var n;try{if("function"!=typeof e[i])return!1}catch(s){return!1}t.except&&t.except.indexOf(i)>-1||(n=new Li.Spy,n.on(e).method(i),this.spies.push(n))},this)},destroy:function(){this.spies.forEach(function(e){e.removeSpy()}),this.spies=null}}}),Class(Li,"Spy")({prototype:{targetObject:null,methodName:null,spyMethod:null,originalMethod:null,objectHasMethod:null,called:null,init:function(e){e=e||{},this.called=[],this.targetObject=e.targetObject,this.methodName=e.methodName},applySpy:function(){var e;return e=this,this.targetObject.hasOwnProperty(this.methodName)===!1?this.objectHasMethod=!1:this.objectHasMethod=!0,this.originalMethod=this.targetObject[this.methodName],this.targetObject[this.methodName]=function(){var t,i,n,s,r,o,a,l,c,u;for(n=this,t=Array.prototype.slice.call(arguments,0,arguments.length),s=Li.Engine.before,r=Li.Engine.error,o=Li.Engine.after,this===e&&(n=e.targetObject),a=0;a<s.length;a++)s[a]({scope:n,args:t,spy:e});try{l=performance.now(),i=e.originalMethod.apply(n,t),c=performance.now()}catch(d){if(!(r.length>0))throw d;for(a=0;a<r.length;a++)r[a]({scope:n,args:t,spy:e,error:d})}finally{for(c&&(u=c-l),a=0;a<o.length;a++)o[a]({scope:n,args:t,spy:e,time:u});return i}},this.targetObject[this.methodName].__isSpy=!0,this.targetObject[this.methodName].__spy=this.spy,Object.getOwnPropertyNames(this.originalMethod).forEach(function(t){e.targetObject[e.methodName][t]=e.originalMethod[t]}),this},removeSpy:function(){return this.objectHasMethod===!0?this.targetObject[this.methodName]=this.originalMethod:delete this.targetObject[this.methodName],this},on:function(e){return this.targetObject=e,this},method:function(e){return this.methodName=e,this.applySpy(),this}}}),Li.Engine.before.push(function(e){var t;try{t=window.parent.Li?window.parent:window}catch(i){t=window}t.Li.performance.push({message:"executing: "+(e.spy.targetObject.className||e.scope.constructor.className)+"."+e.spy.methodName,nesting:t.Li.nest,startTime:t.performance.now()}),t.Li.nest++}),Li.Engine.error.push(function(e){var t;try{t=window.parent.Li?window.parent:window}catch(i){t=window}t.Li.nest--,console.error("error detected: "+(e.spy.targetObject.className||e.scope.constructor.className)+"."+e.spy.methodName),console.error(e.error.message),console.error(e.error.stack)}),Li.Engine.after.push(function(e){var t;try{t=window.parent.Li?window.parent:window}catch(i){t=window}t.Li.nest--,t.Li.performance.push({message:"executed: "+(e.spy.targetObject.className||e.scope.constructor.className)+"."+e.spy.methodName,time:e.time,nesting:t.Li.nest})}),window.enableLi=("production"===window.environment||"staging"===window.environment)&&"getOwnPropertyNames"in Object?!0:!1,function(e){var t,i;if("function"==typeof require){var n=require("neon");t=n.Module,i=n.Class;var s=require("microtime")}else t=e.Module,i=e.Class;var r={};t(r,"Logger")({}),t(r,"Formatter")({}),"function"==typeof require&&(r.Formatter.Token=require("./formatters/token.js").Token,r.Logger.JsConsole=require("./loggers/console.js").JsConsole,r.Logger.Socket=require("./loggers/socket.js").Socket),r.now=function(){return"undefined"!=typeof performance&&performance.timing?performance.timing.navigationStart+performance.now():"undefined"!=typeof s?1e3*s.nowDouble():Date.now()},r.stringify=function(e){var t,i=[];return t=JSON.stringify(e,function(e,t){if("object"==typeof t&&null!==t){if(-1!==i.indexOf(t))return"[Circular]";i.push(t)}return t}),i=null,t},r.Console=i(r,"Console")({prototype:{from:"Generic Cobalt Logger",version:"0.1.0",currentIndent:0,indentSize:2,loggers:[],separatorLength:120,currentColor:"black",init:function(e){var t,i=this;if(e)for(t in e)i[t]=e[t]},addLogger:function(e){this.loggers.push(e)},removeLogger:function(e){var t;t=this.loggers.indexOf(e),this.loggers.splice(t,1)},buildLog:function(e,t){var i=this,n={};return"undefined"!=typeof e&&null!==e&&e._cobaltLog?e:(n.message=e,n._cobaltLog=!0,n._from=i.from,n._level=t||6,n._levelString=i._levelString(n._level),n._version=i.version,n._timestamp=i.now(),n._indentLevel=i.currentIndent,n._color=i.currentColor,n._separator=!1,n)},extendLog:function(e){var t,i,n=this;t=n.buildLog(void 0,6),e=e||{};for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},buildSeparator:function(e){var t=this;return{_cobaltLog:!0,_separator:!0,_version:t.version,_timestamp:t.now(),_separatorType:e,_indentLevel:t.currentIndent,_color:t.currentColor}},_log:function(e){var t,i,n=this,s=[];for(t=1;t<arguments.length;t++)"undefined"==typeof arguments[t]?s.push(n.buildLog("undefined",e)):s.push(n.buildLog(arguments[t],e));for(i=0;i<n.loggers.length;i++)n.loggers[i].log.apply(n.loggers[i],s)},log:function(){this._log.apply(this,[6].concat(Array.prototype.slice.call(arguments)))},debug:function(){this._log.apply(this,[7].concat(Array.prototype.slice.call(arguments)))},info:function(){this._log.apply(this,[6].concat(Array.prototype.slice.call(arguments)))},notice:function(){this._log.apply(this,[5].concat(Array.prototype.slice.call(arguments)))},warn:function(){this._log.apply(this,[4].concat(Array.prototype.slice.call(arguments)))},error:function(){this._log.apply(this,[3].concat(Array.prototype.slice.call(arguments)))},dir:function(){},time:function(){},timeEnd:function(){},groupCollapsed:function(){},groupEnd:function(){},separator:function(e){var t=this;t._log(7,t.buildSeparator(e))},space:function(e){var t,i=this;for("undefined"==typeof e&&(e=1),t=0;e>t;t++)i.log(" ");return i},indent:function(e){var t=this;return"function"==typeof e?(t.currentIndent=t.currentIndent+t.indentSize,e(),t.currentIndent=t.currentIndent-t.indentSize):t.currentIndent=t.currentIndent+t.indentSize,t},outdent:function(e){var t=this;return"function"==typeof e?(t.currentIndent=t.currentIndent-t.indentSize,t.currentIndent<0&&(t.currentIndent=0),e(),t.currentIndent=t.currentIndent+t.indentSize):(t.currentIndent=t.currentIndent-t.indentSize,t.currentIndent<0&&(t.currentIndent=0)),t},color:function(e,t){var i=this,n=i.currentColor;return"function"==typeof t?(i.currentColor=e,t(),i.currentColor=n):i.currentColor=e,i},now:function(){return"undefined"!=typeof performance&&performance.timing?performance.timing.navigationStart+performance.now():"undefined"!=typeof s?1e3*s.nowDouble():Date.now()},_levelString:function(e){switch(e){case 0:return"PANIC";case 1:return"ALERT";case 2:return"CRIT";case 3:return"ERROR";case 4:return"WARN";case 5:return"NOTICE";case 6:return"INFO";case 7:return"DEBUG"}}}}),r.Console.__objectSpy&&r.Console.__objectSpy.destroy(),"function"==typeof require?(e.Formatter=r.Formatter,e.Logger=r.Logger,e.Console=r.Console,e.now=r.now,e.stringify=r.stringify):e.Cobalt=r}("undefined"!=typeof window?window:"undefined"!=typeof module.exports?module.exports:self),Class("EMPEngine")({prototype:{cobaltInstance:null,lithium:null,init:function(e){var t,i=this;if(e)for(t in e)i[t]=e[t]},_engine:function(e){var t,i,n,s=this,r={error:e.error.message,frame:"N/A",url:window.location.href,line:e.error.lineNumber,site_id:window._pl_userInfo.id,user_agent:window.navigator.userAgent,scoped_class_name:e.scope.constructor.className||e.scope.className};n={fileName:e.error.fileName,lineNumber:e.error.lineNumber,columnNumber:e.error.columnNumber,message:e.error.message,stack:e.error.stack&&e.error.stack.split(/\n/)},t=e.args.map(function(e){return{type:typeof e,value:"string"==typeof e||"number"==typeof e?e:String(e)}}),i={},Object.keys(e.scope).forEach(function(t){i[t]="string"==typeof e.scope[t]||"number"==typeof e.scope[t]?e.scope[t]:String(e.scope[t])}),r.meta={userIp:window.userIp,sessionId:window.placeitTrackerId,previousError:s.lithium.previousError,errorObj:n,argumentsObj:t,scopeObj:i,frameName:"N/A",className:e.spy.targetObject.constructor.className||e.spy.targetObject.className,scopedClassName:e.scope.constructor.className||e.scope.className,methodName:e.spy.methodName,originalMethod:e.spy.originalMethod.toString(),targetObject:e.spy.targetObject,objectHasMethod:e.spy.objectHasMethod,events:s.lithium.events,nitrogen:!0,isPublished:window._stageData&&window._stageData.stage_data&&window._stageData.stage_data.is_published||0,tags:e.error.tags},s.lithium.previousError.push(n.message),s.lithium.previousError.length>10&&s.lithium.previousError.shift(),s.cobaltInstance.error({error:r,__skipConsole:!0})}}}),EMPEngine.__objectSpy&&EMPEngine.__objectSpy.destroy(),Li.Engine.error.push(empLoader),window.onerror=function(e,t,i,n,s){"undefined"==typeof empLogger&&(empLogger=new Cobalt.Console({from:"Public Page",loggers:[new Cobalt.Logger.EMPLogger]})),empLogger.log({error:{error:e,url:t||window.location.href,line:i,column:n,site_id:window._pl_userInfo.id,user_agent:window.navigator.userAgent,frame:"Placeit",meta:{history:window.Li.stack,errorObj:s,userIp:window.userIp,sessionId:window.placeitTrackerId,trackerId:window.placeitTrackerId,isPublished:window._stageData&&window._stageData.stage_data&&window._stageData.stage_data.is_published||0,tags:s.tags}}})},Class(Cobalt.Logger,"EMPLogger")({prototype:{_prevEvent:{},init:function(e){var t,i=this;if(e)for(t in e)i[t]=e[t]},log:function(e){e.message.hasOwnProperty("error")&&this._postEvent(e.message.error)},_formatErrorForNewRelic:function(e){var t={},i=e.meta||{},n=Helpers.App.getNetworkData();"object"!=typeof i.errorObj&&(i.errorObj={},i.errorObj.message=e.error,i.errorObj.stack=[]),i.previousError=i.previousError?i.previousError:[];var s=function(e){try{return JSON.stringify(e)}catch(t){return}};try{t.environment=window.environment,t.origin="placeit",t._pl_error=e.error,t._pl_url=e.url,t._pl_site_id=e.site_id,t._pl_user_agent=e.user_agent,t._pl_scopedClassName=e.scoped_class_name,t._pl_argumentsObject=s(i.argumentsObject),t._pl_userIp=i.userIp,t._pl_sessionId=i.sessionId,t._pl_className=i.className,t._pl_methodName=i.methodName,t._pl_originalMethod=i.originalMethod,t._pl_objectHasMethod=i.objectHasMethod,t._pl_isPublished=i.isPublished,t._pl_lithium_stack=window.Li.stack.join("\n"),t._pl_scopeObject=s(i.scopeObject),t._pl_targetObject=s(i.targetObject),t._pl_events=s(i.events),t._pl_line=e.line,t._pl_column=e.column,t._pl_previousError=i.previousError.join("\n"),t._pl_errorObj_message=i.errorObj.message,t._pl_errorObj_stack=s(i.errorObj.stack),t._pl_tags=s(i.tags),t.networkEffectiveType=n.effectiveType,t.downlink=n.downlink,t.rtt=n.rtt,t.saveNetworkData=n.saveData,t.deviceMemory=navigator.deviceMemory}finally{return t}},_postEvent:function(e){var t=this;"development"!==window.environment&&(t._prevEvent===e?clearTimeout(t._senderTimeout):t._prevEvent=e,t._senderTimeout=setTimeout(function(){window.newrelic.noticeError(e.error,t._formatErrorForNewRelic(e))},100))}}}),/* @preserve
 * The MIT License (MIT)
 *
 * Copyright (c) 2013-2015 Petka Antonov
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Promise=e()}}(function(){return function e(t,i,n){function s(o,a){if(!i[o]){if(!t[o]){var l="function"==typeof _dereq_&&_dereq_;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){var i=t[o][1][e];return s(i?i:e)},u,u.exports,e,t,i,n)}return i[o].exports}for(var r="function"==typeof _dereq_&&_dereq_,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(e,t,i){"use strict";t.exports=function(e){function t(e){var t=new i(e),n=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),n}var i=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,t,i){"use strict";function n(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=c}function s(e,t,i){this._lateQueue.push(e,t,i),this._queueTick()}function r(e,t,i){this._normalQueue.push(e,t,i),this._queueTick()}function o(e){this._normalQueue._pushOne(e),this._queueTick()}var a;try{throw new Error}catch(l){a=l}var c=e("./schedule"),u=e("./queue"),d=e("./util");n.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},n.prototype.hasCustomScheduler=function(){return this._customScheduler},n.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},n.prototype.disableTrampolineIfNecessary=function(){d.hasDevTools&&(this._trampolineEnabled=!1)},n.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},n.prototype.fatalError=function(e,t){t?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},n.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(i){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},d.hasDevTools?(n.prototype.invokeLater=function(e,t,i){this._trampolineEnabled?s.call(this,e,t,i):this._schedule(function(){setTimeout(function(){e.call(t,i)},100)})},n.prototype.invoke=function(e,t,i){this._trampolineEnabled?r.call(this,e,t,i):this._schedule(function(){e.call(t,i)})},n.prototype.settlePromises=function(e){this._trampolineEnabled?o.call(this,e):this._schedule(function(){e._settlePromises()})}):(n.prototype.invokeLater=s,n.prototype.invoke=r,n.prototype.settlePromises=o),n.prototype.invokeFirst=function(e,t,i){this._normalQueue.unshift(e,t,i),this._queueTick()},n.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var i=e.shift(),n=e.shift();t.call(i,n)}else t._settlePromises()}},n.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},n.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},n.prototype._reset=function(){this._isTickUsed=!1},t.exports=n,t.exports.firstLineError=a},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,i){"use strict";t.exports=function(e,t,i,n){var s=!1,r=function(e,t){this._reject(t)},o=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(r,r,null,this,e)},a=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)},l=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(r){s||(s=!0,e.prototype._propagateFrom=n.propagateFromFunction(),e.prototype._boundValue=n.boundValueFunction());var c=i(r),u=new e(t);u._propagateFrom(this,1);var d=this._target();if(u._setBoundTo(c),c instanceof e){var h={promiseRejectionQueued:!1,promise:u,target:d,bindingPromise:c};d._then(t,o,void 0,u,h),c._then(a,l,void 0,u,h),u._setOnCancel(c)}else u._resolveCallback(d);return u},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},e.bind=function(t,i){return e.resolve(i).bind(t)}}},{}],4:[function(e,t,i){"use strict";function n(){try{Promise===r&&(Promise=s)}catch(e){}return r}var s;"undefined"!=typeof Promise&&(s=Promise);var r=e("./promise")();r.noConflict=n,t.exports=r},{"./promise":22}],5:[function(e,t,i){"use strict";var n=Object.create;if(n){var s=n(null),r=n(null);s[" size"]=r[" size"]=0}t.exports=function(t){function i(e,i){var n;if(null!=e&&(n=e[i]),"function"!=typeof n){var s="Object "+a.classString(e)+" has no method '"+a.toString(i)+"'";throw new t.TypeError(s)}return n}function n(e){var t=this.pop(),n=i(e,t);return n.apply(e,this)}function s(e){return e[this]}function r(e){var t=+this;return 0>t&&(t=Math.max(0,t+e.length)),e[t]}var o,a=e("./util"),l=a.canEvaluate;a.isIdentifier,t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(n,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t,i="number"==typeof e;if(i)t=r;else if(l){var n=o(e);t=null!==n?n:s}else t=s;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,i){"use strict";t.exports=function(t,i,n,s){var r=e("./util"),o=r.tryCatch,a=r.errorObj,l=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!s.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var i=e._cancellationParent;if(null==i||!i._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=i}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(r.isArray(e))for(var i=0;i<e.length;++i)this._doInvokeOnCancel(e[i],t);else if(void 0!==e)if("function"==typeof e){if(!t){var n=o(e).call(this._boundValue());n===a&&(this._attachExtraTrace(n.e),l.throwLater(n.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,i){"use strict";t.exports=function(t){function i(e,i,a){return function(l){var c=a._boundValue();e:for(var u=0;u<e.length;++u){var d=e[u];if(d===Error||null!=d&&d.prototype instanceof Error){if(l instanceof d)return r(i).call(c,l)}else if("function"==typeof d){var h=r(d).call(c,l);if(h===o)return h;if(h)return r(i).call(c,l)}else if(n.isObject(l)){for(var p=s(d),f=0;f<p.length;++f){var m=p[f];if(d[m]!=l[m])continue e}return r(i).call(c,l)}}return t}}var n=e("./util"),s=e("./es5").keys,r=n.tryCatch,o=n.errorObj;return i}},{"./es5":13,"./util":36}],8:[function(e,t,i){"use strict";t.exports=function(e){function t(){this._trace=new t.CapturedTrace(n())}function i(){return s?new t:void 0}function n(){var e=r.length-1;return e>=0?r[e]:void 0}var s=!1,r=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=r.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=i,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var i=e.prototype._pushContext,r=e.prototype._popContext,o=e._peekContext,a=e.prototype._peekContext,l=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=i,e.prototype._popContext=r,e._peekContext=o,e.prototype._peekContext=a,e.prototype._promiseCreated=l,s=!1},s=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=n,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(e,t,i){"use strict";t.exports=function(t,i){function n(e,t){return{promise:t}}function s(){return!1}function r(e,t,i){var n=this;try{e(t,i,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+$.toString(e));n._attachCancellationCallback(e)})}catch(s){return s}}function o(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?$.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function a(){return this._onCancelField}function l(e){this._onCancelField=e}function c(){this._cancellationParent=void 0,this._onCancelField=void 0}function u(e,t){if(0!==(1&t)){this._cancellationParent=e;var i=e._branchesRemainingToCancel;void 0===i&&(i=0),e._branchesRemainingToCancel=i+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function d(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function h(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function p(){this._trace=new D(this._peekContext())}function f(e,t){if(H(e)){var i=this._trace;if(void 0!==i&&t&&(i=i._parent),void 0!==i)i.attachExtraTrace(e);else if(!e.__stackCleaned__){var n=S(e);$.notEnumerableProp(e,"stack",n.message+"\n"+n.stack.join("\n")),$.notEnumerableProp(e,"__stackCleaned__",!0)}}}function m(e,t,i,n,s){if(void 0===e&&null!==t&&X){if(void 0!==s&&s._returnedNonUndefined())return;if(0===(65535&n._bitField))return;i&&(i+=" ");var r="",o="";if(t._trace){for(var a=t._trace.stack.split("\n"),l=w(a),c=l.length-1;c>=0;--c){var u=l[c];if(!F.test(u)){var d=u.match(j);d&&(r="at "+d[1]+":"+d[2]+":"+d[3]+" ");break}}if(l.length>0)for(var h=l[0],c=0;c<a.length;++c)if(a[c]===h){c>0&&(o="\n"+a[c-1]);break}}var p="a promise was created in a "+i+"handler "+r+"but was not returned from it, see http://goo.gl/rRqMUw"+o;n._warn(p,!0,t)}}function g(e,t){var i=e+" is deprecated and will be removed in a future version.";return t&&(i+=" Use "+t+" instead."),v(i)}function v(e,i,n){if(re.warnings){var s,r=new U(e);if(i)n._attachExtraTrace(r);else if(re.longStackTraces&&(s=t._peekContext()))s.attachExtraTrace(r);else{var o=S(r);r.stack=o.message+"\n"+o.stack.join("\n")}ee("warning",r)||T(r,"",!0)}}function y(e,t){for(var i=0;i<t.length-1;++i)t[i].push("From previous event:"),t[i]=t[i].join("\n");return i<t.length&&(t[i]=t[i].join("\n")),e+"\n"+t.join("\n")}function b(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function _(e){for(var t=e[0],i=1;i<e.length;++i){for(var n=e[i],s=t.length-1,r=t[s],o=-1,a=n.length-1;a>=0;--a)if(n[a]===r){o=a;break}for(var a=o;a>=0;--a){var l=n[a];if(t[s]!==l)break;t.pop(),s--}t=n}}function w(e){for(var t=[],i=0;i<e.length;++i){var n=e[i],s="    (No stack trace)"===n||z.test(n),r=s&&ie(n);s&&!r&&(V&&" "!==n.charAt(0)&&(n="    "+n),t.push(n))}return t}function C(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),i=0;i<t.length;++i){var n=t[i];if("    (No stack trace)"===n||z.test(n))break}return i>0&&(t=t.slice(i)),t}function S(e){var t=e.stack,i=e.toString();return t="string"==typeof t&&t.length>0?C(e):["    (No stack trace)"],{message:i,stack:w(t)}}function T(e,t,i){if("undefined"!=typeof console){var n;if($.isObject(e)){var s=e.stack;n=t+W(s,e)}else n=t+String(e);"function"==typeof M?M(n,i):("function"==typeof console.log||"object"==typeof console.log)&&console.log(n)}}function k(e,t,i,n){var s=!1;try{"function"==typeof t&&(s=!0,"rejectionHandled"===e?t(n):t(i,n))}catch(r){R.throwLater(r)}"unhandledRejection"===e?ee(e,i,n)||s||T(i,"Unhandled rejection "):ee(e,n)}function E(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():$.toString(e);var i=/\[object [a-zA-Z0-9$_]+\]/;if(i.test(t))try{var n=JSON.stringify(e);t=n}catch(s){}0===t.length&&(t="(empty array)")}return"(<"+I(t)+">, no stack trace)"}function I(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function x(){return"function"==typeof se}function P(e){var t=e.match(ne);return t?{fileName:t[1],line:parseInt(t[2],10)}:void 0}function A(e,t){if(x()){for(var i,n,s=e.stack.split("\n"),r=t.stack.split("\n"),o=-1,a=-1,l=0;l<s.length;++l){var c=P(s[l]);if(c){i=c.fileName,o=c.line;break}}for(var l=0;l<r.length;++l){var c=P(r[l]);if(c){n=c.fileName,a=c.line;break}}0>o||0>a||!i||!n||i!==n||o>=a||(ie=function(e){if(B.test(e))return!0;var t=P(e);return t&&t.fileName===i&&o<=t.line&&t.line<=a?!0:!1})}}function D(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);se(this,D),t>32&&this.uncycle()}var L,O,M,N=t._getDomain,R=t._async,U=e("./errors").Warning,$=e("./util"),H=$.canAttachTrace,B=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,F=/\((?:timers\.js):\d+:\d+\)/,j=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,z=null,W=null,V=!1,q=!(0==$.env("BLUEBIRD_DEBUG")||!$.env("BLUEBIRD_DEBUG")&&"development"!==$.env("NODE_ENV")),G=!(0==$.env("BLUEBIRD_WARNINGS")||!q&&!$.env("BLUEBIRD_WARNINGS")),Y=!(0==$.env("BLUEBIRD_LONG_STACK_TRACES")||!q&&!$.env("BLUEBIRD_LONG_STACK_TRACES")),X=0!=$.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(G||!!$.env("BLUEBIRD_W_FORGOTTEN_RETURN"));t.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},t.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),R.invokeLater(this._notifyUnhandledRejection,this,void 0))},t.prototype._notifyUnhandledRejectionIsHandled=function(){k("rejectionHandled",L,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),k("unhandledRejection",O,e,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(e,t,i){return v(e,t,i||this)},t.onPossiblyUnhandledRejection=function(e){var t=N();O="function"==typeof e?null===t?e:$.domainBind(t,e):void 0},t.onUnhandledRejectionHandled=function(e){var t=N();L="function"==typeof e?null===t?e:$.domainBind(t,e):void 0};var Q=function(){};t.longStackTraces=function(){if(R.haveItemsQueued()&&!re.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!re.longStackTraces&&x()){var e=t.prototype._captureStackTrace,n=t.prototype._attachExtraTrace;re.longStackTraces=!0,Q=function(){if(R.haveItemsQueued()&&!re.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=n,i.deactivateLongStackTraces(),R.enableTrampoline(),re.longStackTraces=!1},t.prototype._captureStackTrace=p,t.prototype._attachExtraTrace=f,i.activateLongStackTraces(),R.disableTrampolineIfNecessary()}},t.hasLongStackTraces=function(){return re.longStackTraces&&x()};var K=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return $.global.dispatchEvent(e),function(e,t){var i=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!$.global.dispatchEvent(i)}}if("function"==typeof Event){var e=new Event("CustomEvent");return $.global.dispatchEvent(e),function(e,t){var i=new Event(e.toLowerCase(),{cancelable:!0});return i.detail=t,!$.global.dispatchEvent(i)}}var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),$.global.dispatchEvent(e),function(e,t){var i=document.createEvent("CustomEvent");return i.initCustomEvent(e.toLowerCase(),!1,!0,t),!$.global.dispatchEvent(i)}}catch(t){}return function(){return!1}}(),J=function(){return $.isNode?function(){return process.emit.apply(process,arguments)}:$.global?function(e){var t="on"+e.toLowerCase(),i=$.global[t];return i?(i.apply($.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}(),Z={promiseCreated:n,promiseFulfilled:n,promiseRejected:n,promiseResolved:n,promiseCancelled:n,promiseChained:function(e,t,i){return{promise:t,child:i}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,i){return{reason:t,promise:i}},rejectionHandled:n},ee=function(e){var t=!1;try{t=J.apply(null,arguments)}catch(i){R.throwLater(i),t=!0}var n=!1;try{n=K(e,Z[e].apply(null,arguments))}catch(i){R.throwLater(i),n=!0}return n||t};t.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&Q()),"warnings"in e){var i=e.warnings;re.warnings=!!i,X=re.warnings,$.isObject(i)&&"wForgottenReturn"in i&&(X=!!i.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!re.cancellation){if(R.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=c,t.prototype._propagateFrom=u,t.prototype._onCancel=a,t.prototype._setOnCancel=l,t.prototype._attachCancellationCallback=o,t.prototype._execute=r,te=u,re.cancellation=!0}"monitoring"in e&&(e.monitoring&&!re.monitoring?(re.monitoring=!0,t.prototype._fireEvent=ee):!e.monitoring&&re.monitoring&&(re.monitoring=!1,t.prototype._fireEvent=s))},t.prototype._fireEvent=s,t.prototype._execute=function(e,t,i){try{e(t,i)}catch(n){return n}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(e){},t.prototype._attachCancellationCallback=function(e){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(e,t){};var te=d,ie=function(){return!1},ne=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;$.inherits(D,Error),i.CapturedTrace=D,D.prototype.uncycle=function(){var e=this._length;if(!(2>e)){for(var t=[],i={},n=0,s=this;void 0!==s;++n)t.push(s),s=s._parent;e=this._length=n;for(var n=e-1;n>=0;--n){var r=t[n].stack;void 0===i[r]&&(i[r]=n)}for(var n=0;e>n;++n){var o=t[n].stack,a=i[o];if(void 0!==a&&a!==n){a>0&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[n]._parent=void 0,t[n]._length=1;var l=n>0?t[n-1]:this;e-1>a?(l._parent=t[a+1],l._parent.uncycle(),l._length=l._parent._length+1):(l._parent=void 0,l._length=1);for(var c=l._length+1,u=n-2;u>=0;--u)t[u]._length=c,c++;return}}}},D.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=S(e),i=t.message,n=[t.stack],s=this;void 0!==s;)n.push(w(s.stack.split("\n"))),s=s._parent;_(n),b(n),$.notEnumerableProp(e,"stack",y(i,n)),$.notEnumerableProp(e,"__stackCleaned__",!0)}};var se=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():E(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,z=e,W=t;var i=Error.captureStackTrace;return ie=function(e){return B.test(e)},function(e,t){Error.stackTraceLimit+=6,i(e,t),Error.stackTraceLimit-=6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return z=/@/,W=t,V=!0,function(e){e.stack=(new Error).stack};var s;try{throw new Error}catch(r){s="stack"in r}return"stack"in n||!s||"number"!=typeof Error.stackTraceLimit?(W=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?E(t):t.toString()},null):(z=e,W=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(M=function(e){console.warn(e)},$.isNode&&process.stderr.isTTY?M=function(e,t){var i=t?"[33m":"[31m";console.warn(i+e+"[0m\n")}:$.isNode||"string"!=typeof(new Error).stack||(M=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var re={warnings:G,longStackTraces:!1,cancellation:!1,monitoring:!1};return Y&&t.longStackTraces(),{longStackTraces:function(){return re.longStackTraces},warnings:function(){return re.warnings},cancellation:function(){return re.cancellation},monitoring:function(){return re.monitoring},propagateFromFunction:function(){return te},boundValueFunction:function(){return h},checkForgottenReturns:m,setBounds:A,warn:v,deprecated:g,CapturedTrace:D,fireDomEvent:K,fireGlobalEvent:J}}},{"./errors":12,"./util":36}],10:[function(e,t,i){"use strict";t.exports=function(e){function t(){return this.value}function i(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(i){return i instanceof e&&i.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:i},void 0)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(i,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,i,void 0,{reason:e},void 0);var t=arguments[1],n=function(){throw t};return this.caught(e,n)},e.prototype.catchReturn=function(i){if(arguments.length<=1)return i instanceof e&&i.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:i},void 0);var n=arguments[1];n instanceof e&&n.suppressUnhandledRejections();var s=function(){return n};return this.caught(i,s)}}},{}],11:[function(e,t,i){"use strict";t.exports=function(e,t){function i(){return r(this)}function n(e,i){return s(e,i,t,t)}var s=e.reduce,r=e.all;e.prototype.each=function(e){return s(this,e,t,0)._then(i,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return s(this,e,t,t)},e.each=function(e,n){return s(e,n,t,0)._then(i,void 0,void 0,e,void 0)},e.mapSeries=n}},{}],12:[function(e,t,i){"use strict";function n(e,t){function i(n){return this instanceof i?(d(this,"message","string"==typeof n?n:t),d(this,"name",e),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new i(n)}return u(i,Error),i}function s(e){return this instanceof s?(d(this,"name","OperationalError"),d(this,"message",e),this.cause=e,this.isOperational=!0,void(e instanceof Error?(d(this,"message",e.message),d(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new s(e)}var r,o,a=e("./es5"),l=a.freeze,c=e("./util"),u=c.inherits,d=c.notEnumerableProp,h=n("Warning","warning"),p=n("CancellationError","cancellation error"),f=n("TimeoutError","timeout error"),m=n("AggregateError","aggregate error");try{r=TypeError,o=RangeError}catch(g){r=n("TypeError","type error"),o=n("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<v.length;++y)"function"==typeof Array.prototype[v[y]]&&(m.prototype[v[y]]=Array.prototype[v[y]]);a.defineProperty(m.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),m.prototype.isOperational=!0;var b=0;m.prototype.toString=function(){var e=Array(4*b+1).join(" "),t="\n"+e+"AggregateError of:\n";b++,e=Array(4*b+1).join(" ");for(var i=0;i<this.length;++i){for(var n=this[i]===this?"[Circular AggregateError]":this[i]+"",s=n.split("\n"),r=0;r<s.length;++r)s[r]=e+s[r];n=s.join("\n"),t+=n+"\n"}return b--,t},u(s,Error);var _=Error.__BluebirdErrorTypes__;_||(_=l({CancellationError:p,TimeoutError:f,OperationalError:s,RejectionError:s,AggregateError:m}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:o,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(e,t,i){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var i=Object.getOwnPropertyDescriptor(e,t);return!(i&&!i.writable&&!i.set)}};else{var s={}.hasOwnProperty,r={}.toString,o={}.constructor.prototype,a=function(e){var t=[];for(var i in e)s.call(e,i)&&t.push(i);return t},l=function(e,t){return{value:e[t]}},c=function(e,t,i){return e[t]=i.value,e},u=function(e){return e},d=function(e){try{return Object(e).constructor.prototype}catch(t){return o}},h=function(e){try{return"[object Array]"===r.call(e)}catch(t){return!1}};t.exports={isArray:h,keys:a,names:a,defineProperty:c,getDescriptor:l,freeze:u,getPrototypeOf:d,isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,i){"use strict";t.exports=function(e,t){var i=e.map;e.prototype.filter=function(e,n){return i(this,e,n,t)},e.filter=function(e,n,s){return i(e,n,s,t)}}},{}],15:[function(e,t,i){"use strict";t.exports=function(t,i){function n(e,t,i){this.promise=e,this.type=t,this.handler=i,this.called=!1,this.cancelPromise=null}function s(e){this.finallyHandler=e}function r(e,t){return null!=e.cancelPromise?(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0):!1}function o(){return l.call(this,this.promise._target()._settledValue())}function a(e){return r(this,e)?void 0:(d.e=e,d)}function l(e){var n=this.promise,l=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?l.call(n._boundValue()):l.call(n._boundValue(),e);if(void 0!==c){n._setReturnedNonUndefined();var h=i(c,n);if(h instanceof t){if(null!=this.cancelPromise){if(h._isCancelled()){var p=new u("late cancellation observer");return n._attachExtraTrace(p),d.e=p,d}h.isPending()&&h._attachCancellationCallback(new s(this))}return h._then(o,a,void 0,this,void 0)}}}return n.isRejected()?(r(this),d.e=e,d):(r(this),e)}var c=e("./util"),u=t.CancellationError,d=c.errorObj;return n.prototype.isFinallyHandler=function(){return 0===this.type},s.prototype._resultCancelled=function(){r(this.finallyHandler)},t.prototype._passThrough=function(e,t,i,s){return"function"!=typeof e?this.then():this._then(i,s,void 0,new n(this,t,e),void 0)},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,l,l)},t.prototype.tap=function(e){return this._passThrough(e,1,l)},n}},{"./util":36}],16:[function(e,t,i){"use strict";t.exports=function(t,i,n,s,r,o){function a(e,i,n){for(var r=0;r<i.length;++r){n._pushContext();var o=p(i[r])(e);if(n._popContext(),o===h){n._pushContext();var a=t.reject(h.e);return n._popContext(),a}var l=s(o,n);if(l instanceof t)return l}return null}function l(e,i,s,r){if(o.cancellation()){var a=new t(n),l=this._finallyPromise=new t(n);this._promise=a.lastly(function(){return l}),a._captureStackTrace(),a._setOnCancel(this)}else{var c=this._promise=new t(n);c._captureStackTrace()}this._stack=r,this._generatorFunction=e,this._receiver=i,this._generator=void 0,this._yieldHandlers="function"==typeof s?[s].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}var c=e("./errors"),u=c.TypeError,d=e("./util"),h=d.errorObj,p=d.tryCatch,f=[];d.inherits(l,r),l.prototype._isResolved=function(){return null===this._promise},l.prototype._cleanup=function(){this._promise=this._generator=null,o.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},l.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,i="undefined"!=typeof this._generator["return"];if(i)this._promise._pushContext(),e=p(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var n=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),e=p(this._generator["throw"]).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},l.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=p(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},l.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=p(this._generator["throw"]).call(this._generator,e);this._promise._popContext(),this._continue(t)},l.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},l.prototype.promise=function(){return this._promise},l.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},l.prototype._continue=function(e){var i=this._promise;if(e===h)return this._cleanup(),this._cancellationPhase?i.cancel():i._rejectCallback(e.e,!1);var n=e.value;if(e.done===!0)return this._cleanup(),this._cancellationPhase?i.cancel():i._resolveCallback(n);var r=s(n,this._promise);if(!(r instanceof t)&&(r=a(r,this._yieldHandlers,this._promise),null===r))return void this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",n)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));r=r._target();var o=r._bitField;0===(50397184&o)?(this._yieldedPromise=r,r._proxy(this,null)):0!==(33554432&o)?t._async.invoke(this._promiseFulfilled,this,r._value()):0!==(16777216&o)?t._async.invoke(this._promiseRejected,this,r._reason()):this._promiseCancelled()},t.coroutine=function(e,t){if("function"!=typeof e)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var i=Object(t).yieldHandler,n=l,s=(new Error).stack;return function(){var t=e.apply(this,arguments),r=new n(void 0,void 0,i,s),o=r.promise();return r._generator=t,r._promiseFulfilled(void 0),o}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new u("expecting a function but got "+d.classString(e));f.push(e)},t.spawn=function(e){if(o.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return i("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new l(e,this),s=n.promise();return n._run(t.spawn),s}}},{"./errors":12,"./util":36}],17:[function(e,t,i){"use strict";t.exports=function(t,i,n,s,r,o){var a=e("./util");a.canEvaluate,a.tryCatch,a.errorObj,t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t];var n}var s=[].slice.call(arguments);e&&s.pop();var n=new i(s).promise();return void 0!==e?n.spread(e):n;
}}},{"./util":36}],18:[function(e,t,i){"use strict";t.exports=function(t,i,n,s,r,o){function a(e,t,i,n){this.constructor$(e),this._promise._captureStackTrace();var s=c();this._callback=null===s?t:u.domainBind(s,t),this._preservedValues=n===r?new Array(this.length()):null,this._limit=i,this._inFlight=0,this._queue=[],this._init$(void 0,-2)}function l(e,i,s,r){if("function"!=typeof i)return n("expecting a function but got "+u.classString(i));var o=0;if(void 0!==s){if("object"!=typeof s||null===s)return t.reject(new TypeError("options argument must be an object but it is "+u.classString(s)));if("number"!=typeof s.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(s.concurrency)));o=s.concurrency}return o="number"==typeof o&&isFinite(o)&&o>=1?o:0,new a(e,i,o,r).promise()}var c=t._getDomain,u=e("./util"),d=u.tryCatch,h=u.errorObj;u.inherits(a,i),a.prototype._init=function(){},a.prototype._promiseFulfilled=function(e,i){var n=this._values,r=this.length(),a=this._preservedValues,l=this._limit;if(0>i){if(i=-1*i-1,n[i]=e,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return n[i]=e,this._queue.push(i),!1;null!==a&&(a[i]=e);var c=this._promise,u=this._callback,p=c._boundValue();c._pushContext();var f=d(u).call(p,e,i,r),m=c._popContext();if(o.checkForgottenReturns(f,m,null!==a?"Promise.filter":"Promise.map",c),f===h)return this._reject(f.e),!0;var g=s(f,this._promise);if(g instanceof t){g=g._target();var v=g._bitField;if(0===(50397184&v))return l>=1&&this._inFlight++,n[i]=g,g._proxy(this,-1*(i+1)),!1;if(0===(33554432&v))return 0!==(16777216&v)?(this._reject(g._reason()),!0):(this._cancel(),!0);f=g._value()}n[i]=f}var y=++this._totalResolved;return y>=r?(null!==a?this._filter(n,a):this._resolve(n),!0):!1},a.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,i=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(i[n],n)}},a.prototype._filter=function(e,t){for(var i=t.length,n=new Array(i),s=0,r=0;i>r;++r)e[r]&&(n[s++]=t[r]);n.length=s,this._resolve(n)},a.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return l(this,e,t,null)},t.map=function(e,t,i,n){return l(e,t,i,n)}}},{"./util":36}],19:[function(e,t,i){"use strict";t.exports=function(t,i,n,s,r){var o=e("./util"),a=o.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+o.classString(e));return function(){var n=new t(i);n._captureStackTrace(),n._pushContext();var s=a(e).apply(this,arguments),o=n._popContext();return r.checkForgottenReturns(s,o,"Promise.method",n),n._resolveFromSyncValue(s),n}},t.attempt=t["try"]=function(e){if("function"!=typeof e)return s("expecting a function but got "+o.classString(e));var n=new t(i);n._captureStackTrace(),n._pushContext();var l;if(arguments.length>1){r.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],u=arguments[2];l=o.isArray(c)?a(e).apply(u,c):a(e).call(u,c)}else l=a(e)();var d=n._popContext();return r.checkForgottenReturns(l,d,"Promise.try",n),n._resolveFromSyncValue(l),n},t.prototype._resolveFromSyncValue=function(e){e===o.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,i){"use strict";function n(e){return e instanceof Error&&u.getPrototypeOf(e)===Error.prototype}function s(e){var t;if(n(e)){t=new c(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var i=u.keys(e),s=0;s<i.length;++s){var r=i[s];d.test(r)||(t[r]=e[r])}return t}return o.markAsOriginatingFromRejection(e),e}function r(e,t){return function(i,n){if(null!==e){if(i){var r=s(a(i));e._attachExtraTrace(r),e._reject(r)}else if(t){var o=[].slice.call(arguments,1);e._fulfill(o)}else e._fulfill(n);e=null}}}var o=e("./util"),a=o.maybeWrapAsError,l=e("./errors"),c=l.OperationalError,u=e("./es5"),d=/^(?:name|message|stack|cause)$/;t.exports=r},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,i){"use strict";t.exports=function(t){function i(e,t){var i=this;if(!r.isArray(e))return n.call(i,e,t);var s=a(t).apply(i._boundValue(),[null].concat(e));s===l&&o.throwLater(s.e)}function n(e,t){var i=this,n=i._boundValue(),s=void 0===e?a(t).call(n,null):a(t).call(n,null,e);s===l&&o.throwLater(s.e)}function s(e,t){var i=this;if(!e){var n=new Error(e+"");n.cause=e,e=n}var s=a(t).call(i._boundValue(),e);s===l&&o.throwLater(s.e)}var r=e("./util"),o=t._async,a=r.tryCatch,l=r.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var r=n;void 0!==t&&Object(t).spread&&(r=i),this._then(r,s,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,t,i){"use strict";t.exports=function(){function i(){}function n(e,t){if("function"!=typeof t)throw new y("expecting a function but got "+p.classString(t));if(e.constructor!==s)throw new y("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function s(e){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,e!==_&&(n(this,e),this._resolveFromExecutor(e)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function r(e){this.promise._resolveCallback(e)}function o(e){this.promise._rejectCallback(e,!1)}function a(e){var t=new s(_);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var l,c=function(){return new y("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},u=function(){return new s.PromiseInspection(this._target())},d=function(e){return s.reject(new y(e))},h={},p=e("./util");l=p.isNode?function(){var e=process.domain;return void 0===e&&(e=null),e}:function(){return null},p.notEnumerableProp(s,"_getDomain",l);var f=e("./es5"),m=e("./async"),g=new m;f.defineProperty(s,"_async",{value:g});var v=e("./errors"),y=s.TypeError=v.TypeError;s.RangeError=v.RangeError;var b=s.CancellationError=v.CancellationError;s.TimeoutError=v.TimeoutError,s.OperationalError=v.OperationalError,s.RejectionError=v.OperationalError,s.AggregateError=v.AggregateError;var _=function(){},w={},C={},S=e("./thenables")(s,_),T=e("./promise_array")(s,_,S,d,i),k=e("./context")(s),E=k.create,I=e("./debuggability")(s,k),x=(I.CapturedTrace,e("./finally")(s,S)),P=e("./catch_filter")(C),A=e("./nodeback"),D=p.errorObj,L=p.tryCatch;return s.prototype.toString=function(){return"[object Promise]"},s.prototype.caught=s.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var i,n=new Array(t-1),s=0;for(i=0;t-1>i;++i){var r=arguments[i];if(!p.isObject(r))return d("expecting an object but got A catch statement predicate "+p.classString(r));n[s++]=r}return n.length=s,e=arguments[i],this.then(void 0,P(n,e,this))}return this.then(void 0,e)},s.prototype.reflect=function(){return this._then(u,u,void 0,this,void 0)},s.prototype.then=function(e,t){if(I.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var i=".then() only accepts functions but was passed: "+p.classString(e);arguments.length>1&&(i+=", "+p.classString(t)),this._warn(i)}return this._then(e,t,void 0,void 0,void 0)},s.prototype.done=function(e,t){var i=this._then(e,t,void 0,void 0,void 0);i._setIsFinal()},s.prototype.spread=function(e){return"function"!=typeof e?d("expecting a function but got "+p.classString(e)):this.all()._then(e,void 0,void 0,w,void 0)},s.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},s.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new T(this).promise()},s.prototype.error=function(e){return this.caught(p.originatesFromRejection,e)},s.getNewLibraryCopy=t.exports,s.is=function(e){return e instanceof s},s.fromNode=s.fromCallback=function(e){var t=new s(_);t._captureStackTrace();var i=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,n=L(e)(A(t,i));return n===D&&t._rejectCallback(n.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},s.all=function(e){return new T(e).promise()},s.cast=function(e){var t=S(e);return t instanceof s||(t=new s(_),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},s.resolve=s.fulfilled=s.cast,s.reject=s.rejected=function(e){var t=new s(_);return t._captureStackTrace(),t._rejectCallback(e,!0),t},s.setScheduler=function(e){if("function"!=typeof e)throw new y("expecting a function but got "+p.classString(e));return g.setScheduler(e)},s.prototype._then=function(e,t,i,n,r){var o=void 0!==r,a=o?r:new s(_),c=this._target(),u=c._bitField;o||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===n&&0!==(2097152&this._bitField)&&(n=0!==(50397184&u)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var d=l();if(0!==(50397184&u)){var h,f,m=c._settlePromiseCtx;0!==(33554432&u)?(f=c._rejectionHandler0,h=e):0!==(16777216&u)?(f=c._fulfillmentHandler0,h=t,c._unsetRejectionIsUnhandled()):(m=c._settlePromiseLateCancellationObserver,f=new b("late cancellation observer"),c._attachExtraTrace(f),h=t),g.invoke(m,c,{handler:null===d?h:"function"==typeof h&&p.domainBind(d,h),promise:a,receiver:n,value:f})}else c._addCallbacks(e,t,a,n,d);return a},s.prototype._length=function(){return 65535&this._bitField},s.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},s.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},s.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},s.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},s.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},s.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},s.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},s.prototype._isFinal=function(){return(4194304&this._bitField)>0},s.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},s.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},s.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},s.prototype._setAsyncGuaranteed=function(){g.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},s.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];return t===h?void 0:void 0===t&&this._isBound()?this._boundValue():t},s.prototype._promiseAt=function(e){return this[4*e-4+2]},s.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},s.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},s.prototype._boundValue=function(){},s.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),i=e._rejectionHandler0,n=e._promise0,s=e._receiverAt(0);void 0===s&&(s=h),this._addCallbacks(t,i,n,s,null)},s.prototype._migrateCallbackAt=function(e,t){var i=e._fulfillmentHandlerAt(t),n=e._rejectionHandlerAt(t),s=e._promiseAt(t),r=e._receiverAt(t);void 0===r&&(r=h),this._addCallbacks(i,n,s,r,null)},s.prototype._addCallbacks=function(e,t,i,n,s){var r=this._length();if(r>=65531&&(r=0,this._setLength(0)),0===r)this._promise0=i,this._receiver0=n,"function"==typeof e&&(this._fulfillmentHandler0=null===s?e:p.domainBind(s,e)),"function"==typeof t&&(this._rejectionHandler0=null===s?t:p.domainBind(s,t));else{var o=4*r-4;this[o+2]=i,this[o+3]=n,"function"==typeof e&&(this[o+0]=null===s?e:p.domainBind(s,e)),"function"==typeof t&&(this[o+1]=null===s?t:p.domainBind(s,t))}return this._setLength(r+1),r},s.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},s.prototype._resolveCallback=function(e,t){if(0===(117506048&this._bitField)){if(e===this)return this._rejectCallback(c(),!1);var i=S(e,this);if(!(i instanceof s))return this._fulfill(e);t&&this._propagateFrom(i,2);var n=i._target();if(n===this)return void this._reject(c());var r=n._bitField;if(0===(50397184&r)){var o=this._length();o>0&&n._migrateCallback0(this);for(var a=1;o>a;++a)n._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!==(33554432&r))this._fulfill(n._value());else if(0!==(16777216&r))this._reject(n._reason());else{var l=new b("late cancellation observer");n._attachExtraTrace(l),this._reject(l)}}},s.prototype._rejectCallback=function(e,t,i){var n=p.ensureErrorObject(e),s=n===e;if(!s&&!i&&I.warnings()){var r="a promise was rejected with a non-error: "+p.classString(e);this._warn(r,!0)}this._attachExtraTrace(n,t?s:!1),this._reject(e)},s.prototype._resolveFromExecutor=function(e){var t=this;this._captureStackTrace(),this._pushContext();var i=!0,n=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,i)});i=!1,this._popContext(),void 0!==n&&t._rejectCallback(n,!0)},s.prototype._settlePromiseFromHandler=function(e,t,i,n){var s=n._bitField;if(0===(65536&s)){n._pushContext();var r;t===w?i&&"number"==typeof i.length?r=L(e).apply(this._boundValue(),i):(r=D,r.e=new y("cannot .spread() a non-array: "+p.classString(i))):r=L(e).call(t,i);var o=n._popContext();s=n._bitField,0===(65536&s)&&(r===C?n._reject(i):r===D?n._rejectCallback(r.e,!1):(I.checkForgottenReturns(r,o,"",n,this),n._resolveCallback(r)))}},s.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},s.prototype._followee=function(){return this._rejectionHandler0},s.prototype._setFollowee=function(e){this._rejectionHandler0=e},s.prototype._settlePromise=function(e,t,n,r){var o=e instanceof s,a=this._bitField,l=0!==(134217728&a);0!==(65536&a)?(o&&e._invokeInternalOnCancel(),n instanceof x&&n.isFinallyHandler()?(n.cancelPromise=e,L(t).call(n,r)===D&&e._reject(D.e)):t===u?e._fulfill(u.call(n)):n instanceof i?n._promiseCancelled(e):o||e instanceof T?e._cancel():n.cancel()):"function"==typeof t?o?(l&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,r,e)):t.call(n,r,e):n instanceof i?n._isResolved()||(0!==(33554432&a)?n._promiseFulfilled(r,e):n._promiseRejected(r,e)):o&&(l&&e._setAsyncGuaranteed(),0!==(33554432&a)?e._fulfill(r):e._reject(r))},s.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,i=e.promise,n=e.receiver,r=e.value;"function"==typeof t?i instanceof s?this._settlePromiseFromHandler(t,n,r,i):t.call(n,r,i):i instanceof s&&i._reject(r)},s.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},s.prototype._settlePromise0=function(e,t,i){var n=this._promise0,s=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,s,t)},s.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},s.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var i=c();return this._attachExtraTrace(i),this._reject(i)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():g.settlePromises(this))}},s.prototype._reject=function(e){var t=this._bitField;return(117506048&t)>>>16?void 0:(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal()?g.fatalError(e,p.isNode):void((65535&t)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled()))},s.prototype._fulfillPromises=function(e,t){for(var i=1;e>i;i++){var n=this._fulfillmentHandlerAt(i),s=this._promiseAt(i),r=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(s,n,r,t)}},s.prototype._rejectPromises=function(e,t){for(var i=1;e>i;i++){var n=this._rejectionHandlerAt(i),s=this._promiseAt(i),r=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(s,n,r,t)}},s.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!==(16842752&e)){var i=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,i,e),this._rejectPromises(t,i)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,e),this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()},s.prototype._settledValue=function(){var e=this._bitField;return 0!==(33554432&e)?this._rejectionHandler0:0!==(16777216&e)?this._fulfillmentHandler0:void 0},s.defer=s.pending=function(){I.deprecated("Promise.defer","new Promise");var e=new s(_);return{promise:e,resolve:r,reject:o}},p.notEnumerableProp(s,"_makeSelfResolutionError",c),e("./method")(s,_,S,d,I),e("./bind")(s,_,S,I),e("./cancel")(s,T,d,I),e("./direct_resolve")(s),e("./synchronous_inspection")(s),e("./join")(s,T,S,_,g,l),s.Promise=s,s.version="3.4.5",e("./map.js")(s,T,d,S,_,I),e("./call_get.js")(s),e("./using.js")(s,d,S,E,_,I),e("./timers.js")(s,_,I),e("./generators.js")(s,d,_,S,i,I),e("./nodeify.js")(s),e("./promisify.js")(s,_),e("./props.js")(s,T,S,d),e("./race.js")(s,_,S,d),e("./reduce.js")(s,T,d,S,_,I),e("./settle.js")(s,T,I),e("./some.js")(s,T,d),e("./filter.js")(s,_),e("./each.js")(s,_),e("./any.js")(s),p.toFastProperties(s),p.toFastProperties(s.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a(function(){}),a(void 0),a(!1),a(new s(_)),I.setBounds(m.firstLineError,p.lastLineError),s}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,i){"use strict";t.exports=function(t,i,n,s,r){function o(e){switch(e){case-2:return[];case-3:return{}}}function a(e){var n=this._promise=new t(i);e instanceof t&&n._propagateFrom(e,3),n._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var l=e("./util");return l.isArray,l.inherits(a,r),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function c(e,i){var r=n(this._values,this._promise);if(r instanceof t){r=r._target();var a=r._bitField;if(this._values=r,0===(50397184&a))return this._promise._setAsyncGuaranteed(),r._then(c,this._reject,void 0,this,i);if(0===(33554432&a))return 0!==(16777216&a)?this._reject(r._reason()):this._cancel();r=r._value()}if(r=l.asArray(r),null===r){var u=s("expecting an array or an iterable object but got "+l.classString(r)).reason();return void this._promise._rejectCallback(u,!1)}return 0===r.length?void(-5===i?this._resolveEmptyArray():this._resolve(o(i))):void this._iterate(r)},a.prototype._iterate=function(e){var i=this.getActualLength(e.length);this._length=i,this._values=this.shouldCopyValues()?new Array(i):this._values;for(var s=this._promise,r=!1,o=null,a=0;i>a;++a){var l=n(e[a],s);l instanceof t?(l=l._target(),o=l._bitField):o=null,r?null!==o&&l.suppressUnhandledRejections():null!==o?0===(50397184&o)?(l._proxy(this,a),this._values[a]=l):r=0!==(33554432&o)?this._promiseFulfilled(l._value(),a):0!==(16777216&o)?this._promiseRejected(l._reason(),a):this._promiseCancelled(a):r=this._promiseFulfilled(l,a)}r||s._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var i=++this._totalResolved;return i>=this._length?(this._resolve(this._values),!0):!1},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var i=0;i<e.length;++i)e[i]instanceof t&&e[i].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,i){"use strict";t.exports=function(t,i){function n(e){return!C.test(e)}function s(e){try{return e.__isPromisified__===!0}catch(t){return!1}}function r(e,t,i){var n=p.getDataPropertyOrDefault(e,t+i,_);return n?s(n):!1}function o(e,t,i){for(var n=0;n<e.length;n+=2){var s=e[n];if(i.test(s))for(var r=s.replace(i,""),o=0;o<e.length;o+=2)if(e[o]===r)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function a(e,t,i,n){for(var a=p.inheritedDataKeys(e),l=[],c=0;c<a.length;++c){var u=a[c],d=e[u],h=n===S?!0:S(u,d,e);"function"!=typeof d||s(d)||r(e,u,t)||!n(u,d,e,h)||l.push(u,d)}return o(l,t,i),l}function l(e,n,s,r,o,a){function l(){var s=n;n===h&&(s=this);var r=new t(i);r._captureStackTrace();var o="string"==typeof u&&this!==c?this[u]:e,l=f(r,a);try{o.apply(s,m(arguments,l))}catch(d){r._rejectCallback(g(d),!0,!0)}return r._isFateSealed()||r._setAsyncGuaranteed(),r}var c=function(){return this}(),u=e;return"string"==typeof u&&(e=r),p.notEnumerableProp(l,"__isPromisified__",!0),l}function c(e,t,i,n,s){for(var r=new RegExp(T(t)+"$"),o=a(e,t,r,i),l=0,c=o.length;c>l;l+=2){var u=o[l],d=o[l+1],f=u+t;if(n===k)e[f]=k(u,h,u,d,t,s);else{var m=n(d,function(){return k(u,h,u,d,t,s)});p.notEnumerableProp(m,"__isPromisified__",!0),e[f]=m}}return p.toFastProperties(e),e}function u(e,t,i){return k(e,t,void 0,e,null,i)}var d,h={},p=e("./util"),f=e("./nodeback"),m=p.withAppended,g=p.maybeWrapAsError,v=p.canEvaluate,y=e("./errors").TypeError,b="Async",_={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],C=new RegExp("^(?:"+w.join("|")+")$"),S=function(e){return p.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},T=function(e){return e.replace(/([$])/,"\\$")},k=v?d:l;t.promisify=function(e,t){if("function"!=typeof e)throw new y("expecting a function but got "+p.classString(e));if(s(e))return e;t=Object(t);var i=void 0===t.context?h:t.context,r=!!t.multiArgs,o=u(e,i,r);return p.copyDescriptors(e,o,n),o},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var i=!!t.multiArgs,n=t.suffix;"string"!=typeof n&&(n=b);var s=t.filter;"function"!=typeof s&&(s=S);var r=t.promisifier;if("function"!=typeof r&&(r=k),!p.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var o=p.inheritedDataKeys(e),a=0;a<o.length;++a){var l=e[o[a]];"constructor"!==o[a]&&p.isClass(l)&&(c(l.prototype,n,s,r,i),c(l,n,s,r,i))}return c(e,n,s,r,i)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,i){"use strict";t.exports=function(t,i,n,s){function r(e){var t,i=!1;if(void 0!==a&&e instanceof a)t=d(e),i=!0;else{var n=u.keys(e),s=n.length;t=new Array(2*s);for(var r=0;s>r;++r){var o=n[r];t[r]=e[o],t[r+s]=o}}this.constructor$(t),this._isMap=i,this._init$(void 0,-3)}function o(e){var i,o=n(e);return c(o)?(i=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new r(o).promise(),o instanceof t&&i._propagateFrom(o,2),i):s("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,l=e("./util"),c=l.isObject,u=e("./es5");"function"==typeof Map&&(a=Map);var d=function(){function e(e,n){this[t]=e,this[t+i]=n,t++}var t=0,i=0;return function(n){i=n.size,t=0;var s=new Array(2*n.size);return n.forEach(e,s),s}}(),h=function(e){for(var t=new a,i=e.length/2|0,n=0;i>n;++n){var s=e[i+n],r=e[n];t.set(s,r)}return t};l.inherits(r,i),r.prototype._init=function(){},r.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var i=++this._totalResolved;if(i>=this._length){var n;if(this._isMap)n=h(this._values);else{n={};for(var s=this.length(),r=0,o=this.length();o>r;++r)n[this._values[r+s]]=this._values[r]}return this._resolve(n),!0}return!1},r.prototype.shouldCopyValues=function(){return!1},r.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return o(this)},t.props=function(e){return o(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,i){"use strict";function n(e,t,i,n,s){for(var r=0;s>r;++r)i[r+n]=e[r+t],e[r+t]=void 0}function s(e){this._capacity=e,this._length=0,this._front=0}s.prototype._willBeOverCapacity=function(e){return this._capacity<e},s.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var i=this._front+t&this._capacity-1;this[i]=e,this._length=t+1},s.prototype._unshiftOne=function(e){var t=this._capacity;this._checkCapacity(this.length()+1);var i=this._front,n=(i-1&t-1^t)-t;this[n]=e,this._front=n,this._length=this.length()+1},s.prototype.unshift=function(e,t,i){this._unshiftOne(i),this._unshiftOne(t),this._unshiftOne(e)},s.prototype.push=function(e,t,i){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(e),this._pushOne(t),void this._pushOne(i);var s=this._front+n-3;this._checkCapacity(n);var r=this._capacity-1;this[s+0&r]=e,this[s+1&r]=t,this[s+2&r]=i,this._length=n},s.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},s.prototype.length=function(){return this._length},s.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},s.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var i=this._front,s=this._length,r=i+s&t-1;n(this,0,this,t,r)},t.exports=s},{}],27:[function(e,t,i){"use strict";t.exports=function(t,i,n,s){function r(e,r){var l=n(e);if(l instanceof t)return a(l);if(e=o.asArray(e),null===e)return s("expecting an array or an iterable object but got "+o.classString(e));var c=new t(i);void 0!==r&&c._propagateFrom(r,3);for(var u=c._fulfill,d=c._reject,h=0,p=e.length;p>h;++h){var f=e[h];(void 0!==f||h in e)&&t.cast(f)._then(u,d,void 0,c,null)}return c}var o=e("./util"),a=function(e){return e.then(function(t){return r(t,e)})};t.race=function(e){return r(e,void 0)},t.prototype.race=function(){return r(this,void 0)}}},{"./util":36}],28:[function(e,t,i){"use strict";t.exports=function(t,i,n,s,r,o){function a(e,i,n,s){this.constructor$(e);var o=h();this._fn=null===o?i:p.domainBind(o,i),void 0!==n&&(n=t.resolve(n),n._attachCancellationCallback(this)),this._initialValue=n,this._currentCancellable=null,s===r?this._eachValues=Array(this._length):0===s?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function c(e,t,i,s){if("function"!=typeof t)return n("expecting a function but got "+p.classString(t));var r=new a(e,t,i,s);return r.promise()}function u(e){this.accum=e,this.array._gotAccum(e);var i=s(this.value,this.array._promise);return i instanceof t?(this.array._currentCancellable=i,i._then(d,void 0,void 0,this,void 0)):d.call(this,i)}function d(e){var i=this.array,n=i._promise,s=f(i._fn);n._pushContext();var r;r=void 0!==i._eachValues?s.call(n._boundValue(),e,this.index,this.length):s.call(n._boundValue(),this.accum,e,this.index,this.length),r instanceof t&&(i._currentCancellable=r);var a=n._popContext();return o.checkForgottenReturns(r,a,void 0!==i._eachValues?"Promise.each":"Promise.reduce",n),r}var h=t._getDomain,p=e("./util"),f=p.tryCatch;p.inherits(a,i),a.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==r&&this._eachValues.push(e)},a.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},a.prototype._resultCancelled=function(e){return e===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel()))},a.prototype._iterate=function(e){this._values=e;var i,n,s=e.length;if(void 0!==this._initialValue?(i=this._initialValue,n=0):(i=t.resolve(e[0]),n=1),this._currentCancellable=i,!i.isRejected())for(;s>n;++n){var r={accum:null,value:e[n],index:n,length:s,array:this};i=i._then(u,void 0,void 0,r,void 0)}void 0!==this._eachValues&&(i=i._then(this._eachComplete,void 0,void 0,this,void 0)),i._then(l,l,void 0,i,this)},t.prototype.reduce=function(e,t){return c(this,e,t,null)},t.reduce=function(e,t,i,n){return c(e,t,i,n)}}},{"./util":36}],29:[function(e,t,i){"use strict";var n,s=e("./util"),r=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},o=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var a=global.setImmediate,l=process.nextTick;n=s.isRecentNode?function(e){a.call(global,e)}:function(e){l.call(process,e)}}else if("function"==typeof o&&"function"==typeof o.resolve){var c=o.resolve();n=function(e){c.then(e)}}else n="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:r:function(){var e=document.createElement("div"),t={attributes:!0},i=!1,n=document.createElement("div"),s=new MutationObserver(function(){e.classList.toggle("foo"),i=!1});s.observe(n,t);var r=function(){i||(i=!0,n.classList.toggle("foo"))};return function(i){var n=new MutationObserver(function(){n.disconnect(),i()});n.observe(e,t),r()}}();t.exports=n},{"./util":36}],30:[function(e,t,i){"use strict";t.exports=function(t,i,n){function s(e){this.constructor$(e)}var r=t.PromiseInspection,o=e("./util");o.inherits(s,i),s.prototype._promiseResolved=function(e,t){this._values[e]=t;var i=++this._totalResolved;return i>=this._length?(this._resolve(this._values),!0):!1},s.prototype._promiseFulfilled=function(e,t){var i=new r;return i._bitField=33554432,i._settledValueField=e,this._promiseResolved(t,i)},s.prototype._promiseRejected=function(e,t){var i=new r;return i._bitField=16777216,i._settledValueField=e,this._promiseResolved(t,i)},t.settle=function(e){return n.deprecated(".settle()",".reflect()"),new s(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,i){"use strict";t.exports=function(t,i,n){function s(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function r(e,t){if((0|t)!==t||0>t)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var i=new s(e),r=i.promise();return i.setHowMany(t),i.init(),r}var o=e("./util"),a=e("./errors").RangeError,l=e("./errors").AggregateError,c=o.isArray,u={};o.inherits(s,i),s.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=c(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},s.prototype.init=function(){this._initialized=!0,this._init()},s.prototype.setUnwrap=function(){this._unwrap=!0},s.prototype.howMany=function(){return this._howMany},s.prototype.setHowMany=function(e){this._howMany=e},s.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},s.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},s.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},s.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new l,t=this.length();t<this._values.length;++t)this._values[t]!==u&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},s.prototype._fulfilled=function(){return this._totalResolved},s.prototype._rejected=function(){return this._values.length-this.length();
},s.prototype._addRejected=function(e){this._values.push(e)},s.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},s.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},s.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new a(t)},s.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return r(e,t)},t.prototype.some=function(e){return r(this,e)},t._SomePromiseArray=s}},{"./errors":12,"./util":36}],32:[function(e,t,i){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var i=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},s=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},r=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},o=t.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},e.prototype.isPending=function(){return o.call(this._target())},e.prototype.isRejected=function(){return r.call(this._target())},e.prototype.isFulfilled=function(){return s.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return i.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),n.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,i){"use strict";t.exports=function(t,i){function n(e,n){if(u(e)){if(e instanceof t)return e;var s=r(e);if(s===c){n&&n._pushContext();var l=t.reject(s.e);return n&&n._popContext(),l}if("function"==typeof s){if(o(e)){var l=new t(i);return e._then(l._fulfill,l._reject,void 0,l,null),l}return a(e,s,n)}}return e}function s(e){return e.then}function r(e){try{return s(e)}catch(t){return c.e=t,c}}function o(e){try{return d.call(e,"_promise0")}catch(t){return!1}}function a(e,n,s){function r(e){a&&(a._resolveCallback(e),a=null)}function o(e){a&&(a._rejectCallback(e,d,!0),a=null)}var a=new t(i),u=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var d=!0,h=l.tryCatch(n).call(e,r,o);return d=!1,a&&h===c&&(a._rejectCallback(h.e,!0,!0),a=null),u}var l=e("./util"),c=l.errorObj,u=l.isObject,d={}.hasOwnProperty;return n}},{"./util":36}],34:[function(e,t,i){"use strict";t.exports=function(t,i,n){function s(e){this.handle=e}function r(e){return clearTimeout(this.handle),e}function o(e){throw clearTimeout(this.handle),e}var a=e("./util"),l=t.TimeoutError;s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(e){return u(+this).thenReturn(e)},u=t.delay=function(e,r){var o,a;return void 0!==r?(o=t.resolve(r)._then(c,null,null,e,void 0),n.cancellation()&&r instanceof t&&o._setOnCancel(r)):(o=new t(i),a=setTimeout(function(){o._fulfill()},+e),n.cancellation()&&o._setOnCancel(new s(a)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};t.prototype.delay=function(e){return u(e,this)};var d=function(e,t,i){var n;n="string"!=typeof t?t instanceof Error?t:new l("operation timed out"):new l(t),a.markAsOriginatingFromRejection(n),e._attachExtraTrace(n),e._reject(n),null!=i&&i.cancel()};t.prototype.timeout=function(e,t){e=+e;var i,a,l=new s(setTimeout(function(){i.isPending()&&d(i,t,a)},e));return n.cancellation()?(a=this.then(),i=a._then(r,o,void 0,l,void 0),i._setOnCancel(l)):i=this._then(r,o,void 0,l,void 0),i}}},{"./util":36}],35:[function(e,t,i){"use strict";t.exports=function(t,i,n,s,r,o){function a(e){setTimeout(function(){throw e},0)}function l(e){var t=n(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function c(e,i){function s(){if(o>=c)return u._fulfill();var r=l(e[o++]);if(r instanceof t&&r._isDisposable()){try{r=n(r._getDisposer().tryDispose(i),e.promise)}catch(d){return a(d)}if(r instanceof t)return r._then(s,a,null,null,null)}s()}var o=0,c=e.length,u=new t(r);return s(),u}function u(e,t,i){this._data=e,this._promise=t,this._context=i}function d(e,t,i){this.constructor$(e,t,i)}function h(e){return u.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function p(e){this.length=e,this.promise=null,this[e-1]=null}var f=e("./util"),m=e("./errors").TypeError,g=e("./util").inherits,v=f.errorObj,y=f.tryCatch,b={};u.prototype.data=function(){return this._data},u.prototype.promise=function(){return this._promise},u.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():b},u.prototype.tryDispose=function(e){var t=this.resource(),i=this._context;void 0!==i&&i._pushContext();var n=t!==b?this.doDispose(t,e):null;return void 0!==i&&i._popContext(),this._promise._unsetDisposable(),this._data=null,n},u.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},g(d,u),d.prototype.doDispose=function(e,t){var i=this.data();return i.call(e,e,t)},p.prototype._resultCancelled=function(){for(var e=this.length,i=0;e>i;++i){var n=this[i];n instanceof t&&n.cancel()}},t.using=function(){var e=arguments.length;if(2>e)return i("you must pass at least 2 arguments to Promise.using");var s=arguments[e-1];if("function"!=typeof s)return i("expecting a function but got "+f.classString(s));var r,a=!0;2===e&&Array.isArray(arguments[0])?(r=arguments[0],e=r.length,a=!1):(r=arguments,e--);for(var l=new p(e),d=0;e>d;++d){var m=r[d];if(u.isDisposer(m)){var g=m;m=m.promise(),m._setDisposable(g)}else{var b=n(m);b instanceof t&&(m=b._then(h,null,null,{resources:l,index:d},void 0))}l[d]=m}for(var _=new Array(l.length),d=0;d<_.length;++d)_[d]=t.resolve(l[d]).reflect();var w=t.all(_).then(function(e){for(var t=0;t<e.length;++t){var i=e[t];if(i.isRejected())return v.e=i.error(),v;if(!i.isFulfilled())return void w.cancel();e[t]=i.value()}C._pushContext(),s=y(s);var n=a?s.apply(void 0,e):s(e),r=C._popContext();return o.checkForgottenReturns(n,r,"Promise.using",C),n}),C=w.lastly(function(){var e=new t.PromiseInspection(w);return c(l,e)});return l.promise=C,C._setOnCancel(l),C},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new d(e,this,s());throw new m}}},{"./errors":12,"./util":36}],36:[function(e,t,i){"use strict";function n(){try{var e=E;return E=null,e.apply(this,arguments)}catch(t){return P.e=t,P}}function s(e){return E=e,n}function r(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function o(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return r(e)?new Error(g(e)):e}function l(e,t){var i,n=e.length,s=new Array(n+1);for(i=0;n>i;++i)s[i]=e[i];return s[i]=t,s}function c(e,t,i){if(!I.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var n=Object.getOwnPropertyDescriptor(e,t);return null!=n?null==n.get&&null==n.set?n.value:i:void 0}function u(e,t,i){if(r(e))return e;var n={value:i,configurable:!0,enumerable:!1,writable:!0};return I.defineProperty(e,t,n),e}function d(e){throw e}function h(e){try{if("function"==typeof e){var t=I.names(e.prototype),i=I.isES5&&t.length>1,n=t.length>0&&!(1===t.length&&"constructor"===t[0]),s=O.test(e+"")&&I.names(e).length>0;if(i||n||s)return!0}return!1}catch(r){return!1}}function p(e){function t(){}t.prototype=e;for(var i=8;i--;)new t;return e}function f(e){return M.test(e)}function m(e,t,i){for(var n=new Array(e),s=0;e>s;++s)n[s]=t+s+i;return n}function g(e){try{return e+""}catch(t){return"[no string representation]"}}function v(e){return null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function y(e){try{u(e,"isOperational",!0)}catch(t){}}function b(e){return null==e?!1:e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0}function _(e){return v(e)&&I.propertyIsWritable(e,"stack")}function w(e){return{}.toString.call(e)}function C(e,t,i){for(var n=I.names(e),s=0;s<n.length;++s){var r=n[s];if(i(r))try{I.defineProperty(t,r,I.getDescriptor(e,r))}catch(o){}}}function S(e,t){return $?process.env[e]:t}function T(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(t){}}function k(e,t){return e.bind(t)}var E,I=e("./es5"),x="undefined"==typeof navigator,P={e:{}},A="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,D=function(e,t){function i(){this.constructor=e,this.constructor$=t;for(var i in t.prototype)n.call(t.prototype,i)&&"$"!==i.charAt(i.length-1)&&(this[i+"$"]=t.prototype[i])}var n={}.hasOwnProperty;return i.prototype=t.prototype,e.prototype=new i,e.prototype},L=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var i=0;i<e.length;++i)if(e[i]===t)return!0;return!1};if(I.isES5){var i=Object.getOwnPropertyNames;return function(e){for(var n=[],s=Object.create(null);null!=e&&!t(e);){var r;try{r=i(e)}catch(o){return n}for(var a=0;a<r.length;++a){var l=r[a];if(!s[l]){s[l]=!0;var c=Object.getOwnPropertyDescriptor(e,l);null!=c&&null==c.get&&null==c.set&&n.push(l)}}e=I.getPrototypeOf(e)}return n}}var n={}.hasOwnProperty;return function(i){if(t(i))return[];var s=[];e:for(var r in i)if(n.call(i,r))s.push(r);else{for(var o=0;o<e.length;++o)if(n.call(e[o],r))continue e;s.push(r)}return s}}(),O=/this\s*\.\s*\S+\s*=/,M=/^[a-z$_][a-z$_0-9]*$/i,N=function(){return"stack"in new Error?function(e){return _(e)?e:new Error(g(e))}:function(e){if(_(e))return e;try{throw new Error(g(e))}catch(t){return t}}}(),R=function(e){return I.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var U="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,i=[],n=e[Symbol.iterator]();!(t=n.next()).done;)i.push(t.value);return i};R=function(e){return I.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?U(e):null}}var $="undefined"!=typeof process&&"[object process]"===w(process).toLowerCase(),H={isClass:h,isIdentifier:f,inheritedDataKeys:L,getDataPropertyOrDefault:c,thrower:d,isArray:I.isArray,asArray:R,notEnumerableProp:u,isPrimitive:r,isObject:o,isError:v,canEvaluate:x,errorObj:P,tryCatch:s,inherits:D,withAppended:l,maybeWrapAsError:a,toFastProperties:p,filledRange:m,toString:g,canAttachTrace:_,ensureErrorObject:N,originatesFromRejection:b,markAsOriginatingFromRejection:y,classString:w,copyDescriptors:C,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:$,env:S,global:A,getNativePromise:T,domainBind:k};H.isRecentNode=H.isNode&&function(){var e=process.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),H.isNode&&H.toFastProperties(process);try{throw new Error}catch(B){H.lastLineError=B}t.exports=H},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise),window.BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"Other",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown",this.osVersion=this.searchString(this.dataClient)||"Other","Other"!==this.browser||!document.hasOwnProperty("documentMode")&&"Netscape"!==navigator.appName||(this.browser="Edge")},searchString:function(e){for(var t=0;t<e.length;t++){var i=e[t].string;if(this.versionSearchString=e[t].subString,-1!=i.indexOf(e[t].subString))return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Googlebot",identity:"Other"},{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer"},{string:navigator.userAgent,subString:"Trident",identity:"IE11"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"},{string:navigator.userAgent,subString:"OPR",identity:"Opera"}],dataClient:[{string:navigator.userAgent,subString:"Windows NT 10.0",identity:"Windows 10"},{string:navigator.userAgent,subString:"Windows NT 6.2",identity:"Windows 8"},{string:navigator.userAgent,subString:"Windows NT 6.1",identity:"Windows 7"},{string:navigator.userAgent,subString:"Windows NT 6.0",identity:"Windows Vista"},{string:navigator.userAgent,subString:"Windows NT 5.2",identity:"Windows Server"},{string:navigator.userAgent,subString:"Windows NT 5.1",identity:"Windows XP"},{string:navigator.userAgent,subString:"Windows NT 5.0",identity:"Windows 2000"},{string:navigator.userAgent,subString:"Mac",identity:"Mac/iOS"},{string:navigator.userAgent,subString:"X11",identity:"UNIX"},{string:navigator.userAgent,subString:"Linux",identity:"Linux"}]},BrowserDetect.init(),window.Helpers={},window.Registry={},window.Modals={},window.Model={},window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s}),function(){function e(e){this.el=e;for(var t=e.className.replace(/^\s+|\s+$/g,"").split(/\s+/),i=0;i<t.length;i++)n.call(this,t[i])}function t(e,t,i){Object.defineProperty?Object.defineProperty(e,t,{get:i}):e.__defineGetter__(t,i)}if(!("undefined"==typeof window.Element||"classList"in document.documentElement)){var i=Array.prototype,n=i.push,s=i.splice,r=i.join;e.prototype={add:function(e){this.contains(e)||(n.call(this,e),this.el.className=this.toString())},contains:function(e){return-1!=this.el.className.indexOf(e)},item:function(e){return this[e]||null},remove:function(e){if(this.contains(e)){for(var t=0;t<this.length&&this[t]!=e;t++);s.call(this,t,1),this.el.className=this.toString()}},toString:function(){return r.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},window.DOMTokenList=e,t(Element.prototype,"classList",function(){return new e(this)})}}(),function(e){"HTMLCanvasElement"in e&&"toDataURL"in e.HTMLCanvasElement.prototype&&("toBlob"in e.HTMLCanvasElement.prototype||Object.defineProperty(e.HTMLCanvasElement.prototype,"toBlob",{value:function(t){var i=this.toDataURL.apply(this,[].slice.call(arguments,1)),n=/^data:(.*?);base64,(.*)$/.exec(i),s=n[1],r=n[2];setTimeout(function(){t(new Blob([new Uint8Array(e.atob(r).split("").map(function(e){return e.charCodeAt(0)}))],{type:s}))},0)},writable:!0,enumerable:!0,configurable:!0}))}(self),Class(Helpers,"URLSearchParams")({prototype:{onChange:null,init:function(e){this.onChange=function(){},this._searchParams=new URLSearchParams,new URLSearchParams(e).forEach(function(e,t){this.set(t,e)}.bind(this))},append:function(e,t){this._searchParams.append(encodeURIComponent(e),encodeURIComponent(t)),this._onChange()},"delete":function(e){this._searchParams["delete"](encodeURIComponent(e)),this._onChange()},entries:function(){return new URLSearchParams(this.toString()).entries()},forEach:function(e,t){return new URLSearchParams(this.toString()).forEach(e,t)},get:function(e){var t=this._searchParams.get(encodeURIComponent(e));return t?decodeURIComponent(t):t},getAll:function(e){return new URLSearchParams(this.toString()).getAll(e)},has:function(e){return this._searchParams.has(encodeURIComponent(e))},keys:function(){return new URLSearchParams(this.toString()).keys()},set:function(e,t){this._searchParams.set(encodeURIComponent(e),encodeURIComponent(t)),this._onChange()},sort:function(){this._searchParams.sort()},toString:function(){return decodeURIComponent(this._searchParams.toString())},values:function(){return new URLSearchParams(this.toString()).values()},_onChange:function(){this.onChange(this.toString())}}}),Class(Helpers,"URL")({prototype:{origin:null,username:null,password:null,host:null,port:null,pathname:null,search:null,hash:null,href:null,init:function(e,t){e=new URL(e,t),this.origin=e.origin,this.username=e.username,this.password=e.password,this.host=e.host,this.port=e.port,this.pathname=e.pathname,this.search=e.search,this.hash=e.hash,this.href="";var i=function(e){this.search=e?"?"+e:"",this.href=[this.origin,this.pathname,this.search].join("")}.bind(this);return this.searchParams=new Helpers.URLSearchParams(this.search),this.searchParams.onChange=i,i(this.searchParams.toString()),this},hasHash:function(e){return this.hash.indexOf(e)>-1}}}),Object.entries||(console.log("Object.entries polyfill"),Object.entries=function(e){for(var t=Object.keys(e),i=t.length,n=new Array(i);i--;)n[i]=[t[i],e[t[i]]];return n}),"undefined"==typeof Set||"function"!=typeof Set.prototype.keys)var Set=function(){"use strict";function e(e,t){return c.call(e,t)}function t(e){var t;return"object"==typeof e?(t=u.call(e),l[t]===!0||"number"==typeof e.length&&e.length>=0&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)):!1}function i(e,t,i,n,s){d?Object.defineProperty(e,t,{enumerable:n,configurable:!1,writable:s,value:i}):e[t]=i}function n(e,t){h=!0,e.size=t,h=!1}function s(e){var n=0;if(i(this,"baseType","Set",!1,!1),i(this,"_data",{},!1,!0),d?Object.defineProperty(this,"size",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){if(!h)throw new Error("Can't set size property on Set object.");n=e}}):this.size=0,void 0!==e&&null!==e)if(t(e))for(var s=0;s<e.length;s++)this.add(e[s]);else(e instanceof Set||"Set"===e.baseType)&&e.forEach(function(e){this.add(e)},this)}function r(e,t){var i,n=typeof e;if(g[n])return n.substr(0,3)+"_"+e;if(null===e)return"nul_null";if("object"===n||"function"===n)return e[m]?e[m]:t?(i=f+p++,"[object Object]"===u.call(e)&&d?Object.defineProperty(e,m,{enumerable:!1,configurable:!1,writable:!1,value:i}):e[m]=i,i):null;throw new Error("Unsupported type for Set.add()")}function o(t,i,n){var s=0,r=t.length;this.next=function(){for(var o,a,l={};;){if(r>s){if(l.done=!1,a=t[s++],o=i[a],void 0===o&&!e(i,a))continue;"keys"===n?l.value=o:"entries"===n&&(l.value=[o,o])}else t=null,i=null,l.done=!0;return l}}}function a(t){var i=[];for(var n in t)e(t,n)&&i.push(n);return i}var l={"[object Array]":!0,"[object Arguments]":!0,"[object HTMLCollection]":!0,"[object NodeList]":!0},c=Object.prototype.hasOwnProperty,u=Object.prototype.toString,d=Object.defineProperty&&Object.defineProperties,h=!1,p=0,f="obj_",m="__objectPolyFillID",g={string:!0,"boolean":!0,number:!0,undefined:!0};return s.prototype={add:function(t){var i=r(t,!0);return e(this._data,i)||(this._data[i]=t,n(this,this.size+1)),this},clear:function(){this._data={},n(this,0)},"delete":function(t){var i=r(t,!1);return null!==i&&e(this._data,i)?(delete this._data[i],n(this,this.size-1),!0):!1},remove:function(e){return this["delete"](e)},forEach:function(e){if("function"==typeof e)for(var t,i,n=arguments[1],s=this.keys();(t=s.next())&&!t.done;)i=t.value,e.call(n,i,i,this)},has:function(e){var t=r(e,!1);return null===t?!1:c.call(this._data,t)},values:function(){return this.keys()},keys:function(){return new o(a(this._data),this._data,"keys")},entries:function(){return new o(a(this._data),this._data,"entries")}},s.prototype.constructor=s,s}();/*!
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if(Class("ExperimentsManager")({GROUPS:{CONTROL:0,VARIANT:1,EXCLUDED:-1},_instance:null,getInstance:function(){return ExperimentsManager._instance?ExperimentsManager._instance:(ExperimentsManager._instance=new ExperimentsManager,ExperimentsManager._instance)},prototype:{_COOKIES_PREFIX:"_pl_gtmc",_experimentData:null,_processedExperimentsVariants:null,init:function(){var e=this;this._experimentData=null,this._processedExperimentsVariants=new Set(this._getAllExperimentsCookiesValues()),this._processedExperimentsVariants.size&&(clearInterval(interval),e._sendIdentifyRequest())},runExperiment:function(e){this._experimentData=Object.assign({},e);try{this._validateExperimentData(),this._normalizeExperimentData(),this._processExperiment()}catch(t){throw this._experimentData=null,t}finally{this._experimentData=null}},_validateExperimentData:function(){var e=this._experimentData.id;if(!e||"string"!=typeof e)throw new Error('Wrong Experiment Data. Invalid "id" property.');var t=this._experimentData.expire,i=new Date(t).getTime();if(isNaN(i))throw new Error('Wrong Experiment Data. Invalid date for "expire" property.');var n=this._experimentData.segmentation;if(null!==n&&"undefined"!=typeof n){if("number"!=typeof n)throw new Error('Wrong Experiment Data. If defined, "segmentation" should be a number between 0 and 1.');if(0>n||n>1)throw new Error('Wrong Experiment Data. If defined, "segmentation" should be a number between 0 and 1.')}var s=this._experimentData.validations;if(s){if(Array.isArray(s)===!1)throw new Error('Wrong Experiment Data. If defined, "validations" should be an array of functions returning boolean.');s.forEach(function(e){if("function"!=typeof e)throw new Error('Wrong Experiment Data. If defined, "validations" should be an array of functions returning boolean.')})}var r=this._experimentData.control;if("undefined"!=typeof r&&"function"!=typeof r)throw new Error('Wrong Experiment Data. If defined, "control" need to be a function.');var o=this._experimentData.variant;if("undefined"!=typeof o&&"function"!=typeof o)throw new Error('Wrong Experiment Data. If defined, "variant" need to be a function.')},_normalizeExperimentData:function(){var e=this._experimentData.control;e&&"function"==typeof e||(this._experimentData.control=new Function);var t=this._experimentData.variant;t&&"function"==typeof t||(this._experimentData.variant=new Function);var i=this._experimentData.segmentation;i||(this._experimentData.segmentation=1);var n=this._experimentData.validations;n||(this._experimentData.validations=[])},_wasExpireDateReached:function(){var e=Date.now(),t=this._getExpireTimestamp();return e>=t},_getExpireTimestamp:function(){var e=this._experimentData.expire,t=new Date(e),i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return i},_processExperiment:function(){if(!this._wasExpireDateReached()){var e=this._getCookieName(),t=this._getCookieValue(e),i=ExperimentsManager.GROUPS.CONTROL;if(""===t){var n=!1;try{n=this._shouldBeAddedToExperiment()===!1}catch(s){throw this._excludeUser(),s}if(n)return void this._excludeUser();this._shouldBeAddedToVariant()&&(i=ExperimentsManager.GROUPS.VARIANT),t=this._tagWithExperimentId(i)}if(!this._isUserExcluded(t)){var r=this._experimentData.control;if(this._shouldRunVariantCode(t))var r=this._experimentData.variant;r&&"function"==typeof r&&r(),this._sendIdentifyRequest(t)}}},_getCookieName:function(){var e=[this._COOKIES_PREFIX,this._experimentData.id].join("_");return e},_getCookieValue:function(e){return $.cookie(e)||""},_setCookieValue:function(e,t){var i=this._getExpireTimestamp();$.cookie(e,t,{path:"/",expires:new Date(i)})},_getAllExperimentsCookiesValues:function(){return document.cookie.split(";").filter(function(e){return 0===e.trim().indexOf("_pl_gtmc")}).map(function(e){return e.trim().split("=")[1]}).sort()},_isUserExcluded:function(e){return/\.-1$/.test(e)},_excludeUser:function(){var e=this._tagWithExperimentId(ExperimentsManager.GROUPS.EXCLUDED);this._sendIdentifyRequest(e)},_shouldBeAddedToExperiment:function(){var e=this._experimentData.validations;if(!e)return!0;for(var t=0;t<e.length;t++){var i=e[t];if(i()===!1)return!1}return!0},_shouldBeAddedToVariant:function(){var e=Math.floor(99*Math.random()),t=this._experimentData.segmentation;return t||(t=1),100*t>=e},_shouldRunVariantCode:function(e){return/\.1$/.test(e)},_tagWithExperimentId:function(e){var t=[this._experimentData.id,e].join(".");return this._setCookieValue(this._getCookieName(),t),t},_sendIdentifyRequest:function(e){if(e&&this._processedExperimentsVariants.add(e),this._processedExperimentsVariants.size){var t=[];this._processedExperimentsVariants.forEach(function(e){t.push(e)});var i=t.join("!");Helpers.GlobalEventTracker.identify({experiment_name:i}),this._sendPageRequest(i)}},_sendPageRequest:function(e){var t=window._pl_userInfo;null===t.email&&(t={id:null,email:"notloggedin@placeit.net"});var i=window._pl_category;Helpers.GlobalEventTracker.pageView({userId:t.id,email:t.email,status:t.status,page_category:i,page_type:window.pageType.page_type,experiment_name:e})}}}),ExperimentsManager.getInstance(),/*!
 * jQuery Cookie Plugin v1.3
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
function(e,t,i){function n(e){return e}function s(e){return decodeURIComponent(e.replace(r," "))}var r=/\+/g,o=e.cookie=function(r,a,l){if(a!==i){if(l=e.extend({},o.defaults,l),null===a&&(l.expires=-1),"number"==typeof l.expires){var c=l.expires,u=l.expires=new Date;u.setDate(u.getDate()+c)}return a=o.json?JSON.stringify(a):String(a),t.cookie=[encodeURIComponent(r),"=",o.raw?a:encodeURIComponent(a),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var d=o.raw?n:s,h=t.cookie.split("; "),p=0,f=h.length;f>p;p++){var m=h[p].split("=");if(d(m.shift())===r){var g=d(m.join("="));return o.json?JSON.parse(g):g}}return null};o.defaults={},e.removeCookie=function(t,i){return null!==e.cookie(t)?(e.cookie(t,null,i),!0):!1}}(jQuery,document),window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments)},Class("HotjarPlugin")({track:function(e){hj("event",e)},identify:function(e,t){hj("identify",e,t)}}),Class("AmplitudeWrapper")({API_KEYS:{development:"dae02703d367aefd08cee8728c8271e9",production:"02ae390297ba1384fe88537602773a31"},SDK_CONFIG:{minIdLength:2},LOCAL_STORAGE_TRAITS_KEY:"amp_user_traits",_userTraits:{},_isReady:!1,_readyCallbacks:[],_plugins:[],init:function(e){var t=Utils.bindFn(this),e=Object.assign(e,this.SDK_CONFIG);amplitude.init(this._getApiKey(),null,e).promise.then(t(this._onReady))},_onReady:function(){this._isReady=!0,this._readyCallbacks.forEach(function(e){e()}),this._readyCallbacks=[]},ready:function(e){this._isReady===!0?e():this._readyCallbacks.push(e)},page:function(e){var t=Object.assign(this._getPageViewProperties(),e);this._track("page_view",t)},identify:function(e,t,i){var n=this,s=new amplitude.Identify;amplitude.setUserId(e),Object.keys(t).forEach(function(e){s.set(e,t[e]),n._userTraits[e]=t[e]}),amplitude.identify(s).promise.then(function(){"function"==typeof i&&i()}),this._callPluginsMethod(arguments),this._saveInLocalStorage(this.LOCAL_STORAGE_TRAITS_KEY,t)},track:function(e,t,i){var n=Object.assign(this._getPageViewProperties(),t),s=this._track(e,n);this._callPluginsMethod(arguments),"function"==typeof i&&s.then(i)},_track:function(e,t){return amplitude.track(e,t).promise},user:function(){var e=this;return{id:function(){return amplitude.getUserId()||null},anonymousId:amplitude.getDeviceId,traits:function(){return e._getUserTraits()}}},addPlugin:function(e){this._plugins.push(e)},_callPluginsMethod:function(e){var t=e.callee.name;this._plugins.forEach(function(i){i[t].apply(i,e)})},_getUserTraits:function(){var e=localStorage.getItem(this.LOCAL_STORAGE_TRAITS_KEY);return e?JSON.parse(e):Object.assign({},this._userTraits)},_getPageViewProperties:function(){return{page_domain:"undefined"!=typeof location&&location.hostname||"",page_location:"undefined"!=typeof location&&location.href||"",page_path:"undefined"!=typeof location&&location.pathname||"",page_title:"undefined"!=typeof document&&document.title||"",page_url:"undefined"!=typeof location&&location.href.split("?")[0]||""}},_getApiKey:function(){return"production"===window.environment?this.API_KEYS.production:this.API_KEYS.development},_saveInLocalStorage:function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(i){console.warn("Local storage not enabled; not saving",e)}}}),Class("GoogleTagManagerWrapper")({_dataLayerNames:[],_userId:null,init:function(e){this._dataLayerNames=e,e.forEach(function(e){window[e]=window[e]||[]})},setUserId:function(e){this._userId=e},track:function(e,t){var i=Object.assign(t||{},{event:e,userId:this._userId});this.pushToDataLayers(i)},pageView:function(e){var t=Object.assign(e,{event:"Loaded a Page",userId:this._userId,path:location.pathname,referrer:document.referrer,search:location.search,title:document.title,url:location.href});this.pushToDataLayers(t)},pushToDataLayers:function(e){this._dataLayerNames.forEach(function(t){window[t].push(e)})}}),window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,Class("GoogleAnalyticsWrapper")({_SDK_LOAD_THRESHOLD_TIME:3e3,_loadPromise:null,_isReady:!1,getClientId:function(){var e=this;return new Promise(function(t){e._getLoadPromise().then(function(){t(e._getClientId())})["catch"](function(){t(null)})})},_getClientId:function(){var e=window.ga.getAll();return 0===e.length?null:e[0].get("clientId")},_getLoadPromise:function(){return this._isReady===!0?Promise.resolve():(null===this._loadPromise&&(this._loadPromise=this._createLoadPromise()),this._loadPromise)},_createLoadPromise:function(){var e=this;return new Promise(function(t,i){setTimeout(i,e._SDK_LOAD_THRESHOLD_TIME),window.ga(function(){e._isReady=!0,t()})})}}),Class("Phosphorus")({reflect:function(e){var t=function(e){return{status:"fulfilled",value:e}},i=function(e){return{status:"rejected",reason:e}};return e.then(t,i)},allSettled:function(e){var t=e.map(function(e){return P.reflect(e)});return Promise.all(t)},cancelable:function(e,t){return function(i){var n,s=t||function(){},r=new Promise(function(e,t){n=function(){t(new Error("Cancelation Error"))}}),o=e(i),a=Promise.race([r,o]);return a.cancel=function(e){s=e||s,o.then(s),n()},a}},retryable:function(e,t){return function(i){return new Promise(function(n,s){for(var r=e(i).then(n),o=function(t){return e(i)},a=0;t-1>a;a++)r=r["catch"](o).then(n);r["catch"](s)})}},retryableDelayed:function(e,t,i){var n=this;return function(s){var r=n.delayed(e,i);return new Promise(function(i,n){for(var o=e(s).then(i),a=0;t-1>a;a++)o=o["catch"](function(e){return r(s)}).then(i);o["catch"](n)})}},delayed:function(e,t){return function(i){return new Promise(function(n,s){setTimeout(function(){e(i).then(n)["catch"](s)},t)})}},delay:function(e){return new Promise(function(t){setTimeout(t,e)})},timeout:function(e){return new Promise(function(t,i){setTimeout(function(){i(new Error("timeout"))},e)})},ajax:function(e){return new Promise(function(t,i){$.ajax(e).then(t).fail(i)})},get:function(e,t){return new Promise(function(i,n){$.get(e,t).then(i).fail(n)})},runner:function(e){var t,i={};return t=new Promise(function(e,t){i.resolve=e,i.reject=t}),t.run=function(){e.then(i.resolve)["catch"](i.reject)},t},promiseMap:function(e){return function(t){return Promise.all(t.map(e))}},promisifyEvent:function(e){return function(t){return new Promise(function(i){var n=function(s){t.unbind(e,n),i(s)};t.bind(e,n)})}},trace:function(e){return function(t){return console.log(e,t),t}}}),window.P=Phosphorus,Class(Helpers,"GlobalEventTracker")({gaLoadTimeout:null,_isReady:!1,_sdks:[],_cancellableReadyPromise:null,_requestsQueue:[],_readyCallbacks:[],addSdk:function(e){this._isReady=!1,this._sdks.push(e),this._setCancellableReadyPromise()},getSdks:function(){return this._sdks.map(function(e){return e()})},onSdkReady:function(e){this._isReady===!0?e():this._readyCallbacks.push(e)},identify:function(e,t){return this._isReady===!1?void this._addToRequestsQueue(arguments):void this.getSdks().forEach(function(i){i.identify(e,t)})},pristineTrack:function(e,t,i){if(this._isReadyToTrack()===!1)return void this._addToRequestsQueue(arguments);var n=this.getSdks().map(function(i){return new Promise(function(n){i.track(e,t,n)})});GoogleTagManagerWrapper.setUserId(this.getUserId()),GoogleTagManagerWrapper.track(e,t),"function"==typeof i&&Promise.all(n).then(i)},pageView:function(e){return this._isReadyToTrack()===!1?void this._addToRequestsQueue(arguments):(this.getSdks().forEach(function(t){t.page(e)}),GoogleTagManagerWrapper.setUserId(this.getUserId()),void GoogleTagManagerWrapper.pageView(e))},getUserId:function(){var e=this.getSdks().map(function(e){return e.user().id()}),t=e[0],i=e.some(function(e){return e!==t});return i?null:t},getAnonymousId:function(){var e=this.getSdks().map(function(e){return e.user().anonymousId()});return e[0]},getUserTraits:function(){var e=this.getSdks().map(function(e){return e.user().traits()}),t=e[0],i=e.some(function(e){return Object.keys(t).some(function(i){t[i]!==e[i]})});return i?{}:t},_shouldIdentifyNotLoggedInUser:function(){return Helpers.App.isLoggedIn()===!1&&this._isIdentified()===!1},_isReadyToTrack:function(){return this._isReady===!0&&this._isIdentified()===!0},_isIdentified:function(){var e=this.getUserId();return null===e?!1:!0},_setCancellableReadyPromise:function(){var e=Utils.bindFn(this);null!==this._cancellableReadyPromise&&this._cancellableReadyPromise.cancel(),this._cancellableReadyPromise=P.cancelable(e(this._getReadyPromise))(),this._cancellableReadyPromise.then(e(this._handleSdksReady))["catch"](function(e){"Cancelation Error"===e.message})},_getReadyPromise:function(){var e=this.getSdks().map(function(e){return new Promise(function(t){e.ready(t)})});return Promise.all(e)},_handleSdksReady:function(){this._isReady=!0,this._shouldIdentifyNotLoggedInUser()===!0&&this.identifyNotLoggedUser(),this._drainReadyCallbacks(),this._drainRequestsQueue()},_drainReadyCallbacks:function(){this._readyCallbacks.forEach(function(e){e()}),this._readyCallbacks=[]},_drainRequestsQueue:function(){var e=this;this._requestsQueue.forEach(function(t){e[t.methodName].apply(e,t.args)}),this._requestsQueue=[]},_addToRequestsQueue:function(e){this._requestsQueue.push({methodName:e.callee.name,args:e})},identifyUser:function(){var e=Helpers.App.getUser(),t=Helpers.UserSegment.getUserLocationCookie();this.identify(e.id,{name:Helpers.App.getTrackerId(),email:e.email,hasSubscription:this._hasSubscription(),subscription_type:this._subscriptionType(),status:e.status,country:t,unsubscribe_code:e.unsubscribe_code}),AlgoliaAnalyticsClient.identifyLoggedInUser(e.id)},identifyNotLoggedUser:function(){var e=this._getPlaceholderEmailForUser(),t={id:e,email:e,coupon:0};this.identify(t.id,{name:Helpers.App.getTrackerId(),email:t.email})},purchaseSuccess:function(e){var t,i,n,s="",r="";e.category=window._pl_category,e.stage_type=Helpers.StageType._types[window._stageData.stage_data.image_type]||"No Info",e.tags=Helpers.StageType.getStageTags()||"No Info",e.background=Helpers.StageType.getBackgroundOrColorID()||"No Info",e.thumb=window._stageData.stage_data.large_thumb||"No Info",e.slug=window._stageData.stage_data.slug||"No Info",e.videoV5=null,Helpers.StageType.isVideoV5()===!0&&(e.videoV5=1),r=Helpers.StageType.isVideo()===!0?":fusionvideo":":image",Helpers.App.getSubscription()?n=r+":withSubscription":(n=r,this._baseSend("email:purchase:success",e)),this._baseSend("Purchase:success"+n+":client",e),t=e.stage_id,Helpers.StageType.getBackgroundID()&&(s="-"+Helpers.StageType.getBackgroundID()),i="-"+e.resolution_id,Helpers.App.sendEcommerceTransaction({amount_in_cents:e.amount_in_cents,sku:t+s+i,productName:Helpers.StageType.getStageInfo().name,invoice_number:e.invoice_number}),Helpers.App.sendEnvatoTracking({trackingCode:18519,orderId:e.invoice_number,customerId:Helpers.App.getUser().id,subtotal:e.amount_in_cents,category:window._pl_category,sku:t+s+i})},subscriptionSuccess:function(e){var t=e.event+":client";this._baseSend(t,e),this._baseSend("email:subscription:success",e),document.cookie="userStatus=Subscriber; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/",Helpers.App.sendEcommerceTransaction({amount_in_cents:e.amount_in_cents,sku:e.plan_recurly_uuid,productName:e.plan_name+"_subscription",invoice_number:e.invoice_number}),Helpers.App.sendEnvatoTracking({trackingCode:18520,orderId:e.invoice_number,customerId:e.user_id,subtotal:e.amount_in_cents,category:e.page_category,sku:e.plan_recurly_uuid})},showSubscriptionFromPurchase:function(e){this._baseSend("Purchases:JumpToSubscriptions",e)},freeDownload:function(e){e.videoV5=null,Helpers.StageType.isVideoV5()===!0&&(e.videoV5=1),this._baseSend("Download:free",e)},downloadClick:function(e){this._baseSend("Download:click",e),this._baseSend("email:Download:click",e)},couponGiftGenerated:function(e){this._baseSend("coupon:generated",e)},freeStageDownload:function(e){e.videoV5=null,Helpers.StageType.isVideoV5()===!0&&(e.videoV5=1),this._baseSend("Download:freeStage",e),this._baseSend("email:freeStageDownload",e)},freeVideoDownload:function(e){this._baseSend("Video:freeDownload",e)},lowResFreeDownload:function(e){this._baseSend("Lowres:freeDownload",e)},subscriptionDownload:function(e){e.category=window._pl_category,e.stage_type=Helpers.StageType._types[window._stageData.stage_data.image_type]||"No Info",e.tags=Helpers.StageType.getStageTags()||"No Info",e.background=Helpers.StageType.getBackgroundOrColorID()||"No Info",e.thumb=window._stageData.stage_data.large_thumb||"No Info",e.slug=window._stageData.stage_data.slug||"No Info",e.videoV5=null,Helpers.StageType.isVideoV5()===!0&&(e.videoV5=1),this._baseSend("Download:subscription",e)},subscriptionDownloadFromGrid:function(e){e.category=window._pl_category,e.stage_type=Helpers.StageType._types[e.imageType]||"No Info",e.background=null,e.tags=null,this._baseSend("Download:subscription",e)},packDownload:function(e){this._baseSend("Download:pack",e)},orderJersey:function(e){this._baseSend("order.jersey",e)},designService:function(e){this._baseSend("design.service",e)},stageError:function(e){this._baseSend("stage.error",e)},stageErrorByEventType:function(e,t){this._baseSend(e,t)},resultShown:function(e){var t=performance&&performance.memory;t&&(e.totalJSHeapSize=t.totalJSHeapSize,e.usedJSHeapSize=t.usedJSHeapSize,e.jsHeapSizeLimit=t.jsHeapSizeLimit),window.WebGLMemoryEstimator&&(e.peakWebGLMem=WebGLMemoryEstimator.getLastPeak()),e.stageTags=Helpers.StageType.getStageTags(),e.category=window._pl_category,e.videoV5=null,Helpers.StageType.isVideoV5()===!0&&(e.videoV5=1),this._baseSend("result.shown",e),this._baseSend("email:StageModified",e)},slowProcess:function(e){this._baseSend("slow.process",e)},openFAQ:function(){this._baseSend("open.faq")},cropKeydownEnter:function(e){this._baseSend("crop:keydown:enter",e)},searchNoResults:function(e){e.userIp=window.userIp,this._baseSend("search:no.results",e)},assetsSearchNoResults:function(e){this._baseSend("assets.search.no.results",e)},searchFewResults:function(e){this._baseSend("search:few.results",e)},searchSuccessfulResults:function(e){this._baseSend("search:success",e)},deletedAsset:function(e){this._baseSend("deleted.preselected.asset",e)},missingAsset:function(e){this._baseSend("missing.preselected.asset",e)},imageLoadFail:function(e){this._baseSend("image.load.fail",e)},sendPageView:function(e){"function"==typeof ga?ga("send","pageview",window.location.pathname):this._retryPageView(e)},_retryPageView:function(e){null!==this.gaLoadTimeout&&clearTimeout(this.gaLoadTimeout),this.gaLoadTimeout=setTimeout(function(){this.sendPageView(e)}.bind(this),300)},userLogin:function(e){var t=this.getUserTraits().email;e.label=e.authenticated_by,e.placeholder_email_login=t,this.identifyUser(),this._baseSend("user:login:client",e),this._baseServerSend("user:login",e),this._baseSend("email:user:login",e)},pricingModalStillshots:function(e){this._baseSend("PricingModal:Stillshots:Opens",e),this._baseSend("email:PricingModal:Opens",e)},premiumAssetsModalOpenSubscribtion:function(e){this._baseSend("PricingModal:PremiumAssets:Opens",e)},premiumAssetsModalOpen:function(e){this._baseSend("PremiumAssetsModal:Opens",e)},pricingModalVideos:function(e){this._baseSend("PricingModal:Videos:Opens",e)},planCTAClicked:function(e,t){t===UI.SubscriptionsPartial.prototype.PERIOD_ANNUAL?e.plan_name="Unlimited Annual":e.plan_name="Unlimited Monthly",this._baseSend("Plan:CTA:Clicked",e),e.label=location.href,this._baseSend("email:PlanCTA:Clicked",e)},recurlyFormAfterPlanSelected:function(e){this._baseSend("recurly:cardFormForPlan",e)},grabFromURL:function(e){this._baseSend("Productshot:GrabFromURL",e)},fileUpload:function(e){this._baseSend("File:Upload",e)},pastDueLogin:function(){this._baseSend("pastDue:login")},fixCTAClick:function(){this._baseSend("pastDue:fixCTAClick")},retryCardBtnClick:function(){this._baseSend("pastDue:retryCardBtnClick")},showBillingUpdateOptionsModal:function(){this._baseSend("pastDue:showBillingUpdateOptionsModal")},closedOptionsModal:function(){this._baseSend("pastDue:closedOptionsModal")},updateBillingClick:function(){this._baseSend("pastDue:updateBillingClick")},billingUpdateSuccess:function(){this._baseSend("pastDue:billingUpdateSuccess")},confirmRetryFailed:function(){this._baseSend("pastDue:confirmRetryFailed")},appliedPastDueInvoice:function(){this._baseSend("pastDue:appliedPastDueInvoice")},landedInGiftView:function(e){this._baseSend("giftView:landed",e)},giftSignup:function(e){this._baseSend("giftView:signed",e)},openLicenseModal:function(){this._baseSend("licenseModal:open")},track:function(e,t){this._baseSend(e,t)},trackByServer:function(e,t){this._baseServerSend(e,t)},trackCropperTool:function(e,t){t.stage_category="Tool",t.tool_type="cropper:image",this._baseSend(e,t)},trackVideoCropperTool:function(e,t){t.stage_category="Tool",t.tool_type="cropper:video",this._baseSend(e,t)},trackVideoToGifTool:function(e,t){t=t||{},t.stage_category="Tool",t.tool_type="video_to_gif",this._baseSend(e,t)},ssoTrack:function(e,t){var i=this;try{var n=Helpers.App.getUser();t.type=t.error?"error":"event",t.username=n?n.username:"",t.userEmail=n?n.email:"",i._baseSend(e,t)}catch(s){console.log("ssoTrack has errors")}},ssoServerTrack:function(e,t){var i=this;try{var n=Helpers.App.getUser();t.type=t.error?"error":"event",t.username=n?n.username:"",t.userEmail=n?n.email:"",i._baseServerSend(e,t)}catch(s){console.log("ssoServerTrack has errors")}},_hasSubscription:function(){var e=0;return Helpers.App.getSubscription()&&(e=1),e},_subscriptionType:function(){var e="none",t=Helpers.App.getSubscription();return t&&(e=t.is_annual?"annual":"monthly"),e},_baseSendWithoutInfo:function(e){data={},data.event=e,data.type="track",data.page_category="main",this.pristineTrack(e,data)},_getPlaceholderEmailForUser:function(){return this.getAnonymousId()+"@placeholder.email"},getUserEmail:function(){var e=Helpers.App.getUser().email;return e?e:this._isReady?this._getPlaceholderEmailForUser():void 0},_baseSend:function(e,t){var i,n,s,r,o=Object.assign({},t||{});r=this.getUserEmail(),r&&(o.properties={},o.properties.email=r,o.properties.status=Helpers.App.getUser().status,o.event=e,o.type="track",i=Helpers.UserSegment.getUserSegmentCookie(),null!==i&&(o.segment=i)),n=Helpers.App.getSubscription(),n&&n.is_annual===!0?o.properties.plan_type="annual":n&&n.is_annual===!1&&(o.properties.plan_type="monthly"),n&&n.plan&&(o.properties.plan_name=n.plan.recurly_uuid),o.page_category=this._getPageCategory(),o.experiment_id=this._getExperimentId(),s=Helpers.App.getNetworkData(),o.downlink=s.downlink,o.networkEffectiveType=s.effectiveType,o.rtt=s.rtt,o.saveNetworkData=s.saveData,o.deviceMemory=navigator.deviceMemory,this.pristineTrack(e,o)},_baseServerSend:function(e,t){var i,n=Object.assign({},t||{});Helpers.App.getUser().email&&(n.properties={},n.properties.email=Helpers.App.getUser().email,n.properties.status=Helpers.App.getUser().status,n.event=e,n.type="track",i=Helpers.UserSegment.getUserSegmentCookie(),null!==i&&(n.segment=i)),n.page_category=this._getPageCategory(),n.experiment_id=this._getExperimentId(),n.user_agent=window.navigator.userAgent,n.user_ip=window.userIp,GoogleAnalyticsWrapper.getClientId().then(function(t){var i={type:e,page:EventTracker.pageFields(),googleAnalytics:{clientId:t},amplitude:{sessionId:EventTracker.getAmplitudeSessionId()},data:n},s={type:"POST",url:"/api/v2/analytics/track",data:i},r=Helpers.RequestConfig.prepareConfig(s);$.ajax(r)})},_addSubscriptionData:function(e){return Helpers.App.getSubscription()?e.hasSubscription=1:e.hasSubscription=0,e},smartTemplateEvent:function(e,t){t.slug=_stageData.stage_data.slug,t.stage_id=_stageData.stage_data.id,this._baseSend("smartTemplate:"+e,t)},algoliaTrack:function(e,t){try{window.pageType.is_stage&&(t.slug=window._stageData.stage_data.slug,t.stageId=window._stageData.stage_data.id,t.templateID=Helpers.StageType.getRecordId()),t.page=window.pageType.page_type,t.action=e,this._baseSend("algoliaTrack:"+e,t)}catch(i){console.warn(i)}},noticeError:function(e,t){var i=t||{},n=new Error(e+": "+JSON.stringify({error:i}));window.newrelic.noticeError(n),console.log(n)},pipEvent:function(e,t){t=t||{},t.industries=Helpers.StageType.getStageTags(),this._baseSend("stage:"+e,t)},customExperiencesEvent:function(e,t){this._baseSend("customExperiences:"+e,t)},cancelSubscription:function(e,t){this._baseSend("cancelSubscription:"+e,t)},cancelAccount:function(e,t){this._baseSend("cancelAccount:"+e,t)},getFreeMonth:function(e){this._baseSend("FreeMonth:click",e)},subscriptionPlanSelected:function(e){var t="planChange_mainSubscriptionModal_"+e.old+":"+e["new"];delete e.old,delete e["new"],this._baseSend(t,e)},userSignup:function(){var e,t={};t=Helpers.App.getUser(),e={},e.site_id=t?t.id:"",e.path=window.location.pathname,e.label=t.authenticated_by,this._baseSend("user:signup:client",e),this._baseServerSend("email:user:signup",e),this._baseServerSend("user:signup",e),Helpers.App.sendEnvatoSignUp({trackingCode:19603,customerId:t.id,envatoId:t.envato_id})},_getPageCategory:function(){var e;return e=Helpers.StageType.pageType(),e.is_category||e.is_stage||Helpers.App.isCustomExperience()?window._pl_category:"main"},cardFormForPlanStartedFilling:function(){this._baseSend("recurly:cardFormForPlan:startedFilling")},purchasePayPalSwitch:function(){this._baseSend("Purchase:PayPalSwitch")},purchaseInvalidFields:function(e){this._baseSend("creditCardPaymentDeclined:invalidFields",{invalidFields:e.fields,details:e.details,message:e.message,code:e.code})},purchaseCardDenied:function(e){this._baseSend("creditCardPaymentDeclined:cardDenied",e)},draftItemSaved:function(e){this._draftItemBaseEvent("draft:Saved",e),e.stage_found=window.location.href,this._baseSend("email:draft:Saved",e)},draftItemClicked:function(e){this._draftItemBaseEvent("draft:Click",e)},_draftItemBaseEvent:function(e,t){this._baseSend(e,{draftId:t.draftId,stageId:t.stageId,label:window.location.href})},iosShortcutEvent:function(e,t){this._baseSend("shortcut:"+e,{errorMessage:t})},carouselClick:function(e,t){var i="carousel:"+e+":clicked";this._baseSend(i,{label:t})},trimmerEvent:function(e,t){this._baseSend("Trimmer:"+e,Object.assign({},t))},cancelSubscriptionSwitch:function(e,t){t=t||{},currentSubscription=Helpers.App.getSubscription(),currentSubscription!==!1&&(t.current_plan=currentSubscription.plan.recurly_uuid),this._baseSend("cancelSubscriptionSwitch:"+e,t)},deprecatedBlock:function(e){Object.assign({},e,{error:!1});this._baseSend("deprecated:block",e)},deprecatedMethod:function(e){Object.assign({},e,{error:!1});this._baseSend("deprecated:method",e)},deprecatedClass:function(e){Object.assign({},e,{error:!1});this._baseSend("deprecated:class",e)},planPriceMismatch:function(e){var t=Helpers.App.getSubscription(),i=t&&!t.is_paused,n=Object.assign({},e,{error:!1,hasSubscription:i,isAdmin:Helpers.App.isAdmin()});this._baseSend("priceMismatch:plan",n)},taxAmountMismatch:function(e){var t=Object.assign({},e,{error:!1});this._baseSend("priceMismatch:tax",t)},stagePriceMismatch:function(e){var t=Helpers.App.getSubscription(),i=t&&!t.is_paused,n=Object.assign({},e,{error:!1,hasSubscription:i,isAdmin:Helpers.App.isAdmin()});this._baseSend("priceMismatch:stage",n)},engineTimingEvent:function(e,t){var i=Object.assign(t,{timestamp:Date.now(),userLocation:Helpers.App.getUserLocation(),isMobile:Helpers.App.isMobile(),deviceMemory:navigator.deviceMemory},Helpers.App.getNetworkData());this._baseSend(e,i)},heroBannerEvent:function(e,t){t=t||{},this._baseSend("heroBanner:"+e,t)},_getExperimentId:function(){return $.cookie("experiment_id")},forceSignup:function(){var e={};e.path=window.location.pathname,Helpers.GlobalEventTracker._baseSend("forcesignup"),Helpers.GlobalEventTracker._baseSend("email:forcesignup",e)},purchaseCanceled:function(){var e={stage_id:Helpers.StageType.getStageID()};Helpers.GlobalEventTracker.track("Purchase:UserCanceledPayment",e),Helpers.GlobalEventTracker.track("email:purchase:canceled",e)},bookmarked:function(e){Helpers.GlobalEventTracker.track("BookmarkedStageEvent:Bookmark",e),e.stage_found=window.location.href,Helpers.GlobalEventTracker.track("email:StageBookmarked",e)},downloadCrop:function(e,t){var i=window._stageData||{};i.stage_data&&(i=i.stage_data);var n={category:window._pl_category,stage_type:Helpers.StageType._types[i.image_type]||"No Info",tags:Helpers.StageType.getStageTags()||"No Info",background:Helpers.StageType.getBackgroundOrColorID()||"No Info",thumb:i.large_thumb||"No Info",slug:i.slug||"No Info",label:e};this._baseSend("Download:crop",Object.assign(n,t))},assetIdUndefined:function(e){this._baseSend("AssetId:undefined",e)},breadcrumbClicked:function(){this._baseSend("Breadcrumb:navigate:home")},previewModeCTAClicked:function(e){this._baseSend("previewModeModal:modal:cta-clicked",e)},previewModeModalClosed:function(){this._baseSend("previewModeModal:modal:closed")},previewModeNavigationPrev:function(){this._baseSend("previewModeModal:modal:previous")},previewModeNavigationNext:function(){this._baseSend("previewModeModal:modal:next")},sendBrandEvent:function(e,t){this._baseSend("brand:"+e,t)},googleButtonClick:function(e,t){this._baseSend("googlesso:button:click",{label:e,isGoogleFallbackEnabled:t})},googleSigninSuccess:function(e){e.provider="google",this.externalSsoSigninSuccess(e)},externalSsoSigninSuccess:function(e){var t=e.userData,i=e.provider;this.ssoTrack(i+"sso:"+e.source+":success",{error:!1,user:t.email,message:Helpers.App.capitalizeFirstLetter(i)+" authentication successful.",response:t,label:t.authenticated_by,isGooglePopupEnabled:e.isGoogleFallbackEnabled})},googleSigninError:function(e){this._baseSend("googlesso:"+e.source+":error",{error:e.error,label:"google",isGooglePopupEnabled:e.isGoogleFallbackEnabled})},googleStartFallback:function(e){this._baseSend("googlesso:fallback:start",{label:e})},googleFinishFallback:function(){this.ssoTrack("google:fallback:finish",{label:Helpers.App.getUrlParam("googleFallback"),error:!1,message:"Google authentication fallback finished."})},recommendedTemplatesOpen:function(){this._baseSend("recommendations:Open")}}),function(){if("Other"!==BrowserDetect.browser){if(GoogleTagManagerWrapper.init(window._pl_dataLayerNames),window.apiPage===!0){var e={"gtm.blocklist":["customScripts","nonGoogleIframes"]};window.dataLayer=window.dataLayer||[],window.dataLayer.push(e),GoogleTagManagerWrapper.pushToDataLayers(e)}var t=window._pl_featureFlags.amplitude_sdk,i=window._pl_featureFlags.segment_sdk;if(t){!function(){"use strict";!function(e,t){var i=e.amplitude||{_q:[],_iq:[]};if(i.invoked)e.console&&console.error&&console.error("Amplitude snippet has been loaded.");else{var n=function(e,t){e.prototype[t]=function(){return this._q.push({name:t,args:Array.prototype.slice.call(arguments,0)}),this}},s=function(e,t,i){return function(n){e._q.push({name:t,args:Array.prototype.slice.call(i,0),resolve:n})}},r=function(e,t,i){e[t]=function(){return i?{promise:new Promise(s(e,t,Array.prototype.slice.call(arguments)))}:void 0}},o=function(e){for(var t=0;t<m.length;t++)r(e,m[t],!1);for(var i=0;i<g.length;i++)r(e,g[i],!0)};i.invoked=!0;var a=t.createElement("script");a.type="text/javascript",a.integrity="sha384-GHWzi7MsT/TD3t0f+KUaVeuvPUsuVgdUKegrAWlzO4I83+klmUJna8WTuUunlsg6",a.crossOrigin="anonymous",a.async=!0,a.src="https://cdn.amplitude.com/libs/analytics-browser-1.6.6-min.js.gz",a.onload=function(){e.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK")};var l=t.getElementsByTagName("script")[0];l.parentNode.insertBefore(a,l);for(var c=function(){return this._q=[],this},u=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove","getUserProperties"],d=0;d<u.length;d++)n(c,u[d]);i.Identify=c;for(var h=function(){return this._q=[],this},p=["getEventProperties","setProductId","setQuantity","setPrice","setRevenue","setRevenueType","setEventProperties"],f=0;f<p.length;f++)n(h,p[f]);i.Revenue=h;var m=["getDeviceId","setDeviceId","getSessionId","setSessionId","getUserId","setUserId","setOptOut","setTransport","reset"],g=["init","add","remove","track","logEvent","identify","groupIdentify","setGroup","revenue","flush"];o(i),i.createInstance=function(){var e=i._iq.push({_q:[]})-1;return o(i._iq[e]),i._iq[e]},e.amplitude=i}}(window,document)}();var n=JSON.parse(localStorage.getItem("ajs_anonymous_id"));AmplitudeWrapper.init({deviceId:n}),Helpers.GlobalEventTracker.addSdk(function(){return AmplitudeWrapper})}i&&(!function(){var e=window.analytics=window.analytics||[];if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"],e.factory=function(t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(t),e.push(i),e}};for(var t=0;t<e.methods.length;t++){var i=e.methods[t];e[i]=e.factory(i)}e.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)},e.SNIPPET_VERSION="3.0.0";var n="muJgeE9VHlrfcX82OC6cfevt3cpjGnh8";"production"===window.environment&&(n="HE9nViXWoUR4HoEnrhnOmiq20RGtooSQ"),e.load(n)}}(),Helpers.GlobalEventTracker.addSdk(function(){return window.analytics})),Helpers.GlobalEventTracker.onSdkReady(function(){1==window._pl_isUserLogged&&Helpers.GlobalEventTracker.identifyUser(),s()}),t===!0&&i===!0&&window.analytics.ready(function(){amplitude.setDeviceId(window.analytics.user().anonymousId())}),t===!0&&i===!1&&AmplitudeWrapper.addPlugin(HotjarPlugin);var s=function(){var e=null,t=window._pl_category,i=window._pl_userInfo;window._stageData&&window._stageData.stage_data&&(e=window._stageData.stage_data.id),Helpers.GlobalEventTracker.pageView({properties:{email:Helpers.GlobalEventTracker.getUserEmail(),status:i.status},userId:i.id,stage_id:e,page_category:t,page_type:window.pageType.page_type,experiment_id:$.cookie("experiment_id")})}}}(),/**
 * @license
 * Video.js 7.3.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["global/window","global/document"],t):e.videojs=t(e.window,e.document)}(this,function(e,t){function i(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t,i){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var s=[null];s.push.apply(s,t);var r=new(Function.bind.apply(e,s));return i&&n(r,i.prototype),r}).apply(null,arguments)}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){return t||(t=e.slice(0)),e.raw=t,e}function a(e,t){Je(e).forEach(function(i){return t(e[i],i)})}function l(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;t>n;n++)i[n-1]=arguments[n];return Object.assign?Object.assign.apply(Object,[e].concat(i)):(i.forEach(function(t){t&&a(t,function(t,i){e[i]=t})}),e)}function c(e){return!!e&&"object"==typeof e}function u(e){return c(e)&&"[object Object]"===Ke.call(e)&&e.constructor===Object}function d(t,i){if(!t||!i)return"";if("function"!=typeof e.getComputedStyle)return"";var n=e.getComputedStyle(t);return n?n[i]:""}function h(){var e=o(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);return h=function(){return e},e}function p(e){return"string"==typeof e&&/\S/.test(e)}function f(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function m(){return t===e.document}function g(e){return c(e)&&1===e.nodeType}function v(){try{return e.parent!==e.self}catch(t){return!0}}function y(e){return function(i,n){if(!p(i))return t[e](null);p(n)&&(n=t.querySelector(n));var s=g(n)?n:t;return s[e]&&s[e](i)}}function b(e,i,n,s){void 0===e&&(e="div"),void 0===i&&(i={}),void 0===n&&(n={});var r=t.createElement(e);return Object.getOwnPropertyNames(i).forEach(function(e){var t=i[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(Ye.warn(Qe(h(),e,t)),r.setAttribute(e,t)):"textContent"===e?_(r,t):r[e]=t}),Object.getOwnPropertyNames(n).forEach(function(e){r.setAttribute(e,n[e])}),s&&H(r,s),r}function _(e,t){return"undefined"==typeof e.textContent?e.innerText=t:e.textContent=t,e}function w(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function C(e,t){return f(t),e.classList?e.classList.contains(t):(i=t,new RegExp("(^|\\s)"+i+"($|\\s)")).test(e.className);var i}function S(e,t){return e.classList?e.classList.add(t):C(e,t)||(e.className=(e.className+" "+t).trim()),e}function T(e,t){return e.classList?e.classList.remove(t):(f(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function k(e,t,i){var n=C(e,t);return"function"==typeof i&&(i=i(e,t)),"boolean"!=typeof i&&(i=!n),i!==n?(i?S(e,t):T(e,t),e):void 0}function E(e,t){Object.getOwnPropertyNames(t).forEach(function(i){var n=t[i];null===n||"undefined"==typeof n||!1===n?e.removeAttribute(i):e.setAttribute(i,!0===n?"":n)})}function I(e){var t={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&0<e.attributes.length)for(var n=e.attributes,s=n.length-1;s>=0;s--){var r=n[s].name,o=n[s].value;"boolean"!=typeof e[r]&&-1===i.indexOf(","+r+",")||(o=null!==o),t[r]=o}return t}function x(e,t){return e.getAttribute(t)}function P(e,t,i){e.setAttribute(t,i)}function A(e,t){e.removeAttribute(t)}function D(){t.body.focus(),t.onselectstart=function(){return!1}}function L(){t.onselectstart=function(){return!0}}function O(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(i[e]=t[e])}),i.height||(i.height=parseFloat(d(e,"height"))),i.width||(i.width=parseFloat(d(e,"width"))),i}}function M(i){var n;if(i.getBoundingClientRect&&i.parentNode&&(n=i.getBoundingClientRect()),!n)return{left:0,top:0};var s=t.documentElement,r=t.body,o=s.clientLeft||r.clientLeft||0,a=e.pageXOffset||r.scrollLeft,l=n.left+a-o,c=s.clientTop||r.clientTop||0,u=e.pageYOffset||r.scrollTop,d=n.top+u-c;return{left:Math.round(l),top:Math.round(d)}}function N(e,t){var i={},n=M(e),s=e.offsetWidth,r=e.offsetHeight,o=n.top,a=n.left,l=t.pageY,c=t.pageX;return t.changedTouches&&(c=t.changedTouches[0].pageX,l=t.changedTouches[0].pageY),i.y=Math.max(0,Math.min(1,(o-l+r)/r)),i.x=Math.max(0,Math.min(1,(c-a)/s)),i}function R(e){return c(e)&&3===e.nodeType}function U(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function $(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),g(e)||R(e)?e:"string"==typeof e&&/\S/.test(e)?t.createTextNode(e):void 0}).filter(function(e){return e})}function H(e,t){return $(t).forEach(function(t){return e.appendChild(t)}),e}function B(e,t){return H(U(e),t)}function F(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||0===e.button&&1===e.buttons}function j(){return it++}function z(e){var t=e[st];return t||(t=e[st]=j()),nt[t]||(nt[t]={}),nt[t]}function W(e){var t=e[st];return!!t&&!!Object.getOwnPropertyNames(nt[t]).length}function V(e){var t=e[st];if(t){delete nt[t];try{delete e[st]}catch(t){e.removeAttribute?e.removeAttribute(st):e[st]=null}}}function q(e,t){var i=z(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&V(e)}function G(e,t,i,n){i.forEach(function(i){e(t,i,n)})}function Y(i){function n(){return!0}function s(){return!1}if(!i||!i.isPropagationStopped){var r=i||e.event;for(var o in i={},r)"layerX"!==o&&"layerY"!==o&&"keyLocation"!==o&&"webkitMovementX"!==o&&"webkitMovementY"!==o&&("returnValue"===o&&r.preventDefault||(i[o]=r[o]));if(i.target||(i.target=i.srcElement||t),i.relatedTarget||(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),i.preventDefault=function(){r.preventDefault&&r.preventDefault(),i.returnValue=!1,r.returnValue=!1,i.defaultPrevented=!0},i.defaultPrevented=!1,i.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),i.cancelBubble=!0,r.cancelBubble=!0,i.isPropagationStopped=n},i.isPropagationStopped=s,i.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),i.isImmediatePropagationStopped=n,i.stopPropagation()},i.isImmediatePropagationStopped=s,null!==i.clientX&&void 0!==i.clientX){var a=t.documentElement,l=t.body;i.pageX=i.clientX+(a&&a.scrollLeft||l&&l.scrollLeft||0)-(a&&a.clientLeft||l&&l.clientLeft||0),i.pageY=i.clientY+(a&&a.scrollTop||l&&l.scrollTop||0)-(a&&a.clientTop||l&&l.clientTop||0)}i.which=i.charCode||i.keyCode,null!==i.button&&void 0!==i.button&&(i.button=1&i.button?0:4&i.button?1:2&i.button?2:0)}return i}function X(e,t,i){if(Array.isArray(t))return G(X,e,t,i);var n=z(e);if(n.handlers||(n.handlers={}),n.handlers[t]||(n.handlers[t]=[]),i.guid||(i.guid=j()),n.handlers[t].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(t,i){if(!n.disabled){t=Y(t);var s=n.handlers[t.type];if(s)for(var r=s.slice(0),o=0,a=r.length;a>o&&!t.isImmediatePropagationStopped();o++)try{r[o].call(e,t,i)}catch(t){Ye.error(t)}}}),1===n.handlers[t].length)if(e.addEventListener){var s=!1;rt&&-1<at.indexOf(t)&&(s={passive:!0}),e.addEventListener(t,n.dispatcher,s)}else e.attachEvent&&e.attachEvent("on"+t,n.dispatcher)}function Q(e,t,i){if(W(e)){var n=z(e);if(n.handlers){if(Array.isArray(t))return G(Q,e,t,i);var s=function(e,t){n.handlers[t]=[],q(e,t)};if(void 0!==t){var r=n.handlers[t];if(r)if(i){if(i.guid)for(var o=0;o<r.length;o++)r[o].guid===i.guid&&r.splice(o--,1);q(e,t)}else s(e,t)}else for(var a in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},a)&&s(e,a)}}}function K(e,t,i){var n=W(e)?z(e):{},s=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=Y(t),n.dispatcher&&n.dispatcher.call(e,t,i),s&&!t.isPropagationStopped()&&!0===t.bubbles)K.call(null,s,t,i);else if(!s&&!t.defaultPrevented){var r=z(t.target);t.target[t.type]&&(r.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),r.disabled=!1)}return!t.defaultPrevented}function J(e,t,i){if(Array.isArray(t))return G(J,e,t,i);var n=function s(){Q(e,t,s),i.apply(this,arguments)};n.guid=i.guid=i.guid||j(),X(e,t,n)}function Z(t,i){i&&(ot=i),e.setTimeout(ut,t)}function ee(t,i){void 0===i&&(i={});var n=i.eventBusKey;if(n){if(!t[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');t.eventBusEl_=t[n]}else t.eventBusEl_=b("span",{className:"vjs-event-bus"});return l(t,Tt),t.on("dispose",function(){t.off(),e.setTimeout(function(){t.eventBusEl_=null},0)}),t}function te(e,t){return l(e,kt),e.state=l({},e.state,t),"function"==typeof e.handleStateChanged&&vt(e)&&e.on("statechanged",e.handleStateChanged),e}function ie(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}function ne(){for(var e={},t=arguments.length,i=new Array(t),n=0;t>n;n++)i[n]=arguments[n];return i.forEach(function(t){t&&a(t,function(t,i){u(t)?(u(e[i])||(e[i]={}),e[i]=ne(e[i],t)):e[i]=t})}),e}function se(e,t,i,n){return function(e,t,i){if("number"!=typeof t||0>t||t>i)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}(e,n,i.length-1),i[n][t]}function re(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:se.bind(null,"start",0,e),end:se.bind(null,"end",1,e)}}function oe(e,t){return Array.isArray(e)?re(e):void 0===e||void 0===t?re():re([[e,t]])}function ae(e,t){var i,n,s=0;if(!t)return 0;e&&e.length||(e=oe(0,0));for(var r=0;r<e.length;r++)i=e.start(r),t<(n=e.end(r))&&(n=t),s+=n-i;return s/t}function le(e){return e instanceof le?e:("number"==typeof e?this.code=e:"string"==typeof e?this.message=e:c(e)&&("number"==typeof e.code&&(this.code=e.code),l(this,e)),void(this.message||(this.message=le.defaultMessages[this.code]||"")))}function ce(e){return null!=e&&"function"==typeof e.then}function ue(e){ce(e)&&e.then(null,function(e){})}function de(e,t){return e(t={exports:{}},t.exports),t.exports}function he(e,t,i){var n=e;return Pi(t)?(i=t,"string"==typeof e&&(n={uri:e})):n=ji(t,{uri:e}),n.callback=i,n}function pe(e,t,i){return fe(t=he(e,t,i))}function fe(e){function t(e){return clearTimeout(l),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,o(e,m)}function i(){if(!s){var t;clearTimeout(l),t=e.useXDR&&void 0===a.status?200:1223===a.status?204:a.status;var i=m,n=null;return 0!==t?(i={body:function(){var e=void 0;if(e=a.response?a.response:a.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}(a),f)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:t,method:u,headers:{},url:c,rawRequest:a},a.getAllResponseHeaders&&(i.headers=Fi(a.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),o(n,i,i.body)}}if("undefined"==typeof e.callback)throw new Error("callback argument missing");var n,s,r=!1,o=function(t,i,n){r||(r=!0,e.callback(t,i,n))},a=e.xhr||null;a||(a=e.cors||e.useXDR?new pe.XDomainRequest:new pe.XMLHttpRequest);var l,c=a.url=e.uri||e.url,u=a.method=e.method||"GET",d=e.body||e.data,h=a.headers=e.headers||{},p=!!e.sync,f=!1,m={body:void 0,headers:{},statusCode:0,method:u,url:c,rawRequest:a};if("json"in e&&!1!==e.json&&(f=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==u&&"HEAD"!==u&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),d=JSON.stringify(!0===e.json?d:e.json))),a.onreadystatechange=function(){4===a.readyState&&setTimeout(i,0)},a.onload=i,a.onerror=t,a.onprogress=function(){},a.onabort=function(){s=!0},a.ontimeout=t,a.open(u,c,!p,e.username,e.password),p||(a.withCredentials=!!e.withCredentials),!p&&0<e.timeout&&(l=setTimeout(function(){if(!s){s=!0,a.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)}},e.timeout)),a.setRequestHeader)for(n in h)h.hasOwnProperty(n)&&a.setRequestHeader(n,h[n]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(a.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(a),a.send(d||null),a}function me(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function ge(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):59<i[1]?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function ve(){this.values=Zi(null)}function ye(e,t,i,n){var s=n?e.split(n):[e];for(var r in s)if("string"==typeof s[r]){var o=s[r].split(i);2===o.length&&t(o[0],o[1])}}function be(e,t,i){function n(){var t=ge(e);if(null===t)throw new me(me.Errors.BadTimeStamp,"Malformed timestamp: "+l);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}var r,o,a,l=e;if(s(),t.startTime=n(),s(),"-->"!==e.substr(0,3))throw new me(me.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+l);e=e.substr(3),s(),t.endTime=n(),s(),r=e,o=t,a=new ve,ye(r,function(e,t){switch(e){case"region":for(var n=i.length-1;n>=0;n--)if(i[n].id===t){a.set(e,i[n].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var s=t.split(","),r=s[0];a.integer(e,r),a.percent(e,r)&&a.set("snapToLines",!1),a.alt(e,r,["auto"]),2===s.length&&a.alt("lineAlign",s[1],["start","middle","end"]);break;case"position":s=t.split(","),a.percent(e,s[0]),2===s.length&&a.alt("positionAlign",s[1],["start","middle","end"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),o.region=a.get("region",null),o.vertical=a.get("vertical",""),o.line=a.get("line","auto"),o.lineAlign=a.get("lineAlign","start"),o.snapToLines=a.get("snapToLines",!0),o.size=a.get("size",100),o.align=a.get("align","middle"),o.position=a.get("position",{start:0,left:0,middle:50,end:100,right:100},o.align),o.positionAlign=a.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},o.align)}function _e(e,t){function i(){if(!t)return null;var e,i=t.match(/^([^<]*)(<[^>]*>?)?/);return e=i[1]?i[1]:i[2],t=t.substr(e.length),e}function n(e){return en[e]}function s(e){for(;f=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(f[0],n);return e}function r(t,i){var n=tn[t];if(!n)return null;var s=e.document.createElement(n);s.localName=n;var r=nn[t];return r&&i&&(s[r]=i.trim()),s}for(var o,a,l,c=e.document.createElement("div"),u=c,d=[];null!==(o=i());)if("<"!==o[0])u.appendChild(e.document.createTextNode(s(o)));else{if("/"===o[1]){d.length&&d[d.length-1]===o.substr(2).replace(">","")&&(d.pop(),u=u.parentNode);continue}var h,p=ge(o.substr(1,o.length-2));if(p){h=e.document.createProcessingInstruction("timestamp",p),u.appendChild(h);continue}var f=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!f)continue;if(!(h=r(f[1],f[3])))continue;if(a=u,sn[(l=h).localName]&&sn[l.localName]!==a.localName)continue;f[2]&&(h.className=f[2].substr(1).replace("."," ")),d.push(f[1]),u.appendChild(h),u=h}return c}function we(e){for(var t=0;t<rn.length;t++){var i=rn[t];if(e>=i[0]&&e<=i[1])return!0}return!1}function Ce(){}function Se(e,t,i){Ce.call(this),this.cue=t,this.cueDiv=_e(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:function(e){function t(e,t){for(var i=t.childNodes.length-1;i>=0;i--)e.push(t.childNodes[i])}function i(e){if(!e||!e.length)return null;var n=e.pop(),s=n.textContent||n.innerText;if(s){var r=s.match(/^.*(\n|\r)/);return r?r[e.length=0]:s}return"ruby"===n.tagName?i(e):n.childNodes?(t(e,n),i(e)):void 0}var n=[],s="";if(!e||!e.childNodes)return"ltr";for(t(n,e);s=i(n);)for(var r=0;r<s.length;r++)if(we(s.charCodeAt(r)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var s=0;switch(t.positionAlign){case"start":s=t.position;break;case"middle":s=t.position-t.size/2;break;case"end":s=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(s,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(s,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Te(e){var t,i,n,s;if(e.div){i=e.div.offsetHeight,n=e.div.offsetWidth,s=e.div.offsetTop;var r=(r=e.div.childNodes)&&(r=r[0])&&r.getClientRects&&r.getClientRects();e=e.div.getBoundingClientRect(),t=r?Math.max(r[0]&&r[0].height||0,e.height/r.length):0}this.left=e.left,this.right=e.right,this.top=e.top||s,this.height=e.height||i,this.bottom=e.bottom||s+(e.height||i),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight}function ke(e,t,i,n){var s=new Te(t),r=t.cue,o=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,i=t.textTrackList,n=0,s=0;s<i.length&&i[s]!==t;s++)"showing"===i[s].mode&&n++;return-1*++n}(r),a=[];if(r.snapToLines){var l;switch(r.vertical){case"":a=["+y","-y"],l="height";break;case"rl":a=["+x","-x"],l="width";break;case"lr":a=["-x","+x"],l="width"}var c=s.lineHeight,u=c*Math.round(o),d=i[l]+c,h=a[0];Math.abs(u)>d&&(u=0>u?-1:1,u*=Math.ceil(d/c)*c),0>o&&(u+=""===r.vertical?i.height:i.width,a=a.reverse()),s.move(h,u)}else{var p=s.lineHeight/i.height*100;switch(r.lineAlign){case"middle":o-=p/2;break;case"end":o-=p}switch(r.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}a=["+y","-x","+x","-y"],s=new Te(t)}var f=function(e,t){for(var s,r=new Te(e),o=1,a=0;a<t.length;a++){for(;e.overlapsOppositeAxis(i,t[a])||e.within(i)&&e.overlapsAny(n);)e.move(t[a]);if(e.within(i))return e;var l=e.intersectPercentage(i);o>l&&(s=new Te(e),o=l),e=new Te(r)}return s||r}(s,a);t.move(f.toCSSCompatValues(i))}function Ee(){}function Ie(e){return"string"==typeof e&&!!ln[e.toLowerCase()]&&e.toLowerCase()}function xe(e,t,i){this.hasBeenReset=!1;var n="",s=!1,r=e,o=t,a=i,l=null,c="",u=!0,d="auto",h="start",p=50,f="middle",m=50,g="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(e){n=""+e}},pauseOnExit:{enumerable:!0,get:function(){return s},set:function(e){s=!!e}},startTime:{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");r=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");o=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return a},set:function(e){a=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(e){var t,i="string"==typeof(t=e)&&!!an[t.toLowerCase()]&&t.toLowerCase();if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");c=i,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return u},set:function(e){u=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=Ie(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");h=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return p},set:function(e){if(0>e||e>100)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=Ie(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return m},set:function(e){if(0>e||e>100)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){var t=Ie(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}}}),this.displayState=void 0}function Pe(e){return"number"==typeof e&&e>=0&&100>=e}function Ae(e,t,i){e.setTimeout(function(){return function n(e,t,i,s,r,o){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===o&&(o=!1);var a=t,c=a[0],u=a.slice(1);if("string"==typeof c)n(e,fn[c],i,s,r,o);else if(c){var d=Oe(s,c);if(!d.setSource)return r.push(d),n(e,u,i,s,r,o);d.setSource(l({},e),function(t,a){return t?n(e,u,i,s,r,o):(r.push(d),void n(a,e.type===a.type?u:fn[a.type],i,s,r,o))})}else u.length?n(e,u,i,s,r,o):o?i(e,r):n(e,fn["*"],i,s,r,!0)}(t,fn[t.type],i,e)},1)}function De(e,t,i,n){void 0===n&&(n=null);var s="call"+ie(i),r=e.reduce(Le(s),n),o=r===gn,a=o?null:t[i](r);return function(e,t,i,n){for(var s=e.length-1;s>=0;s--){var r=e[s];r[t]&&r[t](n,i)}}(e,i,a,o),a}function Le(e){return function(t,i){return t===gn?gn:i[e]?i[e](t):t}}function Oe(e,t){var i=mn[e.id()],n=null;if(null==i)return n=t(e),mn[e.id()]=[[t,n]],n;for(var s=0;s<i.length;s++){var r=i[s],o=r[0],a=r[1];o===t&&(n=a)}return null===n&&(n=t(e),i.push([t,n])),n}function Me(e){var t=wn(e.src);return!e.type&&t&&(e.type=t),e}function Ne(e,t){var i;if(4===e.length)i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");i=e.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function Re(e,t,i){try{e.style[t]=i}catch(e){return}}function Ue(e,t){return void 0===t&&(t=e),Mn(e,t)}function $e(e,t){return t&&(e=t(e)),e&&"none"!==e?e:void 0}function He(){var e=o(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);return He=function(){return e},e}function Be(){var e=o(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);return Be=function(){return e},e}function Fe(e,i,n){var s=Fe.getPlayer(e);if(s)return i&&Ye.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&s.ready(n),s;var r="string"==typeof e?Ze("#"+ur(e)):e;if(!g(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");t.body.contains(r)||Ye.warn("The element supplied is not included in the DOM"),i=i||{},Fe.hooks("beforesetup").forEach(function(e){var t=e(r,ne(i));c(t)&&!Array.isArray(t)?i=ne(i,t):Ye.error("please return an object in beforesetup hooks")});var o=Et.getComponent("Player");return s=new o(r,i,n),Fe.hooks("setup").forEach(function(e){return e(s)}),s}function je(e,t){return function(i){var n=this;if(!t)return new au(e);if(au&&!i){var s=ze(t.toString().replace(/^function.+?{/,"").slice(0,-1));return this[nu]=new au(s),function(e,t){if(e&&t){var i=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&ou.revokeObjectURL(e.objURL),i.call(e)}}}(this[nu],s),this[nu]}var r={postMessage:function(e){n.onmessage&&setTimeout(function(){n.onmessage({data:e,target:r})})}};t.call(r),this.postMessage=function(e){setTimeout(function(){r.onmessage({data:e,target:n})})},this.isThisThread=!0}}function ze(e){try{return ou.createObjectURL(new Blob([e],{type:su}))}catch(t){var i=new ru;return i.append(e),ou.createObjectURL(i.getBlob(type))}}function We(){}e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t;var Ve="7.3.0",qe=[],Ge=function(t,i){return function(n,s,r){var o=i.levels[s],a=new RegExp("^("+o+")$");if("log"!==n&&r.unshift(n.toUpperCase()+":"),r.unshift(t+":"),qe&&qe.push([].concat(r)),e.console){var l=e.console[n];l||"debug"!==n||(l=e.console.info||e.console.log),l&&o&&a.test(n)&&l[Array.isArray(r)?"apply":"call"](e.console,r)}}},Ye=function Ed(e){var t,i="info",n=function(){for(var e=arguments.length,n=new Array(e),s=0;e>s;s++)n[s]=arguments[s];t("log",i,n)};return t=Ge(e,n),n.createLogger=function(t){return Ed(e+": "+t)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},n.level=function(e){if("string"==typeof e){if(!n.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');i=e}return i},(n.history=function(){return qe?[].concat(qe):[]}).filter=function(e){return(qe||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},n.history.clear=function(){qe&&(qe.length=0)},n.history.disable=function(){null!==qe&&(qe.length=0,qe=null)},n.history.enable=function(){null===qe&&(qe=[])},n.error=function(){for(var e=arguments.length,n=new Array(e),s=0;e>s;s++)n[s]=arguments[s];return t("error",i,n)},n.warn=function(){for(var e=arguments.length,n=new Array(e),s=0;e>s;s++)n[s]=arguments[s];return t("warn",i,n)},n.debug=function(){for(var e=arguments.length,n=new Array(e),s=0;e>s;s++)n[s]=arguments[s];return t("debug",i,n)},n}("VIDEOJS"),Xe=Ye.createLogger,Qe=function(e){for(var t="",i=0;i<arguments.length;i++)t+=e[i].replace(/\n\r?\s*/g,"")+(arguments[i+1]||"");return t},Ke=Object.prototype.toString,Je=function(e){return c(e)?Object.keys(e):[]},Ze=y("querySelector"),et=y("querySelectorAll"),tt=Object.freeze({isReal:m,isEl:g,isInFrame:v,createEl:b,textContent:_,prependTo:w,hasClass:C,addClass:S,removeClass:T,toggleClass:k,setAttributes:E,getAttributes:I,getAttribute:x,setAttribute:P,removeAttribute:A,blockTextSelection:D,unblockTextSelection:L,getBoundingClientRect:O,findPosition:M,getPointerPosition:N,isTextNode:R,emptyEl:U,normalizeContent:$,appendContent:H,insertContent:B,isSingleLeftClick:F,$:Ze,$$:et}),it=1,nt={},st="vdata"+(new Date).getTime(),rt=!1;!function(){try{var t=Object.defineProperty({},"passive",{get:function(){rt=!0}});e.addEventListener("test",null,t),e.removeEventListener("test",null,t)}catch(t){}}();var ot,at=["touchstart","touchmove"],lt=Object.freeze({fixEvent:Y,on:X,off:Q,trigger:K,one:J}),ct=!1,ut=function(){if(m()&&!1!==ot.options.autoSetup){var e=Array.prototype.slice.call(t.getElementsByTagName("video")),i=Array.prototype.slice.call(t.getElementsByTagName("audio")),n=Array.prototype.slice.call(t.getElementsByTagName("video-js")),s=e.concat(i,n);if(s&&0<s.length)for(var r=0,o=s.length;o>r;r++){var a=s[r];if(!a||!a.getAttribute){Z(1);break}void 0===a.player&&null!==a.getAttribute("data-setup")&&ot(a)}else ct||Z(1)}};m()&&"complete"===t.readyState?ct=!0:J(e,"load",function(){ct=!0});var dt,ht=function(e){var i=t.createElement("style");return i.className=e,i},pt=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},ft=function(e,t,i){t.guid||(t.guid=j());var n=function(){return t.apply(e,arguments)};return n.guid=i?i+"_"+t.guid:t.guid,n},mt=function(e,t){var i=Date.now();return function(){var n=Date.now();n-i>=t&&(e.apply(void 0,arguments),i=n)}},gt=function(){};gt.prototype.allowedEvents_={},gt.prototype.addEventListener=gt.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},X(this,e,t),this.addEventListener=i},gt.prototype.removeEventListener=gt.prototype.off=function(e,t){Q(this,e,t)},gt.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},J(this,e,t),this.addEventListener=i},gt.prototype.dispatchEvent=gt.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=Y(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),K(this,e)},gt.prototype.queueTrigger=function(t){var i=this;dt||(dt=new Map);var n=t.type||t,s=dt.get(this);s||(s=new Map,dt.set(this,s));var r=s.get(n);s["delete"](n),e.clearTimeout(r);var o=e.setTimeout(function(){0===s.size&&(s=null,dt["delete"](i)),i.trigger(t)},0);s.set(n,o)};var vt=function(e){return e instanceof gt||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},yt=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},bt=function(e){if(!e.nodeName&&!vt(e))throw new Error("Invalid target; must be a DOM node or evented object.")},_t=function(e){if(!yt(e))throw new Error("Invalid event type; must be a non-empty string or array.")},wt=function(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},Ct=function(e,t){var i,n,s,r=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return s=r?(i=e.eventBusEl_,3<=t.length&&t.shift(),n=t[0],t[1]):(i=t[0],n=t[1],t[2]),bt(i),_t(n),wt(s),{isTargetingSelf:r,target:i,type:n,listener:s=ft(e,s)}},St=function(e,t,i,n){bt(e),e.nodeName?lt[t](e,i,n):e[t](i,n)},Tt={on:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;t>n;n++)i[n]=arguments[n];var s=Ct(this,i),r=s.isTargetingSelf,o=s.target,a=s.type,l=s.listener;if(St(o,"on",a,l),!r){var c=function(){return e.off(o,a,l)};c.guid=l.guid;var u=function(){return e.off("dispose",c)};u.guid=l.guid,St(this,"on","dispose",c),St(o,"on","dispose",u)}},one:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;t>n;n++)i[n]=arguments[n];var s=Ct(this,i),r=s.isTargetingSelf,o=s.target,a=s.type,l=s.listener;if(r)St(o,"one",a,l);else{var c=function u(){e.off(o,a,u);for(var t=arguments.length,i=new Array(t),n=0;t>n;n++)i[n]=arguments[n];l.apply(null,i)};c.guid=l.guid,St(o,"one",a,c)}},off:function(e,t,i){if(!e||yt(e))Q(this.eventBusEl_,e,t);else{var n=e,s=t;bt(n),_t(s),wt(i),i=ft(this,i),this.off("dispose",i),n.nodeName?(Q(n,s,i),Q(n,"dispose",i)):vt(n)&&(n.off(s,i),n.off("dispose",i))}},trigger:function(e,t){return K(this.eventBusEl_,e,t)}},kt={state:{},setState:function(e){var t,i=this;return"function"==typeof e&&(e=e()),a(e,function(e,n){i.state[n]!==e&&((t=t||{})[n]={from:i.state[n],to:e}),i.state[n]=e}),t&&vt(this)&&this.trigger({changes:t,type:"statechanged"}),t}},Et=function(){function t(e,t,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.options_=ne({},this.options_),t=this.options_=ne(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var n=e&&e.id&&e.id()||"no_player";this.id_=n+"_component_"+j()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&ee(this,{eventBusKey:this.el_?"el_":null}),te(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},!(this.childNameIndex_={})!==t.initChildren&&this.initChildren(),this.ready(i),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var i=t.prototype;return i.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),V(this.el_),this.el_=null),this.player_=null},i.player=function(){return this.player_;
},i.options=function(e){return Ye.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e&&(this.options_=ne(this.options_,e)),this.options_},i.el=function(){return this.el_},i.createEl=function(e,t,i){return b(e,t,i)},i.localize=function(e,t,i){void 0===i&&(i=e);var n=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),r=s&&s[n],o=n&&n.split("-")[0],a=s&&s[o],l=i;return r&&r[e]?l=r[e]:a&&a[e]&&(l=a[e]),t&&(l=l.replace(/\{(\d+)\}/g,function(e,i){var n=t[i-1],s=n;return"undefined"==typeof n&&(s=e),s})),l},i.contentEl=function(){return this.contentEl_||this.el_},i.id=function(){return this.id_},i.name=function(){return this.name_},i.children=function(){return this.children_},i.getChildById=function(e){return this.childIndex_[e]},i.getChild=function(e){return e?(e=ie(e),this.childNameIndex_[e]):void 0},i.addChild=function(e,i,n){var s,r;if(void 0===i&&(i={}),void 0===n&&(n=this.children_.length),"string"==typeof e){r=ie(e);var o=i.componentClass||r;i.name=r;var a=t.getComponent(o);if(!a)throw new Error("Component "+o+" does not exist");if("function"!=typeof a)return null;s=new a(this.player_||this,i)}else s=e;if(this.children_.splice(n,0,s),"function"==typeof s.id&&(this.childIndex_[s.id()]=s),(r=r||s.name&&ie(s.name()))&&(this.childNameIndex_[r]=s),"function"==typeof s.el&&s.el()){var l=this.contentEl().children[n]||null;this.contentEl().insertBefore(s.el(),l)}return s},i.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},i.initChildren=function(){var e=this,i=this.options_.children;if(i){var n,s=this.options_,r=t.getComponent("Tech");(n=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(e){return!n.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(t){var n,s;return s="string"==typeof t?i[n=t]||e.options_[n]||{}:(n=t.name,t),{name:n,opts:s}}).filter(function(e){var i=t.getComponent(e.opts.componentClass||ie(e.name));return i&&!r.isTech(i)}).forEach(function(t){var i=t.name,n=t.opts;if(void 0!==s[i]&&(n=s[i]),!1!==n){!0===n&&(n={}),n.playerOptions=e.options_.playerOptions;var r=e.addChild(i,n);r&&(e[i]=r)}})}},i.buildCSSClass=function(){return""},i.ready=function(e,t){return void 0===t&&(t=!1),e?this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e)):void 0},i.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},i.$=function(e,t){return Ze(e,t||this.contentEl())},i.$$=function(e,t){return et(e,t||this.contentEl())},i.hasClass=function(e){return C(this.el_,e)},i.addClass=function(e){S(this.el_,e)},i.removeClass=function(e){T(this.el_,e)},i.toggleClass=function(e,t){k(this.el_,e,t)},i.show=function(){this.removeClass("vjs-hidden")},i.hide=function(){this.addClass("vjs-hidden")},i.lockShowing=function(){this.addClass("vjs-lock-showing")},i.unlockShowing=function(){this.removeClass("vjs-lock-showing")},i.getAttribute=function(e){return x(this.el_,e)},i.setAttribute=function(e,t){P(this.el_,e,t)},i.removeAttribute=function(e){A(this.el_,e)},i.width=function(e,t){return this.dimension("width",e,t)},i.height=function(e,t){return this.dimension("height",e,t)},i.dimensions=function(e,t){this.width(e,!0),this.height(t)},i.dimension=function(e,t,i){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[e],s=n.indexOf("px");return-1!==s?parseInt(n.slice(0,s),10):parseInt(this.el_["offset"+ie(e)],10)},i.currentDimension=function(t){var i=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if("function"==typeof e.getComputedStyle){var n=e.getComputedStyle(this.el_);i=n.getPropertyValue(t)||n[t]}if(0===(i=parseFloat(i))){var s="offset"+ie(t);i=this.el_[s]}return i},i.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},i.currentWidth=function(){return this.currentDimension("width")},i.currentHeight=function(){return this.currentDimension("height")},i.focus=function(){this.el_.focus()},i.blur=function(){this.el_.blur()},i.emitTapEvents=function(){var e,t=0,i=null;this.on("touchstart",function(n){1===n.touches.length&&(i={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},t=(new Date).getTime(),e=!0)}),this.on("touchmove",function(t){if(1<t.touches.length)e=!1;else if(i){var n=t.touches[0].pageX-i.pageX,s=t.touches[0].pageY-i.pageY;10<Math.sqrt(n*n+s*s)&&(e=!1)}});var n=function(){e=!1};this.on("touchleave",n),this.on("touchcancel",n),this.on("touchend",function(n){!(i=null)===e&&(new Date).getTime()-t<200&&(n.preventDefault(),this.trigger("tap"))})},i.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=ft(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});var i=function(i){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",i),this.on("touchcancel",i)}},i.setTimeout=function(t,i){var n,s,r=this;return t=ft(this,t),n=e.setTimeout(function(){r.off("dispose",s),t()},i),(s=function(){return r.clearTimeout(n)}).guid="vjs-timeout-"+n,this.on("dispose",s),n},i.clearTimeout=function(t){e.clearTimeout(t);var i=function(){};return i.guid="vjs-timeout-"+t,this.off("dispose",i),t},i.setInterval=function(t,i){var n=this;t=ft(this,t);var s=e.setInterval(t,i),r=function(){return n.clearInterval(s)};return r.guid="vjs-interval-"+s,this.on("dispose",r),s},i.clearInterval=function(t){e.clearInterval(t);var i=function(){};return i.guid="vjs-interval-"+t,this.off("dispose",i),t},i.requestAnimationFrame=function(t){var i,n,s=this;return this.supportsRaf_?(t=ft(this,t),i=e.requestAnimationFrame(function(){s.off("dispose",n),t()}),(n=function(){return s.cancelAnimationFrame(i)}).guid="vjs-raf-"+i,this.on("dispose",n),i):this.setTimeout(t,1e3/60)},i.cancelAnimationFrame=function(t){if(this.supportsRaf_){e.cancelAnimationFrame(t);var i=function(){};return i.guid="vjs-raf-"+t,this.off("dispose",i),t}return this.clearTimeout(t)},t.registerComponent=function(e,i){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var n,s=t.getComponent("Tech"),r=s&&s.isTech(i),o=t===i||t.prototype.isPrototypeOf(i.prototype);if(r||!o)throw n=r?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+e+'"; '+n+".");e=ie(e),t.components_||(t.components_={});var a=t.getComponent("Player");if("Player"===e&&a&&a.players){var l=a.players,c=Object.keys(l);if(l&&0<c.length&&c.map(function(e){return l[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[e]=i},t.getComponent=function(e){return e?(e=ie(e),t.components_&&t.components_[e]?t.components_[e]:void 0):void 0},t}();Et.prototype.supportsRaf_="function"==typeof e.requestAnimationFrame&&"function"==typeof e.cancelAnimationFrame,Et.registerComponent("Component",Et);for(var It,xt,Pt,At,Dt,Lt=e.navigator&&e.navigator.userAgent||"",Ot=/AppleWebKit\/([\d.]+)/i.exec(Lt),Mt=Ot?parseFloat(Ot.pop()):null,Nt=/iPad/i.test(Lt),Rt=/iPhone/i.test(Lt)&&!Nt,Ut=/iPod/i.test(Lt),$t=Rt||Nt||Ut,Ht=(It=Lt.match(/OS (\d+)_/i))&&It[1]?It[1]:null,Bt=/Android/i.test(Lt),Ft=function(){var e=Lt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),jt=Bt&&5>Ft&&537>Mt,zt=/Firefox/i.test(Lt),Wt=/Edge/i.test(Lt),Vt=!Wt&&(/Chrome/i.test(Lt)||/CriOS/i.test(Lt)),qt=(xt=Lt.match(/(Chrome|CriOS)\/(\d+)/))&&xt[2]?parseFloat(xt[2]):null,Gt=(Pt=/MSIE\s(\d+)\.\d/.exec(Lt),!(At=Pt&&parseFloat(Pt[1]))&&/Trident\/7.0/i.test(Lt)&&/rv:11.0/.test(Lt)&&(At=11),At),Yt=/Safari/i.test(Lt)&&!Vt&&!Bt&&!Wt,Xt=(Yt||$t)&&!Vt,Qt=(m()&&("ontouchstart"in e||e.navigator.maxTouchPoints||e.DocumentTouch&&e.document instanceof e.DocumentTouch)),Kt=Object.freeze({IS_IPAD:Nt,IS_IPHONE:Rt,IS_IPOD:Ut,IS_IOS:$t,IOS_VERSION:Ht,IS_ANDROID:Bt,ANDROID_VERSION:Ft,IS_NATIVE_ANDROID:jt,IS_FIREFOX:zt,IS_EDGE:Wt,IS_CHROME:Vt,CHROME_VERSION:qt,IE_VERSION:Gt,IS_SAFARI:Yt,IS_ANY_SAFARI:Xt,TOUCH_ENABLED:Qt}),Jt={},Zt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],ei=Zt[0],ti=0;ti<Zt.length;ti++)if(Zt[ti][1]in t){Dt=Zt[ti];break}if(Dt)for(var ii=0;ii<Dt.length;ii++)Jt[ei[ii]]=Dt[ii];le.prototype.code=0,le.prototype.message="",le.prototype.status=null,le.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],le.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var ni=0;ni<le.errorTypes.length;ni++)le[le.errorTypes[ni]]=ni,le.prototype[le.errorTypes[ni]]=ni;var si=function(e,t){var i,n=null;try{i=JSON.parse(e,t)}catch(e){n=e}return[n,i]},ri=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,i,n){return e[i]&&(t[i]=e[i]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})},oi=function(e){var t=e.$$("track"),i=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=ri(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===i.indexOf(e)}).map(ri))},ai=function(e,t){return e.forEach(function(e){var i=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return i.addCue(e)})}),t.textTracks()},li="vjs-modal-dialog",ci=function(n){function s(e,t){var i;return(i=n.call(this,e,t)||this).opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=b("div",{className:li+"-content"},{role:"document"}),i.descEl_=b("p",{className:li+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),_(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}i(s,n);var r=s.prototype;return r.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},r.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,n.prototype.dispose.call(this)},r.buildCSSClass=function(){return li+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},r.handleKeyPress=function(e){27===e.which&&this.closeable()&&this.close()},r.label=function(){return this.localize(this.options_.label||"Modal Window")},r.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},r.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",ft(this,this.handleKeyPress)),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},r.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},r.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",ft(this,this.handleKeyPress)),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},r.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,i=this.getChild("closeButton");if(t&&!i){var n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close)}!t&&i&&(this.off(i,"close",this.close),this.removeChild(i),i.dispose())}return this.closeable_},r.fill=function(){this.fillWith(this.content())},r.fillWith=function(e){var t=this.contentEl(),i=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),B(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t);var s=this.getChild("closeButton");s&&i.appendChild(s.el_)},r.empty=function(){this.trigger("beforemodalempty"),U(this.contentEl()),this.trigger("modalempty")},r.content=function(e){return"undefined"!=typeof e&&(this.content_=e),this.content_},r.conditionalFocus_=function(){var e=t.activeElement,i=this.player_.el_;this.previouslyActiveEl_=null,(i.contains(e)||i===e)&&(this.previouslyActiveEl_=e,this.focus(),this.on(t,"keydown",this.handleKeyDown))},r.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(t,"keydown",this.handleKeyDown)},r.handleKeyDown=function(e){if(9===e.which){for(var i,n=this.focusableEls_(),s=this.el_.querySelector(":focus"),r=0;r<n.length;r++)if(s===n[r]){i=r;break}t.activeElement===this.el_&&(i=0),e.shiftKey&&0===i?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||i!==n.length-1||(n[0].focus(),e.preventDefault())}},r.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(t){return(t instanceof e.HTMLAnchorElement||t instanceof e.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof e.HTMLInputElement||t instanceof e.HTMLSelectElement||t instanceof e.HTMLTextAreaElement||t instanceof e.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof e.HTMLIFrameElement||t instanceof e.HTMLObjectElement||t instanceof e.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")})},s}(Et);ci.prototype.options_={pauseOnOpen:!0,temporary:!0},Et.registerComponent("ModalDialog",ci);var ui=function(e){function t(t){var i;void 0===t&&(t=[]),(i=e.call(this)||this).tracks_=[],Object.defineProperty(r(r(i)),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<t.length;n++)i.addTrack(t[n]);return i}i(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},n.removeTrack=function(e){for(var t,i=0,n=this.length;n>i;i++)if(this[i]===e){(t=this[i]).off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack"})},n.getTrackById=function(e){for(var t=null,i=0,n=this.length;n>i;i++){var s=this[i];if(s.id===e){t=s;break}}return t},t}(gt);for(var di in ui.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},ui.prototype.allowedEvents_)ui.prototype["on"+di]=null;var hi=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)},pi=function(e){function t(t){var i;void 0===t&&(t=[]);for(var n=t.length-1;n>=0;n--)if(t[n].enabled){hi(t,t[n]);break}return(i=e.call(this,t)||this).changing_=!1,i}return i(t,e),t.prototype.addTrack=function(t){var i=this;t.enabled&&hi(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",function(){i.changing_||(i.changing_=!0,hi(i,t),i.changing_=!1,i.trigger("change"))})},t}(ui),fi=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].selected=!1)},mi=function(e){function t(t){var i;void 0===t&&(t=[]);for(var n=t.length-1;n>=0;n--)if(t[n].selected){fi(t,t[n]);break}return(i=e.call(this,t)||this).changing_=!1,Object.defineProperty(r(r(i)),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),i}return i(t,e),t.prototype.addTrack=function(t){var i=this;t.selected&&fi(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",function(){i.changing_||(i.changing_=!0,fi(i,t),i.changing_=!1,i.trigger("change"))})},t}(ui),gi=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.addTrack=function(t){e.prototype.addTrack.call(this,t),t.addEventListener("modechange",ft(this,function(){this.queueTrigger("change")})),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",ft(this,function(){this.trigger("selectedlanguagechange")}))},t}(ui),vi=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,i=e.length;i>t;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,i=0,n=this.trackElements_.length;n>i;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t},t.removeTrackElement_=function(e){for(var t=0,i=this.trackElements_.length;i>t;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},e}(),yi=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,i=0,n=e.length;this.cues_=e,this.length_=e.length;var s=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(n>t)for(i=t;n>i;i++)s.call(this,i)},t.getCueById=function(e){for(var t=null,i=0,n=this.length;n>i;i++){var s=this[i];if(s.id===e){t=s;break}}return t},e}(),bi={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},_i={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},wi={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ci={disabled:"disabled",hidden:"hidden",showing:"showing"},Si=function(e){function t(t){var i;void 0===t&&(t={}),i=e.call(this)||this;var n={id:t.id||"vjs_track_"+j(),kind:t.kind||"",label:t.label||"",language:t.language||""},s=function(e){Object.defineProperty(r(r(i)),e,{get:function(){return n[e]},set:function(){}})};for(var o in n)s(o);return i}return i(t,e),t}(gt),Ti=function(i){var n=["protocol","hostname","port","pathname","search","hash","host"],s=t.createElement("a");s.href=i;var r,o=""===s.host&&"file:"!==s.protocol;o&&((r=t.createElement("div")).innerHTML='<a href="'+i+'"></a>',s=r.firstChild,r.setAttribute("style","display:none; position:absolute;"),t.body.appendChild(r));for(var a={},l=0;l<n.length;l++)a[n[l]]=s[n[l]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=e.location.protocol),o&&t.body.removeChild(r),a},ki=function(e){if(!e.match(/^https?:\/\//)){var i=t.createElement("div");i.innerHTML='<a href="'+e+'">x</a>',e=i.firstChild.href}return e},Ei=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(e);if(t)return t.pop().toLowerCase()}return""},Ii=function(t){var i=e.location,n=Ti(t);return(":"===n.protocol?i.protocol:n.protocol)+n.host!==i.protocol+i.host},xi=Object.freeze({parseUrl:Ti,getAbsoluteURL:ki,getFileExtension:Ei,isCrossOrigin:Ii}),Pi=function(e){var t=Ai.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},Ai=Object.prototype.toString;"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Di=de(function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}}),Li=(Di.left,Di.right,Function.prototype.toString),Oi=/^\s*class\b/,Mi=function(e){try{var t=Li.call(e);return Oi.test(t)}catch(e){return!1}},Ni=Object.prototype.toString,Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Ui=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(Ri)return function(e){try{return!Mi(e)&&(Li.call(e),!0)}catch(e){return!1}}(e);if(Mi(e))return!1;var t=Ni.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t},$i=Object.prototype.toString,Hi=Object.prototype.hasOwnProperty,Bi=function(e,t,i){if(!Ui(t))throw new TypeError("iterator must be a function");var n;3<=arguments.length&&(n=i),"[object Array]"===$i.call(e)?function(e,t,i){for(var n=0,s=e.length;s>n;n++)Hi.call(e,n)&&(null==i?t(e[n],n,e):t.call(i,e[n],n,e))}(e,t,n):"string"==typeof e?function(e,t,i){for(var n=0,s=e.length;s>n;n++)null==i?t(e.charAt(n),n,e):t.call(i,e.charAt(n),n,e)}(e,t,n):function(e,t,i){for(var n in e)Hi.call(e,n)&&(null==i?t(e[n],n,e):t.call(i,e[n],n,e))}(e,t,n)},Fi=function(e){if(!e)return{};var t={};return Bi(Di(e).split("\n"),function(e){var i,n=e.indexOf(":"),s=Di(e.slice(0,n)).toLowerCase(),r=Di(e.slice(n+1));"undefined"==typeof t[s]?t[s]=r:(i=t[s],"[object Array]"===Object.prototype.toString.call(i)?t[s].push(r):t[s]=[t[s],r])}),t},ji=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var n in i)zi.call(i,n)&&(e[n]=i[n])}return e},zi=Object.prototype.hasOwnProperty,Wi=pe;pe.XMLHttpRequest=e.XMLHttpRequest||function(){},pe.XDomainRequest="withCredentials"in new pe.XMLHttpRequest?pe.XMLHttpRequest:e.XDomainRequest,function(e,t){for(var i=0;i<e.length;i++)t(e[i])}(["get","put","post","patch","head","delete"],function(e){pe["delete"===e?"del":e]=function(t,i,n){return(i=he(t,i,n)).method=e.toUpperCase(),fe(i)}});var Vi=function(t,i){var n=new e.WebVTT.Parser(e,e.vttjs,e.WebVTT.StringDecoder()),s=[];n.oncue=function(e){i.addCue(e)},n.onparsingerror=function(e){s.push(e)},n.onflush=function(){i.trigger({type:"loadeddata",target:i})},n.parse(t),0<s.length&&(e.console&&e.console.groupCollapsed&&e.console.groupCollapsed("Text Track parsing errors for "+i.src),s.forEach(function(e){return Ye.error(e)}),e.console&&e.console.groupEnd&&e.console.groupEnd()),n.flush()},qi=function(t){function n(i){var n;if(void 0===i&&(i={}),!i.tech)throw new Error("A tech was not provided.");var s=ne(i,{kind:wi[i.kind]||"subtitles",language:i.language||i.srclang||""}),o=Ci[s.mode]||"disabled",a=s["default"];"metadata"!==s.kind&&"chapters"!==s.kind||(o="hidden"),(n=t.call(this,s)||this).tech_=s.tech,n.cues_=[],n.activeCues_=[];var l=new yi(n.cues_),c=new yi(n.activeCues_),u=!1,d=ft(r(r(n)),function(){this.activeCues=this.activeCues,u&&(this.trigger("cuechange"),u=!1)});return"disabled"!==o&&n.tech_.ready(function(){n.tech_.on("timeupdate",d)},!0),Object.defineProperties(r(r(n)),{"default":{get:function(){return a},set:function(){}},mode:{get:function(){return o},set:function(e){var t=this;Ci[e]&&("disabled"!==(o=e)?this.tech_.ready(function(){t.tech_.on("timeupdate",d)},!0):this.tech_.off("timeupdate",d),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?l:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return c;for(var e=this.tech_.currentTime(),t=[],i=0,n=this.cues.length;n>i;i++){var s=this.cues[i];s.startTime<=e&&s.endTime>=e?t.push(s):s.startTime===s.endTime&&s.startTime<=e&&s.startTime+.5>=e&&t.push(s)}if(u=!1,t.length!==this.activeCues_.length)u=!0;else for(var r=0;r<t.length;r++)-1===this.activeCues_.indexOf(t[r])&&(u=!0);return this.activeCues_=t,c.setCues_(this.activeCues_),c},set:function(){}}}),s.src?(n.src=s.src,function(t,i){var n={uri:t},s=Ii(t);s&&(n.cors=s),Wi(n,ft(this,function(t,n,s){if(t)return Ye.error(t,n);if(i.loaded_=!0,"function"!=typeof e.WebVTT){if(i.tech_){var r=function(){return Vi(s,i)};i.tech_.on("vttjsloaded",r),i.tech_.on("vttjserror",function(){Ye.error("vttjs failed to load, stopping trying to process "+i.src),i.tech_.off("vttjsloaded",r)})}}else Vi(s,i)}))}(s.src,r(r(n)))):n.loaded_=!0,n}i(n,t);var s=n.prototype;return s.addCue=function(t){var i=t;if(e.vttjs&&!(t instanceof e.vttjs.VTTCue)){for(var n in i=new e.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)n in i||(i[n]=t[n]);i.id=t.id,i.originalCue_=t}for(var s=this.tech_.textTracks(),r=0;r<s.length;r++)s[r]!==this&&s[r].removeCue(i);this.cues_.push(i),this.cues.setCues_(this.cues_)},s.removeCue=function(e){for(var t=this.cues_.length;t--;){var i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},n}(Si);qi.prototype.allowedEvents_={cuechange:"cuechange"};var Gi=function(e){function t(t){var i;void 0===t&&(t={});var n=ne(t,{kind:_i[t.kind]||""});i=e.call(this,n)||this;var s=!1;return Object.defineProperty(r(r(i)),"enabled",{get:function(){return s},set:function(e){"boolean"==typeof e&&e!==s&&(s=e,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,i}return i(t,e),t}(Si),Yi=function(e){function t(t){var i;void 0===t&&(t={});var n=ne(t,{kind:bi[t.kind]||""});i=e.call(this,n)||this;var s=!1;return Object.defineProperty(r(r(i)),"selected",{get:function(){return s},set:function(e){"boolean"==typeof e&&e!==s&&(s=e,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),i}return i(t,e),t}(Si),Xi=function(e){function t(t){var i,n;void 0===t&&(t={}),i=e.call(this)||this;var s=new qi(t);return i.kind=s.kind,i.src=s.src,i.srclang=s.language,i.label=s.label,i["default"]=s["default"],Object.defineProperties(r(r(i)),{readyState:{get:function(){return n}},track:{get:function(){return s}}}),n=0,s.addEventListener("loadeddata",function(){n=2,i.trigger({type:"load",target:r(r(i))})}),i}return i(t,e),t}(gt);Xi.prototype.allowedEvents_={load:"load"},Xi.NONE=0,Xi.LOADING=1,Xi.LOADED=2,Xi.ERROR=3;var Qi={audio:{ListClass:pi,TrackClass:Gi,capitalName:"Audio"},video:{ListClass:mi,TrackClass:Yi,capitalName:"Video"},text:{ListClass:gi,TrackClass:qi,capitalName:"Text"}};Object.keys(Qi).forEach(function(e){Qi[e].getterName=e+"Tracks",Qi[e].privateName=e+"Tracks_"});var Ki={remoteText:{ListClass:gi,TrackClass:qi,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:vi,TrackClass:Xi,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ji=ne(Qi,Ki);Ki.names=Object.keys(Ki),Qi.names=Object.keys(Qi),Ji.names=[].concat(Ki.names).concat(Qi.names);var Zi=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();((me.prototype=Zi(Error.prototype)).constructor=me).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},ve.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&100>=t)&&(this.set(e,t),!0)}};var en={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":" "},tn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},nn={v:"title",lang:"lang"},sn={rt:"ruby"},rn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Ce.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},Ce.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(Se.prototype=Zi(Ce.prototype)).constructor=Se,Te.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Te.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Te.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Te.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Te.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Te.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Te.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Te.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;
return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i}},Ee.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Ee.convertCueToDOMTree=function(e,t){return e&&t?_e(e,t):null},Ee.processCues=function(e,t,i){if(!e||!t||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var n=e.document.createElement("div");if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin="1.5%",i.appendChild(n),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var s=[],r=Te.getSimpleBoxPosition(n),o={font:Math.round(.05*r.height*100)/100+"px sans-serif"};!function(){for(var i,a,l=0;l<t.length;l++)a=t[l],i=new Se(e,a,o),n.appendChild(i.div),ke(0,i,r,s),a.displayState=i.div,s.push(Te.getSimpleBoxPosition(i))}()}else for(var a=0;a<t.length;a++)n.appendChild(t[a].displayState)},(Ee.Parser=function(e,t,i){i||(i=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof me))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function t(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),i}function i(e){e.match(/X-TIMESTAMP-MAP/)?ye(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":i=t,s=new ve,ye(i,function(e,t){switch(e){case"MPEGT":s.integer(e+"S",t);break;case"LOCA":s.set(e+"L",ge(t))}},/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:s.get("MPEGTS"),LOCAL:s.get("LOCAL")})}var i,s},/=/):ye(e,function(e,t){switch(e){case"Region":!function(e){var t=new ve;if(ye(e,function(e,i){switch(e){case"id":t.set(e,i);break;case"width":t.percent(e,i);break;case"lines":t.integer(e,i);break;case"regionanchor":case"viewportanchor":var n=i.split(",");if(2!==n.length)break;var s=new ve;if(s.percent("x",n[0]),s.percent("y",n[1]),!s.has("x")||!s.has("y"))break;t.set(e+"X",s.get("x")),t.set(e+"Y",s.get("y"));break;case"scroll":t.alt(e,i,["up"])}},/=/,/\s/),t.has("id")){var i=new(n.vttjs.VTTRegion||n.window.VTTRegion);i.width=t.get("width",100),i.lines=t.get("lines",3),i.regionAnchorX=t.get("regionanchorX",0),i.regionAnchorY=t.get("regionanchorY",100),i.viewportAnchorX=t.get("viewportanchorX",0),i.viewportAnchorY=t.get("viewportanchorY",100),i.scroll=t.get("scroll",""),n.onregion&&n.onregion(i),n.regionList.push({id:t.get("id"),region:i})}}(t)}},/:/)}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var s;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var r=(s=t()).match(/^WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new me(me.Errors.BadSignature);n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:s=t(),n.state){case"HEADER":/:/.test(s)?i(s):s||(n.state="ID");continue;case"NOTE":s||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){n.state="NOTE";break}if(!s)continue;if(n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,""),n.state="CUE",-1===s.indexOf("-->")){n.cue.id=s;continue}case"CUE":try{be(s,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var a=-1!==s.indexOf("-->");if(!s||a&&(o=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=s;continue;case"BADCUE":s||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new me(me.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var on=Ee,an={"":1,lr:1,rl:1},ln={start:1,middle:1,end:1,left:1,right:1};xe.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var cn=xe,un={"":!0,up:!0},dn=function(){var e=100,t=3,i=0,n=100,s=0,r=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!Pe(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(e){if(!Pe(e))throw new Error("RegionAnchorX must be between 0 and 100.");n=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!Pe(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!Pe(e))throw new Error("ViewportAnchorY must be between 0 and 100.");r=e}},viewportAnchorX:{enumerable:!0,get:function(){return s},set:function(e){if(!Pe(e))throw new Error("ViewportAnchorX must be between 0 and 100.");s=e}},scroll:{enumerable:!0,get:function(){return o},set:function(e){var t,i="string"==typeof(t=e)&&!!un[t.toLowerCase()]&&t.toLowerCase();if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");o=i}}})},hn=de(function(t){var i=t.exports={WebVTT:on,VTTCue:cn,VTTRegion:dn};e.vttjs=i,e.WebVTT=i.WebVTT;var n=i.VTTCue,s=i.VTTRegion,r=e.VTTCue,o=e.VTTRegion;i.shim=function(){e.VTTCue=n,e.VTTRegion=s},i.restore=function(){e.VTTCue=r,e.VTTRegion=o},e.VTTCue||i.shim()});hn.WebVTT,hn.VTTCue,hn.VTTRegion;var pn=function(n){function s(e,t){var i;return void 0===e&&(e={}),void 0===t&&(t=function(){}),e.reportTouchActivity=!1,(i=n.call(this,null,e,t)||this).hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),Ji.names.forEach(function(t){var n=Ji[t];e&&e[n.getterName]&&(i[n.privateName]=e[n.getterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(t){!1===e["native"+t+"Tracks"]&&(i["featuresNative"+t+"Tracks"]=!1)}),!1===e.nativeCaptions||!1===e.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.autoRemoteTextTracks_=new Ji.text.ListClass,i.initTrackListeners(),e.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}i(s,n);var r=s.prototype;return r.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},r.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},r.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},r.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ft(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},r.onDurationChange=function(e){this.duration_=this.duration()},r.buffered=function(){return oe(0,0)},r.bufferedPercent=function(){return ae(this.buffered(),this.duration_)},r.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},r.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},r.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},r.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.dispose=function(){this.clearTracks(Qi.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),n.prototype.dispose.call(this)},r.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach(function(e){for(var i=t[e+"Tracks"]()||[],n=i.length;n--;){var s=i[n];"text"===e&&t.removeRemoteTextTrack(s),i.removeTrack(s)}})},r.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var i=e[t];this.removeRemoteTextTrack(i)}},r.reset=function(){},r.error=function(e){return void 0!==e&&(this.error_=new le(e),this.trigger("error")),this.error_},r.played=function(){return this.hasStarted_?oe(0,0):oe()},r.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.initTrackListeners=function(){var e=this;Qi.names.forEach(function(t){var i=Qi[t],n=function(){e.trigger(t+"trackchange")},s=e[i.getterName]();s.addEventListener("removetrack",n),s.addEventListener("addtrack",n),e.on("dispose",function(){s.removeEventListener("removetrack",n),s.removeEventListener("addtrack",n)})})},r.addWebVttScript_=function(){var i=this;if(!e.WebVTT)if(t.body.contains(this.el())){if(!this.options_["vtt.js"]&&u(hn)&&0<Object.keys(hn).length)return void this.trigger("vttjsloaded");var n=t.createElement("script");n.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",n.onload=function(){i.trigger("vttjsloaded")},n.onerror=function(){i.trigger("vttjserror")},this.on("dispose",function(){n.onload=null,n.onerror=null}),e.WebVTT=!0,this.el().parentNode.appendChild(n)}else this.ready(this.addWebVttScript_)},r.emulateTextTracks=function(){var e=this,t=this.textTracks(),i=this.remoteTextTracks(),n=function(e){return t.addTrack(e.track)},s=function(e){return t.removeTrack(e.track)};i.on("addtrack",n),i.on("removetrack",s),this.addWebVttScript_();var r=function(){return e.trigger("texttrackchange")},o=function(){r();for(var e=0;e<t.length;e++){var i=t[e];i.removeEventListener("cuechange",r),"showing"===i.mode&&i.addEventListener("cuechange",r)}};o(),t.addEventListener("change",o),t.addEventListener("addtrack",o),t.addEventListener("removetrack",o),this.on("dispose",function(){i.off("addtrack",n),i.off("removetrack",s),t.removeEventListener("change",o),t.removeEventListener("addtrack",o),t.removeEventListener("removetrack",o);for(var e=0;e<t.length;e++)t[e].removeEventListener("cuechange",r)})},r.addTextTrack=function(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,i,n,s){void 0===s&&(s={});var r=e.textTracks();s.kind=t,i&&(s.label=i),n&&(s.language=n),s.tech=e;var o=new Ji.text.TrackClass(s);return r.addTrack(o),o}(this,e,t,i)},r.createRemoteTextTrack=function(e){var t=ne(e,{tech:this});return new Ki.remoteTextEl.TrackClass(t)},r.addRemoteTextTrack=function(e,t){var i=this;void 0===e&&(e={});var n=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(Ye.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==t&&this.ready(function(){return i.autoRemoteTextTracks_.addTrack(n.track)}),n},r.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},r.getVideoPlaybackQuality=function(){return{}},r.setPoster=function(){},r.playsinline=function(){},r.setPlaysinline=function(){},r.overrideNativeAudioTracks=function(){},r.overrideNativeVideoTracks=function(){},r.canPlayType=function(){return""},s.canPlayType=function(){return""},s.canPlaySource=function(e,t){return s.canPlayType(e.type)},s.isTech=function(e){return e.prototype instanceof s||e instanceof s||e===s},s.registerTech=function(e,t){if(s.techs_||(s.techs_={}),!s.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!s.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!s.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=ie(e),s.techs_[e]=t,"Tech"!==e&&s.defaultTechOrder_.push(e),t},s.getTech=function(t){return t?(t=ie(t),s.techs_&&s.techs_[t]?s.techs_[t]:e&&e.videojs&&e.videojs[t]?(Ye.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),e.videojs[t]):void 0):void 0},s}(Et);Ji.names.forEach(function(e){var t=Ji[e];pn.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),pn.prototype.featuresVolumeControl=!0,pn.prototype.featuresMuteControl=!0,pn.prototype.featuresFullscreenResize=!1,pn.prototype.featuresPlaybackRate=!1,pn.prototype.featuresProgressEvents=!1,pn.prototype.featuresSourceset=!1,pn.prototype.featuresTimeupdateEvents=!1,pn.prototype.featuresNativeTextTracks=!1,pn.withSourceHandlers=function(e){e.registerSourceHandler=function(t,i){var n=e.sourceHandlers;n||(n=e.sourceHandlers=[]),void 0===i&&(i=n.length),n.splice(i,0,t)},e.canPlayType=function(t){for(var i,n=e.sourceHandlers||[],s=0;s<n.length;s++)if(i=n[s].canPlayType(t))return i;return""},e.selectSourceHandler=function(t,i){for(var n=e.sourceHandlers||[],s=0;s<n.length;s++)if(n[s].canHandleSource(t,i))return n[s];return null},e.canPlaySource=function(t,i){var n=e.selectSourceHandler(t,i);return n?n.canHandleSource(t,i):""},["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var i=e.selectSourceHandler(t,this.options_);i||(e.nativeSourceHandler?i=e.nativeSourceHandler:Ye.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),i!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Et.registerComponent("Tech",pn),pn.registerTech("Tech",pn),pn.defaultTechOrder_=[];var fn={},mn={},gn={},vn={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},yn={setCurrentTime:1},bn={play:1,pause:1},_n={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},wn=function(e){void 0===e&&(e="");var t=Ei(e);return _n[t.toLowerCase()]||""},Cn=function(e){function t(t,i,n){var s,r=ne({createEl:!1},i);if(s=e.call(this,t,r,n)||this,i.playerOptions.sources&&0!==i.playerOptions.sources.length)t.src(i.playerOptions.sources);else for(var o=0,a=i.playerOptions.techOrder;o<a.length;o++){var l=ie(a[o]),c=pn.getTech(l);if(l||(c=Et.getComponent(l)),c&&c.isSupported()){t.loadTech_(l);break}}return s}return i(t,e),t}(Et);Et.registerComponent("MediaLoader",Cn);var Sn=function(e){function n(t,i){var n;return(n=e.call(this,t,i)||this).emitTapEvents(),n.enable(),n}i(n,e);var s=n.prototype;return s.createEl=function(t,i,n){void 0===t&&(t="div"),void 0===i&&(i={}),void 0===n&&(n={}),i=l({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},i),"button"===t&&Ye.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),n=l({role:"button"},n),this.tabIndex_=i.tabIndex;var s=e.prototype.createEl.call(this,t,i,n);return this.createControlTextEl(s),s},s.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},s.createControlTextEl=function(e){return this.controlTextEl_=b("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},s.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var i=this.localize(e);this.controlText_=e,_(this.controlTextEl_,i),this.nonIconControl||t.setAttribute("title",i)},s.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},s.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},s.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},s.handleClick=function(e){},s.handleFocus=function(e){X(t,"keydown",ft(this,this.handleKeyPress))},s.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.trigger("click")):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},s.handleBlur=function(e){Q(t,"keydown",ft(this,this.handleKeyPress))},n}(Et);Et.registerComponent("ClickableComponent",Sn);var Tn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update(),t.on("posterchange",ft(r(r(n)),n.update)),n}i(t,e);var n=t.prototype;return n.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},n.createEl=function(){return b("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},n.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?ue(this.player_.play()):this.player_.pause())},t}(Sn);Et.registerComponent("PosterImage",Tn);var kn="#222",En={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},In=function(t){function n(i,n,s){var o;o=t.call(this,i,n,s)||this;var a=ft(r(r(o)),o.updateDisplay);return i.on("loadstart",ft(r(r(o)),o.toggleDisplay)),i.on("texttrackchange",a),i.on("loadstart",ft(r(r(o)),o.preselectTrack)),i.ready(ft(r(r(o)),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)this.hide();else{i.on("fullscreenchange",a),i.on("playerresize",a),e.addEventListener("orientationchange",a),i.on("dispose",function(){return e.removeEventListener("orientationchange",a)});for(var t=this.options_.playerOptions.tracks||[],n=0;n<t.length;n++)this.player_.addRemoteTextTrack(t[n],!0);this.preselectTrack()}})),o}i(n,t);var s=n.prototype;return s.preselectTrack=function(){for(var e,t,i,n={captions:1,subtitles:1},s=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage,o=0;o<s.length;o++){var a=s[o];r&&r.enabled&&r.language===a.language?a.kind===r.kind?i=a:i||(i=a):r&&!r.enabled?t=e=i=null:a["default"]&&("descriptions"!==a.kind||e?a.kind in n&&!t&&(t=a):e=a)}i?i.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},s.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},s.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},s.clearDisplay=function(){"function"==typeof e.WebVTT&&e.WebVTT.processCues(e,[],this.el_)},s.updateDisplay=function(){var e=this.player_.textTracks();this.clearDisplay();for(var t=null,i=null,n=e.length;n--;){var s=e[n];"showing"===s.mode&&("descriptions"===s.kind?t=s:i=s)}i?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))},s.updateForTrack=function(t){if("function"==typeof e.WebVTT&&t.activeCues){for(var i=[],n=0;n<t.activeCues.length;n++)i.push(t.activeCues[n]);if(e.WebVTT.processCues(e,i,this.el_),this.player_.textTrackSettings)for(var s=this.player_.textTrackSettings.getValues(),r=i.length;r--;){var o=i[r];if(o){var a=o.displayState;if(s.color&&(a.firstChild.style.color=s.color),s.textOpacity&&Re(a.firstChild,"color",Ne(s.color||"#fff",s.textOpacity)),s.backgroundColor&&(a.firstChild.style.backgroundColor=s.backgroundColor),s.backgroundOpacity&&Re(a.firstChild,"backgroundColor",Ne(s.backgroundColor||"#000",s.backgroundOpacity)),s.windowColor&&(s.windowOpacity?Re(a,"backgroundColor",Ne(s.windowColor,s.windowOpacity)):a.style.backgroundColor=s.windowColor),s.edgeStyle&&("dropshadow"===s.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+kn:"raised"===s.edgeStyle?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+kn:"depressed"===s.edgeStyle?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+kn:"uniform"===s.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+kn)),s.fontPercent&&1!==s.fontPercent){var l=e.parseFloat(a.style.fontSize);a.style.fontSize=l*s.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}s.fontFamily&&"default"!==s.fontFamily&&("small-caps"===s.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=En[s.fontFamily])}}}},n}(Et);Et.registerComponent("TextTrackDisplay",In);var xn=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),i=this.localize(t?"Audio Player":"Video Player"),n=b("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[i])}),s=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return s.appendChild(n),s},t}(Et);Et.registerComponent("LoadingSpinner",xn);var Pn=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.createEl=function(e,t,i){void 0===t&&(t={}),void 0===i&&(i={}),t=l({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),i=l({type:"button"},i);var n=Et.prototype.createEl.call(this,"button",t,i);return this.createControlTextEl(n),n},n.addChild=function(e,t){void 0===t&&(t={});var i=this.constructor.name;return Ye.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),Et.prototype.addChild.call(this,e,t)},n.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyPress=function(t){32!==t.which&&13!==t.which&&e.prototype.handleKeyPress.call(this,t)},t}(Sn);Et.registerComponent("Button",Pn);var An=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)ue(t);else{var i=this.player_.getChild("controlBar"),n=i&&i.getChild("playToggle");if(n){var s=function(){return n.focus()};ce(t)?t.then(s,function(){}):this.setTimeout(s,1)}else this.player_.focus()}},n.handleKeyPress=function(t){this.mouseused_=!1,e.prototype.handleKeyPress.call(this,t)},n.handleMouseDown=function(e){this.mouseused_=!0},t}(Pn);An.prototype.controlText_="Play Video",Et.registerComponent("BigPlayButton",An);var Dn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).controlText(i&&i.controlText||n.localize("Close")),n}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t}(Pn);Et.registerComponent("CloseButton",Dn);var Ln=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"play",n.handlePlay),n.on(t,"pause",n.handlePause),n.on(t,"ended",n.handleEnded),n}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(Pn);Ln.prototype.controlText_="Play",Et.registerComponent("PlayToggle",Ln);var On=function(e,t){e=0>e?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),s=Math.floor(e/3600),r=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(s=n=i="-"),(s=s>0||o>0?s+":":"")+(n=((s||r>=10)&&10>n?"0"+n:n)+":")+(i=10>i?"0"+i:i)},Mn=On,Nn=function(e){function n(t,i){var n;return(n=e.call(this,t,i)||this).throttledUpdateContent=mt(ft(r(r(n)),n.updateContent),25),n.on(t,"timeupdate",n.throttledUpdateContent),n}i(n,e);var s=n.prototype;return s.createEl=function(t){var i=this.buildCSSClass(),n=e.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=b("span",{className:i+"-display"},{"aria-live":"off"}),this.updateTextNode_(),n.appendChild(this.contentEl_),n},s.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},s.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=t.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},s.formatTime_=function(e){return Ue(e)},s.updateFormattedTime_=function(e){var t=this.formatTime_(e);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},s.updateContent=function(e){},n}(Et);Nn.prototype.labelText_="Time",Nn.prototype.controlText_="Time",Et.registerComponent("TimeDisplay",Nn);var Rn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"ended",n.handleEnded),n}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},n.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},t}(Nn);Rn.prototype.labelText_="Current Time",Rn.prototype.controlText_="Current Time",Et.registerComponent("CurrentTimeDisplay",Rn);var Un=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"durationchange",n.updateContent),n.on(t,"loadedmetadata",n.throttledUpdateContent),n}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();t&&this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},t}(Nn);Un.prototype.labelText_="Duration",Un.prototype.controlText_="Duration",Et.registerComponent("DurationDisplay",Un);var $n=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(Et);Et.registerComponent("TimeDivider",$n);var Hn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"durationchange",n.throttledUpdateContent),n.on(t,"ended",n.handleEnded),n}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.formatTime_=function(t){return"-"+e.prototype.formatTime_.call(this,t)},n.updateContent=function(e){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},n.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)},t}(Nn);Hn.prototype.labelText_="Remaining Time",Hn.prototype.controlText_="Remaining Time",Et.registerComponent("RemainingTimeDisplay",Hn);var Bn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}i(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=b("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Et);Et.registerComponent("LiveDisplay",Bn);var Fn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}i(t,e);var n=t.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(t,i,n){return void 0===i&&(i={}),void 0===n&&(n={}),i.className=i.className+" vjs-slider",i=l({tabIndex:0},i),n=l({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),e.prototype.createEl.call(this,t,i,n)},n.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||Vt||e.preventDefault(),D(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},n.handleMouseMove=function(e){},n.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;L(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},n.update=function(){
if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||0>e||e===1/0)&&(e=0);var i=(100*e).toFixed(2)+"%",n=t.el().style;return this.vertical()?n.height=i:n.width=i,e}}},n.calculateDistance=function(e){var t=N(this.el_,e);return this.vertical()?t.y:t.x},n.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},n.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},n.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},n.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},n.vertical=function(e){return void 0===e?this.vertical_||!1:(this.vertical_=!!e,void(this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")))},t}(Et);Et.registerComponent("Slider",Fn);var jn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).partEls_=[],n.on(t,"progress",n.update),n}i(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},n.dispose=function(){this.partEls_=null,e.prototype.dispose.call(this)},n.update=function(e){var t=this.player_.buffered(),i=this.player_.duration(),n=this.player_.bufferedEnd(),s=this.partEls_,r=function(e,t){var i=e/t||0;return 100*(i>=1?1:i)+"%"};this.el_.style.width=r(n,i);for(var o=0;o<t.length;o++){var a=t.start(o),l=t.end(o),c=s[o];c||(c=this.el_.appendChild(b()),s[o]=c),c.style.left=r(a,n),c.style.width=r(l-a,n)}for(var u=s.length;u>t.length;u--)this.el_.removeChild(s[u-1]);s.length=t.length},t}(Et);Et.registerComponent("LoadProgressBar",jn);var zn=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},n.update=function(e,t,i){var n=O(this.el_),s=O(this.player_.el()),r=e.width*t;if(s&&n){var o=e.left-s.left+r,a=e.width-r+(s.right-e.right),l=n.width/2;l>o?l+=l-o:l>a&&(l=a),0>l?l=0:l>n.width&&(l=n.width),this.el_.style.right="-"+l+"px",_(this.el_,i)}},t}(Et);Et.registerComponent("TimeTooltip",zn);var Wn=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},n.update=function(e,t){var i=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var n=Ue(i.player_.scrubbing()?i.player_.getCache().currentTime:i.player_.currentTime(),i.player_.duration()),s=i.getChild("timeTooltip");s&&s.update(e,t,n)})},t}(Et);Wn.prototype.options_={children:[]},$t||Bt||Wn.prototype.options_.children.push("timeTooltip"),Et.registerComponent("PlayProgressBar",Wn);var Vn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=mt(ft(r(r(n)),n.update),25),n}i(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var i=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var n=i.player_.duration(),s=Ue(t*n,n);i.el_.style.left=e.width*t+"px",i.getChild("timeTooltip").update(e,t,s)})},t}(Et);Vn.prototype.options_={children:["timeTooltip"]},Et.registerComponent("MouseTimeDisplay",Vn);var qn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).setEventHandlers_(),n}i(t,e);var n=t.prototype;return n.setEventHandlers_=function(){var e=this;this.update=mt(ft(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],function(){e.clearInterval(e.updateInterval),e.updateInterval=e.setInterval(function(){e.requestAnimationFrame(function(){e.update()})},30)}),this.on(this.player_,["ended","pause","waiting"],function(){e.clearInterval(e.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update_=function(e,t){var i=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Ue(e,i),Ue(i,i)],"{1} of {2}")),this.bar.update(O(this.el_),t)},n.update=function(t){var i=e.prototype.update.call(this);return this.update_(this.getCurrentTime_(),i),i},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.handleEnded=function(e){this.update_(this.player_.duration(),1)},n.getPercent=function(){var e=this.getCurrentTime_()/this.player_.duration();return e>=1?1:e||0},n.handleMouseDown=function(t){F(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},n.handleMouseMove=function(e){if(F(e)){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)}},n.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},n.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},n.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&ue(this.player_.play())},n.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},n.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},n.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleAction(t)):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t}(Fn);qn.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},$t||Bt||qn.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),qn.prototype.playerEvent="timeupdate",Et.registerComponent("SeekBar",qn);var Gn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).handleMouseMove=mt(ft(r(r(n)),n.handleMouseMove),25),n.throttledHandleMouseSeek=mt(ft(r(r(n)),n.handleMouseSeek),25),n.enable(),n}i(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var i=t.getChild("mouseTimeDisplay"),n=t.el(),s=O(n),r=N(n,e).x;r>1?r=1:0>r&&(r=0),i&&i.update(s,r)}},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},n.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t}(Et);Gn.prototype.options_={children:["seekBar"]},Et.registerComponent("ProgressControl",Gn);var Yn=function(e){function n(i,n){var s;return(s=e.call(this,i,n)||this).on(i,"fullscreenchange",s.handleFullscreenChange),!1===t[Jt.fullscreenEnabled]&&s.disable(),s}i(n,e);var s=n.prototype;return s.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},s.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},s.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},n}(Pn);Yn.prototype.controlText_="Fullscreen",Et.registerComponent("FullscreenToggle",Yn);var Xn=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(Et);Et.registerComponent("VolumeLevel",Xn);var Qn=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on("slideractive",n.updateLastVolume_),n.on(t,"volumechange",n.updateARIAAttributes),t.ready(function(){return n.updateARIAAttributes()}),n}i(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(t){F(t)&&e.prototype.handleMouseDown.call(this,t)},n.handleMouseMove=function(e){F(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},t}(Fn);Qn.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Qn.prototype.playerEvent="volumechange",Et.registerComponent("VolumeBar",Qn);var Kn=function(e){function t(t,i){var n,s,o;return void 0===i&&(i={}),i.vertical=i.vertical||!1,("undefined"==typeof i.volumeBar||u(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),n=e.call(this,t,i)||this,s=r(r(n)),(o=t).tech_&&!o.tech_.featuresVolumeControl&&s.addClass("vjs-hidden"),s.on(o,"loadstart",function(){o.tech_.featuresVolumeControl?s.removeClass("vjs-hidden"):s.addClass("vjs-hidden")}),n.throttledHandleMouseMove=mt(ft(r(r(n)),n.handleMouseMove),25),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}i(t,e);var n=t.prototype;return n.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Et);Kn.prototype.options_={children:["volumeBar"]},Et.registerComponent("VolumeControl",Kn);var Jn=function(e){function t(t,i){var n,s,o;return n=e.call(this,t,i)||this,s=r(r(n)),(o=t).tech_&&!o.tech_.featuresMuteControl&&s.addClass("vjs-hidden"),s.on(o,"loadstart",function(){o.tech_.featuresMuteControl?s.removeClass("vjs-hidden"):s.addClass("vjs-hidden")}),n.on(t,["loadstart","volumechange"],n.update),n}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),i=this.player_.lastVolume_();if(0===t){var n=.1>i?.1:i;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;$t&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:.33>e?t=1:.67>e&&(t=2);for(var i=0;4>i;i++)T(this.el_,"vjs-vol-"+i);S(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(Pn);Jn.prototype.controlText_="Mute",Et.registerComponent("MuteToggle",Jn);var Zn=function(e){function t(t,i){var n;return void 0===i&&(i={}),"undefined"!=typeof i.inline?i.inline=i.inline:i.inline=!0,("undefined"==typeof i.volumeControl||u(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),(n=e.call(this,t,i)||this).on(t,["loadstart"],n.volumePanelState_),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}i(t,e);var n=t.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},t}(Et);Zn.prototype.options_={children:["muteToggle","volumeControl"]},Et.registerComponent("VolumePanel",Zn);var es=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,i&&(n.menuButton_=i.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyPress),n}i(t,e);var n=t.prototype;return n.addItem=function(e){this.addChild(e),e.on("click",ft(this,function(t){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus())}))},n.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=b(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),X(i,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),i},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},n.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},n.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},n.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),0<t.length&&(0>e?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())},t}(Et);Et.registerComponent("Menu",es);var ts=function(e){function n(t,i){var n;void 0===i&&(i={}),(n=e.call(this,t,i)||this).menuButton_=new Pn(t,i),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var s=Pn.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+" "+s,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,"tap",n.handleClick),n.on(n.menuButton_,"click",n.handleClick),n.on(n.menuButton_,"focus",n.handleFocus),n.on(n.menuButton_,"blur",n.handleBlur),n.on("keydown",n.handleSubmenuKeyPress),n}i(n,e);var s=n.prototype;return s.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},s.createMenu=function(){var e=new es(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=b("li",{className:"vjs-menu-title",innerHTML:ie(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(t),w(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e},s.createItems=function(){},s.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},s.buildWrapperCSSClass=function(){var t="vjs-menu-button";return t+=!0===this.options_.inline?"-inline":"-popup","vjs-menu-button "+t+" "+Pn.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},s.buildCSSClass=function(){var t="vjs-menu-button";return t+=!0===this.options_.inline?"-inline":"-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},s.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},s.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",ft(this,function(e){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},s.focus=function(){this.menuButton_.focus()},s.blur=function(){this.menuButton_.blur()},s.handleFocus=function(){X(t,"keydown",ft(this,this.handleKeyPress))},s.handleBlur=function(){Q(t,"keydown",ft(this,this.handleKeyPress))},s.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())):38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())},s.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus()))},s.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),$t&&v())return;this.menu.focus()}},s.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},s.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},s.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},n}(Et);Et.registerComponent("MenuButton",ts);var is=function(e){function t(t,i){var n,s=i.tracks;if((n=e.call(this,t,i)||this).items.length<=1&&n.hide(),!s)return r(n);var o=ft(r(r(n)),n.update);return s.addEventListener("removetrack",o),s.addEventListener("addtrack",o),n.player_.on("ready",o),n.player_.on("dispose",function(){s.removeEventListener("removetrack",o),s.removeEventListener("addtrack",o)}),n}return i(t,e),t}(ts);Et.registerComponent("TrackButton",is);var ns=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).selectable=i.selectable,n.isSelected_=i.selected||!1,n.multiSelectable=i.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}i(t,e);var n=t.prototype;return n.createEl=function(t,i,n){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",l({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},i),n)},n.handleClick=function(e){this.selected(!0)},n.selected=function(e){this.selectable&&(this.isSelected_=e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),!1))},t}(Sn);Et.registerComponent("MenuItem",ns);var ss=function(n){function s(i,s){var o,a=s.track,l=i.textTracks();s.label=a.label||a.language||"Unknown",s.selected="showing"===a.mode,(o=n.call(this,i,s)||this).track=a;var c,u=function(){for(var e=arguments.length,t=new Array(e),i=0;e>i;i++)t[i]=arguments[i];o.handleTracksChange.apply(r(r(o)),t)},d=function(){for(var e=arguments.length,t=new Array(e),i=0;e>i;i++)t[i]=arguments[i];o.handleSelectedLanguageChange.apply(r(r(o)),t)};return i.on(["loadstart","texttrackchange"],u),l.addEventListener("change",u),l.addEventListener("selectedlanguagechange",d),o.on("dispose",function(){i.off(["loadstart","texttrackchange"],u),l.removeEventListener("change",u),l.removeEventListener("selectedlanguagechange",d)}),void 0===l.onchange&&o.on(["tap","click"],function(){if("object"!=typeof e.Event)try{c=new e.Event("change")}catch(i){}c||(c=t.createEvent("Event")).initEvent("change",!0,!0),l.dispatchEvent(c)}),o.handleTracksChange(),o}i(s,n);var o=s.prototype;return o.handleClick=function(e){var t=this.track.kind,i=this.track.kinds,s=this.player_.textTracks();if(i||(i=[t]),n.prototype.handleClick.call(this,e),s)for(var r=0;r<s.length;r++){var o=s[r];o===this.track&&-1<i.indexOf(o.kind)?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled")}},o.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},o.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},o.dispose=function(){this.track=null,n.prototype.dispose.call(this)},s}(ns);Et.registerComponent("TextTrackMenuItem",ss);var rs=function(e){function t(t,i){return i.track={player:t,kind:i.kind,kinds:i.kinds,"default":!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,e.call(this,t,i)||this}i(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,s=t.length;s>n;n++){var r=t[n];if(-1<this.options_.kinds.indexOf(r.kind)&&"showing"===r.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,s=t.length;s>n;n++){var r=t[n];if(-1<["captions","descriptions","subtitles"].indexOf(r.kind)&&"showing"===r.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(ss);Et.registerComponent("OffTextTrackMenuItem",rs);var os=function(e){function t(t,i){return void 0===i&&(i={}),i.tracks=t.textTracks(),e.call(this,t,i)||this}return i(t,e),t.prototype.createItems=function(e,t){var i;void 0===e&&(e=[]),void 0===t&&(t=ss),this.label_&&(i=this.label_+" off"),e.push(new rs(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var s=0;s<n.length;s++){var r=n[s];if(-1<this.kinds_.indexOf(r.kind)){var o=new t(this.player_,{track:r,selectable:!0,multiSelectable:!1});o.addClass("vjs-"+r.kind+"-menu-item"),e.push(o)}}return e},t}(is);Et.registerComponent("TextTrackButton",os);var as=function(e){function t(t,i){var n,s=i.track,o=i.cue,a=t.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=o.text,i.selected=o.startTime<=a&&a<o.endTime,(n=e.call(this,t,i)||this).track=s,n.cue=o,s.addEventListener("cuechange",ft(r(r(n)),n.update)),n}i(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},n.update=function(e){var t=this.cue,i=this.player_.currentTime();this.selected(t.startTime<=i&&i<t.endTime)},t}(ns);Et.registerComponent("ChaptersTrackMenuItem",as);var ls=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},n.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},n.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_)}}},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var i=e[t];if(i.kind===this.kind_)return i}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ie(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var i=0,n=t.length;n>i;i++){var s=t[i],r=new as(this.player_,{track:this.track_,cue:s});e.push(r)}return e},t}(os);ls.prototype.kind_="chapters",ls.prototype.controlText_="Chapters",Et.registerComponent("ChaptersButton",ls);var cs=function(e){function t(t,i,n){var s;s=e.call(this,t,i,n)||this;var o=t.textTracks(),a=ft(r(r(s)),s.handleTracksChange);return o.addEventListener("change",a),s.on("dispose",function(){o.removeEventListener("change",a)}),s}i(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!1,n=0,s=t.length;s>n;n++){var r=t[n];if(r.kind!==this.kind_&&"showing"===r.mode){i=!0;break}}i?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(os);cs.prototype.kind_="descriptions",cs.prototype.controlText_="Descriptions",Et.registerComponent("DescriptionsButton",cs);var us=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(os);us.prototype.kind_="subtitles",us.prototype.controlText_="Subtitles",Et.registerComponent("SubtitlesButton",us);var ds=function(e){function t(t,i){var n;return i.track={player:t,kind:i.kind,label:i.kind+" settings",selectable:!1,"default":!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",(n=e.call(this,t,i)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+i.kind+" settings dialog"),n}return i(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(ss);Et.registerComponent("CaptionSettingsMenuItem",ds);var hs=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new ds(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(os);hs.prototype.kind_="captions",hs.prototype.controlText_="Captions",Et.registerComponent("CaptionsButton",hs);var ps=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.createEl=function(t,i,n){var s='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(s+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),s+="</span>",e.prototype.createEl.call(this,t,l({innerHTML:s},i),n)},t}(ss);Et.registerComponent("SubsCapsMenuItem",ps);var fs=function(e){function t(t,i){var n;return void 0===i&&(i={}),(n=e.call(this,t,i)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)&&(n.label_="captions"),n.menuButton_.controlText(ie(n.label_)),n}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new ds(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,ps)},t}(os);fs.prototype.kinds_=["captions","subtitles"],fs.prototype.controlText_="Subtitles",Et.registerComponent("SubsCapsButton",fs);var ms=function(e){function t(t,i){var n,s=i.track,o=t.audioTracks();i.label=s.label||s.language||"Unknown",i.selected=s.enabled,(n=e.call(this,t,i)||this).track=s,n.addClass("vjs-"+s.kind+"-menu-item");var a=function(){for(var e=arguments.length,t=new Array(e),i=0;e>i;i++)t[i]=arguments[i];n.handleTracksChange.apply(r(r(n)),t)};return o.addEventListener("change",a),n.on("dispose",function(){o.removeEventListener("change",a)}),n}i(t,e);var n=t.prototype;return n.createEl=function(t,i,n){var s='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(s+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),s+="</span>",e.prototype.createEl.call(this,t,l({innerHTML:s},i),n)},n.handleClick=function(t){var i=this.player_.audioTracks();e.prototype.handleClick.call(this,t);for(var n=0;n<i.length;n++){var s=i[n];s.enabled=s===this.track}},n.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(ns);Et.registerComponent("AudioTrackMenuItem",ms);var gs=function(e){function t(t,i){return void 0===i&&(i={}),i.tracks=t.audioTracks(),e.call(this,t,i)||this}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),i=0;i<t.length;i++){var n=t[i];e.push(new ms(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e},t}(is);gs.prototype.controlText_="Audio Track",Et.registerComponent("AudioTrackButton",gs);var vs=function(e){function t(t,i){var n,s=i.rate,r=parseFloat(s,10);return i.label=s,i.selected=1===r,i.selectable=!0,i.multiSelectable=!1,(n=e.call(this,t,i)||this).label=s,n.rate=r,n.on(t,"ratechange",n.update),n}i(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate);
},t}(ns);vs.prototype.contentElType="button",Et.registerComponent("PlaybackRateMenuItem",vs);var ys=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateVisibility(),n.updateLabel(),n.on(t,"loadstart",n.updateVisibility),n.on(t,"ratechange",n.updateLabel),n}i(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=b("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},n.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},n.createMenu=function(){var e=new es(this.player()),t=this.playbackRates();if(t)for(var i=t.length-1;i>=0;i--)e.addChild(new vs(this.player(),{rate:t[i]+"x"}));return e},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){for(var t=this.player().playbackRate(),i=this.playbackRates(),n=i[0],s=0;s<i.length;s++)if(i[s]>t){n=i[s];break}this.player().playbackRate(n)},n.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(ts);ys.prototype.controlText_="Playback Rate",Et.registerComponent("PlaybackRateMenuButton",ys);var bs=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Et);Et.registerComponent("Spacer",bs);var _s=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML=" ",t},t}(bs);Et.registerComponent("CustomControlSpacer",_s);var ws=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Et);ws.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},Et.registerComponent("ControlBar",ws);var Cs=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"error",n.open),n}i(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(ci);Cs.prototype.options_=ne(ci.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Et.registerComponent("ErrorDisplay",Cs);var Ss="vjs-text-track-settings",Ts=["#000","Black"],ks=["#00F","Blue"],Es=["#0FF","Cyan"],Is=["#0F0","Green"],xs=["#F0F","Magenta"],Ps=["#F00","Red"],As=["#FFF","White"],Ds=["#FF0","Yellow"],Ls=["1","Opaque"],Os=["0.5","Semi-Transparent"],Ms=["0","Transparent"],Ns={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Ts,As,Ps,Is,ks,Ds,xs,Es]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Ls,Os,Ms]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[As,Ts,Ps,Is,ks,Ds,xs,Es]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Ls,Os]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Ms,Os,Ls]}};Ns.windowColor.options=Ns.backgroundColor.options;var Rs=function(n){function s(e,t){var i;return t.temporary=!1,(i=n.call(this,e,t)||this).updateDisplay=ft(r(r(i)),i.updateDisplay),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=b("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===t.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.close()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),a(Ns,function(e){i.on(i.$(e.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}i(s,n);var o=s.prototype;return o.dispose=function(){this.endDialog=null,n.prototype.dispose.call(this)},o.createElSelect_=function(e,t,i){var n=this;void 0===t&&(t=""),void 0===i&&(i="label");var s=Ns[e],r=s.id.replace("%s",this.id_),o=[t,r].join(" ").trim();return["<"+i+' id="'+r+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(s.label),"</"+i+">",'<select aria-labelledby="'+o+'">'].concat(s.options.map(function(e){var t=r+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+o+" "+t+'">',n.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},o.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},o.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},o.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},o.createElColors_=function(){return b("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},o.createElFont_=function(){return b("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},o.createElControls_=function(){var e=this.localize("restore all settings to the default values");return b("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},o.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},o.label=function(){return this.localize("Caption Settings Dialog")},o.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},o.buildCSSClass=function(){return n.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},o.getValues=function(){var e,t,i,n=this;return t=function(e,t,i){var s,r,o=(s=n.$(t.selector),r=t.parser,$e(s.options[s.options.selectedIndex].value,r));return void 0!==o&&(e[i]=o),e},void 0===(i={})&&(i=0),Je(e=Ns).reduce(function(i,n){return t(i,e[n],n)},i)},o.setValues=function(e){var t=this;a(Ns,function(i,n){!function(e,t,i){if(t)for(var n=0;n<e.options.length;n++)if($e(e.options[n].value,i)===t){e.selectedIndex=n;break}}(t.$(i.selector),e[n],i.parser)})},o.setDefaults=function(){var e=this;a(Ns,function(t){var i=t.hasOwnProperty("default")?t["default"]:0;e.$(t.selector).selectedIndex=i})},o.restoreSettings=function(){var t;try{t=JSON.parse(e.localStorage.getItem(Ss))}catch(t){Ye.warn(t)}t&&this.setValues(t)},o.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?e.localStorage.setItem(Ss,JSON.stringify(t)):e.localStorage.removeItem(Ss)}catch(t){Ye.warn(t)}}},o.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},o.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(t,"keydown",this.handleKeyDown);var e=this.player_.controlBar,i=e&&e.subsCapsButton,n=e&&e.captionsButton;i?i.focus():n&&n.focus()},s}(ci);Et.registerComponent("TextTrackSettings",Rs);var Us=function(t){function n(i,n){var s,o=n.ResizeObserver||e.ResizeObserver;null===n.ResizeObserver&&(o=!1);var a=ne({createEl:!o,reportTouchActivity:!1},n);return(s=t.call(this,i,a)||this).ResizeObserver=n.ResizeObserver||e.ResizeObserver,s.loadListener_=null,s.resizeObserver_=null,s.debouncedHandler_=function(t,i,n,s){var r;void 0===s&&(s=e);var o=function(){var e=this,o=arguments,a=function(){a=r=null,n||t.apply(e,o)};!r&&n&&t.apply(e,o),s.clearTimeout(r),r=s.setTimeout(a,i)};return o.cancel=function(){s.clearTimeout(r),r=null},o}(function(){s.resizeHandler()},100,!1,r(r(s))),o?(s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_),s.resizeObserver_.observe(i.el())):(s.loadListener_=function(){s.el_&&s.el_.contentWindow&&X(s.el_.contentWindow,"resize",s.debouncedHandler_)},s.one("load",s.loadListener_)),s}i(n,t);var s=n.prototype;return s.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},s.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},s.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&Q(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},n}(Et);Et.registerComponent("ResizeManager",Us);var $s=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var i=e.$$("source"),n=[],s="";if(!i.length)return!1;for(var r=0;r<i.length;r++){var o=i[r].src;o&&-1===n.indexOf(o)&&n.push(o)}return!!n.length&&(1===n.length&&(s=n[0]),e.triggerSourceset(s),!0)},Hs=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(i){var n=t.createElement(this.nodeName.toLowerCase());n.innerHTML=i;for(var s=t.createDocumentFragment();n.childNodes.length;)s.appendChild(n.childNodes[0]);return this.innerText="",e.Element.prototype.appendChild.call(this,s),this.innerHTML}}),Bs=function(e,t){for(var i={},n=0;n<e.length&&!((i=Object.getOwnPropertyDescriptor(e[n],t))&&i.set&&i.get);n++);return i.enumerable=!0,i.configurable=!0,i},Fs=function(t){var i=t.el();if(!i.resetSourceWatch_){var n={},s=Bs([t.el(),e.HTMLMediaElement.prototype,e.Element.prototype,Hs],"innerHTML"),r=function(e){return function(){for(var n=arguments.length,s=new Array(n),r=0;n>r;r++)s[r]=arguments[r];var o=e.apply(i,s);return $s(t),o}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){i[e]&&(n[e]=i[e],i[e]=r(n[e]))}),Object.defineProperty(i,"innerHTML",ne(s,{set:r(s.set)})),i.resetSourceWatch_=function(){i.resetSourceWatch_=null,Object.keys(n).forEach(function(e){i[e]=n[e]}),Object.defineProperty(i,"innerHTML",s)},t.one("sourceset",i.resetSourceWatch_)}},js=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?ki(e.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return e.Element.prototype.setAttribute.call(this,"src",t),t}}),zs=function(t){if(t.featuresSourceset){var i=t.el();if(!i.resetSourceset_){var n=Bs([t.el(),e.HTMLMediaElement.prototype,js],"src"),s=i.setAttribute,r=i.load;Object.defineProperty(i,"src",ne(n,{set:function(e){var s=n.set.call(i,e);return t.triggerSourceset(i.src),s}})),i.setAttribute=function(e,n){var r=s.call(i,e,n);return/src/i.test(e)&&t.triggerSourceset(i.src),r},i.load=function(){var e=r.call(i);return $s(t)||(t.triggerSourceset(""),Fs(t)),e},i.currentSrc?t.triggerSourceset(i.currentSrc):$s(t)||Fs(t),i.resetSourceset_=function(){i.resetSourceset_=null,i.load=r,i.setAttribute=s,Object.defineProperty(i,"src",n),i.resetSourceWatch_&&i.resetSourceWatch_()}}}},Ws=function(n){function s(e,t){var i;i=n.call(this,e,t)||this;var s=e.source,r=!1;if(s&&(i.el_.currentSrc!==s.src||e.tag&&3===e.tag.initNetworkState_)?i.setSource(s):i.handleLateInit_(i.el_),e.enableSourceset&&i.setupSourcesetHandling_(),i.el_.hasChildNodes()){for(var o=i.el_.childNodes,a=o.length,l=[];a--;){var c=o[a];"track"===c.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(c),i.remoteTextTracks().addTrack(c.track),i.textTracks().addTrack(c.track),r||i.el_.hasAttribute("crossorigin")||!Ii(c.src)||(r=!0)):l.push(c))}for(var u=0;u<l.length;u++)i.el_.removeChild(l[u])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&r&&Ye.warn(Qe(He())),i.restoreMetadataTracksInIOSNativePlayer_(),(Qt||Rt||jt)&&!0===e.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}i(s,n);var r=s.prototype;return r.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),s.disposeMediaElement(this.el_),this.options_=null,n.prototype.dispose.call(this)},r.setupSourcesetHandling_=function(){zs(this)},r.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),i=function(){e=[];for(var i=0;i<t.length;i++){var n=t[i];"metadata"===n.kind&&e.push({track:n,storedMode:n.mode})}};i(),t.addEventListener("change",i),this.on("dispose",function(){return t.removeEventListener("change",i)});var n=function s(){for(var i=0;i<e.length;i++){var n=e[i];"disabled"===n.track.mode&&n.track.mode!==n.storedMode&&(n.track.mode=n.storedMode)}t.removeEventListener("change",s)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",i),t.removeEventListener("change",n),t.addEventListener("change",n)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",i),t.addEventListener("change",i),t.removeEventListener("change",n)})},r.overrideNative_=function(e,t){var i=this;if(t===this["featuresNative"+e+"Tracks"]){var n=e.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(e){i.el()[n+"Tracks"].removeEventListener(e,i[n+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},r.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},r.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},r.proxyNativeTracksForType_=function(e){var t=this,i=Qi[e],n=this.el()[i.getterName],s=this[i.getterName]();if(this["featuresNative"+i.capitalName+"Tracks"]&&n&&n.addEventListener){var r={change:function(e){s.trigger({type:"change",target:s,currentTarget:s,srcElement:s})},addtrack:function(e){s.addTrack(e.track)},removetrack:function(e){s.removeTrack(e.track)}},o=function(){for(var e=[],t=0;t<s.length;t++){for(var i=!1,r=0;r<n.length;r++)if(n[r]===s[t]){i=!0;break}i||e.push(s[t])}for(;e.length;)s.removeTrack(e.shift())};this[i.getterName+"Listeners_"]=r,Object.keys(r).forEach(function(e){var i=r[e];n.addEventListener(e,i),t.on("dispose",function(t){return n.removeEventListener(e,i)})}),this.on("loadstart",o),this.on("dispose",function(e){return t.off("loadstart",o)})}},r.proxyNativeTracks_=function(){var e=this;Qi.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},r.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),s.disposeMediaElement(e),e=i}else{e=t.createElement("video");var n=ne({},this.options_.tag&&I(this.options_.tag));Qt&&!0===this.options_.nativeControlsForTouch||delete n.controls,E(e,l(n,{id:this.options_.techId,"class":"vjs-tech"}))}e.playerId=this.options_.playerId}"undefined"!=typeof this.options_.preload&&P(e,"preload",this.options_.preload);for(var r=["loop","muted","playsinline","autoplay"],o=0;o<r.length;o++){var a=r[o],c=this.options_[a];"undefined"!=typeof c&&(c?P(e,a,a):A(e,a),e[a]=c)}return e},r.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,i=function(){t=!0};this.on("loadstart",i);var n=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",n),t||this.trigger("loadstart")})}var s=["loadstart"];s.push("loadedmetadata"),2<=e.readyState&&s.push("loadeddata"),3<=e.readyState&&s.push("canplay"),4<=e.readyState&&s.push("canplaythrough"),this.ready(function(){s.forEach(function(e){this.trigger(e)},this)})}},r.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){Ye(e,"Video is not ready. (Video.js)")}},r.duration=function(){var e=this;return this.el_.duration===1/0&&Bt&&Vt&&0===this.el_.currentTime?(this.on("timeupdate",function t(){0<e.el_.currentTime&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))}),NaN):this.el_.duration||NaN},r.width=function(){return this.el_.offsetWidth},r.height=function(){return this.el_.offsetHeight},r.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",function(){e.off("webkitbeginfullscreen",i),e.off("webkitendfullscreen",t)})}},r.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=e.navigator&&e.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},r.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},r.exitFullScreen=function(){this.el_.webkitExitFullScreen()},r.src=function(e){return void 0===e?this.el_.src:void this.setSrc(e)},r.reset=function(){s.resetMediaElement(this.el_)},r.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},r.setControls=function(e){this.el_.controls=!!e},r.addTextTrack=function(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):n.prototype.addTextTrack.call(this,e,t,i)},r.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return n.prototype.createRemoteTextTrack.call(this,e);var i=t.createElement("track");return e.kind&&(i.kind=e.kind),e.label&&(i.label=e.label),(e.language||e.srclang)&&(i.srclang=e.language||e.srclang),e["default"]&&(i["default"]=e["default"]),e.id&&(i.id=e.id),e.src&&(i.src=e.src),i},r.addRemoteTextTrack=function(e,t){var i=n.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i},r.removeRemoteTextTrack=function(e){if(n.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),i=t.length;i--;)e!==t[i]&&e!==t[i].track||this.el().removeChild(t[i])},r.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return"undefined"!=typeof this.el().webkitDroppedFrameCount&&"undefined"!=typeof this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),e.performance&&"function"==typeof e.performance.now?t.creationTime=e.performance.now():e.performance&&e.performance.timing&&"number"==typeof e.performance.timing.navigationStart&&(t.creationTime=e.Date.now()-e.performance.timing.navigationStart),t},s}(pn);if(m()){Ws.TEST_VID=t.createElement("video");var Vs=t.createElement("track");Vs.kind="captions",Vs.srclang="en",Vs.label="English",Ws.TEST_VID.appendChild(Vs)}Ws.isSupported=function(){try{Ws.TEST_VID.volume=.5}catch(e){return!1}return!(!Ws.TEST_VID||!Ws.TEST_VID.canPlayType)},Ws.canPlayType=function(e){return Ws.TEST_VID.canPlayType(e)},Ws.canPlaySource=function(e,t){return Ws.canPlayType(e.type)},Ws.canControlVolume=function(){try{var e=Ws.TEST_VID.volume;return Ws.TEST_VID.volume=e/2+.1,e!==Ws.TEST_VID.volume}catch(e){return!1}},Ws.canMuteVolume=function(){try{var e=Ws.TEST_VID.muted;return Ws.TEST_VID.muted=!e,Ws.TEST_VID.muted?P(Ws.TEST_VID,"muted","muted"):A(Ws.TEST_VID,"muted"),e!==Ws.TEST_VID.muted}catch(e){return!1}},Ws.canControlPlaybackRate=function(){if(Bt&&Vt&&58>qt)return!1;try{var e=Ws.TEST_VID.playbackRate;return Ws.TEST_VID.playbackRate=e/2+.1,e!==Ws.TEST_VID.playbackRate}catch(e){return!1}},Ws.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(t.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(t.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(t.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(t.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Ws.supportsNativeTextTracks=function(){return Xt||$t&&Vt},Ws.supportsNativeVideoTracks=function(){return!(!Ws.TEST_VID||!Ws.TEST_VID.videoTracks)},Ws.supportsNativeAudioTracks=function(){return!(!Ws.TEST_VID||!Ws.TEST_VID.audioTracks)},Ws.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Ws.prototype.featuresVolumeControl=Ws.canControlVolume(),Ws.prototype.featuresMuteControl=Ws.canMuteVolume(),Ws.prototype.featuresPlaybackRate=Ws.canControlPlaybackRate(),Ws.prototype.featuresSourceset=Ws.canOverrideAttributes(),Ws.prototype.movingMediaElementInDOM=!$t,Ws.prototype.featuresFullscreenResize=!0,Ws.prototype.featuresProgressEvents=!0,Ws.prototype.featuresTimeupdateEvents=!0,Ws.prototype.featuresNativeTextTracks=Ws.supportsNativeTextTracks(),Ws.prototype.featuresNativeVideoTracks=Ws.supportsNativeVideoTracks(),Ws.prototype.featuresNativeAudioTracks=Ws.supportsNativeAudioTracks();var qs=Ws.TEST_VID&&Ws.TEST_VID.constructor.prototype.canPlayType,Gs=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Ws.patchCanPlayType=function(){Ft>=4&&!zt&&!Vt&&(Ws.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&Gs.test(e)?"maybe":qs.call(this,e)})},Ws.unpatchCanPlayType=function(){var e=Ws.TEST_VID.constructor.prototype.canPlayType;return Ws.TEST_VID.constructor.prototype.canPlayType=qs,e},Ws.patchCanPlayType(),Ws.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Ws.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),i=t.length;i--;)e.removeChild(t[i]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){Ws.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){Ws.prototype["set"+ie(e)]=function(t){(this.el_[e]=t)?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){Ws.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(e){Ws.prototype["set"+ie(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(e){Ws.prototype[e]=function(){return this.el_[e]()}}),pn.withSourceHandlers(Ws),Ws.nativeSourceHandler={},Ws.nativeSourceHandler.canPlayType=function(e){try{return Ws.TEST_VID.canPlayType(e)}catch(e){return""}},Ws.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Ws.nativeSourceHandler.canPlayType(e.type);if(e.src){var i=Ei(e.src);return Ws.nativeSourceHandler.canPlayType("video/"+i)}return""},Ws.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},Ws.nativeSourceHandler.dispose=function(){},Ws.registerSourceHandler(Ws.nativeSourceHandler),pn.registerTech("Html5",Ws);var Ys=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Xs={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Qs=["tiny","xsmall","small","medium","large","xlarge","huge"],Ks={};Qs.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Ks[e]="vjs-layout-"+t});var Js={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Zs=function(n){function s(e,t,i){var o;if(e.id=e.id||t.id||"vjs_video_"+j(),(t=l(s.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var a=e.closest("[lang]");a&&a.getAttribute&&(t.language=a.getAttribute("lang"))}else for(var c=e;c&&1===c.nodeType;){if(I(c).hasOwnProperty("lang")){t.language=c.getAttribute("lang");break}c=c.parentNode}if((o=n.call(this,null,t,i)||this).log=Xe(o.id_),o.isPosterFromTech_=!1,o.queuedCallbacks_=[],o.isReady_=!1,o.hasStarted_=!1,o.userActive_=!1,!o.options_||!o.options_.techOrder||!o.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(o.tag=e,o.tagAttributes=e&&I(e),o.language(o.options_.language),t.languages){var u={};Object.getOwnPropertyNames(t.languages).forEach(function(e){u[e.toLowerCase()]=t.languages[e]}),o.languages_=u}else o.languages_=s.prototype.options_.languages;o.cache_={},o.poster_=t.poster||"",o.controls_=!!t.controls,o.cache_.lastVolume=1,e.controls=!1,e.removeAttribute("controls"),e.hasAttribute("autoplay")?o.options_.autoplay=!0:o.autoplay(o.options_.autoplay),o.scrubbing_=!1,o.el_=o.createEl(),o.cache_.lastPlaybackRate=o.defaultPlaybackRate(),ee(r(r(o)),{eventBusKey:"el_"});var d=ne(o.options_);if(t.plugins){var h=t.plugins;Object.keys(h).forEach(function(e){if("function"!=typeof this[e])throw new Error('plugin "'+e+'" does not exist');this[e](h[e])},r(r(o)))}o.options_.playerOptions=d,o.middleware_=[],o.initChildren(),o.isAudio("audio"===e.nodeName.toLowerCase()),o.controls()?o.addClass("vjs-controls-enabled"):o.addClass("vjs-controls-disabled"),o.el_.setAttribute("role","region"),o.isAudio()?o.el_.setAttribute("aria-label",o.localize("Audio Player")):o.el_.setAttribute("aria-label",o.localize("Video Player")),o.isAudio()&&o.addClass("vjs-audio"),o.flexNotSupported_()&&o.addClass("vjs-no-flex"),$t||o.addClass("vjs-workinghover"),s.players[o.id_]=r(r(o));var p=Ve.split(".")[0];return o.addClass("vjs-v"+p),o.userActive(!0),o.reportUserActivity(),o.one("play",o.listenForUserActivity_),o.on("fullscreenchange",o.handleFullscreenChange_),o.on("stageclick",o.handleStageClick_),o.breakpoints(o.options_.breakpoints),o.responsive(o.options_.responsive),o.changingSrc_=!1,o.playWaitingForReady_=!1,o.playOnLoadstart_=null,o}i(s,n);var o=s.prototype;return o.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),s.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),mn[this.id()]=null,n.prototype.dispose.call(this)},o.createEl=function(){var i,s=this.tag,r=this.playerElIngest_=s.parentNode&&s.parentNode.hasAttribute&&s.parentNode.hasAttribute("data-vjs-player"),o="video-js"===this.tag.tagName.toLowerCase();r?i=this.el_=s.parentNode:o||(i=this.el_=n.prototype.createEl.call(this,"div"));var a=I(s);if(o){for(i=this.el_=s,s=this.tag=t.createElement("video");i.children.length;)s.appendChild(i.firstChild);C(i,"video-js")||S(i,"video-js"),i.appendChild(s),r=this.playerElIngest_=i,Object.keys(i).forEach(function(e){s[e]=i[e]})}if(s.setAttribute("tabindex","-1"),a.tabindex="-1",Gt&&(s.setAttribute("role","application"),a.role="application"),s.removeAttribute("width"),s.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach(function(e){o&&"class"===e||i.setAttribute(e,a[e]),o&&s.setAttribute(e,a[e])}),s.playerId=s.id,s.id+="_html5_api",s.className="vjs-tech",s.player=i.player=this,this.addClass("vjs-paused"),!0!==e.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=ht("vjs-styles-dimensions");var l=Ze(".vjs-styles-defaults"),c=Ze("head");c.insertBefore(this.styleEl_,l?l.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var u=s.getElementsByTagName("a"),d=0;d<u.length;d++){var h=u.item(d);S(h,"vjs-hidden"),h.setAttribute("hidden","hidden")}return s.initNetworkState_=s.networkState,s.parentNode&&!r&&s.parentNode.insertBefore(i,s),w(s,i),this.children_.unshift(s),this.el_.setAttribute("lang",this.language_),this.el_=i},o.width=function(e){return this.dimension("width",e)},o.height=function(e){return this.dimension("height",e)},o.dimension=function(e,t){var i=e+"_";if(void 0===t)return this[i]||0;if(""===t)return this[i]=void 0,void this.updateStyleEl_();var n=parseFloat(t);isNaN(n)?Ye.error('Improper value "'+t+'" supplied for for '+e):(this[i]=n,this.updateStyleEl_())},o.fluid=function(e){return void 0===e?!!this.fluid_:(this.fluid_=!!e,e?(this.addClass("vjs-fluid"),this.fill(!1)):this.removeClass("vjs-fluid"),this.updateStyleEl_(),void 0)},o.fill=function(e){return void 0===e?!!this.fill_:(this.fill_=!!e,void(e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")))},o.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");
this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},o.updateStyleEl_=function(){if(!0!==e.VIDEOJS_NO_DYNAMIC_STYLE){var t,i,n,s=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=s[1]/s[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,i=void 0!==this.height_?this.height_:t*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),pt(this.styleEl_,"\n      ."+n+" {\n        width: "+t+"px;\n        height: "+i+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var o="number"==typeof this.width_?this.width_:this.options_.width,a="number"==typeof this.height_?this.height_:this.options_.height,l=this.tech_&&this.tech_.el();l&&(o>=0&&(l.width=o),a>=0&&(l.height=a))}},o.loadTech_=function(e,t){var i=this;this.tech_&&this.unloadTech_();var n=ie(e),s=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(pn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var r={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+s+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Ji.names.forEach(function(e){var t=Ji[e];r[t.getterName]=i[t.privateName]}),l(r,this.options_[n]),l(r,this.options_[s]),l(r,this.options_[e.toLowerCase()]),this.tag&&(r.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(r.startTime=this.cache_.currentTime);var o=pn.getTech(e);if(!o)throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new o(r),this.tech_.ready(ft(this,this.handleTechReady_),!0),ai(this.textTracksJson_||[],this.tech_),Ys.forEach(function(e){i.on(i.tech_,e,i["handleTech"+ie(e)+"_"])}),Object.keys(Xs).forEach(function(e){i.on(i.tech_,e,function(t){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+Xs[e]+"_"].bind(i),event:t}):i["handleTech"+Xs[e]+"_"](t)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||w(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},o.unloadTech_=function(){var e=this;Ji.names.forEach(function(t){var i=Ji[t];e[i.privateName]=e[i.getterName]()}),this.textTracksJson_=oi(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},o.tech=function(e){return void 0===e&&Ye.warn(Qe(Be())),this.tech_},o.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},o.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},o.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},o.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},o.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var i,n=function(){var e=t.muted();t.muted(!0);var i=t.play();return i&&i.then&&i["catch"]?i["catch"](function(i){t.muted(e)}):void 0};if("any"===e?(i=this.play())&&i.then&&i["catch"]&&i["catch"](function(){return n()}):i="muted"===e?n():this.play(),i&&i.then&&i["catch"])return i.then(function(){t.trigger({type:"autoplay-success",autoplay:e})})["catch"](function(i){t.trigger({type:"autoplay-failure",autoplay:e})})}},o.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,i="";"string"!=typeof t&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(e){return e.src===t});if(i.length)return i[0].type;for(var n=e.$$("source"),s=0;s<n.length;s++){var r=n[s];if(r.type&&r.src&&r.src===t)return r.type}return wn(t)}(this,t)),this.cache_.source=ne({},e,{src:t,type:i});for(var n=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),s=[],r=this.$$("source"),o=[],a=0;a<r.length;a++){var l=I(r[a]);s.push(l),l.src&&l.src===t&&o.push(l.src)}o.length&&!n.length?this.cache_.sources=s:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},o.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var i=function(e){return t.updateSourceCaches_(e)},n=this.currentSource().src,s=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(s)&&(!this.lastSource_||this.lastSource_.tech!==s&&this.lastSource_.player!==n)&&(i=function(){}),i(s),e.src||this.tech_.one(["sourceset","loadstart"],function r(e){if("sourceset"!==e.type){var i=t.techGet("currentSrc");t.lastSource_.tech=i,t.updateSourceCaches_(i)}t.tech_.off(["sourceset","loadstart"],r)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},o.hasStarted=function(e){return void 0===e?this.hasStarted_:void(e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")))},o.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},o.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},o.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},o.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},o.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},o.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},o.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},o.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},o.handleTechFirstPlay_=function(){this.options_.starttime&&(Ye.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},o.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},o.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},o.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},o.handleTechClick_=function(e){F(e)&&this.controls_&&(this.paused()?ue(this.play()):this.pause())},o.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(e.target)})||(this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},o.handleTechTap_=function(){this.userActive(!this.userActive())},o.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},o.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},o.handleTechTouchEnd_=function(e){e.preventDefault()},o.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},o.handleStageClick_=function(){this.reportUserActivity()},o.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},o.handleTechError_=function(){var e=this.tech_.error();this.error(e)},o.handleTechTextData_=function(){var e=null;1<arguments.length&&(e=arguments[1]),this.trigger("textdata",e)},o.getCache=function(){return this.cache_},o.techCall_=function(e,t){this.ready(function(){if(e in yn)return i=this.middleware_,n=this.tech_,r=t,n[s=e](i.reduce(Le(s),r));if(e in bn)return De(this.middleware_,this.tech_,e,t);var i,n,s,r;try{this.tech_&&this.tech_[e](t)}catch(i){throw Ye(i),i}},!0)},o.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in vn)return t=this.middleware_,i=this.tech_,n=e,t.reduceRight(Le(n),i[n]());if(e in bn)return De(this.middleware_,this.tech_,e);var t,i,n;try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw Ye("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw Ye("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw Ye(t),t}}},o.play=function(){var t=this,i=this.options_.Promise||e.Promise;return i?new i(function(e){t.play_(e)}):this.play_()},o.play_=function(e){var t=this;if(void 0===e&&(e=ue),this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return void e(this.techGet_("play"));this.playOnLoadstart_=function(){t.playOnLoadstart_=null,e(t.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){t.playWaitingForReady_=!1,e(t.play())})}},o.pause=function(){this.techCall_("pause")},o.paused=function(){return!1!==this.techGet_("paused")},o.played=function(){return this.techGet_("played")||oe(0,0)},o.scrubbing=function(e){return"undefined"==typeof e?this.scrubbing_:(this.scrubbing_=!!e,void(e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")))},o.currentTime=function(e){return"undefined"!=typeof e?(0>e&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},o.duration=function(e){return void 0===e?void 0!==this.cache_.duration?this.cache_.duration:NaN:((e=parseFloat(e))<0&&(e=1/0),void(e!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))))},o.remainingTime=function(){return this.duration()-this.currentTime()},o.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},o.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=oe(0,0)),e},o.bufferedPercent=function(){return ae(this.buffered(),this.duration())},o.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),i=e.end(e.length-1);return i>t&&(i=t),i},o.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},o.muted=function(e){return void 0===e?this.techGet_("muted")||!1:void this.techCall_("setMuted",e)},o.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},o.lastVolume_=function(e){return void 0===e||0===e?this.cache_.lastVolume:void(this.cache_.lastVolume=e)},o.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},o.isFullscreen=function(e){return void 0===e?!!this.isFullscreen_:void(this.isFullscreen_=!!e)},o.requestFullscreen=function(){var e=Jt;this.isFullscreen(!0),e.requestFullscreen?(X(t,e.fullscreenchange,ft(this,function i(n){this.isFullscreen(t[e.fullscreenElement]),!1===this.isFullscreen()&&Q(t,e.fullscreenchange,i),this.trigger("fullscreenchange")})),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},o.exitFullscreen=function(){var e=Jt;this.isFullscreen(!1),e.requestFullscreen?t[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},o.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=t.documentElement.style.overflow,X(t,"keydown",ft(this,this.fullWindowOnEscKey)),t.documentElement.style.overflow="hidden",S(t.body,"vjs-full-window"),this.trigger("enterFullWindow")},o.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},o.exitFullWindow=function(){this.isFullWindow=!1,Q(t,"keydown",this.fullWindowOnEscKey),t.documentElement.style.overflow=this.docOrigOverflow,T(t.body,"vjs-full-window"),this.trigger("exitFullWindow")},o.canPlayType=function(e){for(var t,i=0,n=this.options_.techOrder;i<n.length;i++){var s=n[i],r=pn.getTech(s);if(r||(r=Et.getComponent(s)),r){if(r.isSupported()&&(t=r.canPlayType(e)))return t}else Ye.error('The "'+s+'" tech is undefined. Skipped browser support check for that tech.')}return""},o.selectSource=function(e){var t,i=this,n=this.options_.techOrder.map(function(e){return[e,pn.getTech(e)]}).filter(function(e){var t=e[0],i=e[1];return i?i.isSupported():(Ye.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),s=function(e,t,i){var n;return e.some(function(e){return t.some(function(t){return(n=i(e,t))?!0:void 0})}),n},r=function(e,t){var n=e[0];return e[1].canPlaySource(t,i.options_[n.toLowerCase()])?{source:t,tech:n}:void 0};return(this.options_.sourceOrder?s(e,n,(t=r,function(e,i){return t(i,e)})):s(n,e,r))||!1},o.src=function(e){var t=this;if("undefined"==typeof e)return this.cache_.src||"";var i=function n(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){e=n(e),Array.isArray(e)?t=t.concat(e):c(e)&&t.push(e)}),e=t}else e="string"==typeof e&&e.trim()?[Me({src:e})]:c(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Me(e)]:[];return e}(e);i.length?(this.changingSrc_=!0,this.cache_.sources=i,this.updateSourceCaches_(i[0]),Ae(this,i[0],function(e,n){var s,r;return t.middleware_=n,t.cache_.sources=i,t.updateSourceCaches_(e),t.src_(e)?1<i.length?t.src(i.slice(1)):(t.changingSrc_=!1,t.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void t.triggerReady()):(s=n,r=t.tech_,s.forEach(function(e){return e.setTech&&e.setTech(r)}),void 0)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},o.src_=function(e){var t,i,n=this,s=this.selectSource([e]);return!s||(t=s.tech,i=this.techName_,ie(t)!==ie(i)?(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(function(){n.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1)},o.load=function(){this.techCall_("load")},o.reset=function(){this.tech_&&this.tech_.clearTracks("text"),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},o.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},o.currentSource=function(){return this.cache_.source||{}},o.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},o.currentType=function(){return this.currentSource()&&this.currentSource().type||""},o.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},o.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=t||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",t)},o.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},o.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},o.poster=function(e){return void 0===e?this.poster_:(e||(e=""),void(e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))))},o.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},o.controls=function(e){return void 0===e?!!this.controls_:(e=!!e,void(this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))))},o.usingNativeControls=function(e){return void 0===e?!!this.usingNativeControls_:(e=!!e,void(this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))))},o.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new le(e),this.addClass("vjs-error"),Ye.error("(CODE:"+this.error_.code+" "+le.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},o.reportUserActivity=function(e){this.userActivity_=!0},o.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},o.listenForUserActivity_=function(){var e,t,i,n,s=ft(this,this.reportUserActivity);this.on("mousedown",function(){s(),this.clearInterval(e),e=this.setInterval(s,250)}),this.on("mousemove",function(e){e.screenX===t&&e.screenY===i||(t=e.screenX,i=e.screenY,s())}),this.on("mouseup",function(t){s(),this.clearInterval(e)}),this.on("keydown",s),this.on("keyup",s),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(n);var e=this.options_.inactivityTimeout;0>=e||(n=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},o.playbackRate=function(e){return void 0===e?this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1:void this.techCall_("setPlaybackRate",e)},o.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},o.isAudio=function(e){return void 0===e?!!this.isAudio_:void(this.isAudio_=!!e)},o.addTextTrack=function(e,t,i){return this.tech_?this.tech_.addTextTrack(e,t,i):void 0},o.addRemoteTextTrack=function(e,t){return this.tech_?this.tech_.addRemoteTextTrack(e,t):void 0},o.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;return t||(t=e),this.tech_?this.tech_.removeRemoteTextTrack(t):void 0},o.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},o.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},o.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},o.language=function(e){return void 0===e?this.language_:void(this.language_=String(e).toLowerCase())},o.languages=function(){return ne(s.prototype.options_.languages,this.languages_)},o.toJSON=function(){var e=ne(this.options_),t=e.tracks;e.tracks=[];for(var i=0;i<t.length;i++){var n=t[i];(n=ne(n)).player=void 0,e.tracks[i]=n}return e},o.createModal=function(e,t){var i=this;(t=t||{}).content=e||"";var n=new ci(this,t);return this.addChild(n),n.on("dispose",function(){i.removeChild(n)}),n.open(),n},o.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),i=0;i<Qs.length;i++){var n=Qs[i];if(t<=this.breakpoints_[n]){if(e===n)return;e&&this.removeClass(Ks[e]),this.addClass(Ks[n]),this.breakpoint_=n;break}}},o.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},o.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=l({},Js,e),this.updateCurrentBreakpoint_()),l(this.breakpoints_)},o.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},o.currentBreakpoint=function(){return this.breakpoint_},o.currentBreakpointClass=function(){return Ks[this.breakpoint_]||""},s.getTagSettings=function(e){var t={sources:[],tracks:[]},i=I(e),n=i["data-setup"];if(C(e,"vjs-fill")&&(i.fill=!0),C(e,"vjs-fluid")&&(i.fluid=!0),null!==n){var s=si(n||"{}"),r=s[0],o=s[1];r&&Ye.error(r),l(i,o)}if(l(t,i),e.hasChildNodes())for(var a=e.childNodes,c=0,u=a.length;u>c;c++){var d=a[c],h=d.nodeName.toLowerCase();"source"===h?t.sources.push(I(d)):"track"===h&&t.tracks.push(I(d))}return t},o.flexNotSupported_=function(){var e=t.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},s}(Et);Ji.names.forEach(function(e){var t=Ji[e];Zs.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Zs.players={};var er=e.navigator;Zs.prototype.options_={techOrder:pn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:er&&(er.languages&&er.languages[0]||er.userLanguage||er.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Zs.prototype[e]=function(){return this.techGet_(e)}}),Ys.forEach(function(e){Zs.prototype["handleTech"+ie(e)+"_"]=function(){return this.trigger(e)}}),Et.registerComponent("Player",Zs);var tr="plugin",ir="activePlugins_",nr={},sr=function(e){return nr.hasOwnProperty(e)},rr=function(e){return sr(e)?nr[e]:void 0},or=function(e,t){e[ir]=e[ir]||{},e[ir][t]=!0},ar=function(e,t,i){var n=(i?"before":"")+"pluginsetup";e.trigger(n,t),e.trigger(n+":"+t.name,t)},lr=function(e,t){return t.prototype.name=e,function(){ar(this,{name:e,plugin:t,instance:null},!0);for(var i=arguments.length,n=new Array(i),r=0;i>r;r++)n[r]=arguments[r];var o=s(t,[this].concat(n));return this[e]=function(){return o},ar(this,o.getEventHash()),o}},cr=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,ee(this),delete this.trigger,te(this,this.constructor.defaultState),or(t,this.name),this.dispose=ft(this,this.dispose),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),K(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[ir][e]=!1,this.player=this.state=null,t[e]=lr(e,nr[e])},e.isBasic=function(t){var i="string"==typeof t?rr(t):t;return"function"==typeof i&&!e.prototype.isPrototypeOf(i.prototype)},e.registerPlugin=function(t,i){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(sr(t))Ye.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Zs.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof i)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof i+".");var n,s,r;return nr[t]=i,t!==tr&&(e.isBasic(i)?Zs.prototype[t]=(n=t,s=i,r=function(){ar(this,{name:n,plugin:s,instance:null},!0);var e=s.apply(this,arguments);return or(this,n),ar(this,{name:n,plugin:s,instance:e}),e},Object.keys(s).forEach(function(e){r[e]=s[e]}),r):Zs.prototype[t]=lr(t,i)),i},e.deregisterPlugin=function(e){if(e===tr)throw new Error("Cannot de-register base plugin.");sr(e)&&(delete nr[e],delete Zs.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(nr)),e.forEach(function(e){var i=rr(e);i&&((t=t||{})[e]=i)}),t},e.getPluginVersion=function(e){var t=rr(e);return t&&t.VERSION||""},e}();cr.getPlugin=rr,cr.BASE_PLUGIN_NAME=tr,cr.registerPlugin(tr,cr),Zs.prototype.usingPlugin=function(e){return!!this[ir]&&!0===this[ir][e]},Zs.prototype.hasPlugin=function(e){return!!sr(e)};var ur=function(e){return 0===e.indexOf("#")?e.slice(1):e};if(Fe.hooks_={},Fe.hooks=function(e,t){return Fe.hooks_[e]=Fe.hooks_[e]||[],t&&(Fe.hooks_[e]=Fe.hooks_[e].concat(t)),Fe.hooks_[e]},Fe.hook=function(e,t){Fe.hooks(e,t)},Fe.hookOnce=function(e,t){Fe.hooks(e,[].concat(t).map(function(t){return function i(){return Fe.removeHook(e,i),t.apply(void 0,arguments)}}))},Fe.removeHook=function(e,t){var i=Fe.hooks(e).indexOf(t);return!(-1>=i||(Fe.hooks_[e]=Fe.hooks_[e].slice(),Fe.hooks_[e].splice(i,1),0))},!0!==e.VIDEOJS_NO_DYNAMIC_STYLE&&m()){var dr=Ze(".vjs-styles-defaults");if(!dr){dr=ht("vjs-styles-defaults");var hr=Ze("head");hr&&hr.insertBefore(dr,hr.firstChild),pt(dr,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}Z(1,Fe),Fe.VERSION=Ve,Fe.options=Zs.prototype.options_,Fe.getPlayers=function(){return Zs.players},Fe.getPlayer=function(e){var t,i=Zs.players;if("string"==typeof e){var n=ur(e),s=i[n];if(s)return s;t=Ze("#"+n)}else t=e;if(g(t)){var r=t,o=r.player,a=r.playerId;if(o||i[a])return o||i[a]}},Fe.getAllPlayers=function(){return Object.keys(Zs.players).map(function(e){return Zs.players[e]}).filter(Boolean)},Fe.players=Zs.players,Fe.getComponent=Et.getComponent,Fe.registerComponent=function(e,t){pn.isTech(t)&&Ye.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Et.registerComponent.call(Et,e,t)},Fe.getTech=pn.getTech,Fe.registerTech=pn.registerTech,Fe.use=function(e,t){fn[e]=fn[e]||[],fn[e].push(t)},Object.defineProperty(Fe,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Fe.middleware,"TERMINATOR",{value:gn,writeable:!1,enumerable:!0}),Fe.browser=Kt,Fe.TOUCH_ENABLED=Qt,Fe.extend=function(e,t){void 0===t&&(t={});var i=function(){e.apply(this,arguments)},n={};for(var s in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),n=t):"function"==typeof t&&(i=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)}(i,e),n)n.hasOwnProperty(s)&&(i.prototype[s]=n[s]);return i},Fe.mergeOptions=ne,Fe.bind=ft,Fe.registerPlugin=cr.registerPlugin,Fe.deregisterPlugin=cr.deregisterPlugin,Fe.plugin=function(e,t){return Ye.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),cr.registerPlugin(e,t)},Fe.getPlugins=cr.getPlugins,Fe.getPlugin=cr.getPlugin,Fe.getPluginVersion=cr.getPluginVersion,Fe.addLanguage=function(e,t){var i;return e=(""+e).toLowerCase(),Fe.options.languages=ne(Fe.options.languages,((i={})[e]=t,i)),Fe.options.languages[e]},Fe.log=Ye,Fe.createLogger=Xe,Fe.createTimeRange=Fe.createTimeRanges=oe,Fe.formatTime=Ue,Fe.setFormatTime=function(e){Mn=e},Fe.resetFormatTime=function(){Mn=On},Fe.parseUrl=Ti,Fe.isCrossOrigin=Ii,Fe.EventTarget=gt,Fe.on=X,Fe.one=J,Fe.off=Q,Fe.trigger=K,Fe.xhr=Wi,Fe.TextTrack=qi,Fe.AudioTrack=Gi,Fe.VideoTrack=Yi,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){Fe[e]=function(){return Ye.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),tt[e].apply(null,arguments)}}),Fe.computedStyle=d,Fe.dom=tt,Fe.url=xi;var pr=de(function(e,t){var i,n,s,r,o;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,s=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");return s.path=o.normalizePath(s.path),o.buildURLFromParts(s)}var r=o.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=o.normalizePath(r.path),o.buildURLFromParts(r)):t;var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var l=n.exec(a.path);a.netLoc=l[1],a.path=l[2]}a.netLoc&&!a.path&&(a.path="/");var c={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(c.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var u=a.path,d=u.substring(0,u.lastIndexOf("/")+1)+r.path;c.path=o.normalizePath(d)}else c.path=a.path,r.params||(c.params=a.params,r.query||(c.query=a.query));return null===c.path&&(c.path=i.alwaysNormalize?o.normalizePath(r.path):r.path),o.buildURLFromParts(c)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(s,"");e.length!==(e=e.replace(r,"")).length;);
return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=o}),fr=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},gr=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},vr=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},yr=function(){function e(){fr(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),i>-1},e.prototype.trigger=function(e){var t=this.listeners[e],i=void 0,n=void 0,s=void 0;if(t)if(2===arguments.length)for(n=t.length,i=0;n>i;++i)t[i].call(this,arguments[1]);else for(s=Array.prototype.slice.call(arguments,1),n=t.length,i=0;n>i;++i)t[i].apply(this,s)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),br=function(e){function t(){fr(this,t);var i=vr(this,e.call(this));return i.buffer="",i}return gr(t,e),t.prototype.push=function(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(yr),_r=function(e){for(var t=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},n=t.length,s=void 0;n--;)""!==t[n]&&((s=/([^=]*)=(.*)/.exec(t[n]).slice(1))[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),i[s[0]]=s[1]);return i},wr=function(e){function t(){fr(this,t);var i=vr(this,e.call(this));return i.customParsers=[],i}return gr(t,e),t.prototype.push=function(e){var t=void 0,i=void 0;if(0!==(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===e[0]){for(var n=0;n<this.customParsers.length;n++)if(this.customParsers[n].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),void this.trigger("data",i);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"totalduration"},t[1]&&(i.duration=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),void this.trigger("data",i);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"byterange"},t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),void this.trigger("data",i);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),void this.trigger("data",i);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"map"},t[1]){var s=_r(t[1]);if(s.URI&&(i.uri=s.URI),s.BYTERANGE){var r=s.BYTERANGE.split("@"),o=r[0],a=r[1];i.byterange={},o&&(i.byterange.length=parseInt(o,10)),a&&(i.byterange.offset=parseInt(a,10))}}this.trigger("data",i)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"stream-inf"},t[1]){if(i.attributes=_r(t[1]),i.attributes.RESOLUTION){var l=i.attributes.RESOLUTION.split("x"),c={};l[0]&&(c.width=parseInt(l[0],10)),l[1]&&(c.height=parseInt(l[1],10)),i.attributes.RESOLUTION=c}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}this.trigger("data",i)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return i={type:"tag",tagType:"media"},t[1]&&(i.attributes=_r(t[1])),void this.trigger("data",i);if(t=/^#EXT-X-ENDLIST/.exec(e))this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),void this.trigger("data",i);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return i={type:"tag",tagType:"key"},t[1]&&(i.attributes=_r(t[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void this.trigger("data",i);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return i={type:"tag",tagType:"start"},t[1]&&(i.attributes=_r(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void this.trigger("data",i);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i);this.trigger("data",{type:"tag",data:e.slice(4)})}}}else this.trigger("data",{type:"comment",text:e.slice(1)})}else this.trigger("data",{type:"uri",uri:e})},t.prototype.addParser=function(e){var t=this,i=e.expression,n=e.customType,s=e.dataParser,r=e.segment;"function"!=typeof s&&(s=function(e){return e}),this.customParsers.push(function(e){return i.exec(e)?(t.trigger("data",{type:"custom",data:s(e),customType:n,segment:r}),!0):void 0})},t}(yr),Cr=function(e){function t(){fr(this,t);var i=vr(this,e.call(this));i.lineStream=new br,i.parseStream=new wr,i.lineStream.pipe(i.parseStream);var n=i,s=[],r={},o=void 0,a=void 0,l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;return i.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},i.parseStream.on("data",function(e){var t=void 0,i=void 0;({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&((r.byterange=t).length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&((r.byterange=t).offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<e.duration&&(r.duration=e.duration),0===e.duration&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){e.attributes?"NONE"!==e.attributes.METHOD?e.attributes.URI?(e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},"undefined"!=typeof e.attributes.IV&&(a.iv=e.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):a=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,c=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){o={},e.uri&&(o.uri=e.uri),e.byterange&&(o.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes?(r.attributes||(r.attributes={}),mr(r.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],(i={"default":/yes/i.test(e.attributes.DEFAULT)})["default"]?i.autoselect=!0:i.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(i.language=e.attributes.LANGUAGE),e.attributes.URI&&(i.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(i.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(i.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(i.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=i}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){"undefined"==typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),r.dateTimeString=e.dateTimeString,r.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){r.cueOut=e.data},"cue-out-cont":function(){r.cueOutCont=e.data},"cue-in":function(){r.cueIn=e.data}})[e.tagType]||function(){}).call(n)},uri:function(){r.uri=e.uri,s.push(r),!this.manifest.targetDuration||"duration"in r||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),a&&(r.key=a),r.timeline=c,o&&(r.map=o),r={}},comment:function(){},custom:function(){e.segment?(r.custom=r.custom||{},r.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(n)}),i}return gr(t,e),t.prototype.push=function(e){this.lineStream.push(e)},t.prototype.end=function(){this.lineStream.push("\n")},t.prototype.addParser=function(e){this.parseStream.addParser(e)},t}(yr),Sr=function(e){return!!e&&"object"==typeof e},Tr=function Id(){for(var e=arguments.length,t=new Array(e),i=0;e>i;i++)t[i]=arguments[i];return t.reduce(function(e,t){return Object.keys(t).forEach(function(i){Array.isArray(e[i])&&Array.isArray(t[i])?e[i]=e[i].concat(t[i]):Sr(e[i])&&Sr(t[i])?e[i]=Id(e[i],t[i]):e[i]=t[i]}),e},{})},kr=function(e){return e.reduce(function(e,t){return e.concat(t)},[])},Er=function(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},Ir=function(e){var t;return(t=e.reduce(function(e,t){var i,n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments[0].discontinuity=!0,(i=e[n].segments).push.apply(i,t.segments),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t,e},{}),Object.keys(t).map(function(e){return t[e]})).map(function(e){var t,i;return e.discontinuityStarts=(t=e.segments,i="discontinuity",t.reduce(function(e,t,n){return t[i]&&e.push(n),e},[])),e})},xr=function(e){var t,i=e.attributes,n=e.segments,s={attributes:(t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(s.contentProtection=i.contentProtection),s};"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Pr,Ar,Dr,Lr,Or,Mr,Nr=(function(e,t){var i,n,s,r,o;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,s=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");return s.path=o.normalizePath(s.path),o.buildURLFromParts(s)}var r=o.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=o.normalizePath(r.path),o.buildURLFromParts(r)):t;var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var l=n.exec(a.path);a.netLoc=l[1],a.path=l[2]}a.netLoc&&!a.path&&(a.path="/");var c={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(c.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var u=a.path,d=u.substring(0,u.lastIndexOf("/")+1)+r.path;c.path=o.normalizePath(d)}else c.path=a.path,r.params||(c.params=a.params,r.query||(c.query=a.query));return null===c.path&&(c.path=i.alwaysNormalize?o.normalizePath(r.path):r.path),o.buildURLFromParts(c)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(s,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=o}(Pr={exports:{}},Pr.exports),Pr.exports),Rr=function(t,i){return/^[a-z]+:/i.test(i)?i:(/\/\//i.test(t)||(t=Nr.buildAbsoluteURL(e.location.href,t)),Nr.buildAbsoluteURL(t,i))},Ur=function(e){var t=e.baseUrl,i=void 0===t?"":t,n=e.source,s=void 0===n?"":n,r=e.range,o=void 0===r?"":r,a={uri:s,resolvedUri:Rr(i||"",s)};if(o){var l=o.split("-"),c=parseInt(l[0],10),u=parseInt(l[1],10);a.byterange={length:u-c,offset:c}}return a},$r=function(e,t){for(var i,n,s,r,o,a,l,c,u,d,h,p,f=e.type,m=void 0===f?"static":f,g=e.minimumUpdatePeriod,v=void 0===g?0:g,y=e.media,b=void 0===y?"":y,_=e.sourceDuration,w=e.timescale,C=void 0===w?1:w,S=e.startNumber,T=void 0===S?1:S,k=e.periodIndex,E=[],I=-1,x=0;x<t.length;x++){var P=t[x],A=P.d,D=P.r||0,L=P.t||0;0>I&&(I=L),L&&L>I&&(I=L);var O=void 0;if(0>D){var M=x+1;O=M===t.length?"dynamic"===m&&v>0&&0<b.indexOf("$Number$")?(n=I,s=A,r=(i=e).NOW,o=i.clientOffset,a=i.availabilityStartTime,l=i.timescale,c=void 0===l?1:l,u=i.start,d=void 0===u?0:u,h=i.minimumUpdatePeriod,p=(r+o)/1e3+(void 0===h?0:h)-(a+d),Math.ceil((p*c-n)/s)):(_*C-I)/A:(t[M].t-I)/A}else O=D+1;for(var N=T+E.length+O,R=T+E.length;N>R;)E.push({number:R,duration:A/C,time:I,timeline:k}),I+=A,R++}return E},Hr={"static":function(e){var t=e.duration,i=e.timescale,n=void 0===i?1:i,s=e.sourceDuration;return{start:0,end:Math.ceil(s/(t/n))}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,s=e.timescale,r=void 0===s?1:s,o=e.duration,a=e.start,l=void 0===a?0:a,c=e.minimumUpdatePeriod,u=void 0===c?0:c,d=e.timeShiftBufferDepth,h=void 0===d?1/0:d,p=(t+i)/1e3,f=n+l,m=p+u-f,g=Math.ceil(m*r/o),v=Math.floor((p-f-h)*r/o),y=Math.floor((p-f)*r/o);return{start:Math.max(0,v),end:Math.min(g,y)}}},Br=function(e){var t,i=e.type,n=void 0===i?"static":i,s=e.duration,r=e.timescale,o=void 0===r?1:r,a=e.sourceDuration,l=Hr[n](e),c=function(e,t){for(var i=[],n=e;t>n;n++)i.push(n);return i}(l.start,l.end).map((t=e,function(e,i){var n=t.duration,s=t.timescale,r=void 0===s?1:s,o=t.periodIndex,a=t.startNumber;return{number:(void 0===a?1:a)+e,duration:n/r,timeline:o,time:i*n}}));if("static"===n){var u=c.length-1;c[u].duration=a-s/o*u}return c},Fr=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,jr=function(e,t){return e.replace(Fr,(i=t,function(e,t,n,s){if("$$"===e)return"$";if("undefined"==typeof i[t])return e;var r=""+i[t];return"RepresentationID"===t?r:(s=n?parseInt(s,10):1)<=r.length?r:""+new Array(s-r.length+1).join("0")+r}));var i},zr=function(e,t){var i,n,s={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,o=void 0===r?{sourceURL:"",range:""}:r,a=Ur({baseUrl:e.baseUrl,source:jr(o.sourceURL,s),range:o.range});return(n=t,(i=e).duration||n?i.duration?Br(i):$r(i,n):[{number:i.startNumber||1,duration:i.sourceDuration,time:0,timeline:i.periodIndex}]).map(function(t){s.Number=t.number,s.Time=t.time;var i=jr(e.media||"",s);return{uri:i,timeline:t.timeline,duration:t.duration,resolvedUri:Rr(e.baseUrl||"",i),map:a,number:t.number}})},Wr="INVALID_NUMBER_OF_PERIOD",Vr="DASH_EMPTY_MANIFEST",qr="DASH_INVALID_XML",Gr="NO_BASE_URL",Yr="SEGMENT_TIME_UNSPECIFIED",Xr="UNSUPPORTED_UTC_TIMING_SCHEME",Qr=function(e,t){var i=e.duration,n=e.segmentUrls,s=void 0===n?[]:n;if(!i&&!t||i&&t)throw new Error(Yr);var r,o=s.map(function(t){return n=t,s=(i=e).baseUrl,r=i.initialization,a=Ur({baseUrl:s,source:(o=void 0===r?{}:r).sourceURL,range:o.range}),(l=Ur({baseUrl:s,source:n.media,range:n.mediaRange})).map=a,l;var i,n,s,r,o,a,l});return i&&(r=Br(e)),t&&(r=$r(e,t)),r.map(function(e,t){if(o[t]){var i=o[t];return i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i}}).filter(function(e){return e})},Kr=function(e){var t=e.baseUrl,i=e.initialization,n=void 0===i?{}:i,s=e.sourceDuration,r=e.timescale,o=void 0===r?1:r,a=e.indexRange,l=void 0===a?"":a,c=e.duration;if(!t)throw new Error(Gr);var u=Ur({baseUrl:t,source:n.sourceURL,range:n.range}),d=Ur({baseUrl:t,source:t,range:l});if(d.map=u,c){var h=Br(e);h.length&&(d.duration=h[0].duration,d.timeline=h[0].timeline)}else s&&(d.duration=s/o,d.timeline=0);return d.number=0,[d]},Jr=function(e){var t,i,n=e.attributes,s=e.segmentInfo;if(s.template?(i=zr,t=Tr(n,s.template)):s.base?(i=Kr,t=Tr(n,s.base)):s.list&&(i=Qr,t=Tr(n,s.list)),!i)return{attributes:n};var r=i(t,s.timeline);if(t.duration){var o=t,a=o.duration,l=o.timescale,c=void 0===l?1:l;t.duration=a/c}else r.length?t.duration=r.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):t.duration=0;return{attributes:t,segments:r}},Zr=function(e,t){return Er(e.childNodes).filter(function(e){return e.tagName===t})},eo=function(e){return e.textContent.trim()},to=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var i=t.slice(1),n=i[0],s=i[1],r=i[2],o=i[3],a=i[4],l=i[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(s||0)+86400*parseFloat(r||0)+3600*parseFloat(o||0)+60*parseFloat(a||0)+parseFloat(l||0)},io={mediaPresentationDuration:function(e){return to(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return to(e)},timeShiftBufferDepth:function(e){return to(e)},start:function(e){return to(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?to(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},no=function(e){return e&&e.attributes?Er(e.attributes).reduce(function(e,t){var i=io[t.name]||io.DEFAULT;return e[t.name]=i(t.value),e},{}):{}},so={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},ro=function(e,t){return t.length?kr(e.map(function(e){return t.map(function(t){return Rr(e,eo(t))})})):e},oo=function(e){var t=Zr(e,"SegmentTemplate")[0],i=Zr(e,"SegmentList")[0],n=i&&Zr(i,"SegmentURL").map(function(e){return Tr({tag:"SegmentURL"},no(e))}),s=Zr(e,"SegmentBase")[0],r=i||t,o=r&&Zr(r,"SegmentTimeline")[0],a=i||s||t,l=a&&Zr(a,"Initialization")[0],c=t&&no(t);c&&l?c.initialization=l&&no(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var u={template:c,timeline:o&&Zr(o,"S").map(function(e){return no(e)}),list:i&&Tr(no(i),{segmentUrls:n,initialization:no(l)}),base:s&&Tr(no(s),{initialization:no(l)})};return Object.keys(u).forEach(function(e){u[e]||delete u[e]}),u},ao=function(t){return t.reduce(function(t,i){var n=no(i),s=so[n.schemeIdUri];if(s){t[s]={attributes:n};var r=Zr(i,"cenc:pssh")[0];if(r){var o=eo(r),a=o&&function(t){for(var i=e.atob(t),n=new Uint8Array(i.length),s=0;s<i.length;s++)n[s]=i.charCodeAt(s);return n}(o);t[s].pssh=a}}return t},{})},lo=function(e,t,i){return function(n){var s=no(n),r=ro(t,Zr(n,"BaseURL")),o=Zr(n,"Role")[0],a={role:no(o)},l=Tr(e,s,a),c=ao(Zr(n,"ContentProtection"));Object.keys(c).length&&(l=Tr(l,{contentProtection:c}));var u,d,h,p=oo(n),f=Zr(n,"Representation"),m=Tr(i,p);return kr(f.map((u=l,d=r,h=m,function(e){var t=Zr(e,"BaseURL"),i=ro(d,t),n=Tr(u,no(e)),s=oo(e);return i.map(function(e){return{segmentInfo:Tr(h,s),attributes:Tr(n,{baseUrl:e})}})})))}},co=function(t,i){void 0===i&&(i={});var n=i,s=n.manifestUri,r=void 0===s?"":s,o=n.NOW,a=void 0===o?Date.now():o,l=n.clientOffset,c=void 0===l?0:l,u=Zr(t,"Period");if(!u.length)throw new Error(Wr);var d,h,p=no(t),f=ro([r],Zr(t,"BaseURL"));return p.sourceDuration=p.mediaPresentationDuration||0,p.NOW=a,p.clientOffset=c,kr(u.map((d=p,h=f,function(t,i){var n=ro(h,Zr(t,"BaseURL")),s=no(t),r=parseInt(s.id,10),o=e.isNaN(r)?i:r,a=Tr(d,{periodIndex:o}),l=Zr(t,"AdaptationSet"),c=oo(t);return kr(l.map(lo(a,n,c)))})))},uo=function(t){if(""===t)throw new Error(Vr);var i=(new e.DOMParser).parseFromString(t,"application/xml"),n=i&&"MPD"===i.documentElement.tagName?i.documentElement:null;if(!n||n&&0<n.getElementsByTagName("parsererror").length)throw new Error(qr);return n},ho=function(e,t){return function(e){var t;if(!e.length)return{};var i=e[0].attributes,n=i.sourceDuration,s=i.minimumUpdatePeriod,r=void 0===s?0:s,o=Ir(e.filter(function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType})).map(xr),a=Ir(e.filter(function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType})),l=e.filter(function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType}),c={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:n,playlists:o,minimumUpdatePeriod:1e3*r};return a.length&&(c.mediaGroups.AUDIO.audio=a.reduce(function(e,t){var i,n,s,r,o,a=t.attributes.role&&t.attributes.role.value||"main",l=t.attributes.lang||"",c="main";return l&&(c=t.attributes.lang+" ("+a+")"),e[c]&&e[c].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth||(e[c]={language:l,autoselect:!0,"default":"main"===a,playlists:[(i=t,s=i.attributes,r=i.segments,o={attributes:(n={NAME:s.id,BANDWIDTH:s.bandwidth,CODECS:s.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===(s.type||"static"),timeline:s.periodIndex,resolvedUri:"",targetDuration:s.duration,segments:r,mediaSequence:r.length?r[0].number:1},s.contentProtection&&(o.contentProtection=s.contentProtection),o)],uri:""}),e},{})),l.length&&(c.mediaGroups.SUBTITLES.subs=l.reduce(function(e,t){var i,n,s,r,o=t.attributes.lang||"text";return e[o]||(e[o]={language:o,"default":!1,autoselect:!1,playlists:[(i=t,s=i.attributes,r=i.segments,"undefined"==typeof r&&(r=[{uri:s.baseUrl,timeline:s.periodIndex,resolvedUri:s.baseUrl||"",duration:s.sourceDuration,number:0}],s.duration=s.sourceDuration),{attributes:(n={NAME:s.id,BANDWIDTH:s.bandwidth},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===(s.type||"static"),timeline:s.periodIndex,resolvedUri:s.baseUrl||"",targetDuration:s.duration,segments:r,mediaSequence:r.length?r[0].number:1})],uri:""}),e},{})),c}(co(uo(e),t).map(Jr))},po=function(e){return function(e){var t=Zr(e,"UTCTiming")[0];if(!t)return null;var i=no(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Xr)}return i}(uo(e))},fo=function(e){return e>>>0};Lr=function(e){return Ar(e,["moov","trak"]).reduce(function(e,t){var i,n,s,r,o;return(i=Ar(t,["tkhd"])[0])?(n=i[0],r=fo(i[s=0===n?12:20]<<24|i[s+1]<<16|i[s+2]<<8|i[s+3]),(o=Ar(t,["mdia","mdhd"])[0])?(s=0===(n=o[0])?12:20,e[r]=fo(o[s]<<24|o[s+1]<<16|o[s+2]<<8|o[s+3]),e):null):null},{})},Or=function(e,t){var i,n,s;return i=Ar(t,["moof","traf"]),n=[].concat.apply([],i.map(function(t){return Ar(t,["tfhd"]).map(function(i){var n,s;return n=fo(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),s=e[n]||9e4,(Ar(t,["tfdt"]).map(function(e){var t,i;return t=e[0],i=fo(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(i*=Math.pow(2,32),i+=fo(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),i})[0]||1/0)/s})})),s=Math.min.apply(null,n),isFinite(s)?s:0},Mr=function(e){var t=Ar(e,["moov","trak"]),i=[];return t.forEach(function(e){var t=Ar(e,["mdia","hdlr"]),n=Ar(e,["tkhd"]);t.forEach(function(e,t){var s,r,o=Dr(e.subarray(8,12)),a=n[t];"vide"===o&&(r=0===(s=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0)?s.getUint32(12):s.getUint32(20),i.push(r))})}),i};var mo,go,vo,yo,bo,_o,wo,Co,So,To,ko,Eo,Io,xo,Po,Ao,Do,Lo,Oo,Mo,No,Ro,Uo,$o,Ho,Bo,Fo,jo,zo,Wo,Vo,qo,Go,Yo,Xo,Qo,Ko,Jo,Zo,ea,ta={findBox:Ar=function(e,t){var i,n,s,r,o,a=[];if(!t.length)return null;for(i=0;i<e.byteLength;)n=fo(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]),s=Dr(e.subarray(i+4,i+8)),r=n>1?i+n:e.byteLength,s===t[0]&&(1===t.length?a.push(e.subarray(i+8,r)):(o=Ar(e.subarray(i+8,r),t.slice(1))).length&&(a=a.concat(o))),i=r;return a},parseType:Dr=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},timescale:Lr,startTime:Or,videoTrackIds:Mr},ia=Math.pow(2,32)-1;!function(){var e;if(Ro={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in Ro)Ro.hasOwnProperty(e)&&(Ro[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);Uo=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Ho=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),$o=new Uint8Array([0,0,0,1]),Bo=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Fo=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),jo={video:Bo,audio:Fo},Vo=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Wo=new Uint8Array([0,0,0,0,0,0,0,0]),qo=new Uint8Array([0,0,0,0,0,0,0,0]),Go=qo,Yo=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Xo=qo,zo=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),mo=function(e){var t,i,n=[],s=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)s+=n[t].byteLength;for(i=new Uint8Array(s+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(e,4),t=0,s=8;t<n.length;t++)i.set(n[t],s),s+=n[t].byteLength;return i},go=function(){return mo(Ro.dinf,mo(Ro.dref,Vo))},vo=function(e){return mo(Ro.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},Po=function(e){return mo(Ro.hdlr,jo[e])},xo=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),mo(Ro.mdhd,t)},Io=function(e){return mo(Ro.mdia,xo(e),Po(e.type),_o(e))},bo=function(e){return mo(Ro.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},_o=function(e){return mo(Ro.minf,"video"===e.type?mo(Ro.vmhd,zo):mo(Ro.smhd,Wo),go(),Do(e))},wo=function(e,t){for(var i=[],n=t.length;n--;)i[n]=Oo(t[n]);return mo.apply(null,[Ro.moof,bo(e)].concat(i))},Co=function(e){for(var t=e.length,i=[];t--;)i[t]=ko(e[t]);return mo.apply(null,[Ro.moov,To(4294967295)].concat(i).concat(So(e)))},So=function(e){for(var t=e.length,i=[];t--;)i[t]=Mo(e[t]);return mo.apply(null,[Ro.mvex].concat(i))},To=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return mo(Ro.mvhd,t)},Ao=function(e){var t,i,n=e.samples||[],s=new Uint8Array(4+n.length);for(i=0;i<n.length;i++)t=n[i].flags,s[i+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return mo(Ro.sdtp,s)},Do=function(e){return mo(Ro.stbl,Lo(e),mo(Ro.stts,Xo),mo(Ro.stsc,Go),mo(Ro.stsz,Yo),mo(Ro.stco,qo))},Lo=function(e){return mo(Ro.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?Qo(e):Ko(e))},Qo=function(e){var t,i=e.sps||[],n=e.pps||[],s=[],r=[];for(t=0;t<i.length;t++)s.push((65280&i[t].byteLength)>>>8),s.push(255&i[t].byteLength),s=s.concat(Array.prototype.slice.call(i[t]));for(t=0;t<n.length;t++)r.push((65280&n[t].byteLength)>>>8),r.push(255&n[t].byteLength),r=r.concat(Array.prototype.slice.call(n[t]));return mo(Ro.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),mo(Ro.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length]).concat(s).concat([n.length]).concat(r))),mo(Ro.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},Ko=function(e){return mo(Ro.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),vo(e))},Eo=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);
return mo(Ro.tkhd,t)},Oo=function(e){var t,i,n,s,r,o;return t=mo(Ro.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),r=Math.floor(e.baseMediaDecodeTime/(ia+1)),o=Math.floor(e.baseMediaDecodeTime%(ia+1)),i=mo(Ro.tfdt,new Uint8Array([1,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),"audio"===e.type?(n=No(e,92),mo(Ro.traf,t,i,n)):(s=Ao(e),n=No(e,s.length+92),mo(Ro.traf,t,i,n,s))},ko=function(e){return e.duration=e.duration||4294967295,mo(Ro.trak,Eo(e),Io(e))},Mo=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),mo(Ro.trex,t)},ea=function(e,t){var i=0,n=0,s=0,r=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(s=4),void 0!==e[0].compositionTimeOffset&&(r=8)),[0,0,i|n|s|r,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},Zo=function(e,t){var i,n,s,r;for(t+=20+16*(n=e.samples||[]).length,i=ea(n,t),r=0;r<n.length;r++)s=n[r],i=i.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size,s.flags.isLeading<<2|s.flags.dependsOn,s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,61440&s.flags.degradationPriority,15&s.flags.degradationPriority,(4278190080&s.compositionTimeOffset)>>>24,(16711680&s.compositionTimeOffset)>>>16,(65280&s.compositionTimeOffset)>>>8,255&s.compositionTimeOffset]);return mo(Ro.trun,new Uint8Array(i))},Jo=function(e,t){var i,n,s,r;for(t+=20+8*(n=e.samples||[]).length,i=ea(n,t),r=0;r<n.length;r++)s=n[r],i=i.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size]);return mo(Ro.trun,new Uint8Array(i))},No=function(e,t){return"audio"===e.type?Jo(e,t):Zo(e,t)};var na={ftyp:yo=function(){return mo(Ro.ftyp,Uo,$o,Uo,Ho)},mdat:function(e){return mo(Ro.mdat,e)},moof:wo,moov:Co,initSegment:function(e){var t,i=yo(),n=Co(e);return(t=new Uint8Array(i.byteLength+n.byteLength)).set(i),t.set(n,i.byteLength),t}},sa=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var n;return!!e[t]&&(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var i,n,s,r;if(i=e[t])if(2===arguments.length)for(s=i.length,n=0;s>n;++n)i[n].call(this,arguments[1]);else{for(r=[],n=arguments.length,n=1;n<arguments.length;++n)r.push(arguments[n]);for(s=i.length,n=0;s>n;++n)i[n].apply(this,r)}},this.dispose=function(){e={}}}};sa.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},sa.prototype.push=function(e){this.trigger("data",e)},sa.prototype.flush=function(e){this.trigger("done",e)};var ra=sa,oa=function(e){var t,i,n=[],s=[];for(t=n.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(i=e[t]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,s.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return s.length&&(!n.duration||n.duration<=0)&&(n.duration=s[s.length-1].duration),s.push(n),s},aa=function(e){var t,i,n=[],s=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,s.byteLength=0,s.nalCount=0,s.duration=0,s.pts=e[0].pts,s.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(n.length&&(s.push(n),s.byteLength+=n.byteLength,s.nalCount+=n.nalCount,s.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return s.length&&n.duration<=0&&(n.duration=s[s.length-1].duration),s.byteLength+=n.byteLength,s.nalCount+=n.nalCount,s.duration+=n.duration,s.push(n),s},la=function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},ca=function(e,t){var i,n,s,r,o,a,l,c=t||0,u=[];for(i=0;i<e.length;i++)for(r=e[i],n=0;n<r.length;n++)o=r[n],a=o,l=void 0,(l={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=c,l.compositionTimeOffset=a.pts-a.dts,l.duration=a.duration,l.size=4*a.length,l.size+=a.byteLength,a.keyFrame&&(l.flags.dependsOn=2,l.flags.isNonSyncSample=0),c+=(s=l).size,u.push(s);return u},ua=function(e){var t,i,n,s,r,o,a=0,l=e.byteLength,c=e.nalCount,u=new Uint8Array(l+4*c),d=new DataView(u.buffer);for(t=0;t<e.length;t++)for(s=e[t],i=0;i<s.length;i++)for(r=s[i],n=0;n<r.length;n++)o=r[n],d.setUint32(a,o.data.byteLength),a+=4,u.set(o.data,a),a+=o.data.byteLength;return u},da=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},ha=function(e,t){var i,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===e.type&&(i*=e.samplerate/9e4,i=Math.floor(i)),i},pa=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},fa=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,s=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)s+=255,t++;if(s+=e[t++],!i.payload&&4===n){i.payloadType=n,i.payloadSize=s,i.payload=e.subarray(t,t+s);break}t+=s,s=n=0}return i},ma=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},ga=function(e,t){var i,n,s,r,o=[];if(!(64&t[0]))return o;for(n=31&t[0],i=0;n>i;i++)r={type:3&t[2+(s=3*i)],pts:e},4&t[s+2]&&(r.ccData=t[s+3]<<8|t[s+4],o.push(r));return o},va=function(e){for(var t,i,n=e.byteLength,s=[],r=1;n-2>r;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(s.push(r+2),r+=2):r++;if(0===s.length)return e;t=n-s.length,i=new Uint8Array(t);var o=0;for(r=0;t>r;o++,r++)o===s[0]&&(o++,s.shift()),i[r]=e[o];return i},ya=4,ba=function xd(){xd.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Ta(0,0),new Ta(0,1),new Ta(1,0),new Ta(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)};(ba.prototype=new ra).push=function(e){var t,i,n;if("sei_rbsp"===e.nalUnitType&&(t=fa(e.escapedRBSP)).payloadType===ya&&(i=ma(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=ga(e.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},ba.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)},ba.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},ba.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},ba.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},ba.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)};var _a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},wa=function(e){return null===e?"":(e=_a[e]||e,String.fromCharCode(e))},Ca=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Sa=function(){for(var e=[],t=15;t--;)e.push("");return e},Ta=function Pd(e,t){Pd.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,s,r;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,s=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Sa();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Sa();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Sa()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,s))r=wa((n=(3&n)<<8)|s),this[this.mode_](e.pts,r),this.column_++;else if(this.isExtCharacter(n,s))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),r=wa((n=(3&n)<<8)|s),this[this.mode_](e.pts,r),this.column_++;else if(this.isMidRowCode(n,s))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&s)&&this.addFormatting(e.pts,["i"]),1==(1&s)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,s))this.column_+=3&s;else if(this.isPAC(n,s)){var o=Ca.indexOf(7968&t);"rollUp"===this.mode_&&this.setRollUp(e.pts,o),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&s&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(s)&&14==(14&s)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===s&&(s=null),r=wa(n),r+=wa(s),this[this.mode_](e.pts,r),this.column_+=r.length)}else this.lastControlCode_=null}};Ta.prototype=new ra,Ta.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){return e.trim()}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Ta.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Sa(),this.nonDisplayed_=Sa(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ta.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ta.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&63>=t},Ta.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&63>=t},Ta.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&47>=t},Ta.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&35>=t},Ta.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&127>=t},Ta.prototype.isColorPAC=function(e){return e>=64&&79>=e||e>=96&&127>=e},Ta.prototype.isNormalChar=function(e){return e>=32&&127>=e},Ta.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Sa(),this.displayed_=Sa()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Ta.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)},Ta.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},Ta.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},Ta.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i},Ta.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;15>e;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Ta.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i};var ka={CaptionStream:ba,Cea608Stream:Ta},Ea={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ia=function(e,t){var i=1;for(e>t&&(i=-1);4294967296<Math.abs(t-e);)e+=8589934592*i;return e},xa=function Ad(e){var t,i;Ad.prototype.init.call(this),this.type_=e,this.push=function(e){e.type===this.type_&&(void 0===i&&(i=e.dts),e.dts=Ia(e.dts,i),e.pts=Ia(e.pts,i),t=e.dts,this.trigger("data",e))},this.flush=function(){i=t,this.trigger("done")},this.discontinuity=function(){t=i=void 0}};xa.prototype=new ra;var Pa,Aa=xa,Da=Ia,La=function(e,t,i){var n,s="";for(n=t;i>n;n++)s+="%"+("00"+e[n].toString(16)).slice(-2);return s},Oa=function(e,t,i){return decodeURIComponent(La(e,t,i))},Ma=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Na={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Oa(e.data,1,t),e.value=Oa(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Oa(e.data,1,t),e.url=Oa(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,i;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(i=e.data,unescape(La(i,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(Pa=function(e){var t,i={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},n=0,s=[],r=0;if(Pa.prototype.init.call(this),this.dispatchType=Ea.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(t=0;t<i.descriptor.length;t++)this.dispatchType+=("00"+i.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,o,a,l,c;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(r=0,s.length=0),0===s.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))i.debug;else if(s.push(e),r+=e.data.byteLength,1===s.length&&(n=Ma(e.data.subarray(6,10)),n+=10),!(n>r)){for(t={data:new Uint8Array(n),frames:[],pts:s[0].pts,dts:s[0].dts},c=0;n>c;)t.data.set(s[0].data.subarray(0,n-c),c),c+=s[0].data.byteLength,r-=s[0].data.byteLength,s.shift();o=10,64&t.data[5]&&(o+=4,o+=Ma(t.data.subarray(10,14)),n-=Ma(t.data.subarray(16,20)));do{if((a=Ma(t.data.subarray(o+4,o+8)))<1)return;if((l={id:String.fromCharCode(t.data[o],t.data[o+1],t.data[o+2],t.data[o+3]),data:t.data.subarray(o+10,o+a+10)}).key=l.id,Na[l.id]&&(Na[l.id](l),"com.apple.streaming.transportStreamTimestamp"===l.owner)){var u=l.data,d=(1&u[3])<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;d*=4,d+=3&u[7],l.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=l.timeStamp,t.dts=l.timeStamp),this.trigger("timestamp",l)}t.frames.push(l),o+=10,o+=a}while(n>o);this.trigger("data",t)}}}).prototype=new ra;var Ra,Ua,$a,Ha=Pa,Ba=Aa;(Ra=function(){var e=new Uint8Array(188),t=0;Ra.prototype.init.call(this),this.push=function(i){var n,s=0,r=188;for(t?((n=new Uint8Array(i.byteLength+t)).set(e.subarray(0,t)),n.set(i,t),t=0):n=i;r<n.byteLength;)71!==n[s]||71!==n[r]?(s++,r++):(this.trigger("data",n.subarray(s,r)),s+=188,r+=188);s<n.byteLength&&(e.set(n.subarray(s),0),t=n.byteLength-s)},this.flush=function(){188===t&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")}}).prototype=new ra,(Ua=function(){var e,t,i,n;Ua.prototype.init.call(this),(n=this).packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var s=0;n.payloadUnitStartIndicator&&(s+=e[s]+1),"pat"===n.type?t(e.subarray(s),n):i(e.subarray(s),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},i=function(e,t){var i,s;if(1&e[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,s=12+((15&e[10])<<8|e[11]);i>s;){var r=e[s],o=(31&e[s+1])<<8|e[s+2];r===Ea.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=o:r===Ea.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=o:r===Ea.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][o]=r),s+=5+((15&e[s+3])<<8|e[s+4])}t.programMapTable=n.programMapTable}},this.push=function(t){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&t[1]),i.pid=31&t[1],i.pid<<=8,i.pid|=t[2],1<(48&t[3])>>>4&&(n+=t[n]+1),0===i.pid)i.type="pat",e(t.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",e(t.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,i]):this.processPes_(t,n,i)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=Ea.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=Ea.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}}).prototype=new ra,Ua.STREAM_TYPES={h264:27,adts:15},($a=function(){var e=this,t={data:[],size:0},i={data:[],size:0},n={data:[],size:0},s=function(t,i,n){var s,r,o=new Uint8Array(t.size),a={type:i},l=0,c=0;if(t.data.length&&!(t.size<9)){for(a.trackId=t.data[0].pid,l=0;l<t.data.length;l++)r=t.data[l],o.set(r.data,c),c+=r.data.byteLength;var u,d,h;u=o,(d=a).packetLength=6+(u[4]<<8|u[5]),d.dataAlignmentIndicator=0!=(4&u[6]),192&(h=u[7])&&(d.pts=(14&u[9])<<27|(255&u[10])<<20|(254&u[11])<<12|(255&u[12])<<5|(254&u[13])>>>3,d.pts*=4,d.pts+=(6&u[13])>>>1,d.dts=d.pts,64&h&&(d.dts=(14&u[14])<<27|(255&u[15])<<20|(254&u[16])<<12|(255&u[17])<<5|(254&u[18])>>>3,d.dts*=4,d.dts+=(6&u[18])>>>1)),d.data=u.subarray(9+u[8]),s="video"===i||a.packetLength<=t.size,(n||s)&&(t.size=0,t.data.length=0),s&&e.trigger("data",a)}};$a.prototype.init.call(this),this.push=function(r){({pat:function(){},pes:function(){var e,o;switch(r.streamType){case Ea.H264_STREAM_TYPE:case Ea.H264_STREAM_TYPE:e=t,o="video";break;case Ea.ADTS_STREAM_TYPE:e=i,o="audio";break;case Ea.METADATA_STREAM_TYPE:e=n,o="timed-metadata";break;default:return}r.payloadUnitStartIndicator&&s(e,o,!0),e.data.push(r),e.size+=r.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},i=r.programMapTable;null!==i.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.video,codec:"avc",type:"video"}),null!==i.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.audio,codec:"adts",type:"audio"}),e.trigger("data",t)}})[r.type]()},this.flush=function(){s(t,"video"),s(i,"audio"),s(n,"timed-metadata"),this.trigger("done")}}).prototype=new ra;var Fa={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Ra,TransportParseStream:Ua,ElementaryStream:$a,TimestampRolloverStream:Ba,CaptionStream:ka.CaptionStream,Cea608Stream:ka.Cea608Stream,MetadataStream:Ha};for(var ja in Ea)Ea.hasOwnProperty(ja)&&(Fa[ja]=Ea[ja]);var za,Wa=Fa,Va=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(za=function(){var e;za.prototype.init.call(this),this.push=function(t){var i,n,s,r,o,a,l=0,c=0;if("audio"===t.type)for(e?(r=e,(e=new Uint8Array(r.byteLength+t.data.byteLength)).set(r),e.set(t.data,r.byteLength)):e=t.data;l+5<e.length;)if(255===e[l]&&240==(246&e[l+1])){if(n=2*(1&~e[l+1]),i=(3&e[l+3])<<11|e[l+4]<<3|(224&e[l+5])>>5,a=9e4*(o=1024*(1+(3&e[l+6])))/Va[(60&e[l+2])>>>2],s=l+i,e.byteLength<s)return;if(this.trigger("data",{pts:t.pts+c*a,dts:t.dts+c*a,sampleCount:o,audioobjecttype:1+(e[l+2]>>>6&3),channelcount:(1&e[l+2])<<2|(192&e[l+3])>>>6,samplerate:Va[(60&e[l+2])>>>2],samplingfrequencyindex:(60&e[l+2])>>>2,samplesize:16,data:e.subarray(l+7+n,s)}),e.byteLength===s)return void(e=void 0);c++,e=e.subarray(s)}else l++},this.flush=function(){this.trigger("done")}}).prototype=new ra;var qa,Ga,Ya,Xa=za,Qa=function(e){var t=e.byteLength,i=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var s=e.byteLength-t,r=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");r.set(e.subarray(s,s+o)),i=new DataView(r.buffer).getUint32(0),n=8*o,t-=o},this.skipBits=function(e){var s;n>e||(e-=n,e-=8*(s=Math.floor(e/8)),t-=s,this.loadWord()),i<<=e,n-=e},this.readBits=function(e){var s=Math.min(n,e),r=i>>>32-s;return 0<(n-=s)?i<<=s:t>0&&this.loadWord(),0<(s=e-s)?r<<s|this.readBits(s):r},this.skipLeadingZeros=function(){var e;for(e=0;n>e;++e)if(0!=(i&2147483648>>>e))return i<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(Ga=function(){var e,t,i=0;Ga.prototype.init.call(this),this.push=function(n){var s;for(t=t?((s=new Uint8Array(t.byteLength+n.data.byteLength)).set(t),s.set(n.data,t.byteLength),s):n.data;i<t.byteLength-3;i++)if(1===t[i+2]){e=i+5;break}for(;e<t.byteLength;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}for(i+3!==e-2&&this.trigger("data",t.subarray(i+3,e-2));1!==t[++e]&&e<t.length;);i=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(i+3,e-2)),i=e-2,e+=3;break;default:e+=3}t=t.subarray(i),e-=i,i=0},this.flush=function(){t&&3<t.byteLength&&this.trigger("data",t.subarray(i+3)),t=null,i=0,this.trigger("done")}}).prototype=new ra,Ya={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(qa=function(){var e,t,i,n,s,r,o,a=new Ga;qa.prototype.init.call(this),(e=this).push=function(e){"video"===e.type&&(t=e.trackId,i=e.pts,n=e.dts,a.push(e))},a.on("data",function(o){var a={trackId:t,pts:i,dts:n,data:o};switch(31&o[0]){case 5:a.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:a.nalUnitType="sei_rbsp",a.escapedRBSP=s(o.subarray(1));break;case 7:a.nalUnitType="seq_parameter_set_rbsp",a.escapedRBSP=s(o.subarray(1)),a.config=r(a.escapedRBSP);break;case 8:a.nalUnitType="pic_parameter_set_rbsp";break;case 9:a.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",a)}),a.on("done",function(){e.trigger("done")}),this.flush=function(){a.flush()},o=function(e,t){var i,n=8,s=8;for(i=0;e>i;i++)0!==s&&(s=(n+t.readExpGolomb()+256)%256),n=0===s?n:s},s=function(e){for(var t,i,n=e.byteLength,s=[],r=1;n-2>r;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(s.push(r+2),r+=2):r++;if(0===s.length)return e;t=n-s.length,i=new Uint8Array(t);var o=0;for(r=0;t>r;o++,r++)o===s[0]&&(o++,s.shift()),i[r]=e[o];return i},r=function(e){var t,i,n,s,r,a,l,c,u,d,h,p,f,m=0,g=0,v=0,y=0,b=1;if(i=(t=new Qa(e)).readUnsignedByte(),s=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),Ya[i]&&(3===(r=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==r?8:12,f=0;h>f;f++)t.readBoolean()&&o(6>f?16:64,t);if(t.skipUnsignedExpGolomb(),0===(a=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===a)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),f=0;l>f;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),c=t.readUnsignedExpGolomb(),u=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}p&&(b=p[0]/p[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:s,width:Math.ceil((16*(c+1)-2*m-2*g)*b),height:(2-d)*(u+1)*16-2*v-2*y}}}).prototype=new ra;var Ka,Ja={H264Stream:qa,NalByteStream:Ga};(Ka=function(){var e=new Uint8Array,t=0;Ka.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.parseId3TagSize=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10},this.parseAdtsSize=function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},this.push=function(i){var n,s,r,o,a=0,l=0;for(e.length?(o=e.length,(e=new Uint8Array(i.byteLength+o)).set(e.subarray(0,o)),e.set(i,o)):e=i;3<=e.length-l;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(!0&e[l]&&240==(240&e[l+1])){if(e.length-l<7)break;if((a=this.parseAdtsSize(e,l))>e.length)break;r={type:"audio",data:e.subarray(l,l+a),pts:t,dts:t},this.trigger("data",r),l+=a}else l++;else{if(e.length-l<10)break;if((a=this.parseId3TagSize(e,l))>e.length)break;s={type:"timed-metadata",data:e.subarray(l,l+a)},this.trigger("data",s),l+=a}n=e.length-l,e=n>0?e.subarray(l):new Uint8Array}}).prototype=new ra;var Za,el,tl,il,nl,sl,rl,ol=Ka,al=[33,16,5,32,164,27],ll=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],cl=function(e){for(var t=[];e--;)t.push(0);return t},ul={96e3:[al,[227,64],cl(154),[56]],88200:[al,[231],cl(170),[56]],64e3:[al,[248,192],cl(240),[56]],48e3:[al,[255,192],cl(268),[55,148,128],cl(54),[112]],44100:[al,[255,192],cl(268),[55,163,128],cl(84),[112]],32e3:[al,[255,192],cl(268),[55,234],cl(226),[112]],24e3:[al,[255,192],cl(268),[55,255,128],cl(268),[111,112],cl(126),[224]],16e3:[al,[255,192],cl(268),[55,255,128],cl(268),[111,255],cl(269),[223,108],cl(195),[1,192]],12e3:[ll,cl(268),[3,127,248],cl(268),[6,255,240],cl(268),[13,255,224],cl(268),[27,253,128],cl(259),[56]],11025:[ll,cl(268),[3,127,248],cl(268),[6,255,240],cl(268),[13,255,224],cl(268),[27,255,192],cl(268),[55,175,128],cl(108),[112]],8e3:[ll,cl(268),[3,121,16],cl(47),[7]]},dl=(Za=ul,Object.keys(Za).reduce(function(e,t){return e[t]=new Uint8Array(Za[t].reduce(function(e,t){return e.concat(t)},[])),e},{}));sl=function(e,t){return el(nl(e,t))},rl=function(e,t){return tl(il(e),t)},el=function(e){return 9e4*e},tl=function(e,t){return e*t},il=function(e){return e/9e4},nl=function(e,t){return e/t};var hl,pl,fl,ml,gl,vl,yl,bl=sl,_l=rl,wl=Ja.H264Stream,Cl=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Sl=["width","height","profileIdc","levelIdc","profileCompatibility"];gl=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},vl=function(e,t){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},yl=function(e){var t,i=0;for(t=0;t<e.length;t++)i+=e[t].data.byteLength;return i},(pl=function(e,t){var i=[],n=0,s=0,r=0,o=1/0;t=t||{},pl.prototype.init.call(this),this.push=function(t){pa(e,t),e&&Cl.forEach(function(i){e[i]=t[i]}),i.push(t)},this.setEarliestDts=function(t){s=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){r=e},this.flush=function(){var s,r,o,a;0!==i.length&&(s=this.trimAdtsFramesByEarliestDts_(i),e.baseMediaDecodeTime=ha(e,t.keepOriginalTimestamps),this.prefixWithSilence_(e,s),e.samples=this.generateSampleTable_(s),o=na.mdat(this.concatenateFrameData_(s)),i=[],r=na.moof(n,[e]),a=new Uint8Array(r.byteLength+o.byteLength),n++,a.set(r),a.set(o,r.byteLength),da(e),this.trigger("data",{track:e,boxes:a})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(e,t){var i,n,s,a,l=0,c=0,u=0;if(t.length&&(i=bl(e.baseMediaDecodeTime,e.samplerate),n=Math.ceil(9e4/(e.samplerate/1024)),r&&o&&(l=i-Math.max(r,o),u=(c=Math.floor(l/n))*n),!(1>c||u>45e3))){for((s=dl[e.samplerate])||(s=t[0].data),a=0;c>a;a++)t.splice(a,0,{data:s});e.baseMediaDecodeTime-=Math.floor(_l(u,e.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(t){return e.minSegmentDts>=s?t:(e.minSegmentDts=1/0,t.filter(function(t){return t.dts>=s&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)}))},this.generateSampleTable_=function(e){var t,i,n=[];for(t=0;t<e.length;t++)i=e[t],n.push({size:i.data.byteLength,duration:1024});return n},this.concatenateFrameData_=function(e){var t,i,n=0,s=new Uint8Array(yl(e));for(t=0;t<e.length;t++)i=e[t],s.set(i.data,n),n+=i.data.byteLength;return s}}).prototype=new ra,(hl=function(e,t){var i,n,s=0,r=[],o=[];t=t||{},hl.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){pa(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],Sl.forEach(function(t){e[t]=i[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),r.push(t)},this.flush=function(){for(var i,n,a,l,c,u;r.length&&"access_unit_delimiter_rbsp"!==r[0].nalUnitType;)r.shift();if(0===r.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=oa(r),(a=aa(i))[0][0].keyFrame||((n=this.getGopForFusion_(r[0],e))?(a.unshift(n),a.byteLength+=n.byteLength,a.nalCount+=n.nalCount,a.pts=n.pts,a.dts=n.dts,a.duration+=n.duration):a=la(a)),o.length){var d;if(!(d=t.alignGopsAtEnd?this.alignGopsAtEnd_(a):this.alignGopsAtStart_(a)))return this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),
r=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");da(e),a=d}pa(e,a),e.samples=ca(a),c=na.mdat(ua(a)),e.baseMediaDecodeTime=ha(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",a.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=na.moof(s,[e]),u=new Uint8Array(l.byteLength+c.byteLength),s++,u.set(l),u.set(c,l.byteLength),this.trigger("data",{track:e,boxes:u}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){da(e),n=i=void 0},this.getGopForFusion_=function(t){var i,n,s,r,o,a=1/0;for(o=0;o<this.gopCache_.length;o++)s=(r=this.gopCache_[o]).gop,e.pps&&vl(e.pps[0],r.pps[0])&&e.sps&&vl(e.sps[0],r.sps[0])&&(s.dts<e.timelineStartInfo.dts||-1e4<=(i=t.dts-s.dts-s.duration)&&45e3>=i&&(!n||a>i)&&(n=r,a=i));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,i,n,s,r,a,l,c;for(r=e.byteLength,a=e.nalCount,l=e.duration,t=i=0;t<o.length&&i<e.length&&(n=o[t],s=e[i],n.pts!==s.pts);)s.pts>n.pts?t++:(i++,r-=s.byteLength,a-=s.nalCount,l-=s.duration);return 0===i?e:i===e.length?null:((c=e.slice(i)).byteLength=r,c.duration=l,c.nalCount=a,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(e){var t,i,n,s,r,a,l;for(t=o.length-1,i=e.length-1,r=null,a=!1;t>=0&&i>=0;){if(n=o[t],s=e[i],n.pts===s.pts){a=!0;break}n.pts>s.pts?t--:(t===o.length-1&&(r=i),i--)}if(!a&&null===r)return null;if(0===(l=a?i:r))return e;var c=e.slice(l),u=c.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return c.byteLength=u.byteLength,c.duration=u.duration,c.nalCount=u.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(e){o=e}}).prototype=new ra,(ml=function(e,t){this.numberOfTracks=0,this.metadataStream=t,"undefined"!=typeof e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ml.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new ra,ml.prototype.flush=function(e){var t,i,n,s,r=0,o={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,Sl.forEach(function(e){o.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,Cl.forEach(function(e){o.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,n=na.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(n.byteLength),o.initSegment.set(n),o.data=new Uint8Array(this.pendingBytes),s=0;s<this.pendingBoxes.length;s++)o.data.set(this.pendingBoxes[s],r),r+=this.pendingBoxes[s].byteLength;for(s=0;s<this.pendingCaptions.length;s++)(t=this.pendingCaptions[s]).startTime=t.startPts-a,t.startTime/=9e4,t.endTime=t.endPts-a,t.endTime/=9e4,o.captionStreams[t.stream]=!0,o.captions.push(t);for(s=0;s<this.pendingMetadata.length;s++)(i=this.pendingMetadata[s]).cueTime=i.pts-a,i.cueTime/=9e4,o.metadata.push(i);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(fl=function(e){var t,i,n=this,s=!0;fl.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new Wa.MetadataStream,t.aacStream=new ol,t.audioTimestampRolloverStream=new Wa.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new Wa.TimestampRolloverStream("timed-metadata"),t.adtsStream=new Xa,t.coalesceStream=new ml(e,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(s){"timed-metadata"!==s.type||t.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new pl(i,e),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var s={};(this.transmuxPipeline_=s).type="ts",s.metadataStream=new Wa.MetadataStream,s.packetStream=new Wa.TransportPacketStream,s.parseStream=new Wa.TransportParseStream,s.elementaryStream=new Wa.ElementaryStream,s.videoTimestampRolloverStream=new Wa.TimestampRolloverStream("video"),s.audioTimestampRolloverStream=new Wa.TimestampRolloverStream("audio"),s.timedMetadataTimestampRolloverStream=new Wa.TimestampRolloverStream("timed-metadata"),s.adtsStream=new Xa,s.h264Stream=new wl,s.captionStream=new Wa.CaptionStream,s.coalesceStream=new ml(e,s.metadataStream),s.headOfPipeline=s.packetStream,s.packetStream.pipe(s.parseStream).pipe(s.elementaryStream),s.elementaryStream.pipe(s.videoTimestampRolloverStream).pipe(s.h264Stream),s.elementaryStream.pipe(s.audioTimestampRolloverStream).pipe(s.adtsStream),s.elementaryStream.pipe(s.timedMetadataTimestampRolloverStream).pipe(s.metadataStream).pipe(s.coalesceStream),s.h264Stream.pipe(s.captionStream).pipe(s.coalesceStream),s.elementaryStream.on("data",function(r){var o;if("metadata"===r.type){for(o=r.tracks.length;o--;)t||"video"!==r.tracks[o].type?i||"audio"!==r.tracks[o].type||((i=r.tracks[o]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=r.tracks[o]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&&!s.videoSegmentStream&&(s.coalesceStream.numberOfTracks++,s.videoSegmentStream=new hl(t,e),s.videoSegmentStream.on("timelineStartInfo",function(e){i&&(i.timelineStartInfo=e,s.audioSegmentStream.setEarliestDts(e.dts))}),s.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),s.videoSegmentStream.on("baseMediaDecodeTime",function(e){i&&s.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),s.h264Stream.pipe(s.videoSegmentStream).pipe(s.coalesceStream)),i&&!s.audioSegmentStream&&(s.coalesceStream.numberOfTracks++,s.audioSegmentStream=new pl(i,e),s.adtsStream.pipe(s.audioSegmentStream).pipe(s.coalesceStream))}}),s.coalesceStream.on("data",this.trigger.bind(this,"data")),s.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var n=this.transmuxPipeline_;this.baseMediaDecodeTime=e,i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,da(i),i.timelineStartInfo.baseMediaDecodeTime=e,n.audioTimestampRolloverStream&&n.audioTimestampRolloverStream.discontinuity()),t&&(n.videoSegmentStream&&(n.videoSegmentStream.gopCache_=[],n.videoTimestampRolloverStream.discontinuity()),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,da(t),n.captionStream.reset(),t.timelineStartInfo.baseMediaDecodeTime=e),n.timedMetadataTimestampRolloverStream&&n.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(s){var t=gl(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),s=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){s=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new ra;var Tl,kl,El={Transmuxer:fl,VideoSegmentStream:hl,AudioSegmentStream:pl,AUDIO_PROPERTIES:Cl,VIDEO_PROPERTIES:Sl},Il=ta.parseType,xl=function(e){return new Date(1e3*e-20828448e5)},Pl=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Al={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:Tl(e.subarray(78,e.byteLength))}},avcC:function(e){var t,i,n,s,r=new DataView(e.buffer,e.byteOffset,e.byteLength),o={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},a=31&e[5];for(n=6,s=0;a>s;s++)i=r.getUint16(n),n+=2,o.sps.push(new Uint8Array(e.subarray(n,n+i))),n+=i;for(t=e[n],n++,s=0;t>s;s++)i=r.getUint16(n),n+=2,o.pps.push(new Uint8Array(e.subarray(n,n+i))),n+=i;return o},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={majorBrand:Il(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},n=8;n<e.byteLength;)i.compatibleBrands.push(Il(e.subarray(n,n+4))),n+=4;return i},dinf:function(e){return{boxes:Tl(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:Tl(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:Il(e.subarray(8,12)),name:""},i=8;for(i=24;i<e.byteLength;i++){if(0===e[i]){i++;break}t.name+=String.fromCharCode(e[i])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:function(e){var t,i,n=new DataView(e.buffer,e.byteOffset,e.byteLength),s=[];for(t=0;t+4<e.length;t+=i)if(i=n.getUint32(t),t+=4,0>=i)s.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:s.push("slice_layer_without_partitioning_rbsp");break;case 5:s.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:s.push("sei_rbsp");break;case 7:s.push("seq_parameter_set_rbsp");break;case 8:s.push("pic_parameter_set_rbsp");break;case 9:s.push("access_unit_delimiter_rbsp");break;default:s.push("UNKNOWN NAL - "+e[t]&31)}return s}(e)}},mdhd:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,s={version:i.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===s.version?(n+=4,s.creationTime=xl(i.getUint32(n)),n+=8,s.modificationTime=xl(i.getUint32(n)),n+=4,s.timescale=i.getUint32(n),n+=8):(s.creationTime=xl(i.getUint32(n)),n+=4,s.modificationTime=xl(i.getUint32(n)),n+=4,s.timescale=i.getUint32(n),n+=4),s.duration=i.getUint32(n),n+=4,t=i.getUint16(n),s.language+=String.fromCharCode(96+(t>>10)),s.language+=String.fromCharCode(96+((992&t)>>5)),s.language+=String.fromCharCode(96+(31&t)),s},mdia:function(e){return{boxes:Tl(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:Tl(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return 28<e.byteLength&&(i.streamDescriptor=Tl(e.subarray(28))[0]),i},moof:function(e){return{boxes:Tl(e)}},moov:function(e){return{boxes:Tl(e)}},mvex:function(e){return{boxes:Tl(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=xl(t.getUint32(i)),i+=8,n.modificationTime=xl(t.getUint32(i)),i+=4,n.timescale=t.getUint32(i),i+=8):(n.creationTime=xl(t.getUint32(i)),i+=4,n.modificationTime=xl(t.getUint32(i)),i+=4,n.timescale=t.getUint32(i),i+=4),n.duration=t.getUint32(i),i+=4,n.rate=t.getUint16(i)+t.getUint16(i+2)/16,i+=4,n.volume=t.getUint8(i)+t.getUint8(i+1)/8,i+=2,i+=2,i+=8,n.matrix=new Uint32Array(e.subarray(i,i+36)),i+=36,i+=24,n.nextTrackId=t.getUint32(i),n},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)i.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return i},sidx:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8),earliestPresentationTime:i.getUint32(12),firstOffset:i.getUint32(16)},s=i.getUint16(22);for(t=24;s;t+=12,s--)n.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&i.getUint32(t),subsegmentDuration:i.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&i.getUint32(t+8)});return n},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:Tl(e)}},stco:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},s=i.getUint32(4);for(t=8;s;t+=4,s--)n.chunkOffsets.push(i.getUint32(t));return n},stsc:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=i.getUint32(4),s={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;n;t+=12,n--)s.sampleToChunks.push({firstChunk:i.getUint32(t),samplesPerChunk:i.getUint32(t+4),sampleDescriptionIndex:i.getUint32(t+8)});return s},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:Tl(e.subarray(8))}},stsz:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:i.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)n.entries.push(i.getUint32(t));return n},stts:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},s=i.getUint32(4);for(t=8;s;t+=8,s--)n.timeToSamples.push({sampleCount:i.getUint32(t),sampleDelta:i.getUint32(t+4)});return n},styp:function(e){return Al.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4)},s=1&n.flags[2],r=2&n.flags[2],o=8&n.flags[2],a=16&n.flags[2],l=32&n.flags[2],c=65536&n.flags[0],u=131072&n.flags[0];return t=8,s&&(t+=4,n.baseDataOffset=i.getUint32(12),t+=4),r&&(n.sampleDescriptionIndex=i.getUint32(t),t+=4),o&&(n.defaultSampleDuration=i.getUint32(t),t+=4),a&&(n.defaultSampleSize=i.getUint32(t),t+=4),l&&(n.defaultSampleFlags=i.getUint32(t)),c&&(n.durationIsEmpty=!0),!s&&u&&(n.baseDataOffsetIsMoof=!0),n},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=xl(t.getUint32(i)),i+=8,n.modificationTime=xl(t.getUint32(i)),i+=4,n.trackId=t.getUint32(i),i+=4,i+=8):(n.creationTime=xl(t.getUint32(i)),i+=4,n.modificationTime=xl(t.getUint32(i)),i+=4,n.trackId=t.getUint32(i),i+=4,i+=4),n.duration=t.getUint32(i),i+=4,i+=8,n.layer=t.getUint16(i),i+=2,n.alternateGroup=t.getUint16(i),i+=2,n.volume=t.getUint8(i)+t.getUint8(i+1)/8,i+=2,i+=2,n.matrix=new Uint32Array(e.subarray(i,i+36)),i+=36,n.width=t.getUint16(i)+t.getUint16(i+2)/16,i+=4,n.height=t.getUint16(i)+t.getUint16(i+2)/16,n},traf:function(e){return{boxes:Tl(e)}},trak:function(e){return{boxes:Tl(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),s=1&i.flags[2],r=4&i.flags[2],o=1&i.flags[1],a=2&i.flags[1],l=4&i.flags[1],c=8&i.flags[1],u=n.getUint32(4),d=8;for(s&&(i.dataOffset=n.getInt32(d),d+=4),r&&u&&(t={flags:Pl(e.subarray(d,d+4))},d+=4,o&&(t.duration=n.getUint32(d),d+=4),a&&(t.size=n.getUint32(d),d+=4),c&&(t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t),u--);u--;)t={},o&&(t.duration=n.getUint32(d),d+=4),a&&(t.size=n.getUint32(d),d+=4),l&&(t.flags=Pl(e.subarray(d,d+4)),d+=4),c&&(t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t);return i},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},Dl={inspect:Tl=function(e){for(var t,i,n,s,r,o=0,a=[],l=new ArrayBuffer(e.length),c=new Uint8Array(l),u=0;u<e.length;++u)c[u]=e[u];for(t=new DataView(l);o<e.byteLength;)i=t.getUint32(o),n=Il(e.subarray(o+4,o+8)),s=i>1?o+i:e.byteLength,(r=(Al[n]||function(e){return{data:e}})(e.subarray(o+8,s))).size=i,r.type=n,a.push(r),o=s;return a},textify:kl=function(e,t){var i;return t=t||0,i=new Array(2*t+1).join(" "),e.map(function(e,n){return i+e.type+"\n"+Object.keys(e).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(t){var n=i+"  "+t+": ",s=e[t];if(s instanceof Uint8Array||s instanceof Uint32Array){var r=Array.prototype.slice.call(new Uint8Array(s.buffer,s.byteOffset,s.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return r?1===r.length?n+"<"+r.join("").slice(1)+">":n+"<\n"+r.map(function(e){return i+"  "+e}).join("\n")+"\n"+i+"  >":n+"<>"}return n+JSON.stringify(s,null,2).split("\n").map(function(e,t){return 0===t?e:i+"  "+e}).join("\n")}).join("\n")+(e.boxes?"\n"+kl(e.boxes,t+1):"")}).join("\n")},parseTfdt:Al.tfdt,parseHdlr:Al.hdlr,parseTfhd:Al.tfhd,parseTrun:Al.trun},Ll=va,Ol=ka.CaptionStream,Ml=function(e,t){for(var i=e,n=0;n<t.length;n++){var s=t[n];if(i<s.size)return s;i-=s.size}return null},Nl=function(e,t){var i=ta.findBox(e,["moof","traf"]),n=ta.findBox(e,["mdat"]),s={},r=[];return n.forEach(function(e,t){var n=i[t];r.push({mdat:e,traf:n})}),r.forEach(function(e){var i,n,r,o,a,l,c,u,d=e.mdat,h=e.traf,p=ta.findBox(h,["tfhd"]),f=Dl.parseTfhd(p[0]),m=f.trackId,g=ta.findBox(h,["tfdt"]),v=0<g.length?Dl.parseTfdt(g[0]).baseMediaDecodeTime:0,y=ta.findBox(h,["trun"]);t===m&&0<y.length&&(n=y,o=v,a=(r=f).defaultSampleDuration||0,l=r.defaultSampleSize||0,c=r.trackId,u=[],n.forEach(function(e){var t=Dl.parseTrun(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=a),void 0===e.size&&(e.size=l),e.trackId=c,e.dts=o,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=o+e.compositionTimeOffset,o+=e.duration}),u=u.concat(t)}),i=function(e,t,i){var n,s,r,o,a=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(s=0;s+4<e.length;s+=r)if(r=a.getUint32(s),s+=4,!(0>=r))switch(31&e[s]){case 6:var c=e.subarray(s+1,s+1+r),u=Ml(s,t);n={nalUnitType:"sei_rbsp",size:r,data:c,escapedRBSP:Ll(c),trackId:i},u?(n.pts=u.pts,n.dts=u.dts,o=u):(n.pts=o.pts,n.dts=o.dts),l.push(n)}return l}(d,u,m),s[m]||(s[m]=[]),s[m]=s[m].concat(i))}),s},Rl={generator:na,probe:ta,Transmuxer:El.Transmuxer,AudioSegmentStream:El.AudioSegmentStream,VideoSegmentStream:El.VideoSegmentStream,CaptionParser:function(){var e,t,i,n,s,r=!1;this.isInitialized=function(){return r},this.init=function(){e=new Ol,r=!0,e.on("data",function(e){e.startTime=e.startPts/n,e.endTime=e.endPts/n,s.captions.push(e),s.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||i===e[0]&&n===t[i])},this.parse=function(e,r,o){var a,l,c,u;if(!this.isInitialized())return null;if(!r||!o)return null;if(this.isNewInit(r,o))i=r[0],n=o[i];else if(!i||!n)return t.push(e),null;for(;0<t.length;){var d=t.shift();this.parse(d,r,o)}return l=e,u=n,null!==(a=(c=i)?{seiNals:Nl(l,c)[c],timescale:u}:null)&&a.seiNals?(this.pushNals(a.seiNals),this.flushStream(),s):null},this.pushNals=function(t){return this.isInitialized()&&t&&0!==t.length?void t.forEach(function(t){e.push(t)}):null},this.flushStream=function(){return this.isInitialized()?void e.flush():null},this.clearParsedCaptions=function(){s.captions=[],s.captionStreams={}},this.resetCaptionStream=function(){return this.isInitialized()?void e.reset():null},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=i=null,s?this.clearParsedCaptions():s={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}}.CaptionParser,Ul=function(e){var t=31&e[1];return t<<=8,t|=e[2]},$l=function(e){return!!(64&e[1])},Hl=function(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t},Bl=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Fl={parseType:function(e,t){var i=Ul(e);return 0===i?"pat":i===t?"pmt":t?"pes":null},parsePat:function(e){var t=$l(e),i=4+Hl(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},parsePmt:function(e){var t={},i=$l(e),n=4+Hl(e);if(i&&(n+=e[n]+1),1&e[n+5]){var s;s=3+((15&e[n+1])<<8|e[n+2])-4;for(var r=12+((15&e[n+10])<<8|e[n+11]);s>r;){var o=n+r;t[(31&e[o+1])<<8|e[o+2]]=e[o],r+=5+((15&e[o+3])<<8|e[o+4])}return t}},parsePayloadUnitStartIndicator:$l,parsePesType:function(e,t){switch(t[Ul(e)]){case Ea.H264_STREAM_TYPE:return"video";case Ea.ADTS_STREAM_TYPE:return"audio";case Ea.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!$l(e))return null;var t=4+Hl(e);if(t>=e.byteLength)return null;var i,n=null;return 192&(i=e[t+7])&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+Hl(e),i=e.subarray(t),n=0,s=0,r=!1;s<i.byteLength-3;s++)if(1===i[s+2]){n=s+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(s+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===Bl(31&i[s+3])&&(r=!0);1!==i[++n]&&n<i.length;);s=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Bl(31&i[s+3])&&(r=!0),s=n-2,n+=3;break;default:n+=3}return i=i.subarray(s),n-=s,s=0,i&&3<i.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===Bl(31&i[s+3])&&(r=!0),r}},jl=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],zl=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Wl={parseId3TagSize:function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10},parseAdtsSize:function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return jl[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,i,n;t=10,64&e[5]&&(t+=4,t+=zl(e.subarray(10,14)));do{if((i=zl(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){n=e.subarray(t+10,t+i+10);for(var s=0;s<n.byteLength;s++)if(0===n[s]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(e,t,i){var n,s="";for(n=t;i>n;n++)s+="%"+("00"+e[n].toString(16)).slice(-2);return s}(n,0,s)))break;var r=n.subarray(s+1),o=(1&r[3])<<30|r[4]<<22|r[5]<<14|r[6]<<6|r[7]>>>2;return o*=4,o+=3&r[7]}}t+=10,t+=i}while(t<e.byteLength);return null}},Vl=Da,ql={};ql.ts=Fl,ql.aac=Wl;var Gl=188,Yl=function(e,t,i){for(var n,s,r,o,a=0,l=Gl,c=!1;l<e.byteLength;)if(71!==e[a]||71!==e[l])a++,l++;else{switch(n=e.subarray(a,l),ql.ts.parseType(n,t.pid)){case"pes":s=ql.ts.parsePesType(n,t.table),r=ql.ts.parsePayloadUnitStartIndicator(n),"audio"===s&&r&&(o=ql.ts.parsePesTime(n))&&(o.type="audio",i.audio.push(o),c=!0)}if(c)break;a+=Gl,l+=Gl}for(a=(l=e.byteLength)-Gl,c=!1;a>=0;)if(71!==e[a]||71!==e[l])a--,l--;else{switch(n=e.subarray(a,l),ql.ts.parseType(n,t.pid)){case"pes":s=ql.ts.parsePesType(n,t.table),r=ql.ts.parsePayloadUnitStartIndicator(n),"audio"===s&&r&&(o=ql.ts.parsePesTime(n))&&(o.type="audio",i.audio.push(o),c=!0)}if(c)break;a-=Gl,l-=Gl}},Xl=function(e,t,i){for(var n,s,r,o,a,l,c,u=0,d=Gl,h=!1,p={data:[],size:0};d<e.byteLength;)if(71!==e[u]||71!==e[d])u++,d++;else{switch(n=e.subarray(u,d),ql.ts.parseType(n,t.pid)){case"pes":if(s=ql.ts.parsePesType(n,t.table),r=ql.ts.parsePayloadUnitStartIndicator(n),"video"===s&&(r&&!h&&(o=ql.ts.parsePesTime(n))&&(o.type="video",i.video.push(o),h=!0),!i.firstKeyFrame)){if(r&&0!==p.size){for(a=new Uint8Array(p.size),l=0;p.data.length;)c=p.data.shift(),a.set(c,l),l+=c.byteLength;ql.ts.videoPacketContainsKeyFrame(a)&&(i.firstKeyFrame=ql.ts.parsePesTime(a),i.firstKeyFrame.type="video"),p.size=0}p.data.push(n),p.size+=n.byteLength}}if(h&&i.firstKeyFrame)break;u+=Gl,d+=Gl}for(u=(d=e.byteLength)-Gl,h=!1;u>=0;)if(71!==e[u]||71!==e[d])u--,d--;else{switch(n=e.subarray(u,d),ql.ts.parseType(n,t.pid)){case"pes":s=ql.ts.parsePesType(n,t.table),r=ql.ts.parsePayloadUnitStartIndicator(n),"video"===s&&r&&(o=ql.ts.parsePesTime(n))&&(o.type="video",i.video.push(o),h=!0)}if(h)break;u-=Gl,d-=Gl}},Ql=function(e){var t={pid:null,table:null},i={};for(var n in function(e,t){for(var i,n=0,s=Gl;s<e.byteLength;)if(71!==e[n]||71!==e[s])n++,s++;else{switch(i=e.subarray(n,s),ql.ts.parseType(i,t.pid)){case"pat":t.pid||(t.pid=ql.ts.parsePat(i));break;case"pmt":t.table||(t.table=ql.ts.parsePmt(i))}if(t.pid&&t.table)return;n+=Gl,s+=Gl}}(e,t),t.table)if(t.table.hasOwnProperty(n))switch(t.table[n]){case Ea.H264_STREAM_TYPE:i.video=[],Xl(e,t,i),0===i.video.length&&delete i.video;break;case Ea.ADTS_STREAM_TYPE:i.audio=[],Yl(e,t,i),0===i.audio.length&&delete i.audio}return i},Kl=function(e,t){var i,n;return(n=(i=e)[0]==="I".charCodeAt(0)&&i[1]==="D".charCodeAt(0)&&i[2]==="3".charCodeAt(0)?function(e){for(var t,i=!1,n=0,s=null,r=null,o=0,a=0;3<=e.length-a;){switch(ql.aac.parseType(e,a)){case"timed-metadata":if(e.length-a<10){i=!0;break}if((o=ql.aac.parseId3TagSize(e,a))>e.length){i=!0;break}null===r&&(t=e.subarray(a,a+o),r=ql.aac.parseAacTimestamp(t)),a+=o;break;case"audio":if(e.length-a<7){i=!0;break}if((o=ql.aac.parseAdtsSize(e,a))>e.length){i=!0;break}null===s&&(t=e.subarray(a,a+o),s=ql.aac.parseSampleRate(t)),n++,a+=o;break;default:a++}if(i)return null}if(null===s||null===r)return null;var l=9e4/s;return{audio:[{type:"audio",dts:r,pts:r},{type:"audio",dts:r+1024*n*l,pts:r+1024*n*l}]}}(e):Ql(e))&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var i=t;"undefined"==typeof i&&(i=e.audio[0].dts),e.audio.forEach(function(e){e.dts=Vl(e.dts,i),e.pts=Vl(e.pts,i),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4})}if(e.video&&e.video.length){var n=t;if("undefined"==typeof n&&(n=e.video[0].dts),e.video.forEach(function(e){e.dts=Vl(e.dts,n),e.pts=Vl(e.pts,n),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4}),e.firstKeyFrame){var s=e.firstKeyFrame;s.dts=Vl(s.dts,n),s.pts=Vl(s.pts,n),s.dtsTime=s.dts/9e4,s.ptsTime=s.dts/9e4}}}(n,t),n):null},Jl=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Zl=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),ec=null,tc=function(){function e(t){Jl(this,e),ec||(ec=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],i=e[1],n=t[4],s=i[4],r=void 0,o=void 0,a=void 0,l=[],c=[],u=void 0,d=void 0,h=void 0,p=void 0,f=void 0;for(r=0;256>r;r++)c[(l[r]=r<<1^283*(r>>7))^r]=r;for(o=a=0;!n[o];o^=u||1,a=c[a]||1)for(h=(h=a^a<<1^a<<2^a<<3^a<<4)>>8^255&h^99,f=16843009*l[d=l[u=l[s[n[o]=h]=o]]]^65537*d^257*u^16843008*o,p=257*l[h]^16843008*h,r=0;4>r;r++)t[r][o]=p=p<<24^p>>>8,i[r][h]=f=f<<24^f>>>8;for(r=0;5>r;r++)t[r]=t[r].slice(0),i[r]=i[r].slice(0);return e}()),this._tables=[[ec[0][0].slice(),ec[0][1].slice(),ec[0][2].slice(),ec[0][3].slice(),ec[0][4].slice()],[ec[1][0].slice(),ec[1][1].slice(),ec[1][2].slice(),ec[1][3].slice(),ec[1][4].slice()]];var i=void 0,n=void 0,s=void 0,r=void 0,o=void 0,a=this._tables[0][4],l=this._tables[1],c=t.length,u=1;if(4!==c&&6!==c&&8!==c)throw new Error("Invalid aes key size");for(r=t.slice(0),o=[],this._key=[r,o],i=c;4*c+28>i;i++)s=r[i-1],(i%c==0||8===c&&i%c==4)&&(s=a[s>>>24]<<24^a[s>>16&255]<<16^a[s>>8&255]<<8^a[255&s],i%c==0&&(s=s<<8^s>>>24^u<<24,u=u<<1^283*(u>>7))),r[i]=r[i-c]^s;for(n=0;i;n++,i--)s=r[3&n?i:i-4],o[n]=4>=i||4>n?s:l[0][a[s>>>24]]^l[1][a[s>>16&255]]^l[2][a[s>>8&255]]^l[3][a[255&s]]}return e.prototype.decrypt=function(e,t,i,n,s,r){var o=this._key[1],a=e^o[0],l=n^o[1],c=i^o[2],u=t^o[3],d=void 0,h=void 0,p=void 0,f=o.length/4-2,m=void 0,g=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],w=v[3],C=v[4];for(m=0;f>m;m++)d=y[a>>>24]^b[l>>16&255]^_[c>>8&255]^w[255&u]^o[g],h=y[l>>>24]^b[c>>16&255]^_[u>>8&255]^w[255&a]^o[g+1],p=y[c>>>24]^b[u>>16&255]^_[a>>8&255]^w[255&l]^o[g+2],u=y[u>>>24]^b[a>>16&255]^_[l>>8&255]^w[255&c]^o[g+3],g+=4,a=d,l=h,c=p;for(m=0;4>m;m++)s[(3&-m)+r]=C[a>>>24]<<24^C[l>>16&255]<<16^C[c>>8&255]<<8^C[255&u]^o[g++],d=a,a=l,l=c,c=u,u=d},e}(),ic=function(){function e(){Jl(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),i>-1},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;i>n;++n)t[n].call(this,arguments[1]);else for(var s=Array.prototype.slice.call(arguments,1),r=t.length,o=0;r>o;++o)t[o].apply(this,s)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),nc=function(e){function t(){Jl(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,ic));return i.jobs=[],i.delay=1,i.timeout_=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},t.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(ic),sc=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},rc=function(e,t,i){var n=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),s=new tc(Array.prototype.slice.call(t)),r=new Uint8Array(e.byteLength),o=new Int32Array(r.buffer),a=void 0,l=void 0,c=void 0,u=void 0,d=void 0,h=void 0,p=void 0,f=void 0,m=void 0;for(a=i[0],l=i[1],c=i[2],u=i[3],m=0;m<n.length;m+=4)d=sc(n[m]),h=sc(n[m+1]),p=sc(n[m+2]),f=sc(n[m+3]),s.decrypt(d,h,p,f,o,m),o[m]=sc(o[m]^a),o[m+1]=sc(o[m+1]^l),o[m+2]=sc(o[m+2]^c),o[m+3]=sc(o[m+3]^u),a=d,l=h,c=p,u=f;return r},oc=function(){function e(t,i,n,s){Jl(this,e);var r=e.STEP,o=new Int32Array(t.buffer),a=new Uint8Array(t.byteLength),l=0;for(this.asyncStream_=new nc,this.asyncStream_.push(this.decryptChunk_(o.subarray(l,l+r),i,n,a)),l=r;l<o.length;l+=r)n=new Uint32Array([sc(o[l-4]),sc(o[l-3]),sc(o[l-2]),sc(o[l-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(l,l+r),i,n,a));this.asyncStream_.push(function(){var e;s(null,(e=a).subarray(0,e.byteLength-e[e.byteLength-1]))})}return e.prototype.decryptChunk_=function(e,t,i,n){return function(){var s=rc(e,t,i);n.set(s,e.byteOffset)}},Zl(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),ac=function(t,i){return/^[a-z]+:/i.test(i)?i:(/\/\//i.test(t)||(t=pr.buildAbsoluteURL(e.location.href,t)),pr.buildAbsoluteURL(t,i))},lc=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},cc=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),uc=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},dc=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},hc=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,s=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{!n&&a["return"]&&a["return"]()}finally{if(s)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},pc=Fe.mergeOptions,fc=Fe.EventTarget,mc=Fe.log,gc=function(e,t){["AUDIO","SUBTITLES"].forEach(function(i){for(var n in e.mediaGroups[i])for(var s in e.mediaGroups[i][n]){var r=e.mediaGroups[i][n][s];t(r,i,n,s)}})},vc=function(e,t){var i=pc(e,{}),n=i.playlists[t.uri];if(!n)return null;if(n.segments&&t.segments&&n.segments.length===t.segments.length&&n.mediaSequence===t.mediaSequence)return null;var s=pc(n,t);n.segments&&(s.segments=function(e,t,i){var n=t.slice();i=i||0;for(var s=Math.min(e.length,t.length+i),r=i;s>r;r++)n[r-i]=pc(e[r],n[r-i]);return n}(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),s.segments.forEach(function(e){var t,i;t=e,i=s.resolvedUri,t.resolvedUri||(t.resolvedUri=ac(i,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=ac(i,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=ac(i,t.map.uri))});for(var r=0;r<i.playlists.length;r++)i.playlists[r].uri===t.uri&&(i.playlists[r]=s);return i.playlists[t.uri]=s,i},yc=function(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];(e.playlists[i.uri]=i).resolvedUri=ac(e.uri,i.uri),i.id=t,i.attributes||(i.attributes={},mc.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},bc=function(e){gc(e,function(t){t.uri&&(t.resolvedUri=ac(e.uri,t.uri))})},_c=function(e,t){var i=e.segments[e.segments.length-1];return t&&i&&i.duration?1e3*i.duration:500*(e.targetDuration||10)},wc=function(t){function i(e,t,n){lc(this,i);var s=dc(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(s.srcUrl=e,s.hls_=t,s.withCredentials=n,!s.srcUrl)throw new Error("A non-empty playlist URL is required");return s.state="HAVE_NOTHING",s.on("mediaupdatetimeout",function(){"HAVE_METADATA"===s.state&&(s.state="HAVE_CURRENT_METADATA",s.request=s.hls_.xhr({uri:ac(s.master.uri,s.media().uri),withCredentials:s.withCredentials},function(e,t){return s.request?e?s.playlistRequestError(s.request,s.media().uri,"HAVE_METADATA"):void s.haveMetadata(s.request,s.media().uri):void 0}))}),s}return uc(i,fc),cc(i,[{key:"playlistRequestError",value:function(e,t,i){this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t,responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(t,i){var n=this;this.request=null,this.state="HAVE_METADATA";var s=new Cr;s.push(t.responseText),s.end(),s.manifest.uri=i,s.manifest.attributes=s.manifest.attributes||{};var r=vc(this.master,s.manifest);this.targetDuration=s.manifest.targetDuration,r?(this.master=r,this.media_=this.master.playlists[s.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(e.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=e.setTimeout(function(){n.trigger("mediaupdatetimeout")},_c(this.media(),!!r))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var n=!this.media_||e.uri!==this.media_.uri;if(this.master.playlists[e.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(n){if(this.state="SWITCHING_MEDIA",this.request){if(ac(this.master.uri,e.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:ac(this.master.uri,e.uri),withCredentials:this.withCredentials},function(n,s){if(t.request){if(n)return t.playlistRequestError(t.request,e.uri,i);t.haveMetadata(s,e.uri),"HAVE_MASTER"===i?t.trigger("loadedmetadata"):t.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(t){var i=this;e.clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(t){var s=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=e.setTimeout(function(){return i.load()},s)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var t=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(i,n){if(t.request){if(t.request=null,i)return t.error={status:n.status,message:"HLS playlist request error at URL: "+t.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");var s=new Cr;return s.push(n.responseText),s.end(),t.state="HAVE_MASTER",s.manifest.uri=t.srcUrl,s.manifest.playlists?(t.master=s.manifest,yc(t.master),bc(t.master),t.trigger("loadedplaylist"),void(t.request||t.media(s.manifest.playlists[0]))):(t.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:e.location.href,playlists:[{uri:t.srcUrl,id:0}]},t.master.playlists[t.srcUrl]=t.master.playlists[0],t.master.playlists[0].resolvedUri=t.srcUrl,t.master.playlists[0].attributes=t.master.playlists[0].attributes||{},t.haveMetadata(n,t.srcUrl),t.trigger("loadedmetadata"))}})}}]),i}(),Cc=Fe.createTimeRange,Sc=function(e,t,i){var n,s;return"undefined"==typeof t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(n=function(e,t){var i=0,n=t-e.mediaSequence,s=e.segments[n];if(s){if("undefined"!=typeof s.start)return{result:s.start,precise:!0};if("undefined"!=typeof s.end)return{result:s.end-s.duration,precise:!0}}for(;n--;){if("undefined"!=typeof(s=e.segments[n]).end)return{result:i+s.end,precise:!0};if(i+=s.duration,"undefined"!=typeof s.start)return{result:i+s.start,precise:!0}}return{result:i,precise:!1}}(e,t)).precise?n.result:(s=function(e,t){for(var i=0,n=void 0,s=t-e.mediaSequence;s<e.segments.length;s++){if("undefined"!=typeof(n=e.segments[s]).start)return{result:n.start-i,precise:!0};if(i+=n.duration,"undefined"!=typeof n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}}(e,t)).precise?s.result:n.result+i},Tc=function(t,i,n){if(!t)return 0;if("number"!=typeof n&&(n=0),"undefined"==typeof i){if(t.totalDuration)return t.totalDuration;if(!t.endList)return e.Infinity}return Sc(t,i,n)},kc=function(e,t,i){var n=0;if(t>i){var s=[i,t];t=s[0],i=s[1]}if(0>t){for(var r=t;r<Math.min(0,i);r++)n+=e.targetDuration;t=0}for(var o=t;i>o;o++)n+=e.segments[o].duration;return n},Ec=function(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,i=e.segments[t].duration||e.targetDuration,n=i+2*e.targetDuration;t--&&!(n<=(i+=e.segments[t].duration)););return Math.max(0,t)},Ic=function(e,t,i){if(!e||!e.segments)return null;if(e.endList)return Tc(e);if(null===t)return null;t=t||0;var n=i?Ec(e):e.segments.length;return Sc(e,e.mediaSequence+n,t)},xc=function(e){return e-Math.floor(e)==0},Pc=function(e,t){if(xc(t))return t+.1*e;for(var i=t.toString().split(".")[1].length,n=1;i>=n;n++){var s=Math.pow(10,n),r=t*s;if(xc(r)||n===i)return(r+e)/s}},Ac=Pc.bind(null,1),Dc=Pc.bind(null,-1),Lc=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Oc=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Mc=function(e){var t=Lc(e);return!e.disabled&&!t},Nc=function(e,t){return t.attributes&&t.attributes[e]},Rc=function(e,t){if(1===e.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!Mc(e)&&(e.attributes.BANDWIDTH||0)<i}).length},Uc={duration:Tc,seekable:function(e,t){var i=t||0,n=Ic(e,t,!0);return null===n?Cc():Cc(i,n)},safeLiveIndex:Ec,getMediaInfoForTime:function(e,t,i,n){var s=void 0,r=void 0,o=e.segments.length,a=t-n;if(0>a){if(i>0)for(s=i-1;s>=0;s--)if(r=e.segments[s],0<(a+=Dc(r.duration)))return{mediaIndex:s,startTime:n-kc(e,i,s)};return{mediaIndex:0,startTime:t}}if(0>i){for(s=i;0>s;s++)if((a-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};i=0}for(s=i;o>s;s++)if(r=e.segments[s],(a-=Ac(r.duration))<0)return{mediaIndex:s,startTime:n+kc(e,i,s)};return{mediaIndex:o-1,startTime:t}},isEnabled:Mc,isDisabled:function(e){return e.disabled},isBlacklisted:Lc,isIncompatible:Oc,playlistEnd:Ic,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},hasAttribute:Nc,estimateSegmentRequestTime:function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return Nc("BANDWIDTH",i)?(e*i.attributes.BANDWIDTH-8*n)/t:NaN},isLowestEnabledRendition:Rc},$c=Fe.xhr,Hc=Fe.mergeOptions,Bc=function(){return function e(t,i){t=Hc({timeout:45e3},t);var n=e.beforeRequest||Fe.Hls.xhr.beforeRequest;if(n&&"function"==typeof n){var s=n(t);s&&(t=s)}var r=$c(t,function(e,t){var n=r.response;!e&&n&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=n.byteLength||n.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),t.headers&&(r.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(r.timedout=!0),e||r.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(r&&(n||r.responseText)))),i(e,r)}),o=r.abort;return r.abort=function(){return r.aborted=!0,o.apply(r,arguments)},r.uri=t.uri,r.requestTime=Date.now(),r}},Fc=function(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},jc=function(e){return e>=32&&126>e?String.fromCharCode(e):"."},zc=function(e){var t={};return Object.keys(e).forEach(function(i){var n=e[i];ArrayBuffer.isView(n)?t[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[i]=n}),t},Wc=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Vc=function(e){for(var t=Array.prototype.slice.call(e),i="",n=0;n<t.length/16;n++)i+=t.slice(16*n,16*n+16).map(Fc).join("")+" "+t.slice(16*n,16*n+16).map(jc).join("")+"\n";return i},qc=Object.freeze({createTransferableMessage:zc,initSegmentId:Wc,hexDump:Vc,tagDump:function(e){var t=e.bytes;return Vc(t)},textRanges:function(e){var t,i,n="",s=void 0;for(s=0;s<e.length;s++)i=s,n+=(t=e).start(i)+"-"+t.end(i)+" ";return n}}),Gc=1/30,Yc=function(e,t){var i=[],n=void 0;if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&i.push([e.start(n),e.end(n)]);return Fe.createTimeRanges(i)},Xc=function(e,t){return Yc(e,function(e,i){return t>=e-Gc&&i+Gc>=t})},Qc=function(e,t){return Yc(e,function(e){return e-Gc>=t})},Kc=function(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")},Jc=function(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t},Zc=function(e,t,i){var n=void 0,s=void 0;if(i&&i.cues)for(n=i.cues.length;n--;)(s=i.cues[n]).startTime<=t&&s.endTime>=e&&i.removeCue(s)},eu=function(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e},tu=function(t,i,n){var s=e.WebKitDataCue||e.VTTCue;if(i&&i.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new s(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},t),n){var r=eu(t.mediaSource_.duration);if(n.forEach(function(e){var t=e.cueTime+this.timestampOffset;e.frames.forEach(function(e){var i,n=new s(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,i=n,Object.defineProperties(i.frame,{id:{get:function(){return Fe.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),i.value.key}},value:{get:function(){return Fe.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),i.value.data}},privateData:{get:function(){return Fe.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),i.value.data}}}),this.metadataTrack_.addCue(n)},this)},t),t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length){for(var o=t.metadataTrack_.cues,a=[],l=0;l<o.length;l++)o[l]&&a.push(o[l]);var c=a.reduce(function(e,t){var i=e[t.startTime]||[];return i.push(t),e[t.startTime]=i,e},{}),u=Object.keys(c).sort(function(e,t){return Number(e)-Number(t)});u.forEach(function(e,t){var i=c[e],n=Number(u[t+1])||r;i.forEach(function(e){e.endTime=n})})}}},iu="undefined"!=typeof window?window:{},nu="undefined"==typeof Symbol?"__target":Symbol(),su="application/javascript",ru=iu.BlobBuilder||iu.WebKitBlobBuilder||iu.MozBlobBuilder||iu.MSBlobBuilder,ou=iu.URL||iu.webkitURL||ou&&ou.msURL,au=iu.Worker;if(au){var lu,cu=ze("self.onmessage = function () {}"),uu=new Uint8Array(1);try{(lu=new au(cu)).postMessage(uu,[uu.buffer])}catch(Ge){au=null}finally{ou.revokeObjectURL(cu),lu&&lu.terminate()}}var du=new je("./transmuxer-worker.worker.js",function(e,t){var i=this;!function(){var e,t,n,s,r,o,a,l,c,u,d,h,p,f,m,g,v,y,b,_,w,C,S,T,k,E,I,x,P,A,D,L,O,M,N,R,U,$,H,B,F=Math.pow(2,32)-1;!function(){var e;if(C={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in C)C.hasOwnProperty(e)&&(C[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),k=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),T=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),I=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),x={video:E,audio:I},D=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0]),L=new Uint8Array([0,0,0,0,0,0,0,0]),O=L,M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=L,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),e=function(e){var t,i,n=[],s=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)s+=n[t].byteLength;for(i=new Uint8Array(s+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(e,4),t=0,s=8;t<n.length;t++)i.set(n[t],s),s+=n[t].byteLength;return i},t=function(){return e(C.dinf,e(C.dref,D))},n=function(t){return e(C.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},m=function(t){return e(C.hdlr,x[t])},f=function(t){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(i[12]=t.samplerate>>>24&255,i[13]=t.samplerate>>>16&255,i[14]=t.samplerate>>>8&255,i[15]=255&t.samplerate),e(C.mdhd,i)},p=function(t){return e(C.mdia,f(t),m(t.type),o(t))},r=function(t){return e(C.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},o=function(i){return e(C.minf,"video"===i.type?e(C.vmhd,P):e(C.smhd,A),t(),v(i))},a=function(t,i){for(var n=[],s=i.length;s--;)n[s]=b(i[s]);return e.apply(null,[C.moof,r(t)].concat(n))},l=function(t){for(var i=t.length,n=[];i--;)n[i]=d(t[i]);return e.apply(null,[C.moov,u(4294967295)].concat(n).concat(c(t)))},c=function(t){for(var i=t.length,n=[];i--;)n[i]=_(t[i]);return e.apply(null,[C.mvex].concat(n))},u=function(t){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e(C.mvhd,i)},g=function(t){var i,n,s=t.samples||[],r=new Uint8Array(4+s.length);for(n=0;n<s.length;n++)i=s[n].flags,r[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return e(C.sdtp,r)},v=function(t){return e(C.stbl,y(t),e(C.stts,N),e(C.stsc,O),e(C.stsz,M),e(C.stco,L))},y=function(t){return e(C.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===t.type?R(t):U(t))},R=function(t){var i,n=t.sps||[],s=t.pps||[],r=[],o=[];for(i=0;i<n.length;i++)r.push((65280&n[i].byteLength)>>>8),r.push(255&n[i].byteLength),r=r.concat(Array.prototype.slice.call(n[i]));for(i=0;i<s.length;i++)o.push((65280&s[i].byteLength)>>>8),o.push(255&s[i].byteLength),o=o.concat(Array.prototype.slice.call(s[i]));return e(C.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),e(C.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([n.length]).concat(r).concat([s.length]).concat(o))),e(C.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},U=function(t){return e(C.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),n(t))},h=function(t){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return e(C.tkhd,i)},b=function(t){var i,n,s,r,o,a;return i=e(C.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(t.baseMediaDecodeTime/(F+1)),a=Math.floor(t.baseMediaDecodeTime%(F+1)),n=e(C.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a])),"audio"===t.type?(s=w(t,92),e(C.traf,i,n,s)):(r=g(t),s=w(t,r.length+92),e(C.traf,i,n,s,r))},d=function(t){return t.duration=t.duration||4294967295,e(C.trak,h(t),p(t))},_=function(t){var i=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(i[i.length-1]=0),e(C.trex,i)},B=function(e,t){var i=0,n=0,s=0,r=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(s=4),void 0!==e[0].compositionTimeOffset&&(r=8)),[0,0,i|n|s|r,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},H=function(t,i){var n,s,r,o;for(i+=20+16*(s=t.samples||[]).length,n=B(s,i),o=0;o<s.length;o++)r=s[o],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size,r.flags.isLeading<<2|r.flags.dependsOn,r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,61440&r.flags.degradationPriority,15&r.flags.degradationPriority,(4278190080&r.compositionTimeOffset)>>>24,(16711680&r.compositionTimeOffset)>>>16,(65280&r.compositionTimeOffset)>>>8,255&r.compositionTimeOffset]);return e(C.trun,new Uint8Array(n))},$=function(t,i){var n,s,r,o;for(i+=20+8*(s=t.samples||[]).length,n=B(s,i),o=0;o<s.length;o++)r=s[o],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size]);return e(C.trun,new Uint8Array(n))},w=function(e,t){return"audio"===e.type?$(e,t):H(e,t)};var j,z,W,V,q,G={ftyp:s=function(){return e(C.ftyp,S,T,S,k)},mdat:function(t){return e(C.mdat,t)},moof:a,moov:l,initSegment:function(e){var t,i=s(),n=l(e);return(t=new Uint8Array(i.byteLength+n.byteLength)).set(i),t.set(n,i.byteLength),t}},Y=function(e){return e>>>0};W=function(e){return j(e,["moov","trak"]).reduce(function(e,t){var i,n,s,r,o;return(i=j(t,["tkhd"])[0])?(n=i[0],r=Y(i[s=0===n?12:20]<<24|i[s+1]<<16|i[s+2]<<8|i[s+3]),(o=j(t,["mdia","mdhd"])[0])?(s=0===(n=o[0])?12:20,e[r]=Y(o[s]<<24|o[s+1]<<16|o[s+2]<<8|o[s+3]),e):null):null},{})},V=function(e,t){var i,n,s;return i=j(t,["moof","traf"]),n=[].concat.apply([],i.map(function(t){return j(t,["tfhd"]).map(function(i){var n,s;return n=Y(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),s=e[n]||9e4,(j(t,["tfdt"]).map(function(e){var t,i;return t=e[0],i=Y(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(i*=Math.pow(2,32),i+=Y(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),i})[0]||1/0)/s})})),s=Math.min.apply(null,n),isFinite(s)?s:0},q=function(e){var t=j(e,["moov","trak"]),i=[];return t.forEach(function(e){var t=j(e,["mdia","hdlr"]),n=j(e,["tkhd"]);t.forEach(function(e,t){var s,r,o=z(e.subarray(8,12)),a=n[t];"vide"===o&&(r=0===(s=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0)?s.getUint32(12):s.getUint32(20),i.push(r))})}),i};var X={findBox:j=function(e,t){var i,n,s,r,o,a=[];if(!t.length)return null;for(i=0;i<e.byteLength;)n=Y(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]),s=z(e.subarray(i+4,i+8)),r=n>1?i+n:e.byteLength,s===t[0]&&(1===t.length?a.push(e.subarray(i+8,r)):(o=j(e.subarray(i+8,r),t.slice(1))).length&&(a=a.concat(o))),i=r;return a},parseType:z=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},timescale:W,startTime:V,videoTrackIds:q},Q=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var n;return!!e[t]&&(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var i,n,s,r;if(i=e[t])if(2===arguments.length)for(s=i.length,n=0;s>n;++n)i[n].call(this,arguments[1]);else{for(r=[],n=arguments.length,n=1;n<arguments.length;++n)r.push(arguments[n]);for(s=i.length,n=0;s>n;++n)i[n].apply(this,r)}},this.dispose=function(){e={}}}};Q.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},Q.prototype.push=function(e){this.trigger("data",e)},Q.prototype.flush=function(e){this.trigger("done",e)};var K=Q,J=function(e){var t,i,n=[],s=[];for(t=n.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(i=e[t]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,s.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return s.length&&(!n.duration||n.duration<=0)&&(n.duration=s[s.length-1].duration),s.push(n),s},Z=function(e){var t,i,n=[],s=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,s.byteLength=0,s.nalCount=0,s.duration=0,s.pts=e[0].pts,s.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(n.length&&(s.push(n),s.byteLength+=n.byteLength,s.nalCount+=n.nalCount,s.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return s.length&&n.duration<=0&&(n.duration=s[s.length-1].duration),s.byteLength+=n.byteLength,s.nalCount+=n.nalCount,s.duration+=n.duration,s.push(n),s},ee=function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},te=function(e,t){var i,n,s,r,o,a,l,c=t||0,u=[];for(i=0;i<e.length;i++)for(r=e[i],n=0;n<r.length;n++)o=r[n],a=o,l=void 0,(l={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=c,l.compositionTimeOffset=a.pts-a.dts,l.duration=a.duration,l.size=4*a.length,l.size+=a.byteLength,a.keyFrame&&(l.flags.dependsOn=2,l.flags.isNonSyncSample=0),c+=(s=l).size,u.push(s);return u},ie=function(e){var t,i,n,s,r,o,a=0,l=e.byteLength,c=e.nalCount,u=new Uint8Array(l+4*c),d=new DataView(u.buffer);for(t=0;t<e.length;t++)for(s=e[t],i=0;i<s.length;i++)for(r=s[i],n=0;n<r.length;n++)o=r[n],d.setUint32(a,o.data.byteLength),a+=4,u.set(o.data,a),a+=o.data.byteLength;return u},ne=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},se=function(e,t){var i,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===e.type&&(i*=e.samplerate/9e4,i=Math.floor(i)),i},re=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},oe=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,s=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)s+=255,t++;if(s+=e[t++],!i.payload&&4===n){i.payloadType=n,i.payloadSize=s,i.payload=e.subarray(t,t+s);break}t+=s,s=n=0}return i},ae=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},le=function(e,t){var i,n,s,r,o=[];if(!(64&t[0]))return o;for(n=31&t[0],i=0;n>i;i++)r={type:3&t[2+(s=3*i)],pts:e},4&t[s+2]&&(r.ccData=t[s+3]<<8|t[s+4],o.push(r));return o},ce=function(e){for(var t,i,n=e.byteLength,s=[],r=1;n-2>r;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(s.push(r+2),r+=2):r++;if(0===s.length)return e;t=n-s.length,i=new Uint8Array(t);var o=0;for(r=0;t>r;o++,r++)o===s[0]&&(o++,s.shift()),i[r]=e[o];return i},ue=4,de=function At(){At.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new ge(0,0),new ge(0,1),new ge(1,0),new ge(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)};(de.prototype=new K).push=function(e){var t,i,n;if("sei_rbsp"===e.nalUnitType&&(t=oe(e.escapedRBSP)).payloadType===ue&&(i=ae(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=le(e.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},de.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)},de.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},de.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},de.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},de.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)};var he={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},pe=function(e){return null===e?"":(e=he[e]||e,String.fromCharCode(e))},fe=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],me=function(){for(var e=[],t=15;t--;)e.push("");return e},ge=function Dt(e,t){Dt.prototype.init.call(this),
this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,s,r;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,s=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=me();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=me();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=me()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,s))r=pe((n=(3&n)<<8)|s),this[this.mode_](e.pts,r),this.column_++;else if(this.isExtCharacter(n,s))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),r=pe((n=(3&n)<<8)|s),this[this.mode_](e.pts,r),this.column_++;else if(this.isMidRowCode(n,s))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&s)&&this.addFormatting(e.pts,["i"]),1==(1&s)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,s))this.column_+=3&s;else if(this.isPAC(n,s)){var o=fe.indexOf(7968&t);"rollUp"===this.mode_&&this.setRollUp(e.pts,o),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&s&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(s)&&14==(14&s)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===s&&(s=null),r=pe(n),r+=pe(s),this[this.mode_](e.pts,r),this.column_+=r.length)}else this.lastControlCode_=null}};ge.prototype=new K,ge.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){return e.trim()}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},ge.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=me(),this.nonDisplayed_=me(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ge.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ge.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&63>=t},ge.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&63>=t},ge.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&47>=t},ge.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&35>=t},ge.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&127>=t},ge.prototype.isColorPAC=function(e){return e>=64&&79>=e||e>=96&&127>=e},ge.prototype.isNormalChar=function(e){return e>=32&&127>=e},ge.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=me(),this.displayed_=me()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},ge.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)},ge.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},ge.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},ge.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i},ge.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;15>e;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},ge.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i};var ve={CaptionStream:de,Cea608Stream:ge},ye={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},be=function(e,t){var i=1;for(e>t&&(i=-1);4294967296<Math.abs(t-e);)e+=8589934592*i;return e},_e=function Lt(e){var t,i;Lt.prototype.init.call(this),this.type_=e,this.push=function(e){e.type===this.type_&&(void 0===i&&(i=e.dts),e.dts=be(e.dts,i),e.pts=be(e.pts,i),t=e.dts,this.trigger("data",e))},this.flush=function(){i=t,this.trigger("done")},this.discontinuity=function(){t=i=void 0}};_e.prototype=new K;var we,Ce=_e,Se=function(e,t,i){var n,s="";for(n=t;i>n;n++)s+="%"+("00"+e[n].toString(16)).slice(-2);return s},Te=function(e,t,i){return decodeURIComponent(Se(e,t,i))},ke=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Ee={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Te(e.data,1,t),e.value=Te(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Te(e.data,1,t),e.url=Te(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,i;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(i=e.data,unescape(Se(i,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(we=function(e){var t,i={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},n=0,s=[],r=0;if(we.prototype.init.call(this),this.dispatchType=ye.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(t=0;t<i.descriptor.length;t++)this.dispatchType+=("00"+i.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,o,a,l,c;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(r=0,s.length=0),0===s.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))i.debug;else if(s.push(e),r+=e.data.byteLength,1===s.length&&(n=ke(e.data.subarray(6,10)),n+=10),!(n>r)){for(t={data:new Uint8Array(n),frames:[],pts:s[0].pts,dts:s[0].dts},c=0;n>c;)t.data.set(s[0].data.subarray(0,n-c),c),c+=s[0].data.byteLength,r-=s[0].data.byteLength,s.shift();o=10,64&t.data[5]&&(o+=4,o+=ke(t.data.subarray(10,14)),n-=ke(t.data.subarray(16,20)));do{if((a=ke(t.data.subarray(o+4,o+8)))<1)return;if((l={id:String.fromCharCode(t.data[o],t.data[o+1],t.data[o+2],t.data[o+3]),data:t.data.subarray(o+10,o+a+10)}).key=l.id,Ee[l.id]&&(Ee[l.id](l),"com.apple.streaming.transportStreamTimestamp"===l.owner)){var u=l.data,d=(1&u[3])<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;d*=4,d+=3&u[7],l.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=l.timeStamp,t.dts=l.timeStamp),this.trigger("timestamp",l)}t.frames.push(l),o+=10,o+=a}while(n>o);this.trigger("data",t)}}}).prototype=new K;var Ie,xe,Pe,Ae=we,De=Ce;(Ie=function(){var e=new Uint8Array(188),t=0;Ie.prototype.init.call(this),this.push=function(i){var n,s=0,r=188;for(t?((n=new Uint8Array(i.byteLength+t)).set(e.subarray(0,t)),n.set(i,t),t=0):n=i;r<n.byteLength;)71!==n[s]||71!==n[r]?(s++,r++):(this.trigger("data",n.subarray(s,r)),s+=188,r+=188);s<n.byteLength&&(e.set(n.subarray(s),0),t=n.byteLength-s)},this.flush=function(){188===t&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")}}).prototype=new K,(xe=function(){var e,t,i,n;xe.prototype.init.call(this),(n=this).packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var s=0;n.payloadUnitStartIndicator&&(s+=e[s]+1),"pat"===n.type?t(e.subarray(s),n):i(e.subarray(s),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},i=function(e,t){var i,s;if(1&e[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,s=12+((15&e[10])<<8|e[11]);i>s;){var r=e[s],o=(31&e[s+1])<<8|e[s+2];r===ye.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=o:r===ye.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=o:r===ye.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][o]=r),s+=5+((15&e[s+3])<<8|e[s+4])}t.programMapTable=n.programMapTable}},this.push=function(t){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&t[1]),i.pid=31&t[1],i.pid<<=8,i.pid|=t[2],1<(48&t[3])>>>4&&(n+=t[n]+1),0===i.pid)i.type="pat",e(t.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",e(t.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,i]):this.processPes_(t,n,i)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=ye.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=ye.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}}).prototype=new K,xe.STREAM_TYPES={h264:27,adts:15},(Pe=function(){var e=this,t={data:[],size:0},i={data:[],size:0},n={data:[],size:0},s=function(t,i,n){var s,r,o=new Uint8Array(t.size),a={type:i},l=0,c=0;if(t.data.length&&!(t.size<9)){for(a.trackId=t.data[0].pid,l=0;l<t.data.length;l++)r=t.data[l],o.set(r.data,c),c+=r.data.byteLength;var u,d,h;u=o,(d=a).packetLength=6+(u[4]<<8|u[5]),d.dataAlignmentIndicator=0!=(4&u[6]),192&(h=u[7])&&(d.pts=(14&u[9])<<27|(255&u[10])<<20|(254&u[11])<<12|(255&u[12])<<5|(254&u[13])>>>3,d.pts*=4,d.pts+=(6&u[13])>>>1,d.dts=d.pts,64&h&&(d.dts=(14&u[14])<<27|(255&u[15])<<20|(254&u[16])<<12|(255&u[17])<<5|(254&u[18])>>>3,d.dts*=4,d.dts+=(6&u[18])>>>1)),d.data=u.subarray(9+u[8]),s="video"===i||a.packetLength<=t.size,(n||s)&&(t.size=0,t.data.length=0),s&&e.trigger("data",a)}};Pe.prototype.init.call(this),this.push=function(r){({pat:function(){},pes:function(){var e,o;switch(r.streamType){case ye.H264_STREAM_TYPE:case ye.H264_STREAM_TYPE:e=t,o="video";break;case ye.ADTS_STREAM_TYPE:e=i,o="audio";break;case ye.METADATA_STREAM_TYPE:e=n,o="timed-metadata";break;default:return}r.payloadUnitStartIndicator&&s(e,o,!0),e.data.push(r),e.size+=r.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},i=r.programMapTable;null!==i.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.video,codec:"avc",type:"video"}),null!==i.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.audio,codec:"adts",type:"audio"}),e.trigger("data",t)}})[r.type]()},this.flush=function(){s(t,"video"),s(i,"audio"),s(n,"timed-metadata"),this.trigger("done")}}).prototype=new K;var Le={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Ie,TransportParseStream:xe,ElementaryStream:Pe,TimestampRolloverStream:De,CaptionStream:ve.CaptionStream,Cea608Stream:ve.Cea608Stream,MetadataStream:Ae};for(var Oe in ye)ye.hasOwnProperty(Oe)&&(Le[Oe]=ye[Oe]);var Me,Ne=Le,Re=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Me=function(){var e;Me.prototype.init.call(this),this.push=function(t){var i,n,s,r,o,a,l=0,c=0;if("audio"===t.type)for(e?(r=e,(e=new Uint8Array(r.byteLength+t.data.byteLength)).set(r),e.set(t.data,r.byteLength)):e=t.data;l+5<e.length;)if(255===e[l]&&240==(246&e[l+1])){if(n=2*(1&~e[l+1]),i=(3&e[l+3])<<11|e[l+4]<<3|(224&e[l+5])>>5,a=9e4*(o=1024*(1+(3&e[l+6])))/Re[(60&e[l+2])>>>2],s=l+i,e.byteLength<s)return;if(this.trigger("data",{pts:t.pts+c*a,dts:t.dts+c*a,sampleCount:o,audioobjecttype:1+(e[l+2]>>>6&3),channelcount:(1&e[l+2])<<2|(192&e[l+3])>>>6,samplerate:Re[(60&e[l+2])>>>2],samplingfrequencyindex:(60&e[l+2])>>>2,samplesize:16,data:e.subarray(l+7+n,s)}),e.byteLength===s)return void(e=void 0);c++,e=e.subarray(s)}else l++},this.flush=function(){this.trigger("done")}}).prototype=new K;var Ue,$e,He,Be=Me,Fe=function(e){var t=e.byteLength,i=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var s=e.byteLength-t,r=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");r.set(e.subarray(s,s+o)),i=new DataView(r.buffer).getUint32(0),n=8*o,t-=o},this.skipBits=function(e){var s;n>e||(e-=n,e-=8*(s=Math.floor(e/8)),t-=s,this.loadWord()),i<<=e,n-=e},this.readBits=function(e){var s=Math.min(n,e),r=i>>>32-s;return 0<(n-=s)?i<<=s:t>0&&this.loadWord(),0<(s=e-s)?r<<s|this.readBits(s):r},this.skipLeadingZeros=function(){var e;for(e=0;n>e;++e)if(0!=(i&2147483648>>>e))return i<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};($e=function(){var e,t,i=0;$e.prototype.init.call(this),this.push=function(n){var s;for(t=t?((s=new Uint8Array(t.byteLength+n.data.byteLength)).set(t),s.set(n.data,t.byteLength),s):n.data;i<t.byteLength-3;i++)if(1===t[i+2]){e=i+5;break}for(;e<t.byteLength;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}for(i+3!==e-2&&this.trigger("data",t.subarray(i+3,e-2));1!==t[++e]&&e<t.length;);i=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(i+3,e-2)),i=e-2,e+=3;break;default:e+=3}t=t.subarray(i),e-=i,i=0},this.flush=function(){t&&3<t.byteLength&&this.trigger("data",t.subarray(i+3)),t=null,i=0,this.trigger("done")}}).prototype=new K,He={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Ue=function(){var e,t,i,n,s,r,o,a=new $e;Ue.prototype.init.call(this),(e=this).push=function(e){"video"===e.type&&(t=e.trackId,i=e.pts,n=e.dts,a.push(e))},a.on("data",function(o){var a={trackId:t,pts:i,dts:n,data:o};switch(31&o[0]){case 5:a.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:a.nalUnitType="sei_rbsp",a.escapedRBSP=s(o.subarray(1));break;case 7:a.nalUnitType="seq_parameter_set_rbsp",a.escapedRBSP=s(o.subarray(1)),a.config=r(a.escapedRBSP);break;case 8:a.nalUnitType="pic_parameter_set_rbsp";break;case 9:a.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",a)}),a.on("done",function(){e.trigger("done")}),this.flush=function(){a.flush()},o=function(e,t){var i,n=8,s=8;for(i=0;e>i;i++)0!==s&&(s=(n+t.readExpGolomb()+256)%256),n=0===s?n:s},s=function(e){for(var t,i,n=e.byteLength,s=[],r=1;n-2>r;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(s.push(r+2),r+=2):r++;if(0===s.length)return e;t=n-s.length,i=new Uint8Array(t);var o=0;for(r=0;t>r;o++,r++)o===s[0]&&(o++,s.shift()),i[r]=e[o];return i},r=function(e){var t,i,n,s,r,a,l,c,u,d,h,p,f,m=0,g=0,v=0,y=0,b=1;if(i=(t=new Fe(e)).readUnsignedByte(),s=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),He[i]&&(3===(r=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==r?8:12,f=0;h>f;f++)t.readBoolean()&&o(6>f?16:64,t);if(t.skipUnsignedExpGolomb(),0===(a=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===a)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),f=0;l>f;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),c=t.readUnsignedExpGolomb(),u=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}p&&(b=p[0]/p[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:s,width:Math.ceil((16*(c+1)-2*m-2*g)*b),height:(2-d)*(u+1)*16-2*v-2*y}}}).prototype=new K;var je,ze={H264Stream:Ue,NalByteStream:$e};(je=function(){var e=new Uint8Array,t=0;je.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.parseId3TagSize=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10},this.parseAdtsSize=function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},this.push=function(i){var n,s,r,o,a=0,l=0;for(e.length?(o=e.length,(e=new Uint8Array(i.byteLength+o)).set(e.subarray(0,o)),e.set(i,o)):e=i;3<=e.length-l;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(!0&e[l]&&240==(240&e[l+1])){if(e.length-l<7)break;if((a=this.parseAdtsSize(e,l))>e.length)break;r={type:"audio",data:e.subarray(l,l+a),pts:t,dts:t},this.trigger("data",r),l+=a}else l++;else{if(e.length-l<10)break;if((a=this.parseId3TagSize(e,l))>e.length)break;s={type:"timed-metadata",data:e.subarray(l,l+a)},this.trigger("data",s),l+=a}n=e.length-l,e=n>0?e.subarray(l):new Uint8Array}}).prototype=new K;var We,Ve,qe,Ge,Ye,Xe,Qe,Ke=je,Je=[33,16,5,32,164,27],Ze=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],et=function(e){for(var t=[];e--;)t.push(0);return t},tt={96e3:[Je,[227,64],et(154),[56]],88200:[Je,[231],et(170),[56]],64e3:[Je,[248,192],et(240),[56]],48e3:[Je,[255,192],et(268),[55,148,128],et(54),[112]],44100:[Je,[255,192],et(268),[55,163,128],et(84),[112]],32e3:[Je,[255,192],et(268),[55,234],et(226),[112]],24e3:[Je,[255,192],et(268),[55,255,128],et(268),[111,112],et(126),[224]],16e3:[Je,[255,192],et(268),[55,255,128],et(268),[111,255],et(269),[223,108],et(195),[1,192]],12e3:[Ze,et(268),[3,127,248],et(268),[6,255,240],et(268),[13,255,224],et(268),[27,253,128],et(259),[56]],11025:[Ze,et(268),[3,127,248],et(268),[6,255,240],et(268),[13,255,224],et(268),[27,255,192],et(268),[55,175,128],et(108),[112]],8e3:[Ze,et(268),[3,121,16],et(47),[7]]},it=(We=tt,Object.keys(We).reduce(function(e,t){return e[t]=new Uint8Array(We[t].reduce(function(e,t){return e.concat(t)},[])),e},{}));Xe=function(e,t){return Ve(Ye(e,t))},Qe=function(e,t){return qe(Ge(e),t)},Ve=function(e){return 9e4*e},qe=function(e,t){return e*t},Ge=function(e){return e/9e4},Ye=function(e,t){return e/t};var nt,st,rt,ot,at,lt,ct,ut=Xe,dt=Qe,ht=ze.H264Stream,pt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],ft=["width","height","profileIdc","levelIdc","profileCompatibility"];at=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},lt=function(e,t){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},ct=function(e){var t,i=0;for(t=0;t<e.length;t++)i+=e[t].data.byteLength;return i},(st=function(e,t){var i=[],n=0,s=0,r=0,o=1/0;t=t||{},st.prototype.init.call(this),this.push=function(t){re(e,t),e&&pt.forEach(function(i){e[i]=t[i]}),i.push(t)},this.setEarliestDts=function(t){s=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){r=e},this.flush=function(){var s,r,o,a;0!==i.length&&(s=this.trimAdtsFramesByEarliestDts_(i),e.baseMediaDecodeTime=se(e,t.keepOriginalTimestamps),this.prefixWithSilence_(e,s),e.samples=this.generateSampleTable_(s),o=G.mdat(this.concatenateFrameData_(s)),i=[],r=G.moof(n,[e]),a=new Uint8Array(r.byteLength+o.byteLength),n++,a.set(r),a.set(o,r.byteLength),ne(e),this.trigger("data",{track:e,boxes:a})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(e,t){var i,n,s,a,l=0,c=0,u=0;if(t.length&&(i=ut(e.baseMediaDecodeTime,e.samplerate),n=Math.ceil(9e4/(e.samplerate/1024)),r&&o&&(l=i-Math.max(r,o),u=(c=Math.floor(l/n))*n),!(1>c||u>45e3))){for((s=it[e.samplerate])||(s=t[0].data),a=0;c>a;a++)t.splice(a,0,{data:s});e.baseMediaDecodeTime-=Math.floor(dt(u,e.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(t){return e.minSegmentDts>=s?t:(e.minSegmentDts=1/0,t.filter(function(t){return t.dts>=s&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)}))},this.generateSampleTable_=function(e){var t,i,n=[];for(t=0;t<e.length;t++)i=e[t],n.push({size:i.data.byteLength,duration:1024});return n},this.concatenateFrameData_=function(e){var t,i,n=0,s=new Uint8Array(ct(e));for(t=0;t<e.length;t++)i=e[t],s.set(i.data,n),n+=i.data.byteLength;return s}}).prototype=new K,(nt=function(e,t){var i,n,s=0,r=[],o=[];t=t||{},nt.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){re(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],ft.forEach(function(t){e[t]=i[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),r.push(t)},this.flush=function(){for(var i,n,a,l,c,u;r.length&&"access_unit_delimiter_rbsp"!==r[0].nalUnitType;)r.shift();if(0===r.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=J(r),(a=Z(i))[0][0].keyFrame||((n=this.getGopForFusion_(r[0],e))?(a.unshift(n),a.byteLength+=n.byteLength,a.nalCount+=n.nalCount,a.pts=n.pts,a.dts=n.dts,a.duration+=n.duration):a=ee(a)),o.length){var d;if(!(d=t.alignGopsAtEnd?this.alignGopsAtEnd_(a):this.alignGopsAtStart_(a)))return this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ne(e),a=d}re(e,a),e.samples=te(a),c=G.mdat(ie(a)),e.baseMediaDecodeTime=se(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",a.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=G.moof(s,[e]),u=new Uint8Array(l.byteLength+c.byteLength),s++,u.set(l),u.set(c,l.byteLength),this.trigger("data",{track:e,boxes:u}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){ne(e),n=i=void 0},this.getGopForFusion_=function(t){var i,n,s,r,o,a=1/0;for(o=0;o<this.gopCache_.length;o++)s=(r=this.gopCache_[o]).gop,e.pps&&lt(e.pps[0],r.pps[0])&&e.sps&&lt(e.sps[0],r.sps[0])&&(s.dts<e.timelineStartInfo.dts||-1e4<=(i=t.dts-s.dts-s.duration)&&45e3>=i&&(!n||a>i)&&(n=r,a=i));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,i,n,s,r,a,l,c;for(r=e.byteLength,a=e.nalCount,l=e.duration,t=i=0;t<o.length&&i<e.length&&(n=o[t],s=e[i],n.pts!==s.pts);)s.pts>n.pts?t++:(i++,r-=s.byteLength,a-=s.nalCount,l-=s.duration);return 0===i?e:i===e.length?null:((c=e.slice(i)).byteLength=r,c.duration=l,c.nalCount=a,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(e){var t,i,n,s,r,a,l;for(t=o.length-1,i=e.length-1,r=null,a=!1;t>=0&&i>=0;){if(n=o[t],s=e[i],n.pts===s.pts){a=!0;break}n.pts>s.pts?t--:(t===o.length-1&&(r=i),i--)}if(!a&&null===r)return null;if(0===(l=a?i:r))return e;var c=e.slice(l),u=c.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return c.byteLength=u.byteLength,c.duration=u.duration,c.nalCount=u.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(e){o=e}}).prototype=new K,(ot=function(e,t){this.numberOfTracks=0,this.metadataStream=t,"undefined"!=typeof e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ot.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new K,ot.prototype.flush=function(e){var t,i,n,s,r=0,o={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,ft.forEach(function(e){o.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,pt.forEach(function(e){o.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,n=G.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(n.byteLength),o.initSegment.set(n),o.data=new Uint8Array(this.pendingBytes),s=0;s<this.pendingBoxes.length;s++)o.data.set(this.pendingBoxes[s],r),r+=this.pendingBoxes[s].byteLength;for(s=0;s<this.pendingCaptions.length;s++)(t=this.pendingCaptions[s]).startTime=t.startPts-a,t.startTime/=9e4,t.endTime=t.endPts-a,t.endTime/=9e4,o.captionStreams[t.stream]=!0,o.captions.push(t);for(s=0;s<this.pendingMetadata.length;s++)(i=this.pendingMetadata[s]).cueTime=i.pts-a,i.cueTime/=9e4,o.metadata.push(i);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(rt=function(e){var t,i,n=this,s=!0;rt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new Ne.MetadataStream,t.aacStream=new Ke,t.audioTimestampRolloverStream=new Ne.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new Ne.TimestampRolloverStream("timed-metadata"),t.adtsStream=new Be,t.coalesceStream=new ot(e,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(s){"timed-metadata"!==s.type||t.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new st(i,e),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var s={};(this.transmuxPipeline_=s).type="ts",s.metadataStream=new Ne.MetadataStream,s.packetStream=new Ne.TransportPacketStream,s.parseStream=new Ne.TransportParseStream,s.elementaryStream=new Ne.ElementaryStream,s.videoTimestampRolloverStream=new Ne.TimestampRolloverStream("video"),s.audioTimestampRolloverStream=new Ne.TimestampRolloverStream("audio"),s.timedMetadataTimestampRolloverStream=new Ne.TimestampRolloverStream("timed-metadata"),s.adtsStream=new Be,s.h264Stream=new ht,s.captionStream=new Ne.CaptionStream,s.coalesceStream=new ot(e,s.metadataStream),s.headOfPipeline=s.packetStream,s.packetStream.pipe(s.parseStream).pipe(s.elementaryStream),s.elementaryStream.pipe(s.videoTimestampRolloverStream).pipe(s.h264Stream),s.elementaryStream.pipe(s.audioTimestampRolloverStream).pipe(s.adtsStream),s.elementaryStream.pipe(s.timedMetadataTimestampRolloverStream).pipe(s.metadataStream).pipe(s.coalesceStream),s.h264Stream.pipe(s.captionStream).pipe(s.coalesceStream),s.elementaryStream.on("data",function(r){var o;if("metadata"===r.type){for(o=r.tracks.length;o--;)t||"video"!==r.tracks[o].type?i||"audio"!==r.tracks[o].type||((i=r.tracks[o]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=r.tracks[o]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&&!s.videoSegmentStream&&(s.coalesceStream.numberOfTracks++,s.videoSegmentStream=new nt(t,e),s.videoSegmentStream.on("timelineStartInfo",function(e){i&&(i.timelineStartInfo=e,s.audioSegmentStream.setEarliestDts(e.dts))}),s.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),s.videoSegmentStream.on("baseMediaDecodeTime",function(e){i&&s.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),s.h264Stream.pipe(s.videoSegmentStream).pipe(s.coalesceStream)),i&&!s.audioSegmentStream&&(s.coalesceStream.numberOfTracks++,s.audioSegmentStream=new st(i,e),s.adtsStream.pipe(s.audioSegmentStream).pipe(s.coalesceStream))}}),s.coalesceStream.on("data",this.trigger.bind(this,"data")),s.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var n=this.transmuxPipeline_;this.baseMediaDecodeTime=e,i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,ne(i),i.timelineStartInfo.baseMediaDecodeTime=e,n.audioTimestampRolloverStream&&n.audioTimestampRolloverStream.discontinuity()),t&&(n.videoSegmentStream&&(n.videoSegmentStream.gopCache_=[],n.videoTimestampRolloverStream.discontinuity()),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,ne(t),n.captionStream.reset(),t.timelineStartInfo.baseMediaDecodeTime=e),n.timedMetadataTimestampRolloverStream&&n.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(s){var t=at(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),s=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){s=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new K;var mt,gt,vt={Transmuxer:rt,VideoSegmentStream:nt,AudioSegmentStream:st,AUDIO_PROPERTIES:pt,VIDEO_PROPERTIES:ft},yt=X.parseType,bt=function(e){return new Date(1e3*e-20828448e5)},_t=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},wt={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:mt(e.subarray(78,e.byteLength))}},avcC:function(e){var t,i,n,s,r=new DataView(e.buffer,e.byteOffset,e.byteLength),o={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},a=31&e[5];
for(n=6,s=0;a>s;s++)i=r.getUint16(n),n+=2,o.sps.push(new Uint8Array(e.subarray(n,n+i))),n+=i;for(t=e[n],n++,s=0;t>s;s++)i=r.getUint16(n),n+=2,o.pps.push(new Uint8Array(e.subarray(n,n+i))),n+=i;return o},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={majorBrand:yt(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},n=8;n<e.byteLength;)i.compatibleBrands.push(yt(e.subarray(n,n+4))),n+=4;return i},dinf:function(e){return{boxes:mt(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:mt(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:yt(e.subarray(8,12)),name:""},i=8;for(i=24;i<e.byteLength;i++){if(0===e[i]){i++;break}t.name+=String.fromCharCode(e[i])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:function(e){var t,i,n=new DataView(e.buffer,e.byteOffset,e.byteLength),s=[];for(t=0;t+4<e.length;t+=i)if(i=n.getUint32(t),t+=4,0>=i)s.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:s.push("slice_layer_without_partitioning_rbsp");break;case 5:s.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:s.push("sei_rbsp");break;case 7:s.push("seq_parameter_set_rbsp");break;case 8:s.push("pic_parameter_set_rbsp");break;case 9:s.push("access_unit_delimiter_rbsp");break;default:s.push("UNKNOWN NAL - "+e[t]&31)}return s}(e)}},mdhd:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,s={version:i.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===s.version?(n+=4,s.creationTime=bt(i.getUint32(n)),n+=8,s.modificationTime=bt(i.getUint32(n)),n+=4,s.timescale=i.getUint32(n),n+=8):(s.creationTime=bt(i.getUint32(n)),n+=4,s.modificationTime=bt(i.getUint32(n)),n+=4,s.timescale=i.getUint32(n),n+=4),s.duration=i.getUint32(n),n+=4,t=i.getUint16(n),s.language+=String.fromCharCode(96+(t>>10)),s.language+=String.fromCharCode(96+((992&t)>>5)),s.language+=String.fromCharCode(96+(31&t)),s},mdia:function(e){return{boxes:mt(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:mt(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return 28<e.byteLength&&(i.streamDescriptor=mt(e.subarray(28))[0]),i},moof:function(e){return{boxes:mt(e)}},moov:function(e){return{boxes:mt(e)}},mvex:function(e){return{boxes:mt(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=bt(t.getUint32(i)),i+=8,n.modificationTime=bt(t.getUint32(i)),i+=4,n.timescale=t.getUint32(i),i+=8):(n.creationTime=bt(t.getUint32(i)),i+=4,n.modificationTime=bt(t.getUint32(i)),i+=4,n.timescale=t.getUint32(i),i+=4),n.duration=t.getUint32(i),i+=4,n.rate=t.getUint16(i)+t.getUint16(i+2)/16,i+=4,n.volume=t.getUint8(i)+t.getUint8(i+1)/8,i+=2,i+=2,i+=8,n.matrix=new Uint32Array(e.subarray(i,i+36)),i+=36,i+=24,n.nextTrackId=t.getUint32(i),n},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)i.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return i},sidx:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8),earliestPresentationTime:i.getUint32(12),firstOffset:i.getUint32(16)},s=i.getUint16(22);for(t=24;s;t+=12,s--)n.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&i.getUint32(t),subsegmentDuration:i.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&i.getUint32(t+8)});return n},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:mt(e)}},stco:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},s=i.getUint32(4);for(t=8;s;t+=4,s--)n.chunkOffsets.push(i.getUint32(t));return n},stsc:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=i.getUint32(4),s={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;n;t+=12,n--)s.sampleToChunks.push({firstChunk:i.getUint32(t),samplesPerChunk:i.getUint32(t+4),sampleDescriptionIndex:i.getUint32(t+8)});return s},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:mt(e.subarray(8))}},stsz:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:i.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)n.entries.push(i.getUint32(t));return n},stts:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},s=i.getUint32(4);for(t=8;s;t+=8,s--)n.timeToSamples.push({sampleCount:i.getUint32(t),sampleDelta:i.getUint32(t+4)});return n},styp:function(e){return wt.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4)},s=1&n.flags[2],r=2&n.flags[2],o=8&n.flags[2],a=16&n.flags[2],l=32&n.flags[2],c=65536&n.flags[0],u=131072&n.flags[0];return t=8,s&&(t+=4,n.baseDataOffset=i.getUint32(12),t+=4),r&&(n.sampleDescriptionIndex=i.getUint32(t),t+=4),o&&(n.defaultSampleDuration=i.getUint32(t),t+=4),a&&(n.defaultSampleSize=i.getUint32(t),t+=4),l&&(n.defaultSampleFlags=i.getUint32(t)),c&&(n.durationIsEmpty=!0),!s&&u&&(n.baseDataOffsetIsMoof=!0),n},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=bt(t.getUint32(i)),i+=8,n.modificationTime=bt(t.getUint32(i)),i+=4,n.trackId=t.getUint32(i),i+=4,i+=8):(n.creationTime=bt(t.getUint32(i)),i+=4,n.modificationTime=bt(t.getUint32(i)),i+=4,n.trackId=t.getUint32(i),i+=4,i+=4),n.duration=t.getUint32(i),i+=4,i+=8,n.layer=t.getUint16(i),i+=2,n.alternateGroup=t.getUint16(i),i+=2,n.volume=t.getUint8(i)+t.getUint8(i+1)/8,i+=2,i+=2,n.matrix=new Uint32Array(e.subarray(i,i+36)),i+=36,n.width=t.getUint16(i)+t.getUint16(i+2)/16,i+=4,n.height=t.getUint16(i)+t.getUint16(i+2)/16,n},traf:function(e){return{boxes:mt(e)}},trak:function(e){return{boxes:mt(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),s=1&i.flags[2],r=4&i.flags[2],o=1&i.flags[1],a=2&i.flags[1],l=4&i.flags[1],c=8&i.flags[1],u=n.getUint32(4),d=8;for(s&&(i.dataOffset=n.getInt32(d),d+=4),r&&u&&(t={flags:_t(e.subarray(d,d+4))},d+=4,o&&(t.duration=n.getUint32(d),d+=4),a&&(t.size=n.getUint32(d),d+=4),c&&(t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t),u--);u--;)t={},o&&(t.duration=n.getUint32(d),d+=4),a&&(t.size=n.getUint32(d),d+=4),l&&(t.flags=_t(e.subarray(d,d+4)),d+=4),c&&(t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t);return i},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},Ct={inspect:mt=function(e){for(var t,i,n,s,r,o=0,a=[],l=new ArrayBuffer(e.length),c=new Uint8Array(l),u=0;u<e.length;++u)c[u]=e[u];for(t=new DataView(l);o<e.byteLength;)i=t.getUint32(o),n=yt(e.subarray(o+4,o+8)),s=i>1?o+i:e.byteLength,(r=(wt[n]||function(e){return{data:e}})(e.subarray(o+8,s))).size=i,r.type=n,a.push(r),o=s;return a},textify:gt=function(e,t){var i;return t=t||0,i=new Array(2*t+1).join(" "),e.map(function(e,n){return i+e.type+"\n"+Object.keys(e).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(t){var n=i+"  "+t+": ",s=e[t];if(s instanceof Uint8Array||s instanceof Uint32Array){var r=Array.prototype.slice.call(new Uint8Array(s.buffer,s.byteOffset,s.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return r?1===r.length?n+"<"+r.join("").slice(1)+">":n+"<\n"+r.map(function(e){return i+"  "+e}).join("\n")+"\n"+i+"  >":n+"<>"}return n+JSON.stringify(s,null,2).split("\n").map(function(e,t){return 0===t?e:i+"  "+e}).join("\n")}).join("\n")+(e.boxes?"\n"+gt(e.boxes,t+1):"")}).join("\n")},parseTfdt:wt.tfdt,parseHdlr:wt.hdlr,parseTfhd:wt.tfhd,parseTrun:wt.trun},St=ce,Tt=ve.CaptionStream,kt=function(e,t){for(var i=e,n=0;n<t.length;n++){var s=t[n];if(i<s.size)return s;i-=s.size}return null},Et=function(e,t){var i=X.findBox(e,["moof","traf"]),n=X.findBox(e,["mdat"]),s={},r=[];return n.forEach(function(e,t){var n=i[t];r.push({mdat:e,traf:n})}),r.forEach(function(e){var i,n,r,o,a,l,c,u,d=e.mdat,h=e.traf,p=X.findBox(h,["tfhd"]),f=Ct.parseTfhd(p[0]),m=f.trackId,g=X.findBox(h,["tfdt"]),v=0<g.length?Ct.parseTfdt(g[0]).baseMediaDecodeTime:0,y=X.findBox(h,["trun"]);t===m&&0<y.length&&(n=y,o=v,a=(r=f).defaultSampleDuration||0,l=r.defaultSampleSize||0,c=r.trackId,u=[],n.forEach(function(e){var t=Ct.parseTrun(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=a),void 0===e.size&&(e.size=l),e.trackId=c,e.dts=o,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=o+e.compositionTimeOffset,o+=e.duration}),u=u.concat(t)}),i=function(e,t,i){var n,s,r,o,a=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(s=0;s+4<e.length;s+=r)if(r=a.getUint32(s),s+=4,!(0>=r))switch(31&e[s]){case 6:var c=e.subarray(s+1,s+1+r),u=kt(s,t);n={nalUnitType:"sei_rbsp",size:r,data:c,escapedRBSP:St(c),trackId:i},u?(n.pts=u.pts,n.dts=u.dts,o=u):(n.pts=o.pts,n.dts=o.dts),l.push(n)}return l}(d,u,m),s[m]||(s[m]=[]),s[m]=s[m].concat(i))}),s},It={generator:G,probe:X,Transmuxer:vt.Transmuxer,AudioSegmentStream:vt.AudioSegmentStream,VideoSegmentStream:vt.VideoSegmentStream,CaptionParser:function(){var e,t,i,n,s,r=!1;this.isInitialized=function(){return r},this.init=function(){e=new Tt,r=!0,e.on("data",function(e){e.startTime=e.startPts/n,e.endTime=e.endPts/n,s.captions.push(e),s.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||i===e[0]&&n===t[i])},this.parse=function(e,r,o){var a,l,c,u;if(!this.isInitialized())return null;if(!r||!o)return null;if(this.isNewInit(r,o))i=r[0],n=o[i];else if(!i||!n)return t.push(e),null;for(;0<t.length;){var d=t.shift();this.parse(d,r,o)}return l=e,u=n,null!==(a=(c=i)?{seiNals:Et(l,c)[c],timescale:u}:null)&&a.seiNals?(this.pushNals(a.seiNals),this.flushStream(),s):null},this.pushNals=function(t){return this.isInitialized()&&t&&0!==t.length?void t.forEach(function(t){e.push(t)}):null},this.flushStream=function(){return this.isInitialized()?void e.flush():null},this.clearParsedCaptions=function(){s.captions=[],s.captionStreams={}},this.resetCaptionStream=function(){return this.isInitialized()?void e.reset():null},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=i=null,s?this.clearParsedCaptions():s={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}},xt=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),Pt=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=i||{},this.self=t,this.init()}return xt(e,[{key:"init",value:function(){var e,t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new It.Transmuxer(this.options),e=this.self,(t=this.transmuxer).on("data",function(t){var i=t.initSegment;t.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};var n=t.data;t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])}),t.captionStream&&t.captionStream.on("data",function(t){e.postMessage({action:"caption",data:t})}),t.on("done",function(t){e.postMessage({action:"done"})}),t.on("gopInfo",function(t){e.postMessage({action:"gopInfo",gopInfo:t})})}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),e}();!new function(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new Pt(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new Pt(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(i)}()}),hu={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},pu=function(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,i){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})})},fu=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",i={codecCount:0};return i.codecCount=t.split(",").length,i.codecCount=i.codecCount||2,(e=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(t))&&(i.videoCodec=e[2],i.videoObjectTypeIndicator=e[3]),i.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t),i.audioProfile=i.audioProfile&&i.audioProfile[2],i},mu=function(e,t,i){return e+"/"+t+'; codecs="'+i.filter(function(e){return!!e}).join(", ")+'"'},gu=function(e,t){var i,n,s=(i=t).segments&&i.segments.length&&i.segments[0].map?"mp4":"mp2t",r=(n=t.attributes||{}).CODECS?fu(n.CODECS):hu,o=t.attributes||{},a=!0,l=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&o.AUDIO){var c=e.mediaGroups.AUDIO[o.AUDIO];if(c)for(var u in a=!(l=!0),c)if(!c[u].uri&&!c[u].playlists){a=!0;break}}l&&!r.audioProfile&&(a||(r.audioProfile=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var n in i){var s=i[n];if(s["default"]&&s.playlists)return fu(s.playlists[0].attributes.CODECS).audioProfile}return null}(e,o.AUDIO)),r.audioProfile||(Fe.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),r.audioProfile=hu.audioProfile));var d={};r.videoCodec&&(d.video=""+r.videoCodec+r.videoObjectTypeIndicator),r.audioProfile&&(d.audio="mp4a.40."+r.audioProfile);var h=mu("audio",s,[d.audio]),p=mu("video",s,[d.video]),f=mu("video",s,[d.video,d.audio]);return l?!a&&d.video?[p,h]:a||d.video?[f,h]:[h,h]:d.video?[f]:[h]},vu=function(e){return/mp4a\.\d+.\d+/i.test(e)},yu=function(e){return/avc1\.[\da-f]+/i.test(e)},bu=function(e){function t(e,i){lc(this,t);var n=dc(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Fe.EventTarget));n.timestampOffset_=0,n.pendingBuffers_=[],n.bufferUpdating_=!1,n.mediaSource_=e,n.codecs_=i,n.audioCodec_=null,n.videoCodec_=null,n.audioDisabled_=!1,n.appendAudioInitSegment_=!0,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=11<=Fe.browser.IE_VERSION;var s={remux:!1,alignGopsAtEnd:n.safeAppend_};return n.codecs_.forEach(function(e){vu(e)?n.audioCodec_=e:yu(e)&&(n.videoCodec_=e)}),n.transmuxer_=new du,n.transmuxer_.postMessage({action:"init",options:s}),n.transmuxer_.onmessage=function(e){return"data"===e.data.action?n.data_(e):"done"===e.data.action?n.done_(e):"gopInfo"===e.data.action?n.appendGopInfo_(e):void 0},Object.defineProperty(n,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(n,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(n,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(n,"buffered",{get:function(){return function(e,t,i){var n=null,s=null,r=0,o=[],a=[];if(!e&&!t)return Fe.createTimeRange();if(!e)return t.buffered;if(!t)return e.buffered;if(i)return e.buffered;if(0===e.buffered.length&&0===t.buffered.length)return Fe.createTimeRange();for(var l=e.buffered,c=t.buffered,u=l.length;u--;)o.push({time:l.start(u),type:"start"}),o.push({time:l.end(u),type:"end"});for(u=c.length;u--;)o.push({time:c.start(u),type:"start"}),o.push({time:c.end(u),type:"end"});for(o.sort(function(e,t){return e.time-t.time}),u=0;u<o.length;u++)"start"===o[u].type?2==++r&&(n=o[u].time):"end"===o[u].type&&1==--r&&(s=o[u].time),null!==n&&null!==s&&(a.push([n,s]),s=n=null);return Fe.createTimeRanges(a)}(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),n}return uc(t,Fe.EventTarget),cc(t,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),function(e,t,i){var n=t.player_;if(i.captions&&i.captions.length)for(var s in e.inbandTextTracks_||(e.inbandTextTracks_={}),i.captionStreams)if(!e.inbandTextTracks_[s]){n.tech_.trigger({type:"usage",name:"hls-608"});var r=n.textTracks().getTrackById(s);e.inbandTextTracks_[s]=r||n.addRemoteTextTrack({kind:"captions",id:s,label:s},!1).track}i.metadata&&i.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatchType)}(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"createRealSourceBuffers_",value:function(){var e=this,t=["audio","video"];t.forEach(function(i){if(e[i+"Codec_"]&&!e[i+"Buffer_"]){var n=null;if(e.mediaSource_[i+"Buffer_"])(n=e.mediaSource_[i+"Buffer_"]).updating=!1;else{var s=i+'/mp4;codecs="'+e[i+"Codec_"]+'"';n=function(e,t){var i=e.addSourceBuffer(t),n=Object.create(null);n.updating=!1,n.realBuffer_=i;var s=function(e){"function"==typeof i[e]?n[e]=function(){return i[e].apply(i,arguments)}:"undefined"==typeof n[e]&&Object.defineProperty(n,e,{get:function(){return i[e]},set:function(t){return i[e]=t}})};for(var r in i)s(r);return n}(e.mediaSource_.nativeMediaSource_,s),e.mediaSource_[i+"Buffer_"]=n}e[i+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(s){n.addEventListener(s,function(){return"audio"===i&&e.audioDisabled_?void 0:("updateend"===s&&(e[i+"Buffer_"].updating=!1),t.every(function(t){return!("audio"!==t||!e.audioDisabled_)||i===t||!e[t+"Buffer_"]||!e[t+"Buffer_"].updating})?e.trigger(s):void 0)})})}})}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:function(e,t,i){if("undefined"==typeof t||null===t||!e.length)return[];var n=Math.ceil(9e4*(t-i+3)),s=void 0;for(s=0;s<e.length&&!(e[s].pts>n);s++);return e.slice(s)}(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=function(e,t,i){if(!t.length)return e;if(i)return t.slice();for(var n=t[0].pts,s=0;s<e.length&&!(e[s].pts>=n);s++);return e.slice(0,s).concat(t)}(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=function(e,t,i,n){for(var s=Math.ceil(9e4*(t-n)),r=Math.ceil(9e4*(i-n)),o=e.slice(),a=e.length;a--&&!(e[a].pts<=r););if(-1===a)return o;for(var l=a+1;l--&&!(e[l].pts<=s););return l=Math.max(l,0),o.splice(l,a-l+1),o}(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),Zc(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var i in this.inbandTextTracks_)Zc(e,t,this.inbandTextTracks_[i])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(e,t){var i=t.type,n=t.data,s=t.initSegment;return e[i].segments.push(n),e[i].bytes+=n.byteLength,e[i].initSegment=s,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[i].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_),tu(this,e.captions,e.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var i=0,n=void 0;if(e.bytes){n=new Uint8Array(e.bytes),e.segments.forEach(function(e){n.set(e,i),i+=e.byteLength});try{t.updating=!0,t.appendBuffer(n)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),t}(),_u=function(i){function n(){lc(this,n);var i=dc(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),s=void 0;for(s in i.nativeMediaSource_=new e.MediaSource,i.nativeMediaSource_)s in n.prototype||"function"!=typeof i.nativeMediaSource_[s]||(i[s]=i.nativeMediaSource_[s].bind(i.nativeMediaSource_));return i.duration_=NaN,Object.defineProperty(i,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){(this.duration_=e)===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(i,"seekable",{get:function(){return this.duration_===1/0?Fe.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(i,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(i,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),i.sourceBuffers=[],i.activeSourceBuffers_=[],i.updateActiveSourceBuffers_=function(){if(i.activeSourceBuffers_.length=0,1===i.sourceBuffers.length){var e=i.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void i.activeSourceBuffers_.push(e)}for(var t=!1,n=!0,s=0;s<i.player_.audioTracks().length;s++){var r=i.player_.audioTracks()[s];if(r.enabled&&"main"!==r.kind){n=!(t=!0);break}}i.sourceBuffers.forEach(function(e,s){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=t;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,n=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=s?n:!n,e.audioDisabled_))return;i.activeSourceBuffers_.push(e)})},i.onPlayerMediachange_=function(){i.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},i.onHlsReset_=function(){i.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})})},i.onHlsSegmentTimeMapping_=function(e){i.sourceBuffers.forEach(function(t){return t.timeMapping_=e.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},i),i.on("sourceopen",function(e){var n=t.querySelector('[src="'+i.url_+'"]');n&&(i.player_=Fe(n.parentNode),i.player_.tech_.on("hls-reset",i.onHlsReset_),i.player_.tech_.on("hls-segment-time-mapping",i.onHlsSegmentTimeMapping_),i.player_.audioTracks&&i.player_.audioTracks()&&(i.player_.audioTracks().on("change",i.updateActiveSourceBuffers_),i.player_.audioTracks().on("addtrack",i.updateActiveSourceBuffers_),i.player_.audioTracks().on("removetrack",i.updateActiveSourceBuffers_)),i.player_.on("mediachange",i.onPlayerMediachange_))}),i.on("sourceended",function(e){for(var t=eu(i.duration),n=0;n<i.sourceBuffers.length;n++){var s=i.sourceBuffers[n],r=s.metadataTrack_&&s.metadataTrack_.cues;r&&r.length&&(r[r.length-1].endTime=t)}}),i.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),i}return uc(n,Fe.EventTarget),cc(n,[{key:"addSeekableRange_",value:function(e,t){var i=void 0;if(this.duration!==1/0)throw(i=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",i.code=11,i;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t,i,n=void 0,s=(t={type:"",parameters:{}},i=e.trim().split(";"),t.type=i.shift().trim(),i.forEach(function(e){var i=e.trim().split("=");if(1<i.length){var n=i[0].replace(/"/g,"").trim(),s=i[1].replace(/"/g,"").trim();t.parameters[n]=s}}),t);if(/^(video|audio)\/mp2t$/i.test(s.type)){var r=[];s.parameters&&s.parameters.codecs&&(r=s.parameters.codecs.split(","),r=(r=pu(r)).filter(function(e){return vu(e)||yu(e)})),0===r.length&&(r=["avc1.4d400d","mp4a.40.2"]),n=new bu(this,r),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),n.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else n=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(n),n}}]),n}(),wu=0;Fe.mediaSources={};var Cu=function(e,t){var i=Fe.mediaSources[e];if(!i)throw new Error("Media Source not found (Video.js)");i.trigger({type:"sourceopen",swfId:t})},Su=function(){return!!e.MediaSource&&!!e.MediaSource.isTypeSupported&&e.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},Tu=function(){if(this.MediaSource={open:Cu,supportsNativeMediaSources:Su},Su())return new _u;throw new Error("Cannot use create a virtual MediaSource for this video")};Tu.open=Cu,Tu.supportsNativeMediaSources=Su;var ku={createObjectURL:function(t){var i=void 0;return t instanceof _u?(i=e.URL.createObjectURL(t.nativeMediaSource_),t.url_=i):t instanceof _u?(i="blob:vjs-media-source/"+wu,wu++,Fe.mediaSources[i]=t,i):(i=e.URL.createObjectURL(t),t.url_=i)}};Fe.MediaSource=Tu,Fe.URL=ku;var Eu=Fe.EventTarget,Iu=Fe.mergeOptions,xu=function(e,t){for(var i=Iu(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),n=0;n<t.playlists.length;n++){var s=vc(i,t.playlists[n]);s&&(i=s)}return gc(t,function(e,t,n,s){if(e.playlists&&e.playlists.length){var r=e.playlists[0].uri,o=vc(i,e.playlists[0]);o&&((i=o).mediaGroups[t][n][s].playlists[0]=i.playlists[r])}}),i},Pu=function(t){function i(t,n,s,r){lc(this,i);var o=dc(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(o.hls_=n,o.withCredentials=s,!t)throw new Error("A non-empty playlist URL or playlist is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_()}),"string"==typeof t?(o.srcUrl=t,o.state="HAVE_NOTHING",dc(o)):(o.masterPlaylistLoader_=r,o.state="HAVE_METADATA",o.started=!0,o.media(t),e.setTimeout(function(){o.trigger("loadedmetadata")},0),o)}return uc(i,Eu),cc(i,[{key:"dispose",value:function(){this.stopRequest(),e.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var t=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var i=!this.media_||e.uri!==this.media_.uri;this.state="HAVE_METADATA",i&&(this.media_&&this.trigger("mediachanging"),this.media_=e,this.refreshMedia_(),"HAVE_MASTER"!==t&&this.trigger("mediachange"))}},{key:"pause",value:function(){this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(){this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var e=ho(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});e.uri=this.srcUrl;for(var t=0;t<e.playlists.length;t++){var i="placeholder-uri-"+t;e.playlists[t].uri=i,e.playlists[i]=e.playlists[t]}return gc(e,function(t,i,n,s){if(t.playlists&&t.playlists.length){var r="placeholder-uri-"+i+"-"+n+"-"+s;
t.playlists[0].uri=r,e.playlists[r]=t.playlists[0]}}),yc(e),bc(e),e}},{key:"start",value:function(){var e=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,i){if(e.request){if(e.request=null,t)return e.error={status:i.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:i.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?e.masterLoaded_=Date.parse(i.responseHeaders.date):e.masterLoaded_=Date.now(),e.syncClientServerClock_(e.onClientServerClockSync_.bind(e))}})}},{key:"syncClientServerClock_",value:function(e){var t=this,i=po(this.masterXml_);return null===i?(this.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===i.method?(this.clientOffset_=i.value-Date.now(),e()):void(this.request=this.hls_.xhr({uri:ac(this.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials},function(n,s){if(t.request){if(n)return t.clientOffset_=t.masterLoaded_-Date.now(),e();var r=void 0;r="HEAD"===i.method?s.responseHeaders&&s.responseHeaders.date?Date.parse(s.responseHeaders.date):t.masterLoaded_:Date.parse(s.responseText),t.clientOffset_=r-Date.now(),e()}}))}},{key:"onClientServerClockSync_",value:function(){var t=this;this.master=this.parseMasterXml(),this.state="HAVE_MASTER",this.trigger("loadedplaylist"),this.media_||this.media(this.master.playlists[0]),e.setTimeout(function(){t.trigger("loadedmetadata")},0),this.master.minimumUpdatePeriod&&e.setTimeout(function(){t.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}},{key:"refreshXml_",value:function(){var t=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(i,n){if(t.request){if(t.request=null,i)return t.error={status:n.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.masterXml_=n.responseText;var s=t.parseMasterXml();t.master=xu(t.master,s),e.setTimeout(function(){t.trigger("minimumUpdatePeriod")},t.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(){var t=this,i=void 0,n=void 0;n=this.masterPlaylistLoader_?(i=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.parseMasterXml()):(i=this.master,this.parseMasterXml());var s=xu(i,n);s?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=s:this.master=s,this.media_=s.playlists[this.media_.uri]):this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=e.setTimeout(function(){t.trigger("mediaupdatetimeout")},_c(this.media(),!!s))),this.trigger("loadedplaylist")}}]),i}(),Au=function(e){return Fe.log.debug?Fe.log.debug.bind(Fe,"VHS:",e+" >"):function(){}},Du=function(){function e(t,i,n,s){lc(this,e),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,this.type_=n,this.mimeType_=i,this.logger_=Au("SourceUpdater["+n+"]["+i+"]"),"closed"===t.readyState?t.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,i,s)):this.createSourceBuffer_(i,s)}return cc(e,[{key:"createSourceBuffer_",value:function(e,t){var i=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?t.on("sourcebufferadded",function(){i.start_()}):this.start_()}},{key:"start_",value:function(){var e=this;this.started_=!0,this.onUpdateendCallback_=function(){var t=e.pendingCallback_;e.pendingCallback_=null,e.logger_("buffered ["+Kc(e.buffered())+"]"),t&&t(),e.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(e){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function(e,t){var i=this;this.processedAppend_=!0,this.queueCallback_(function(){i.sourceBuffer_.appendBuffer(e)},t)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:Fe.createTimeRanges()}},{key:"remove",value:function(e,t){var i=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:We;this.processedAppend_&&this.queueCallback_(function(){i.logger_("remove ["+e+" => "+t+"]"),i.sourceBuffer_.remove(e,t)},n)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(e){var t=this;return"undefined"!=typeof e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),e}(),Lu={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Ou=2,Mu=-101,Nu=-102,Ru=function(e){var t,i,n={};return e.byterange&&(n.Range=(t=e.byterange,i=t.offset+t.length-1,"bytes="+t.offset+"-"+i)),n},Uu=function(e){e.forEach(function(e){e.abort()})},$u=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Mu,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Nu,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Ou,xhr:t}:null},Hu=function(e,t,i){var n=[],s=0;return function(r,o){if(r&&(Uu(e),n.push(r)),(s+=1)===e.length){if(o.endOfAllRequests=Date.now(),0<n.length){var a=n.reduce(function(e,t){return t.code>e.code?t:e});return i(a,o)}return o.encryptedBytes?(c=o,u=i,(l=t).addEventListener("message",function d(e){if(e.data.source===c.requestId){l.removeEventListener("message",d);var t=e.data.decrypted;return c.bytes=new Uint8Array(t.bytes,t.byteOffset,t.byteLength),u(null,c)}}),void l.postMessage(zc({source:c.requestId,encrypted:c.encryptedBytes,key:c.key.bytes,iv:c.key.iv}),[c.encryptedBytes.buffer,c.key.bytes.buffer])):i(null,o)}var l,c,u}},Bu=function(e,t){return function(i){var n,s,r;return e.stats=Fe.mergeOptions(e.stats,(s=(n=i).target,(r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-s.requestTime||0}).bytesReceived=n.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(i,e)}},Fu=function(e,t,i,n,s,r,o){var a,l,c,u,d,h=[],p=Hu(h,i,o);if(s.key){var f=e(Fe.mergeOptions(t,{uri:s.key.resolvedUri,responseType:"arraybuffer"}),(a=s,l=p,function(e,t){var i=t.response,n=$u(e,t);if(n)return l(n,a);if(16!==i.byteLength)return l({status:t.status,message:"Invalid HLS key at URL: "+t.uri,code:Ou,xhr:t},a);var s=new DataView(i);return a.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),l(null,a)}));h.push(f)}if(s.map&&!s.map.bytes){var m=e(Fe.mergeOptions(t,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:Ru(s.map)}),(c=s,u=n,d=p,function(e,t){var i=t.response,n=$u(e,t);return n?d(n,c):0===i.byteLength?d({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:Ou,xhr:t},c):(c.map.bytes=new Uint8Array(t.response),u.isInitialized()||u.init(),c.map.timescales=ta.timescale(c.map.bytes),c.map.videoTrackIds=ta.videoTrackIds(c.map.bytes),d(null,c))}));h.push(m)}var g,v,y,b=e(Fe.mergeOptions(t,{uri:s.resolvedUri,responseType:"arraybuffer",headers:Ru(s)}),(g=s,v=n,y=p,function(e,t){var i,n=t.response,s=$u(e,t),r=void 0;return s?y(s,g):0===n.byteLength?y({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:Ou,xhr:t},g):(g.stats={bandwidth:(i=t).bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0},g.key?g.encryptedBytes=new Uint8Array(t.response):g.bytes=new Uint8Array(t.response),g.map&&g.map.bytes&&(v.isInitialized()||v.init(),(r=v.parse(g.bytes,g.map.videoTrackIds,g.map.timescales))&&r.captions&&(g.captionStreams=r.captionStreams,g.fmp4Captions=r.captions)),y(null,g))}));return b.addEventListener("progress",Bu(s,r)),h.push(b),function(){return Uu(h)}},ju=function(t,i){var n;return t&&(n=e.getComputedStyle(t))?n[i]:""},zu=function(e,t){var i=e.slice();e.sort(function(e,n){var s=t(e,n);return 0===s?i.indexOf(e)-i.indexOf(n):s})},Wu=function(t,i){var n=void 0,s=void 0;return t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||e.Number.MAX_VALUE,i.attributes.BANDWIDTH&&(s=i.attributes.BANDWIDTH),n-(s=s||e.Number.MAX_VALUE)},Vu=function(e,t,i){if(!e||!t)return!1;var n=i===e.segments.length;return e.endList&&"open"===t.readyState&&n},qu=function(e){return"number"==typeof e&&isFinite(e)},Gu=function(t){function i(e){lc(this,i);var t=dc(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return t.bandwidth=e.bandwidth,t.throughput={rate:0,count:0},t.roundTrip=NaN,t.resetStats_(),t.mediaIndex=null,t.hasPlayed_=e.hasPlayed,t.currentTime_=e.currentTime,t.seekable_=e.seekable,t.seeking_=e.seeking,t.duration_=e.duration,t.mediaSource_=e.mediaSource,t.hls_=e.hls,t.loaderType_=e.loaderType,t.startingMedia_=void 0,t.segmentMetadataTrack_=e.segmentMetadataTrack,t.goalBufferLength_=e.goalBufferLength,t.sourceType_=e.sourceType,t.inbandTextTracks_=e.inbandTextTracks,t.state_="INIT",t.checkBufferTimeout_=null,t.error_=void 0,t.currentTimeline_=-1,t.pendingSegment_=null,t.mimeType_=null,t.sourceUpdater_=null,t.xhrOptions_=null,t.activeInitSegmentId_=null,t.initSegments_={},t.captionParser_=new Rl,t.decrypter_=e.decrypter,t.syncController_=e.syncController,t.syncPoint_={segmentIndex:0,time:0},t.syncController_.on("syncinfoupdate",function(){return t.trigger("syncinfoupdate")}),t.mediaSource_.addEventListener("sourceopen",function(){return t.ended_=!1}),t.fetchAtBuffer_=!1,t.logger_=Au("SegmentLoader["+t.loaderType_+"]"),Object.defineProperty(t,"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),t}return uc(i,Fe.EventTarget),cc(i,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return"undefined"!=typeof e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():Fe.createTimeRanges()}},{key:"initSegment",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var i=Wc(e),n=this.initSegments_[i];return t&&!n&&e.bytes&&(this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),n||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new Du(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(e){var i=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var s=i?i.id:null;if(this.logger_("playlist update ["+s+" => "+e.id+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(i&&i.uri===e.uri){var r=e.mediaSequence-i.mediaSequence;this.logger_("live window shift ["+r+"]"),null!==this.mediaIndex&&(this.mediaIndex-=r),n&&(n.mediaIndex-=r,0<=n.mediaIndex&&(n.segment=e.segments[n.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(e){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),e),this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,t,i){if(this.sourceUpdater_&&this.sourceUpdater_.remove(e,t,i),Zc(e,t,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)Zc(e,t,this.inbandTextTracks_[n])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=e.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=e.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);e&&(Vu(this.playlist_,this.mediaSource_,e.mediaIndex)?this.endOfStream():(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((e.timeline!==this.currentTimeline_||null!==e.startOfSegment&&e.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_.clearAllCaptions()),this.loadSegment_(e)))}}},{key:"checkBuffer_",value:function(e,t,i,n,s,r){var o=0,a=void 0;e.length&&(o=e.end(e.length-1));var l=Math.max(0,o-s);if(!t.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!n&&l>=1)return null;if(null===r)return i=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,i,null,!0);if(null!==i){var c=t.segments[i];return a=c&&c.end?c.end:o,this.generateSegmentInfo_(t,i+1,a,!1)}if(this.fetchAtBuffer_){var u=Uc.getMediaInfoForTime(t,o,r.segmentIndex,r.time);i=u.mediaIndex,a=u.startTime}else{var d=Uc.getMediaInfoForTime(t,s,r.segmentIndex,r.time);i=d.mediaIndex,a=d.startTime}return this.generateSegmentInfo_(t,i,a,!1)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var i=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return i.length?i[Math.min(i.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,t,i,n){if(0>t||t>=e.segments.length)return null;var s=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:s.resolvedUri,mediaIndex:t,isSyncRequest:n,startOfSegment:i,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:s.timeline,duration:s.duration,segment:s}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),i=e.bandwidth,n=this.pendingSegment_.duration,s=Uc.estimateSegmentRequestTime(n,i,this.playlist_,e.bytesReceived),r=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return((e.length?e.end(e.length-1):0)-t)/i}(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(r>=s)return!1;var o=function(e){var t=e.master,i=e.currentTime,n=e.bandwidth,s=e.duration,r=e.segmentDuration,o=e.timeUntilRebuffer,a=e.currentTimeline,l=e.syncController,c=t.playlists.filter(function(e){return!Uc.isIncompatible(e)}),u=c.filter(Uc.isEnabled);u.length||(u=c.filter(function(e){return!Uc.isDisabled(e)}));var d=u.filter(Uc.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=l.getSyncPoint(e,s,a,i)?1:2;return{playlist:e,rebufferingImpact:Uc.estimateSegmentRequestTime(r,n,e)*t-o}}),h=d.filter(function(e){return e.rebufferingImpact<=0});return zu(h,function(e,t){return Wu(t.playlist,e.playlist)}),h.length?h[0]:(zu(d,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),d[0]||null)}({master:this.hls_.playlists.master,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:r,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var a=s-r-o.rebufferingImpact,l=.5;return Gc>=r&&(l=1),!o.playlist||o.playlist.uri===this.playlist_.uri||l>a?!1:(this.bandwidth=o.playlist.attributes.BANDWIDTH*Lu.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=Fu(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var t,i,n,s,r=(t=this.seekable_(),i=this.currentTime_(),n=this.playlist_.targetDuration||10,s=void 0,s=t.length&&0<t.start(0)&&t.start(0)<i?t.start(0):i-30,Math.min(s,i-n));r>0&&this.remove(0,r)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t=e.segment,i={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var n=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key={resolvedUri:t.key.resolvedUri,iv:n}}return t.map&&(i.map=this.initSegment(t.map)),i}},{key:"segmentRequestFinished_",value:function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===Nu?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===Mu?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(!function(e,t,i){for(var n in i)if(!e[n]){t.trigger({type:"usage",name:"hls-608"});var s=t.textTracks().getTrackById(n);e[n]=s||t.addRemoteTextTrack({kind:"captions",id:n,label:n},!1).track}}(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),function(e){var t=e.inbandTextTracks,i=e.captionArray,n=e.timestampOffset;if(i){var s=window.WebKitDataCue||window.VTTCue;i.forEach(function(e){var i=e.stream,r=e.startTime,o=e.endTime;t[i]&&(r+=n,o+=n,t[i].addCue(new s(r,o,e.text)))})}}({inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_){var t=this.pendingSegment_,i=t.segment,n=this.syncController_.probeSegmentInfo(t);"undefined"==typeof this.startingMedia_&&n&&(n.containsAudio||n.containsVideo)&&(this.startingMedia_={containsAudio:n.containsAudio,containsVideo:n.containsVideo});var s,r,o,a=(s=this.loaderType_,r=this.startingMedia_,o=n,"main"===s&&r&&o?o.containsAudio||o.containsVideo?r.containsVideo&&!o.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!r.containsVideo&&o.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(a)return this.error({message:a,blacklistDuration:1/0}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset"));var l,c,u,d,h,p,f,m,g,v,y,b=this.syncController_.mappingForTimeline(t.timeline);if(null!==b&&this.trigger({type:"segmenttimemapping",mapping:b}),this.state="APPENDING",i.map){var _=Wc(i.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==_){var w=this.initSegment(i.map);this.sourceUpdater_.appendBuffer(w.bytes,function(){e.activeInitSegmentId_=_})}}t.byteLength=t.bytes.byteLength,"number"==typeof i.start&&"number"==typeof i.end?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration,this.logger_((c=(l=t).segment,u=c.start,d=c.end,h=l.playlist,p=h.mediaSequence,f=h.id,m=h.segments,g=void 0===m?[]:m,v=l.mediaIndex,y=l.timeline,["appending ["+v+"] of ["+p+", "+(p+g.length)+"] from playlist ["+f+"]","["+u+" => "+d+"] in timeline ["+y+"]"].join(" "))),this.sourceUpdater_.appendBuffer(t.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,i=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(i&&this.trigger("bandwidthupdate"),this.trigger("progress"),Vu(e.playlist,this.mediaSource_,e.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(t){if(this.segmentMetadataTrack_){var i=t.segment,n=i.start,s=i.end;if(qu(n)&&qu(s)){Zc(n,s,this.segmentMetadataTrack_);var r=e.WebKitDataCue||e.VTTCue,o={bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.uri,start:n,end:s},a=new r(n,s,JSON.stringify(o));a.value=o,this.segmentMetadataTrack_.addCue(a)}}}}]),i}(),Yu=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},Xu=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),Qu=function(t){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};lc(this,i);var n=dc(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));return n.mediaSource_=null,n.subtitlesTrack_=null,n}return uc(i,Gu),cc(i,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return Fe.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return Fe.createTimeRanges([[t,i]])}},{key:"initSegment",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var i=Wc(e),n=this.initSegments_[i];if(t&&!n&&e.bytes){var s=Xu.byteLength+e.bytes.byteLength,r=new Uint8Array(s);r.set(e.bytes),r.set(Xu,e.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:r}}return n||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return"undefined"==typeof e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(e,t){Zc(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var i=this.pendingSegment_,n=i.segment;if("function"!=typeof e.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var s=function(){t.handleSegment_()};return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",s),void this.subtitlesTrack_.tech_.one("vttjserror",function(){t.subtitlesTrack_.tech_.off("vttjsloaded",s),t.error({message:"Error loading vtt.js"}),t.state="READY",t.pause(),t.trigger("error")})}n.requested=!0;try{this.parseVTTCues_(i)}catch(i){return this.error({message:i.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=n.duration,i.cues.length&&this.remove(i.cues[0].endTime,i.cues[i.cues.length-1].endTime),i.cues.forEach(function(e){t.subtitlesTrack_.addCue(e)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(t){var i=void 0,n=!1;"function"==typeof e.TextDecoder?i=new e.TextDecoder("utf8"):(i=e.WebVTT.StringDecoder(),n=!0);var s=new e.WebVTT.Parser(e,e.vttjs,i);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},s.oncue=t.cues.push.bind(t.cues),s.ontimestampmap=function(e){return t.timestampmap=e},s.onparsingerror=function(e){Fe.log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map){var r=t.segment.map.bytes;n&&(r=Yu(r)),s.parse(r)}var o=t.bytes;n&&(o=Yu(o)),s.parse(o),s.flush()}},{key:"updateTimeMapping_",value:function(e,t,i){var n=e.segment;if(t)if(e.cues.length){var s=e.timestampmap,r=s.MPEGTS/9e4-s.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=r,e.endTime+=r}),!i.syncInfo){var o=e.cues[0].startTime,a=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(o,a-n.duration)}}}else n.empty=!0}}]),i}(),Ku=function(e,t){for(var i=e.cues,n=0;n<i.length;n++){var s=i[n];if(t>=s.adStartTime&&t<=s.adEndTime)return s}return null},Ju=Kl,Zu=[{name:"VOD",run:function(e,t,i,n,s){return i===1/0?null:{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(e,t,i,n,s){if(!e.datetimeToDisplayTime)return null;var r=t.segments||[],o=null,a=null;s=s||0;for(var l=0;l<r.length;l++){var c=r[l];if(c.dateTimeObject){var u=c.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,d=Math.abs(s-u);if(null!==a&&d>a)break;a=d,o={time:u,segmentIndex:l}}}return o}},{name:"Segment",run:function(e,t,i,n,s){var r=t.segments||[],o=null,a=null;s=s||0;for(var l=0;l<r.length;l++){var c=r[l];if(c.timeline===n&&"undefined"!=typeof c.start){var u=Math.abs(s-c.start);if(null!==a&&u>a)break;(!o||null===a||a>=u)&&(a=u,o={time:c.start,segmentIndex:l})}}return o}},{name:"Discontinuity",run:function(e,t,i,n,s){var r=null;if(s=s||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,a=0;a<t.discontinuityStarts.length;a++){var l=t.discontinuityStarts[a],c=t.discontinuitySequence+a+1,u=e.discontinuities[c];if(u){var d=Math.abs(s-u.time);if(null!==o&&d>o)break;(!r||null===o||o>=d)&&(o=d,r={time:u.time,segmentIndex:l})}}return r}},{name:"Playlist",run:function(e,t,i,n,s){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],ed=function(e){function t(){lc(this,t);var e=dc(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.inspectCache_=void 0,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=Au("SyncController"),e}return uc(t,Fe.EventTarget),cc(t,[{key:"getSyncPoint",value:function(e,t,i,n){var s=this.runStrategies_(e,t,i,n);return s.length?this.selectSyncPoint_(s,{key:"time",value:n}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return 0<n.segmentIndex&&(n.time*=-1),Math.abs(n.time+kc(e,n.segmentIndex,0))}},{key:"runStrategies_",value:function(e,t,i,n){for(var s=[],r=0;r<Zu.length;r++){var o=Zu[r],a=o.run(this,e,t,i,n);a&&(a.strategy=o.name,s.push({strategy:o.name,syncPoint:a}))}return s}},{key:"selectSyncPoint_",value:function(e,t){for(var i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy,r=1;r<e.length;r++){var o=Math.abs(e[r].syncPoint[t.key]-t.value);n>o&&(n=o,i=e[r].syncPoint,s=e[r].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+s+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+"]"),i}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var i=t.mediaSequence-e.mediaSequence-1;i>=0;i--){var n=e.segments[i];if(n&&"undefined"!=typeof n.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:n.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t=e.segment,i=e.playlist,n=void 0;return(n=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,n)&&(this.saveDiscontinuitySyncInfo_(e),i.syncInfo||(i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:t.start})),n}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,i=ta.timescale(t.map.bytes),n=ta.startTime(i,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=n),
{start:n,end:n+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=Ju(e.bytes,this.inspectCache_),i=void 0,n=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,i=t.video[0].dtsTime,n=t.video[1].dtsTime):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,i=t.audio[0].dtsTime,n=t.audio[1].dtsTime),{start:i,end:n,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(e){return"undefined"==typeof this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return"undefined"==typeof this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var i=e.segment,n=this.timelines[e.timeline];if(null!==e.timestampOffset)n={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=n,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+n.time+"] [mapping: "+n.mapping+"]"),i.start=e.startOfSegment,i.end=t.end+n.mapping;else{if(!n)return!1;i.start=t.start+n.mapping,i.end=t.end+n.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var s=t.discontinuityStarts[n],r=t.discontinuitySequence+n+1,o=s-e.mediaIndex,a=Math.abs(o);if(!this.discontinuities[r]||this.discontinuities[r].accuracy>a){var l=void 0;l=0>o?i.start-kc(t,e.mediaIndex,s):i.end+kc(t,e.mediaIndex+1,s),this.discontinuities[r]={time:l,accuracy:a}}}}}]),t}(),td=new je("./decrypter-worker.worker.js",function(e,t){var i,n,s,r,o,a,l,c,u=this;i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=null,r=function(){function e(t){i(this,e),s||(s=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],i=e[1],n=t[4],s=i[4],r=void 0,o=void 0,a=void 0,l=[],c=[],u=void 0,d=void 0,h=void 0,p=void 0,f=void 0;for(r=0;256>r;r++)c[(l[r]=r<<1^283*(r>>7))^r]=r;for(o=a=0;!n[o];o^=u||1,a=c[a]||1)for(h=(h=a^a<<1^a<<2^a<<3^a<<4)>>8^255&h^99,f=16843009*l[d=l[u=l[s[n[o]=h]=o]]]^65537*d^257*u^16843008*o,p=257*l[h]^16843008*h,r=0;4>r;r++)t[r][o]=p=p<<24^p>>>8,i[r][h]=f=f<<24^f>>>8;for(r=0;5>r;r++)t[r]=t[r].slice(0),i[r]=i[r].slice(0);return e}()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];var n=void 0,r=void 0,o=void 0,a=void 0,l=void 0,c=this._tables[0][4],u=this._tables[1],d=t.length,h=1;if(4!==d&&6!==d&&8!==d)throw new Error("Invalid aes key size");for(a=t.slice(0),l=[],this._key=[a,l],n=d;4*d+28>n;n++)o=a[n-1],(n%d==0||8===d&&n%d==4)&&(o=c[o>>>24]<<24^c[o>>16&255]<<16^c[o>>8&255]<<8^c[255&o],n%d==0&&(o=o<<8^o>>>24^h<<24,h=h<<1^283*(h>>7))),a[n]=a[n-d]^o;for(r=0;n;r++,n--)o=a[3&r?n:n-4],l[r]=4>=n||4>r?o:u[0][c[o>>>24]]^u[1][c[o>>16&255]]^u[2][c[o>>8&255]]^u[3][c[255&o]]}return e.prototype.decrypt=function(e,t,i,n,s,r){var o=this._key[1],a=e^o[0],l=n^o[1],c=i^o[2],u=t^o[3],d=void 0,h=void 0,p=void 0,f=o.length/4-2,m=void 0,g=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],w=v[3],C=v[4];for(m=0;f>m;m++)d=y[a>>>24]^b[l>>16&255]^_[c>>8&255]^w[255&u]^o[g],h=y[l>>>24]^b[c>>16&255]^_[u>>8&255]^w[255&a]^o[g+1],p=y[c>>>24]^b[u>>16&255]^_[a>>8&255]^w[255&l]^o[g+2],u=y[u>>>24]^b[a>>16&255]^_[l>>8&255]^w[255&c]^o[g+3],g+=4,a=d,l=h,c=p;for(m=0;4>m;m++)s[(3&-m)+r]=C[a>>>24]<<24^C[l>>16&255]<<16^C[c>>8&255]<<8^C[255&u]^o[g++],d=a,a=l,l=c,c=u,u=d},e}(),o=function(){function e(){i(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),i>-1},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;i>n;++n)t[n].call(this,arguments[1]);else for(var s=Array.prototype.slice.call(arguments,1),r=t.length,o=0;r>o;++o)t[o].apply(this,s)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),a=function(e){function t(){i(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,o));return n.jobs=[],n.delay=1,n.timeout_=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},t.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(o),l=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},c=function(){function e(t,n,s,r){i(this,e);var o=e.STEP,c=new Int32Array(t.buffer),u=new Uint8Array(t.byteLength),d=0;for(this.asyncStream_=new a,this.asyncStream_.push(this.decryptChunk_(c.subarray(d,d+o),n,s,u)),d=o;d<c.length;d+=o)s=new Uint32Array([l(c[d-4]),l(c[d-3]),l(c[d-2]),l(c[d-1])]),this.asyncStream_.push(this.decryptChunk_(c.subarray(d,d+o),n,s,u));this.asyncStream_.push(function(){var e;r(null,(e=u).subarray(0,e.byteLength-e[e.byteLength-1]))})}return e.prototype.decryptChunk_=function(e,t,i,n){return function(){var s=function(e,t,i){var n=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),s=new r(Array.prototype.slice.call(t)),o=new Uint8Array(e.byteLength),a=new Int32Array(o.buffer),c=void 0,u=void 0,d=void 0,h=void 0,p=void 0,f=void 0,m=void 0,g=void 0,v=void 0;for(c=i[0],u=i[1],d=i[2],h=i[3],v=0;v<n.length;v+=4)p=l(n[v]),f=l(n[v+1]),m=l(n[v+2]),g=l(n[v+3]),s.decrypt(p,f,m,g,a,v),a[v]=l(a[v]^c),a[v+1]=l(a[v+1]^u),a[v+2]=l(a[v+2]^d),a[v+3]=l(a[v+3]^h),c=p,u=f,d=m,h=g;return o}(e,t,i);n.set(s,e.byteOffset)}},n(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),new function(e){e.onmessage=function(t){var i=t.data,n=new Uint8Array(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength),s=new Uint32Array(i.key.bytes,i.key.byteOffset,i.key.byteLength/4),r=new Uint32Array(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/4);new c(n,s,r,function(t,n){var s,r;e.postMessage((s={source:i.source,decrypted:n},r={},Object.keys(s).forEach(function(e){var t=s[e];ArrayBuffer.isView(t)?r[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:r[e]=t}),r),[n.buffer])})}}(u)}),id=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},nd=function(e,t){(t.activePlaylistLoader=e).load()},sd={AUDIO:function(e,t){return function(){var i=t.segmentLoaders[e],n=t.mediaTypes[e],s=t.blacklistCurrentPlaylist;id(i,n);var r=n.activeTrack(),o=n.activeGroup(),a=(o.filter(function(e){return e["default"]})[0]||o[0]).id,l=n.tracks[a];if(r!==l){for(var c in Fe.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[c].enabled=n.tracks[c]===l;n.onTrackChanged()}else s({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var i=t.segmentLoaders[e],n=t.mediaTypes[e];Fe.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),id(i,n);var s=n.activeTrack();s&&(s.mode="disabled"),n.onTrackChanged()}}},rd={AUDIO:function(e,t,i){if(t){var n=i.tech,s=i.requestOptions,r=i.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();r.playlist(e,s),(!n.paused()||e.endList&&"none"!==n.preload())&&r.load()}),t.on("loadedplaylist",function(){r.playlist(t.media(),s),n.paused()||r.load()}),t.on("error",sd[e](e,i))}},SUBTITLES:function(e,t,i){var n=i.tech,s=i.requestOptions,r=i.segmentLoaders[e],o=i.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();r.playlist(e,s),r.track(o.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&r.load()}),t.on("loadedplaylist",function(){r.playlist(t.media(),s),n.paused()||r.load()}),t.on("error",sd[e](e,i))}},od=function(e,t){return function(i){return i.attributes[e]===t}},ad=function(e){return function(t){return t.resolvedUri===e}},ld={AUDIO:function(e,t){var i,n,s=t.hls,r=t.sourceType,o=t.segmentLoaders[e],a=t.requestOptions.withCredentials,l=t.master,c=l.mediaGroups,u=l.playlists,d=t.mediaTypes[e],h=d.groups,p=d.tracks,f=t.masterPlaylistLoader;for(var m in c[e]&&0!==Object.keys(c[e]).length||(c[e]={main:{"default":{"default":!0}}}),c[e]){h[m]||(h[m]=[]);var g=u.filter(od(e,m));for(var v in c[e][m]){var y=c[e][m][v];g.filter(ad(y.resolvedUri)).length&&delete y.resolvedUri;var b=void 0;if(b=y.resolvedUri?new wc(y.resolvedUri,s,a):y.playlists&&"dash"===r?new Pu(y.playlists[0],s,a,f):null,y=Fe.mergeOptions({id:v,playlistLoader:b},y),rd[e](e,y.playlistLoader,t),h[m].push(y),"undefined"==typeof p[v]){var _=new Fe.AudioTrack({id:v,kind:(i=y,n=void 0,n=i["default"]?"main":"alternative",i.characteristics&&0<=i.characteristics.indexOf("public.accessibility.describes-video")&&(n="main-desc"),n),enabled:!1,language:y.language,"default":y["default"],label:v});p[v]=_}}}o.on("error",sd[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,n=t.hls,s=t.sourceType,r=t.segmentLoaders[e],o=t.requestOptions.withCredentials,a=t.master.mediaGroups,l=t.mediaTypes[e],c=l.groups,u=l.tracks,d=t.masterPlaylistLoader;for(var h in a[e])for(var p in c[h]||(c[h]=[]),a[e][h])if(!a[e][h][p].forced){var f=a[e][h][p],m=void 0;if("hls"===s?m=new wc(f.resolvedUri,n,o):"dash"===s&&(m=new Pu(f.playlists[0],n,o,d)),f=Fe.mergeOptions({id:p,playlistLoader:m},f),rd[e](e,f.playlistLoader,t),c[h].push(f),"undefined"==typeof u[p]){var g=i.addRemoteTextTrack({id:p,kind:"subtitles","default":f["default"]&&f.autoselect,language:f.language,label:p},!1).track;u[p]=g}}r.on("error",sd[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,n=t.master.mediaGroups,s=t.mediaTypes[e],r=s.groups,o=s.tracks;for(var a in n[e])for(var l in r[a]||(r[a]=[]),n[e][a]){var c=n[e][a][l];if(c.instreamId.match(/CC\d/)&&(r[a].push(Fe.mergeOptions({id:l},c)),"undefined"==typeof o[l])){var u=i.addRemoteTextTrack({id:c.instreamId,kind:"captions","default":c["default"]&&c.autoselect,language:c.language,label:l},!1).track;o[l]=u}}}},cd={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if(i[n].enabled)return i[n];return null}},SUBTITLES:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if("showing"===i[n].mode)return i[n];return null}}},ud=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){ld[t](t,e)});var t=e.mediaTypes,i=e.masterPlaylistLoader,n=e.tech,s=e.hls;["AUDIO","SUBTITLES"].forEach(function(i){var n,s,r,o,a,l;t[i].activeGroup=(n=i,s=e,function(e){var t=s.masterPlaylistLoader,i=s.mediaTypes[n].groups,r=t.media();if(!r)return null;var o=null;return r.attributes[n]&&(o=i[r.attributes[n]]),o=o||i.main,"undefined"==typeof e?o:null===e?null:o.filter(function(t){return t.id===e.id})[0]||null}),t[i].activeTrack=cd[i](i,e),t[i].onGroupChanged=(r=i,o=e,function(){var e=o.segmentLoaders,t=e[r],i=e.main,n=o.mediaTypes[r],s=n.activeTrack(),a=n.activeGroup(s),l=n.activePlaylistLoader;id(t,n),a&&(a.playlistLoader?(t.resyncLoader(),nd(a.playlistLoader,n)):l&&i.resetEverything())}),t[i].onTrackChanged=(a=i,l=e,function(){var e=l.segmentLoaders,t=e[a],i=e.main,n=l.mediaTypes[a],s=n.activeTrack(),r=n.activeGroup(s),o=n.activePlaylistLoader;id(t,n),r&&(r.playlistLoader?(o!==r.playlistLoader&&(t.track&&t.track(s),t.resetEverything()),nd(r.playlistLoader,n)):i.resetEverything())})});var r=t.AUDIO.activeGroup(),o=(r.filter(function(e){return e["default"]})[0]||r[0]).id;t.AUDIO.tracks[o].enabled=!0,t.AUDIO.onTrackChanged(),i.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return t[e].onGroupChanged()})});var a=function(){t.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"hls-audio-change"})};for(var l in n.audioTracks().addEventListener("change",a),n.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),s.on("dispose",function(){n.audioTracks().removeEventListener("change",a),n.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),n.clearTracks("audio"),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[l])},dd=void 0,hd=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],pd=function(t){function i(e){lc(this,i);var t,n=dc(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),s=e.url,r=e.withCredentials,o=e.tech,a=e.bandwidth,l=e.externHls,c=e.useCueTags,u=e.blacklistDuration,d=e.enableLowInitialPlaylist,h=e.sourceType,p=e.seekTo;if(!s)throw new Error("A non-empty playlist URL is required");dd=l,n.withCredentials=r,n.tech_=o,n.hls_=o.hls,n.seekTo_=p,n.sourceType_=h,n.useCueTags_=c,n.blacklistDuration=u,n.enableLowInitialPlaylist=d,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:n.withCredentials,timeout:null},n.mediaTypes_=(t={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:We,activeTrack:We,onGroupChanged:We,onTrackChanged:We}}),t),n.mediaSource=new Fe.MediaSource,n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_.bind(n)),n.seekable_=Fe.createTimeRanges(),n.hasPlayed_=function(){return!1},n.syncController_=new ed(e),n.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new td,n.inbandTextTracks_={};var f={hls:n.hls_,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.mediaSource.duration},hasPlayed:function(){return n.hasPlayed_()},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:a,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_};return n.masterPlaylistLoader_="dash"===n.sourceType_?new Pu(s,n.hls_,n.withCredentials):new wc(s,n.hls_,n.withCredentials),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new Gu(Fe.mergeOptions(f,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),e),n.audioSegmentLoader_=new Gu(Fe.mergeOptions(f,{loaderType:"audio"}),e),n.subtitleSegmentLoader_=new Qu(Fe.mergeOptions(f,{loaderType:"vtt"}),e),n.setupSegmentLoaderListeners_(),hd.forEach(function(e){n[e+"_"]=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]}.bind(n,e)}),n.logger_=Au("MPC"),n.masterPlaylistLoader_.load(),n}return uc(i,Fe.EventTarget),cc(i,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*e.masterPlaylistLoader_.targetDuration*1e3;Rc(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),ud({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,hls:e.hls_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t);try{e.setupSourceBuffers_()}catch(t){return Fe.log.warn("Failed to create SourceBuffers",t),e.mediaSource.endOfStream("decode")}e.setupFirstPlay(),e.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var t=e.masterPlaylistLoader_.media();if(!t){e.excludeUnsupportedVariants_();var i=void 0;return e.enableLowInitialPlaylist&&(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),e.initialMedia_=i,void e.masterPlaylistLoader_.media(e.initialMedia_)}if(e.useCueTags_&&e.updateAdCues_(t),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.updateDuration(),e.tech_.paused()||(e.mainSegmentLoader_.load(),e.audioSegmentLoader_&&e.audioSegmentLoader_.load()),!t.endList){var n=function(){var t=e.seekable();0!==t.length&&e.mediaSource.addSeekableRange_(t.start(0),t.end(0))};e.duration()!==1/0?e.tech_.one("durationchange",function s(){e.duration()===1/0?n():e.tech_.one("durationchange",s)}):n()}}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*e.masterPlaylistLoader_.targetDuration*1e3;Rc(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(e,t){var i=e.mediaGroups||{},n=!0,s=Object.keys(i.AUDIO);for(var r in i.AUDIO)for(var o in i.AUDIO[r])i.AUDIO[r][o].uri||(n=!1);n&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),dd.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),dd.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),s.length&&1<Object.keys(i.AUDIO[s[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var t=e.selectPlaylist(),i=e.masterPlaylistLoader_.media(),n=e.tech_.buffered(),s=n.length?n.end(n.length-1)-e.tech_.currentTime():0,r=e.bufferLowWaterLine();(!i.endList||e.duration()<Lu.MAX_BUFFER_LOW_WATER_LINE||t.attributes.BANDWIDTH<i.attributes.BANDWIDTH||s>=r)&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){e.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(t){e.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})}),this.audioSegmentLoader_.on("ended",function(){e.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var e=this,t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything(function(){Fe.browser.IE_VERSION||Fe.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.seekTo_(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_())return!1;if(!t.endList){var i=this.seekable();if(!i.length)return!1;if(Fe.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.seekTo_(i.end(0)),e.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.seekTo_(i.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return Fe.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();"undefined"!=typeof e&&"function"==typeof e.then&&e.then(null,function(e){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var i=dd.Playlist.playlistEnd(e,t),n=this.tech_.currentTime(),s=this.tech_.buffered();if(!s.length)return.1>=i-n;var r=s.end(s.length-1);return.1>=r-n&&.1>=i-r}},{key:"blacklistCurrentPlaylist",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1],n=void 0;if(n=t.playlist||this.masterPlaylistLoader_.media(),i=i||t.blacklistDuration||this.blacklistDuration,!n){this.error=t;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var s=1===this.masterPlaylistLoader_.master.playlists.filter(Mc).length;return s?(Fe.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s)):(n.excludeUntil=Date.now()+1e3*i,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),e=this.selectPlaylist(),Fe.log.warn("Problem encountered with the current HLS playlist."+(t.message?" "+t.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(e))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=Xc(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:dd.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var i=this.masterPlaylistLoader_.media();if(i){var n=this.syncController_.getExpiredTime(i,this.mediaSource.duration);if(null!==n&&0!==(e=dd.Playlist.seekable(i,n)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(i=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(i,this.mediaSource.duration)))return;if(0===(t=dd.Playlist.seekable(i,n)).length)return}t?t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=Fe.createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]):this.seekable_=e,this.logger_("seekable updated ["+Kc(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")}}}}},{key:"updateDuration",value:function(){var e=this,t=this.mediaSource.duration,i=dd.Playlist.duration(this.masterPlaylistLoader_.media()),n=this.tech_.buffered(),s=function r(){e.mediaSource.duration=i,e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",r)};0<n.length&&(i=Math.max(i,n.end(n.length-1))),t!==i&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",s):s())}},{key:"dispose",value:function(){var e=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(t){var i=e.mediaTypes_[t].groups;for(var n in i)i[n].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=gu(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(e),this.excludeIncompatibleVariants_(t)}}},{key:"configureLoaderMimeTypes_",value:function(e){var t=1<e.length&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new Fe.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(t){t.attributes.CODECS&&e.MediaSource&&e.MediaSource.isTypeSupported&&!e.MediaSource.isTypeSupported('video/mp4; codecs="'+t.attributes.CODECS.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return pu([e])[0]})+'"')&&(t.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(e){var t=2,i=null,n=void 0;e.attributes.CODECS&&(n=fu(e.attributes.CODECS),i=n.videoCodec,t=n.codecCount),this.master().playlists.forEach(function(e){var n={codecCount:2,videoCodec:null};e.attributes.CODECS&&(n=fu(e.attributes.CODECS)),n.codecCount!==t&&(e.excludeUntil=1/0),n.videoCodec!==i&&(e.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(t){var i=0,n=this.seekable();n.length&&(i=n.start(0)),function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(t.segments)for(var s=n,r=void 0,o=0;o<t.segments.length;o++){var a=t.segments[o];if(r||(r=Ku(i,s+a.duration/2)),r){if("cueIn"in a){r.endTime=s,r.adEndTime=s,s+=a.duration,r=null;continue}if(s<r.endTime){s+=a.duration;continue}r.endTime+=a.duration}else if("cueOut"in a&&((r=new e.VTTCue(s,s+a.duration,a.cueOut)).adStartTime=s,r.adEndTime=s+parseFloat(a.cueOut),i.addCue(r)),"cueOutCont"in a){var l,c,u=a.cueOutCont.split("/").map(parseFloat),d=hc(u,2);l=d[0],c=d[1],(r=new e.VTTCue(s,s+a.duration,"")).adStartTime=s-l,r.adEndTime=r.adStartTime+c,i.addCue(r)}s+=a.duration}}(t,this.cueTagsTrack_,i)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=Lu.GOAL_BUFFER_LENGTH,i=Lu.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,Lu.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=Lu.BUFFER_LOW_WATER_LINE,i=Lu.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,Lu.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,n)}}]),i}(),fd=function Dd(e,t,i){lc(this,Dd);var n,s,r,o=e.masterPlaylistController_,a=o[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(o);if(t.attributes.RESOLUTION){var l=t.attributes.RESOLUTION;this.width=l.width,this.height=l.height}this.bandwidth=t.attributes.BANDWIDTH,this.id=i,this.enabled=(n=e.playlists,s=t.uri,r=a,function(e){var t=n.master.playlists[s],i=Oc(t),o=Mc(t);return"undefined"==typeof e?o:(e?delete t.disabled:t.disabled=!0,e===o||i||(r(),e?n.trigger("renditionenabled"):n.trigger("renditiondisabled")),e)})},md=["seeking","seeked","pause","playing","error"],gd=function(){function t(i){var n=this;lc(this,t),this.tech_=i.tech,this.seekable=i.seekable,this.seekTo=i.seekTo,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Au("PlaybackWatcher"),this.logger_("initialize");var s=function(){return n.monitorCurrentTime_()},r=function(){return n.techWaiting_()},o=function(){return n.cancelTimer_()},a=function(){return n.fixesBadSeeks_()};this.tech_.on("seekablechanged",a),this.tech_.on("waiting",r),this.tech_.on(md,o),this.tech_.on("canplay",s),this.dispose=function(){n.logger_("dispose"),n.tech_.off("seekablechanged",a),n.tech_.off("waiting",r),n.tech_.off(md,o),n.tech_.off("canplay",s),n.checkCurrentTimeTimeout_&&e.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}return cc(t,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&e.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=e.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var e=this.tech_.seeking(),t=this.seekable(),i=this.tech_.currentTime(),n=void 0;return e&&this.afterSeekableWindow_(t,i)&&(n=t.end(t.length-1)),e&&this.beforeSeekableWindow_(t,i)&&(n=t.start(0)+.1),"undefined"!=typeof n&&(this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+Kc(t)+". Seeking to "+n+"."),this.seekTo(n),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),i=Xc(t,e);return i.length&&e+3<=i.end(0)?(this.cancelTimer_(),this.seekTo(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;
if(this.beforeSeekableWindow_(e,t)){var i=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.seekTo(i),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.buffered(),s=Qc(n,t);if(this.videoUnderflow_(s,n,t))return this.cancelTimer_(),this.seekTo(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<s.length){var r=s.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+r+", seeking to "+s.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*r,t),!0}return!1}},{key:"afterSeekableWindow_",value:function(e,t){return!!e.length&&t>e.end(e.length-1)+.1}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-.1)}},{key:"videoUnderflow_",value:function(e,t,i){if(0===e.length){var n=this.gapFromVideoUnderflow_(t,i);if(n)return this.logger_("Encountered a gap in video from "+n.start+" to "+n.end+". Seeking to current time "+i),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),i=this.tech_.currentTime(),n=Qc(t,i);this.cancelTimer_(),0!==n.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.seekTo(n.start(0)+Gc),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var i=function(e){if(e.length<2)return Fe.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var n=e.end(i-1),s=e.start(i);t.push([n,s])}return Fe.createTimeRanges(t)}(e),n=0;n<i.length;n++){var s=i.start(n),r=i.end(n);if(4>t-s&&t-s>2)return{start:s,end:r}}return null}}]),t}(),vd={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},yd=function(e){!function t(e,i){var n=0,s=0,r=Fe.mergeOptions(vd,i);e.ready(function(){e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var o=function(){s&&e.currentTime(s)},a=function(t){null!=t&&(s=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",o),e.src(t),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},l=function(){if(Date.now()-n<1e3*r.errorInterval)e.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(r.getSource&&"function"==typeof r.getSource)return n=Date.now(),r.getSource.call(e,a);Fe.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},c=function u(){e.off("loadedmetadata",o),e.off("error",l),e.off("dispose",u)};e.on("error",l),e.on("dispose",c),e.reloadSourceOnError=function(i){c(),t(e,i)}}(this,e)};Fe.use("*",function(e){return{setSource:function(e,t){t(null,e)},setCurrentTime:function(t){return e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(t),t},play:function(){e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(e.currentTime())}}});var bd={PlaylistLoader:wc,Playlist:Uc,Decrypter:oc,AsyncStream:nc,decrypt:rc,utils:qc,STANDARD_PLAYLIST_SELECTOR:function(){return function(t,i,n,s,r){var o=t.playlists.map(function(t){var i,n;return i=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,n=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height,{bandwidth:t.attributes.BANDWIDTH||e.Number.MAX_VALUE,width:i,height:n,playlist:t}});zu(o,function(e,t){return e.bandwidth-t.bandwidth});var a=(o=o.filter(function(e){return!Uc.isIncompatible(e.playlist)})).filter(function(e){return Uc.isEnabled(e.playlist)});a.length||(a=o.filter(function(e){return!Uc.isDisabled(e.playlist)}));var l=a.filter(function(e){return e.bandwidth*Lu.BANDWIDTH_VARIANCE<i}),c=l[l.length-1],u=l.filter(function(e){return e.bandwidth===c.bandwidth})[0];if(!1===r){var d=u||a[0]||o[0];return d?d.playlist:null}var h=l.filter(function(e){return e.width&&e.height});zu(h,function(e,t){return e.width-t.width});var p=h.filter(function(e){return e.width===n&&e.height===s});c=p[p.length-1];var f=p.filter(function(e){return e.bandwidth===c.bandwidth})[0],m=void 0,g=void 0,v=void 0;f||(g=(m=h.filter(function(e){return e.width>n||e.height>s})).filter(function(e){return e.width===m[0].width&&e.height===m[0].height}),c=g[g.length-1],v=g.filter(function(e){return e.bandwidth===c.bandwidth})[0]);var y=v||f||u||a[0]||o[0];return y?y.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(ju(this.tech_.el(),"width"),10),parseInt(ju(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var e=this.playlists.master.playlists.filter(Uc.isEnabled);return zu(e,function(e,t){return Wu(e,t)}),e.filter(function(e){return fu(e.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:Wu,comparePlaylistResolution:function(t,i){var n=void 0,s=void 0;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||e.Number.MAX_VALUE,i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(s=i.attributes.RESOLUTION.width),n===(s=s||e.Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&i.attributes.BANDWIDTH?t.attributes.BANDWIDTH-i.attributes.BANDWIDTH:n-s},xhr:Bc()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(e){Object.defineProperty(bd,e,{get:function(){return Fe.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),Lu[e]},set:function(t){Fe.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||0>t?Fe.log.warn("value of Hls."+e+" must be greater than or equal to 0"):Lu[e]=t}})});var _d=function(e){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e)?"hls":/^application\/dash\+xml/i.test(e)?"dash":null},wd=function(e,t){for(var i=t.media(),n=-1,s=0;s<e.length;s++)if(e[s].id===i.uri){n=s;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})};bd.canPlaySource=function(){return Fe.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Cd=function(e){if("dash"===e.options_.sourceType){var t=Fe.players[e.tech_.options_.playerId];if(t.eme){var i=function(e,t,i){if(!e)return e;var n={};for(var s in e)n[s]={audioContentType:'audio/mp4; codecs="'+i.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+t.attributes.CODECS+'"'},t.contentProtection&&t.contentProtection[s]&&t.contentProtection[s].pssh&&(n[s].pssh=t.contentProtection[s].pssh),"string"==typeof e[s]&&(n[s].url=e[s]);return Fe.mergeOptions(e,n)}(e.source_.keySystems,e.playlists.media(),e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());i&&(t.currentSource().keySystems=i,t.eme.initializeMediaKeys&&t.eme.initializeMediaKeys())}}};bd.supportsNativeHls=function(){var e=t.createElement("video");return Fe.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))}):!1}(),bd.supportsNativeDash=!!Fe.getTech("Html5").isSupported()&&/maybe|probably/i.test(t.createElement("video").canPlayType("application/dash+xml")),bd.supportsTypeNatively=function(e){return"hls"===e?bd.supportsNativeHls:"dash"===e&&bd.supportsNativeDash},bd.isSupported=function(){return Fe.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Sd=Fe.getComponent("Component"),Td=function(e){function i(e,n,s){lc(this,i);var r=dc(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n,s.hls));if(n.options_&&n.options_.playerId){var o=Fe(n.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return Fe.log.warn("player.hls is deprecated. Use player.tech().hls instead."),n.trigger({type:"usage",name:"hls-player-access"}),r}}),o.vhs=r,o.dash=r}if(r.tech_=n,r.source_=e,r.stats={},r.setOptions_(),r.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(t,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var i=t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement;i&&i.contains(r.tech_.el())&&r.masterPlaylistController_.smoothQualityChange_()}),r.on(r.tech_,"seeking",function(){this.tech_.seeking()&&0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),r.on(r.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),r.on(r.tech_,"play",r.play),r}return uc(i,Sd),cc(i,[{key:"setOptions_",value:function(){var e=this;this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Lu.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Lu.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange"].forEach(function(t){"undefined"!=typeof e.source_[t]&&(e.options_[t]=e.source_[t])}),this.bandwidth=this.options_.bandwidth,this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(e,t){var i=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=bd,this.options_.sourceType=_d(t),this.options_.seekTo=function(e){i.tech_.setCurrentTime(e),i.setCurrentTime(e)},this.masterPlaylistController_=new pd(this.options_),this.playbackWatcher_=new gd(Fe.mergeOptions(this.options_,{seekable:function(){return i.seekable()}})),this.masterPlaylistController_.on("error",function(){Fe.players[i.tech_.options_.playerId].error(i.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):bd.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=bd.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=void 0;return t=0<this.throughput?1/this.throughput:0,Math.floor(1/(e+t))},set:function(){Fe.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Jc(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Jc(i.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return i.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){var e,t;t=(e=i).playlists,e.representations=function(){return t.master.playlists.filter(function(e){return!Oc(e)}).map(function(t,i){return new fd(e,t,t.uri)})},Cd(i)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return i.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(Fe.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var e=this,t=Fe.players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t,i;t=e.qualityLevels_,(i=e).representations().forEach(function(e){t.addQualityLevel(e)}),wd(t,i.playlists)}),this.playlists.on("mediachange",function(){wd(e.qualityLevels_,e.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),function e(t,i,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,i);if(void 0===s){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0}(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"dispose",this).call(this)}}]),i}(),kd={name:"videojs-http-streaming",VERSION:"1.4.1",canHandleSource:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=Fe.mergeOptions(Fe.options,t);return kd.canPlayType(e.type,i)},handleSource:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=Fe.mergeOptions(Fe.options,i);return t.hls=new Td(e,t,n),t.hls.xhr=Bc(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=Fe.mergeOptions(Fe.options,t).hls.overrideNative,n=_d(e);return!n||bd.supportsTypeNatively(n)&&!i?"":"maybe"}};return"undefined"!=typeof Fe.MediaSource&&"undefined"!=typeof Fe.URL||(Fe.MediaSource=Tu,Fe.URL=ku),Tu.supportsNativeMediaSources()&&Fe.getTech("Html5").registerSourceHandler(kd,0),Fe.HlsHandler=Td,Fe.HlsSourceHandler=kd,Fe.Hls=bd,Fe.use||Fe.registerComponent("Hls",bd),Fe.options.hls=Fe.options.hls||{},Fe.registerPlugin?Fe.registerPlugin("reloadSourceOnError",yd):Fe.plugin("reloadSourceOnError",yd),Fe}),/**
 * videojs-flash
 * @version 2.1.2
 * @copyright 2018 Brightcove, Inc.
 * @license Apache-2.0
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsFlash=t(e.videojs)}(this,function(e){"use strict";function t(e){var t=e.charAt(0).toUpperCase()+e.slice(1);g["set"+t]=function(t){return this.el_.vjs_setProperty(e,t)}}function i(e){g[e]=function(){return this.el_.vjs_getProperty(e)}}e=e&&e.hasOwnProperty("default")?e["default"]:e;for(var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},a=e.getComponent("Tech"),l=e.dom,c=e.url,u=e.createTimeRange,d=e.mergeOptions,h=s&&s.navigator||{},p=function(e){function t(i,n){r(this,t);var a=o(this,e.call(this,i,n));return i.source&&a.ready(function(){this.setSource(i.source)},!0),i.startTime&&a.ready(function(){this.load(),this.play(),this.currentTime(i.startTime)},!0),s.videojs=s.videojs||{},s.videojs.Flash=s.videojs.Flash||{},s.videojs.Flash.onReady=t.onReady,s.videojs.Flash.onEvent=t.onEvent,s.videojs.Flash.onError=t.onError,a.on("seeked",function(){this.lastSeekTarget_=void 0}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){var e=this.options_;e.swf||(e.swf="https://vjs.zencdn.net/swf/5.4.2/video-js.swf");var i=e.techId,n=d({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:e.autoplay,preload:e.preload,loop:e.loop,muted:e.muted},e.flashVars),s=d({wmode:"opaque",bgcolor:"#000000"},e.params),r=d({id:i,name:i,"class":"vjs-tech"},e.attributes);return this.el_=t.embed(e.swf,n,s,r),this.el_.tech=this,this.el_},t.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},t.prototype.pause=function(){this.el_.vjs_pause()},t.prototype.src=function(e){return void 0===e?this.currentSrc():this.setSrc(e)},t.prototype.setSrc=function(e){var t=this;e=c.getAbsoluteURL(e),this.el_.vjs_src(e),this.autoplay()&&this.setTimeout(function(){return t.play()},0)},t.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},t.prototype.setCurrentTime=function(t){var i=this.seekable();i.length&&(t=(t=t>i.start(0)?t:i.start(0))<i.end(i.length-1)?t:i.end(i.length-1),this.lastSeekTarget_=t,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",t),e.prototype.setCurrentTime.call(this))},t.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},t.prototype.duration=function(){if(0===this.readyState())return NaN;var e=this.el_.vjs_getProperty("duration");return e>=0?e:1/0},t.prototype.load=function(){this.el_.vjs_load()},t.prototype.poster=function(){this.el_.vjs_getProperty("poster")},t.prototype.setPoster=function(){},t.prototype.seekable=function(){var e=this.duration();return 0===e?u():u(0,e)},t.prototype.buffered=function(){var e=this.el_.vjs_getProperty("buffered");return 0===e.length?u():u(e[0][0],e[0][1])},t.prototype.supportsFullScreen=function(){return!1},t.prototype.enterFullScreen=function(){return!1},t.prototype.getVideoPlaybackQuality=function(){var e=this.el_.vjs_getProperty("getVideoPlaybackQuality");return s.performance&&"function"==typeof s.performance.now?e.creationTime=s.performance.now():s.performance&&s.performance.timing&&"number"==typeof s.performance.timing.navigationStart&&(e.creationTime=s.Date.now()-s.performance.timing.navigationStart),e},t}(a),f=["rtmpConnection","rtmpStream","preload","defaultPlaybackRate","playbackRate","autoplay","loop","controls","volume","muted","defaultMuted"],m=["networkState","readyState","initialTime","startOffsetTime","paused","ended","videoWidth","videoHeight"],g=p.prototype,v=0;v<f.length;v++)i(f[v]),t(f[v]);for(var y=0;y<m.length;y++)i(m[y]);return p.isSupported=function(){return!!(e.browser.IS_CHROME&&!e.browser.IS_ANDROID||e.browser.IS_SAFARI&&!e.browser.IS_IOS)||p.version()[0]>=10},a.withSourceHandlers(p),p.nativeSourceHandler={},p.nativeSourceHandler.canPlayType=function(e){return e in p.formats?"maybe":""},p.nativeSourceHandler.canHandleSource=function(e,t){var i=void 0;return i=e.type?e.type.replace(/;.*/,"").toLowerCase():function(e){var t=c.getFileExtension(e);return t?"video/"+t:""}(e.src),p.nativeSourceHandler.canPlayType(i)},p.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},p.nativeSourceHandler.dispose=function(){},p.registerSourceHandler(p.nativeSourceHandler),p.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},p.onReady=function(e){var t=l.$("#"+e),i=t&&t.tech;i&&i.el()&&p.checkReady(i)},p.checkReady=function(e){e.el()&&(e.el().vjs_getProperty?e.triggerReady():this.setTimeout(function(){p.checkReady(e)},50))},p.onEvent=function(e,t){var i=l.$("#"+e).tech,n=Array.prototype.slice.call(arguments,2);i.setTimeout(function(){i.trigger(t,n)},1)},p.onError=function(e,t){var i=l.$("#"+e).tech;return"srcnotfound"===t?i.error(4):void("string"==typeof t?i.error("FLASH: "+t):(t.origin="flash",i.error(t)))},p.version=function(){var e="0,0,0";try{e=new s.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{h.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=(h.plugins["Shockwave Flash 2.0"]||h.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(i){}}return e.split(",")},p.embed=function(e,t,i,n){var s=p.getEmbedCode(e,t,i,n);return l.createEl("div",{innerHTML:s}).childNodes[0]},p.getEmbedCode=function(e,t,i,n){var s="",r="",o="";return t&&Object.getOwnPropertyNames(t).forEach(function(e){s+=e+"="+t[e]+"&amp;"}),i=d({movie:e,flashvars:s,allowScriptAccess:"always",allowNetworking:"all"},i),Object.getOwnPropertyNames(i).forEach(function(e){r+='<param name="'+e+'" value="'+i[e]+'" />'}),n=d({data:e,width:"100%",height:"100%"},n),Object.getOwnPropertyNames(n).forEach(function(e){o+=e+'="'+n[e]+'" '}),'<object type="application/x-shockwave-flash" '+o+">"+r+"</object>"},function(e){e.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},e.streamFromParts=function(e,t){return e+"&"+t},e.streamToParts=function(e){var t={connection:"",stream:""};if(!e)return t;var i=e.search(/&(?![\w-]+=)/),n=void 0;return-1!==i?n=i+1:0===(i=n=e.lastIndexOf("/")+1)&&(i=n=e.length),t.connection=e.substring(0,i),t.stream=e.substring(n,e.length),t},e.isStreamingType=function(t){return t in e.streamingFormats},e.RTMP_RE=/^rtmp[set]?:\/\//i,e.isStreamingSrc=function(t){return e.RTMP_RE.test(t)},e.rtmpSourceHandler={},e.rtmpSourceHandler.canPlayType=function(t){return e.isStreamingType(t)?"maybe":""},e.rtmpSourceHandler.canHandleSource=function(t,i){var n=e.rtmpSourceHandler.canPlayType(t.type);return n||(e.isStreamingSrc(t.src)?"maybe":"")},e.rtmpSourceHandler.handleSource=function(t,i,n){var s=e.streamToParts(t.src);i.setRtmpConnection(s.connection),i.setRtmpStream(s.stream)},e.registerSourceHandler(e.rtmpSourceHandler)}(p),a.getTech("Flash")?(e.log.warn("Not using videojs-flash as it appears to already be registered"),e.log.warn("videojs-flash should only be used with video.js@6 and above")):e.registerTech("Flash",p),p.VERSION="2.1.2",p}),/*! jQuery UI - v1.9.2 - 2012-11-23
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.slider.js, jquery.ui.sortable.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */
function(e,t){function i(t,i){var s,r,o,a=t.nodeName.toLowerCase();return"area"===a?(s=t.parentNode,r=s.name,t.href&&r&&"map"===s.nodeName.toLowerCase()?(o=e("img[usemap=#"+r+"]")[0],!!o&&n(o)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var n=this;setTimeout(function(){e(n).focus(),i&&i.call(n)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,r=e(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(r.css("zIndex"),10),!isNaN(s)&&0!==s))return s;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e(function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));i.offsetHeight,e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(r,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each(function(){e(this).css(o,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(o,s(this,t,!0,i)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,r=e.ui[t].prototype;for(s in n)r.plugins[s]=r.plugins[s]||[],r.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<s.length;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},contains:e.contains,hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0?!0:(t[n]=1,s=t[n]>0,t[n]=0,s)},isOverAxis:function(e,t,i){return e>t&&t+i>e},isOver:function(t,i,n,s,r,o){return e.ui.isOverAxis(t,n,r)&&e.ui.isOverAxis(i,s,o)}}))}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,s=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(r){}s(t)},e.widget=function(t,i,n){var s,r,o,a,l=t.split(".")[0];t=t.split(".")[1],s=l+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[l]=e[l]||{},r=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,s){e.isFunction(s)&&(n[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,r=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=r,t}}())}),o.prototype=e.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix:t},n,{constructor:o,namespace:l,widgetName:t,widgetBaseClass:s,widgetFullName:s}),r?(e.each(r._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete r._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(i){for(var s,r,o=n.call(arguments,1),a=0,l=o.length;l>a;a++)for(s in o[a])r=o[a][s],o[a].hasOwnProperty(s)&&r!==t&&(e.isPlainObject(r)?i[s]=e.isPlainObject(i[s])?e.widget.extend({},i[s],r):e.widget.extend({},r):i[s]=r);return i},e.widget.bridge=function(i,s){var r=s.prototype.widgetFullName||i;e.fn[i]=function(o){var a="string"==typeof o,l=n.call(arguments,1),c=this;return o=!a&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,a?this.each(function(){var n,s=e.data(this,r);return s?e.isFunction(s[o])&&"_"!==o.charAt(0)?(n=s[o].apply(s,l),n!==s&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+o+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,r);t?t.option(o||{})._init():e.data(this,r,new s(o,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetName,this),e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var s,r,o,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},s=i.split("."),i=s.shift(),s.length){for(r=a[i]=e.widget.extend({},this.options[i]),o=0;o<s.length-1;o++)r[s[o]]=r[s[o]]||{},r=r[s[o]];if(i=s.pop(),n===t)return r[i]===t?null:r[i];r[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var s,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=s=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),e.each(n,function(n,o){function a(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):void 0}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?s.delegate(u,c,a):i.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var s,r,o=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent,r)for(s in r)s in i||(i[s]=r[s]);return this.element.trigger(i,n),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,s,r){"string"==typeof s&&(s={effect:s});var o,a=s?s===!0||"number"==typeof s?i:s.effect||i:t;s=s||{},"number"==typeof s&&(s={duration:s}),o=!e.isEmptyObject(s),s.complete=r,s.delay&&n.delay(s.delay),o&&e.effects&&(e.effects.effect[a]||e.uiBackCompat!==!1&&e.effects[a])?n[t](s):a!==t&&n[a]?n[a](s.duration,s.easing,r):n.queue(function(i){e(this)[t](),r&&r.call(n[0]),i()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e,t){var i=!1;e(document).mouseup(function(e){i=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,s=1===t.which,r="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!r&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0)):!0}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){function i(e,t,i){return[parseInt(e[0],10)*(h.test(e[0])?t/100:1),parseInt(e[1],10)*(h.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}e.ui=e.ui||{};var s,r=Math.max,o=Math.abs,a=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+%?/,d=/^\w+/,h=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(s!==t)return s;var i,n,r=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=r.children()[0];return e("body").append(r),i=o.offsetWidth,r.css("overflow","scroll"),n=o.offsetWidth,i===n&&(n=r[0].clientWidth),r.remove(),s=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),s="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,r="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return p.apply(this,arguments);t=e.extend({},t);var s,h,f,m,g,v=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),_=v[0],w=(t.collision||"flip").split(" "),C={};return 9===_.nodeType?(h=v.width(),f=v.height(),m={top:0,left:0}):e.isWindow(_)?(h=v.width(),f=v.height(),m={top:v.scrollTop(),left:v.scrollLeft()}):_.preventDefault?(t.at="left top",h=f=0,m={top:_.pageY,left:_.pageX}):(h=v.outerWidth(),f=v.outerHeight(),m=v.offset()),g=e.extend({},m),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=l.test(n[0])?n.concat(["center"]):c.test(n[0])?["center"].concat(n):["center","center"]),n[0]=l.test(n[0])?n[0]:"center",n[1]=c.test(n[1])?n[1]:"center",e=u.exec(n[0]),i=u.exec(n[1]),C[this]=[e?e[0]:0,i?i[0]:0],t[this]=[d.exec(n[0])[0],d.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?g.left+=h:"center"===t.at[0]&&(g.left+=h/2),"bottom"===t.at[1]?g.top+=f:"center"===t.at[1]&&(g.top+=f/2),s=i(C.at,h,f),g.left+=s[0],g.top+=s[1],this.each(function(){var l,c,u=e(this),d=u.outerWidth(),p=u.outerHeight(),_=n(this,"marginLeft"),S=n(this,"marginTop"),T=d+_+n(this,"marginRight")+b.width,k=p+S+n(this,"marginBottom")+b.height,E=e.extend({},g),I=i(C.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?E.left-=d:"center"===t.my[0]&&(E.left-=d/2),"bottom"===t.my[1]?E.top-=p:"center"===t.my[1]&&(E.top-=p/2),E.left+=I[0],E.top+=I[1],e.support.offsetFractions||(E.left=a(E.left),E.top=a(E.top)),l={marginLeft:_,marginTop:S},e.each(["left","top"],function(i,n){e.ui.position[w[i]]&&e.ui.position[w[i]][n](E,{targetWidth:h,targetHeight:f,elemWidth:d,elemHeight:p,collisionPosition:l,collisionWidth:T,collisionHeight:k,offset:[s[0]+I[0],s[1]+I[1]],my:t.my,at:t.at,within:y,elem:u})}),e.fn.bgiframe&&u.bgiframe(),t.using&&(c=function(e){var i=m.left-E.left,n=i+h-d,s=m.top-E.top,a=s+f-p,l={target:{element:v,left:m.left,top:m.top,width:h,height:f},element:{element:u,left:E.left,top:E.top,width:d,height:p},horizontal:0>n?"left":i>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};d>h&&o(i+n)<h&&(l.horizontal="center"),p>f&&o(s+a)<f&&(l.vertical="middle"),r(o(i),o(n))>r(o(s),o(a))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),u.offset(e.extend(E,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=e.left-t.collisionPosition.marginLeft,l=s-a,c=a+t.collisionWidth-o-s;t.collisionWidth>o?l>0&&0>=c?(i=e.left+l+t.collisionWidth-o-s,e.left+=l-i):c>0&&0>=l?e.left=s:l>c?e.left=s+o-t.collisionWidth:e.left=s:l>0?e.left+=l:c>0?e.left-=c:e.left=r(e.left-a,e.left)},top:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,l=s-a,c=a+t.collisionHeight-o-s;t.collisionHeight>o?l>0&&0>=c?(i=e.top+l+t.collisionHeight-o-s,e.top+=l-i):c>0&&0>=l?e.top=s:l>c?e.top=s+o-t.collisionHeight:e.top=s:l>0?e.top+=l:c>0?e.top-=c:e.top=r(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,s=t.within,r=s.offset.left+s.scrollLeft,a=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-a-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+h+p+f+t.collisionWidth-a-r,(0>i||i<o(u))&&(e.left+=h+p+f)):d>0&&(n=e.left-t.collisionPosition.marginLeft+h+p+f-l,(n>0||o(n)<d)&&(e.left+=h+p+f))},top:function(e,t){var i,n,s=t.within,r=s.offset.top+s.scrollTop,a=s.height,l=s.isWindow?s.scrollTop:s.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-a-l,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(n=e.top+p+f+m+t.collisionHeight-a-r,e.top+p+f+m>u&&(0>n||n<o(u))&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-l,e.top+p+f+m>d&&(i>0||o(i)<d)&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,s,r,o=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in n)t.style[r]=n[r];t.appendChild(a),i=o||document.documentElement,i.insertBefore(t,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",s=e(a).offset().left,e.support.offsetFractions=s>10&&11>s,t.innerHTML="",i.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var i=e.fn.position;e.fn.position=function(n){if(!n||!n.offset)return i.call(this,n);var s=n.offset.split(" "),r=n.at.split(" ");return 1===s.length&&(s[1]=s[0]),/^\d/.test(s[0])&&(s[0]="+"+s[0]),/^\d/.test(s[1])&&(s[1]="+"+s[1]),1===r.length&&(/left|center|right/.test(r[0])?r[1]="center":(r[1]=r[0],r[0]="center")),i.call(this,e.extend(n,{at:r[0]+s[0]+" "+r[1]+s[1],offset:t}))}}(jQuery)}(jQuery),function(e,t){var i=0,n={},s={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.accordionId="ui-accordion-"+(this.element.attr("id")||++i),n=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),!n.collapsible&&(n.active===!1||null==n.active)&&(n.active=0),n.active<0&&(n.active+=this.headers.length),this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(i){var n=e(this),s=n.attr("id"),r=n.next(),o=r.attr("id");s||(s=t+"-header-"+i,n.attr("id",s)),o||(o=t+"-panel-"+i,r.attr("id",o)),n.attr("aria-controls",o),r.attr("aria-labelledby",s)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(n.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"===e&&!t&&this.options.active===!1&&this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,s=this.headers.index(t.target),r=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(s+1)%n];break;case i.LEFT:case i.UP:r=this.headers[(s-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:r=this.headers[0];break;case i.END:r=this.headers[n-1]}r&&(e(t.target).attr("tabIndex",-1),e(r).attr("tabIndex",0),r.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t,i,n=this.options.heightStyle,s=this.element.parent();"fill"===n?(e.support.minHeight||(i=s.css("overflow"),s.css("overflow","hidden")),t=s.height(),this.element.siblings(":visible").each(function(){var i=e(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(t-=i.outerHeight(!0))}),i&&s.css("overflow",i),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===n&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={};t&&(e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._on(this.headers,i))},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget),r=s[0]===n[0],o=r&&i.collapsible,a=o?e():s.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:o?e():s,newPanel:a};t.preventDefault(),r&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=o?!1:this.headers.index(s),this.active=r?e():s,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),r||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,i){var r,o,a,l=this,c=0,u=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},h=u&&d.down||d,p=function(){l._toggleComplete(i)};return"number"==typeof h&&(a=h),"string"==typeof h&&(o=h),o=o||h.easing||d.easing,a=a||h.duration||d.duration,t.length?e.length?(r=e.show().outerHeight(),t.animate(n,{duration:a,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(s,{duration:a,easing:o,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(r-t.outerHeight()-c),c=0)}}),void 0):t.animate(n,a,o,p):e.animate(s,a,o,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.uiBackCompat!==!1&&(function(e,t){e.extend(t.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var i=t._create;t._create=function(){if(this.options.navigation){var t=this,n=this.element.find(this.options.header),s=n.next(),r=n.add(s).find("a").filter(this.options.navigationFilter)[0];r&&n.add(s).each(function(i){return e.contains(this,r)?(t.options.active=Math.floor(i/2),!1):void 0})}i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var i=t._create,n=t._setOption;e.extend(t,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),i.call(this)},_setOption:function(e){("autoHeight"===e||"clearStyle"===e||"fillSpace"===e)&&(this.options.heightStyle=this._mergeHeightStyle()),n.apply(this,arguments)},_mergeHeightStyle:function(){var e=this.options;return e.fillSpace?"fill":e.clearStyle?"content":e.autoHeight?"auto":void 0}})}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var i=t._createIcons;t._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){t.activate=t._activate;var i=t._findActive;t._findActive=function(e){return-1===e&&(e=!1),e&&"number"!=typeof e&&(e=this.headers.index(this.headers.filter(e)),-1===e&&(e=!1)),i.call(this,e)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(e,t){e.extend(t.options,{change:null,changestart:null});var i=t._trigger;t._trigger=function(e,t,n){var s=i.apply(this,arguments);return s?("beforeActivate"===e?s=i.call(this,"changestart",t,{oldHeader:n.oldHeader,oldContent:n.oldPanel,newHeader:n.newHeader,newContent:n.newPanel}):"activate"===e&&(s=i.call(this,"change",t,{oldHeader:n.oldHeader,oldContent:n.oldPanel,newHeader:n.newHeader,newContent:n.newPanel})),s):!1}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{animate:null,animated:"slide"});var i=t._create;t._create=function(){var e=this.options;null===e.animate&&(e.animated?"slide"===e.animated?e.animate=300:"bounceslide"===e.animated?e.animate={duration:200,down:{easing:"easeOutBounce",duration:1e3}}:e.animate=e.animated:e.animate=!1),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function(e,t){var i=0;e.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return t=!0,n=!0,i=!0,void 0;t=!1,n=!1,i=!1;var r=e.ui.keyCode;switch(s.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",s);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",s);break;case r.UP:t=!0,this._keyEvent("previous",s);break;case r.DOWN:t=!0,this._keyEvent("next",s);break;case r.ENTER:case r.NUMPAD_ENTER:this.menu.active&&(t=!0,s.preventDefault(),this.menu.select(s));break;case r.TAB:this.menu.active&&this.menu.select(s);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(t)return t=!1,void n.preventDefault();if(!i){var s=e.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){
n.target!==t.element[0]&&n.target!==i&&!e.contains(i,n.target)&&t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var n=i.item.data("ui-autocomplete-item")||i.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this.document.find(t||"body")[0]),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,s){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){s(e)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++i;return function(n){t===i&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e,t){var i,n,s,r,o="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",l="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",c=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},u=function(t){var i=t.name,n=t.form,s=e([]);return i&&(s=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),s};e.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,c),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,a=this.options,l="checkbox"===this.type||"radio"===this.type,d=l?"":"ui-state-active",h="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===i&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||e(this).removeClass(d)}).bind("click"+this.eventNamespace,function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),l&&(this.element.bind("change"+this.eventNamespace,function(){r||t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){a.disabled||(r=!1,n=e.pageX,s=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){a.disabled||(n!==e.pageX||s!==e.pageY)&&(r=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled||r?!1:(e(this).toggleClass("ui-state-active"),void t.buttonElement.attr("aria-pressed",t.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||r)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var i=t.element[0];u(i).not(i).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(e(this).addClass("ui-state-active"),i=this,t.document.one("mouseup",function(){i=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return a.disabled?!1:void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+a+" "+l).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?void(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?u(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(l),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,s=n.primary&&n.secondary,r=[];n.primary||n.secondary?(this.options.text&&r.push("ui-button-text-icon"+(s?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(r.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):r.push("ui-button-text-only"),t.addClass(r.join(" "))}}),e.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var i in t)(null==t[i]||t[i]==undefined)&&(e[i]=t[i]);return e}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var i=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,i,n){t.settings[i]=n}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i=this._get(t,"appendText"),n=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[n?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var s=this._get(t,"showOn");if(("focus"==s||"both"==s)&&e.focus(this._showDatepicker),"button"==s||"both"==s){var r=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:r,title:r}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==o?r:$("<img/>").attr({src:o,alt:r,title:r}))),e[n?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),i=this._get(e,"dateFormat");if(i.match(/[DM]/)){var n=function(e){for(var t=0,i=0,n=0;n<e.length;n++)e[n].length>t&&(t=e[n].length,i=n);return i};t.setMonth(n(this._get(e,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(n(this._get(e,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,i,n){t.settings[i]=n}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,n,s){var r=this._dialogInst;if(!r){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),r=this._dialogInst=this._newInst(this._dialogInput,!1),r.settings={},$.data(this._dialogInput[0],PROP_NAME,r)}if(extendRemove(r.settings,n||{}),t=t&&t.constructor==Date?this._formatDate(r,t):t,this._dialogInput.val(t),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,!this._pos){var a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[a/2-100+c,l/2-150+u]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),r.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,r),this},_destroyDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==n?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==n||"span"==n)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==n||"span"==n){var s=t.children("."+this._inlineClass);s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==n||"span"==n){var s=t.children("."+this._inlineClass);s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var n=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):n?"all"==t?$.extend({},n.settings):this._get(n,t):null;var s=t||{};if("string"==typeof t&&(s={},s[t]=i),n){this._curInst==n&&this._hideDatepicker();var r=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(n,"min"),a=this._getMinMaxDate(n,"max");extendRemove(n.settings,s),null!==o&&s.dateFormat!==undefined&&s.minDate===undefined&&(n.settings.minDate=this._formatDate(n,o)),null!==a&&s.dateFormat!==undefined&&s.maxDate===undefined&&(n.settings.maxDate=this._formatDate(n,a)),this._attachments($(e),n),this._autoSize(n),this._setDate(n,r),this._updateAlternate(n),this._updateDatepicker(n)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),i=!0,n=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var s=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);s[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,s[0]);var r=$.datepicker._get(t,"onSelect");if(r){var o=$.datepicker._formatDate(t);r.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),n=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var i=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));i&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(n){$.datepicker.log(n)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(t,"beforeShow"),n=i?i.apply(e,[e,t]):{};if(n!==!1){extendRemove(t.settings,n),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var s=!1;$(e).parents().each(function(){return s|="fixed"==$(this).css("position"),!s});var r={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),r=$.datepicker._checkOffset(t,r,s),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":s?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),!t.inline){var o=$.datepicker._get(t,"showAnim"),a=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var i=$.datepicker._getBorders(t.dpDiv);e.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),a,l):t.dpDiv[o||"show"](o?a:null,l),(!o||!a)&&l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i=e.dpDiv.find("iframe.ui-datepicker-cover");!i.length||i.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n=this._getNumberOfMonths(e),s=n[1],r=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",r*s+"em"),e.dpDiv[(1!=n[0]||1!=n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),s=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,a=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?n-r:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>a&&a>n?Math.abs(t.left+n-a):0),t.top-=Math.min(t.top,t.top+s>l&&l>s?Math.abs(s+o):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];var n=$(e).offset();return[n.left,n.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var i=this._get(t,"showAnim"),n=this._get(t,"duration"),s=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[i]||$.effects[i])?t.dpDiv.hide(i,$.datepicker._get(t,"showOptions"),n,s):t.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1;var r=this._get(t,"onClose");r&&r.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),i=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var n=$(e),s=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(s,t+("M"==i?this._get(s,"showCurrentAtPos"):0),i),this._updateDatepicker(s))},_gotoToday:function(e){var t=$(e),i=this._getInst(t[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var n=new Date;i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()}this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(e,t,i){var n=$(e),s=this._getInst(n[0]);s["selected"+("M"==i?"Month":"Year")]=s["draw"+("M"==i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(n)},_selectDay:function(e,t,i,n){var s=$(e);if(!$(n).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(s[0])){var r=this._getInst(s[0]);r.selectedDay=r.currentDay=$("a",n).html(),r.selectedMonth=r.currentMonth=t,r.selectedYear=r.currentYear=i,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var i=$(e),n=this._getInst(i[0]);t=null!=t?t:this._formatDate(n),n.input&&n.input.val(t),this._updateAlternate(n);var s=this._get(n,"onSelect");s?s.apply(n.input?n.input[0]:null,[t,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),s=this.formatDate(i,n,this._getFormatConfig(e));$(t).each(function(){$(this).val(s)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(e,t,i){
if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?t.toString():t+"",""==t)return null;var n=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;n="string"!=typeof n?n:(new Date).getFullYear()%100+parseInt(n,10);for(var s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,u=-1,d=-1,h=!1,p=function(t){var i=y+1<e.length&&e.charAt(y+1)==t;return i&&y++,i},f=function(e){var i=p(e),n="@"==e?14:"!"==e?20:"y"==e&&i?4:"o"==e?3:2,s=new RegExp("^\\d{1,"+n+"}"),r=t.substring(v).match(s);if(!r)throw"Missing number at position "+v;return v+=r[0].length,parseInt(r[0],10)},m=function(e,i,n){var s=$.map(p(e)?n:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),r=-1;if($.each(s,function(e,i){var n=i[1];return t.substr(v,n.length).toLowerCase()==n.toLowerCase()?(r=i[0],v+=n.length,!1):void 0}),-1!=r)return r+1;throw"Unknown name at position "+v},g=function(){if(t.charAt(v)!=e.charAt(y))throw"Unexpected literal at position "+v;v++},v=0,y=0;y<e.length;y++)if(h)"'"!=e.charAt(y)||p("'")?g():h=!1;else switch(e.charAt(y)){case"d":u=f("d");break;case"D":m("D",s,r);break;case"o":d=f("o");break;case"m":c=f("m");break;case"M":c=m("M",o,a);break;case"y":l=f("y");break;case"@":var b=new Date(f("@"));l=b.getFullYear(),c=b.getMonth()+1,u=b.getDate();break;case"!":var b=new Date((f("!")-this._ticksTo1970)/1e4);l=b.getFullYear(),c=b.getMonth()+1,u=b.getDate();break;case"'":p("'")?g():h=!0;break;default:g()}if(v<t.length){var _=t.substr(v);if(!/^\s+/.test(_))throw"Extra/unparsed characters found in date: "+_}if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(n>=l?0:-100)),d>-1)for(c=1,u=d;;){var w=this._getDaysInMonth(l,c-1);if(w>=u)break;c++,u-=w}var b=this._daylightSavingAdjust(new Date(l,c-1,u));if(b.getFullYear()!=l||b.getMonth()+1!=c||b.getDate()!=u)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,a=function(t){var i=h+1<e.length&&e.charAt(h+1)==t;return i&&h++,i},l=function(e,t,i){var n=""+t;if(a(e))for(;n.length<i;)n="0"+n;return n},c=function(e,t,i,n){return a(e)?n[t]:i[t]},u="",d=!1;if(t)for(var h=0;h<e.length;h++)if(d)"'"!=e.charAt(h)||a("'")?u+=e.charAt(h):d=!1;else switch(e.charAt(h)){case"d":u+=l("d",t.getDate(),2);break;case"D":u+=c("D",t.getDay(),n,s);break;case"o":u+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",t.getMonth()+1,2);break;case"M":u+=c("M",t.getMonth(),r,o);break;case"y":u+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":a("'")?u+="'":d=!0;break;default:u+=e.charAt(h)}return u},_possibleChars:function(e){for(var t="",i=!1,n=function(t){var i=s+1<e.length&&e.charAt(s+1)==t;return i&&s++,i},s=0;s<e.length;s++)if(i)"'"!=e.charAt(s)||n("'")?t+=e.charAt(s):i=!1;else switch(e.charAt(s)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":n("'")?t+="'":i=!0;break;default:t+=e.charAt(s)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var i,n,s=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null;i=n=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(s,r,o)||n}catch(a){this.log(a),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,i){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(i){}for(var n=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,s=n.getFullYear(),r=n.getMonth(),o=n.getDate(),a=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(t);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(s,r));break;case"y":case"Y":s+=parseInt(l[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(s,r))}l=a.exec(t)}return new Date(s,r,o)},r=null==t||""===t?i:"string"==typeof t?s(t):"number"==typeof t?isNaN(t)?i:n(t):new Date(t.getTime());return r=r&&"Invalid Date"==r.toString()?i:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,s=e.selectedMonth,r=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(s!=e.selectedMonth||r!=e.selectedYear)&&!i&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var i=this._get(e,"isRTL"),n=this._get(e,"showButtonPanel"),s=this._get(e,"hideIfNoPrevNext"),r=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),a=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=o[0]||1!=o[1],u=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),d=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-a,f=e.drawYear;if(0>p&&(p+=12,f--),h){var m=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));for(m=d&&d>m?d:m;this._daylightSavingAdjust(new Date(f,p,1))>m;)p--,0>p&&(p=11,f--)}e.drawMonth=p,e.drawYear=f;var g=this._get(e,"prevText");g=r?this.formatDate(g,this._daylightSavingAdjust(new Date(f,p-l,1)),this._getFormatConfig(e)):g;var v=this._canAdjustMonth(e,-1,f,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>":s?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>",y=this._get(e,"nextText");y=r?this.formatDate(y,this._daylightSavingAdjust(new Date(f,p+l,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,f,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+y+"</span></a>":s?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+y+"</span></a>",_=this._get(e,"currentText"),w=this._get(e,"gotoCurrent")&&e.currentDay?u:t;_=r?this.formatDate(_,w,this._getFormatConfig(e)):_;var C=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",S=n?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?C:"")+(this._isInRange(e,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+_+"</button>":"")+(i?"":C)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;for(var k=this._get(e,"showWeek"),E=this._get(e,"dayNames"),I=(this._get(e,"dayNamesShort"),this._get(e,"dayNamesMin")),x=this._get(e,"monthNames"),P=this._get(e,"monthNamesShort"),A=this._get(e,"beforeShowDay"),D=this._get(e,"showOtherMonths"),L=this._get(e,"selectOtherMonths"),O=(this._get(e,"calculateWeek")||this.iso8601Week,this._getDefaultDate(e)),M="",N=0;N<o[0];N++){var R="";this.maxRows=4;for(var U=0;U<o[1];U++){var H=this._daylightSavingAdjust(new Date(f,p,e.selectedDay)),B=" ui-corner-all",F="";if(c){if(F+='<div class="ui-datepicker-group',o[1]>1)switch(U){case 0:F+=" ui-datepicker-group-first",B=" ui-corner-"+(i?"right":"left");break;case o[1]-1:F+=" ui-datepicker-group-last",B=" ui-corner-"+(i?"left":"right");break;default:F+=" ui-datepicker-group-middle",B=""}F+='">'}F+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+B+'">'+(/all|left/.test(B)&&0==N?i?b:v:"")+(/all|right/.test(B)&&0==N?i?v:b:"")+this._generateMonthYearHeader(e,p,f,d,h,N>0||U>0,x,P)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var j=k?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",z=0;7>z;z++){var W=(z+T)%7;j+="<th"+((z+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+E[W]+'">'+I[W]+"</span></th>"}F+=j+"</tr></thead><tbody>";var V=this._getDaysInMonth(f,p);f==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var q=(this._getFirstDayOfMonth(f,p)-T+7)%7,G=Math.ceil((q+V)/7),Y=c&&this.maxRows>G?this.maxRows:G;this.maxRows=Y;for(var X=this._daylightSavingAdjust(new Date(f,p,1-q)),Q=0;Y>Q;Q++){F+="<tr>";for(var K=k?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(X)+"</td>":"",z=0;7>z;z++){var J=A?A.apply(e.input?e.input[0]:null,[X]):[!0,""],Z=X.getMonth()!=p,ee=Z&&!L||!J[0]||d&&d>X||h&&X>h;K+='<td class="'+((z+T+6)%7>=5?" ui-datepicker-week-end":"")+(Z?" ui-datepicker-other-month":"")+(X.getTime()==H.getTime()&&p==e.selectedMonth&&e._keyEvent||O.getTime()==X.getTime()&&O.getTime()==H.getTime()?" "+this._dayOverClass:"")+(ee?" "+this._unselectableClass+" ui-state-disabled":"")+(Z&&!D?"":" "+J[1]+(X.getTime()==u.getTime()?" "+this._currentClass:"")+(X.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(Z&&!D||!J[2]?"":' title="'+J[2]+'"')+(ee?"":' data-handler="selectDay" data-event="click" data-month="'+X.getMonth()+'" data-year="'+X.getFullYear()+'"')+">"+(Z&&!D?"&#xa0;":ee?'<span class="ui-state-default">'+X.getDate()+"</span>":'<a class="ui-state-default'+(X.getTime()==t.getTime()?" ui-state-highlight":"")+(X.getTime()==u.getTime()?" ui-state-active":"")+(Z?" ui-priority-secondary":"")+'" href="#">'+X.getDate()+"</a>")+"</td>",X.setDate(X.getDate()+1),X=this._daylightSavingAdjust(X)}F+=K+"</tr>"}p++,p>11&&(p=0,f++),F+="</tbody></table>"+(c?"</div>"+(o[0]>0&&U==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),R+=F}M+=R}return M+=S+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,M},_generateMonthYearHeader:function(e,t,i,n,s,r,o,a){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),u=this._get(e,"showMonthAfterYear"),d='<div class="ui-datepicker-title">',h="";if(r||!l)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=n&&n.getFullYear()==i,f=s&&s.getFullYear()==i;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var m=0;12>m;m++)(!p||m>=n.getMonth())&&(!f||m<=s.getMonth())&&(h+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+a[m]+"</option>");h+="</select>"}if(u||(d+=h+(!r&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!c)d+='<span class="ui-datepicker-year">'+i+"</span>";else{var g=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?i+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},b=y(g[0]),_=Math.max(b,y(g[1]||""));for(b=n?Math.max(b,n.getFullYear()):b,_=s?Math.min(_,s.getFullYear()):_,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';_>=b;b++)e.yearshtml+='<option value="'+b+'"'+(b==i?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",d+=e.yearshtml,e.yearshtml=null}return d+=this._get(e,"yearSuffix"),u&&(d+=(!r&&l&&c?"":"&#xa0;")+h),d+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"==i?t:0),s=e.drawMonth+("M"==i?t:0),r=Math.min(e.selectedDay,this._getDaysInMonth(n,s))+("D"==i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,s,r)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"==i||"Y"==i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),s=i&&i>t?i:t;return s=n&&s>n?n:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var s=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(i,n+(0>t?t:s[0]*s[1]),1));return 0>t&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max");return(!i||t.getTime()>=i.getTime())&&(!n||t.getTime()<=n.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},s={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var t,n,s,r,o,a=this,l=this.options,c=l.title||"&#160;";t=(this.uiDialog=e("<div>")).addClass(i+l.dialogClass).css({display:"none",outline:0,zIndex:l.zIndex}).attr("tabIndex",-1).keydown(function(t){l.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE&&(a.close(t),t.preventDefault())}).mousedown(function(e){a.moveToTop(!1,e)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(t),n=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){t.focus()}).prependTo(t),s=e("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(e){e.preventDefault(),a.close(e)}).appendTo(n),(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(s),r=e("<span>").uniqueId().addClass("ui-dialog-title").html(c).prependTo(n),o=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(o),t.attr({role:"dialog","aria-labelledby":r.attr("id")}),n.find("*").add(n).disableSelection(),this._hoverable(s),this._focusable(s),l.draggable&&e.fn.draggable&&this._makeDraggable(),l.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(l.buttons),this._isOpen=!1,e.fn.bgiframe&&t.bgiframe(),this._on(t,{keydown:function(i){if(l.modal&&i.keyCode===e.ui.keyCode.TAB){var n=e(":tabbable",t),s=n.filter(":first"),r=n.filter(":last");return i.target!==r[0]||i.shiftKey?i.target===s[0]&&i.shiftKey?(r.focus(1),!1):void 0:(s.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,t=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var i,n,s=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)}):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(i=0,e(".ui-dialog").each(function(){this!==s.uiDialog[0]&&(n=e(this).css("z-index"),isNaN(n)||(i=Math.max(i,n)))}),e.ui.dialog.maxZ=i),this},isOpen:function(){return this._isOpen},moveToTop:function(t,i){var n,s=this.options;return s.modal&&!t||!s.stack&&!s.modal?this._trigger("focus",i):(s.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=s.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),n={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(n),this._trigger("focus",i),this)},open:function(){if(!this._isOpen){var t,i=this.options,n=this.uiDialog;return this._size(),this._position(i.position),n.show(i.show),this.overlay=i.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),t=this.element.find(":tabbable"),t.length||(t=this.uiDialogButtonPane.find(":tabbable"),t.length||(t=n)),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(t){var i=this,n=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof t&&null!==t&&e.each(t,function(){return!(n=!0)}),n?(e.each(t,function(t,n){var s,r;n=e.isFunction(n)?{click:n,text:t}:n,n=e.extend({type:"button"},n),r=n.click,n.click=function(){r.apply(i.element[0],arguments)},s=e("<button></button>",n).appendTo(i.uiButtonSet),e.fn.button&&s.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){e(this).addClass("ui-dialog-dragging"),i._trigger("dragStart",n,t(s))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(s,r){n.position=[r.position.left-i.document.scrollLeft(),r.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._trigger("dragStop",s,t(r)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function n(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}i=i===t?this.options.resizable:i;var s=this,r=this.options,o=this.uiDialog.css("position"),a="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:this._minHeight(),handles:a,start:function(t,i){e(this).addClass("ui-dialog-resizing"),s._trigger("resizeStart",t,n(i))},resize:function(e,t){s._trigger("resize",e,n(t))},stop:function(t,i){e(this).removeClass("ui-dialog-resizing"),r.height=e(this).height(),r.width=e(this).width(),s._trigger("resizeStop",t,n(i)),e.ui.dialog.overlay.resize()}}).css("position",o).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var i,n=[],s=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(n=t.split?t.split(" "):[t[0],t[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(s[e]=n[e],n[e]=t)}),t={my:n[0]+(s[0]<0?s[0]:"+"+s[0])+" "+n[1]+(s[1]<0?s[1]:"+"+s[1]),at:n.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()},_setOptions:function(t){var i=this,r={},o=!1;e.each(t,function(e,t){i._setOption(e,t),e in n&&(o=!0),e in s&&(r[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,n){var s,r,o=this.uiDialog;switch(t){case"buttons":this._createButtons(n);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+n);break;case"dialogClass":o.removeClass(this.options.dialogClass).addClass(i+n);break;case"disabled":n?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":s=o.is(":data(draggable)"),s&&!n&&o.draggable("destroy"),!s&&n&&this._makeDraggable();break;case"position":this._position(n);break;case"resizable":r=o.is(":data(resizable)"),r&&!n&&o.resizable("destroy"),r&&"string"==typeof n&&o.resizable("option","handles",n),!r&&n!==!1&&this._makeResizable(n);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(n||"&#160;"))}this._super(t,n)},_size:function(){var t,i,n,s=this.options,r=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),i=Math.max(0,s.minHeight-t),"auto"===s.height?e.support.minHeight?this.element.css({minHeight:i,height:"auto"}):(this.uiDialog.show(),n=this.element.css("height","auto").height(),r||this.uiDialog.hide(),this.element.height(Math.max(n,i))):this.element.height(Math.max(s.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){0===this.instances.length&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){return e(t.target).zIndex()<e.ui.dialog.overlay.maxZ?!1:void 0})},1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var i=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",function(n){var s=e.ui.dialog.overlay.instances;0!==s.length&&s[s.length-1]===i&&t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}),i.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){var i=e.inArray(t,this.instances),n=0;-1!==i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,function(){n=Math.max(n,this.css("z-index"))}),this.maxZ=n},height:function(){var t,i;return e.ui.ie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),i>t?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,i;return e.ui.ie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),i>t?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var n=this.element[0],s=!1;n&&(n=n.parentNode);)n==document&&(s=!0);if(!s&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var r=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]!=this.element[0]&&!/(fixed|absolute)/.test(n.css("position"))&&n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();
var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var i=e(t.containment),n=i[0];if(!n)return;var s=(i.offset(),"hidden"!=e(n).css("overflow"));this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(s?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*n}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(n[0].tagName),r=t.pageX,o=t.pageY;if(this.originalPosition){var a;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();a=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else a=this.containment;t.pageX-this.offset.click.left<a[0]&&(r=a[0]+this.offset.click.left),t.pageY-this.offset.click.top<a[1]&&(o=a[1]+this.offset.click.top),t.pageX-this.offset.click.left>a[2]&&(r=a[2]+this.offset.click.left),t.pageY-this.offset.click.top>a[3]&&(o=a[3]+this.offset.click.top)}if(i.grid){var c=i.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;o=a&&(c-this.offset.click.top<a[1]||c-this.offset.click.top>a[3])?c-this.offset.click.top<a[1]?c+i.grid[1]:c-i.grid[1]:c;var u=i.grid[0]?this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;r=a&&(u-this.offset.click.left<a[0]||u-this.offset.click.left>a[2])?u-this.offset.click.left<a[0]?u+i.grid[0]:u-i.grid[0]:u}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:n.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:n.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("draggable"),s=n.options,r=e.extend({},i,{item:n.element});n.sortables=[],e(s.connectToSortable).each(function(){var i=e.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,r))})},stop:function(t,i){var n=e(this).data("draggable"),s=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,i){var n=e(this).data("draggable"),s=this;e.each(n.sortables,function(r){var o=!1,a=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!=a&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i){var n=e("body"),s=e(this).data("draggable").options;n.css("cursor")&&(s._cursor=n.css("cursor")),n.css("cursor",s.cursor)},stop:function(t,i){var n=e(this).data("draggable").options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),s=e(this).data("draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(t,i){var n=e(this).data("draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,i){var n=e(this).data("draggable");n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName&&(n.overflowOffset=n.scrollParent.offset())},drag:function(t,i){var n=e(this).data("draggable"),s=n.options,r=!1;n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName?(s.axis&&"x"==s.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-n.overflowOffset.top<s.scrollSensitivity&&(n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"==s.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-n.overflowOffset.left<s.scrollSensitivity&&(n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"==s.axis||(t.pageY-e(document).scrollTop()<s.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"==s.axis||(t.pageX-e(document).scrollLeft()<s.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i){var n=e(this).data("draggable"),s=n.options;n.snapElements=[],e(s.snap.constructor!=String?s.snap.items||":data(draggable)":s.snap).each(function(){var t=e(this),i=t.offset();this!=n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i){for(var n=e(this).data("draggable"),s=n.options,r=s.snapTolerance,o=i.offset.left,a=o+n.helperProportions.width,l=i.offset.top,c=l+n.helperProportions.height,u=n.snapElements.length-1;u>=0;u--){var d=n.snapElements[u].left,h=d+n.snapElements[u].width,p=n.snapElements[u].top,f=p+n.snapElements[u].height;if(o>d-r&&h+r>o&&l>p-r&&f+r>l||o>d-r&&h+r>o&&c>p-r&&f+r>c||a>d-r&&h+r>a&&l>p-r&&f+r>l||a>d-r&&h+r>a&&c>p-r&&f+r>c){if("inner"!=s.snapMode){var m=Math.abs(p-c)<=r,g=Math.abs(f-l)<=r,v=Math.abs(d-a)<=r,y=Math.abs(h-o)<=r;m&&(i.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:f,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d-n.helperProportions.width}).left-n.margins.left),y&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left)}var b=m||g||v||y;if("outer"!=s.snapMode){var m=Math.abs(p-l)<=r,g=Math.abs(f-c)<=r,v=Math.abs(d-o)<=r,y=Math.abs(h-a)<=r;m&&(i.position.top=n._convertPositionTo("relative",{top:p,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d}).left-n.margins.left),y&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left)}!n.snapElements[u].snapping&&(m||g||v||y||b)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=m||g||v||y||b}else n.snapElements[u].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(t,i){var n=e(this).data("draggable").options,s=e.makeArray(e(n.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});if(s.length){var r=parseInt(s[0].style.zIndex)||0;e(s).each(function(e){this.style.zIndex=r+e}),this[0].style.zIndex=r+s.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),s=e(this).data("draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(t,i){var n=e(this).data("draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e,t){e.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;i<t.length;i++)t[i]==this&&t.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return!1;var s=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope==n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(s=!0,!1):void 0}),s?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,i,n){if(!i.offset)return!1;var s=(t.positionAbs||t.position.absolute).left,r=s+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,a=o+t.helperProportions.height,l=i.offset.left,c=l+i.proportions.width,u=i.offset.top,d=u+i.proportions.height;switch(n){case"fit":return s>=l&&c>=r&&o>=u&&d>=a;case"intersect":return l<s+t.helperProportions.width/2&&r-t.helperProportions.width/2<c&&u<o+t.helperProportions.height/2&&a-t.helperProportions.height/2<d;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,f=e.ui.isOver(p,h,u,l,i.proportions.height,i.proportions.width);return f;case"touch":return(o>=u&&d>=o||a>=u&&d>=a||u>o&&a>d)&&(s>=l&&c>=s||r>=l&&c>=r||l>s&&r>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n=e.ui.ddmanager.droppables[t.options.scope]||[],s=i?i.type:null,r=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<n.length;o++)if(!(n[o].options.disabled||t&&!n[o].accept.call(n[o].element[0],t.currentItem||t.element))){for(var a=0;a<r.length;a++)if(r[a]==n[o].element[0]){n[o].proportions.height=0;continue e}n[o].visible="none"!=n[o].element.css("display"),n[o].visible&&("mousedown"==s&&n[o]._activate.call(n[o],i),n[o].offset=n[o].element.offset(),n[o].proportions={width:n[o].element[0].offsetWidth,height:n[o].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n=e.ui.intersect(t,this,this.options.tolerance),s=n||1!=this.isover?n&&0==this.isover?"isover":null:"isout";if(s){var r;if(this.options.greedy){var o=this.options.scope,a=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===o});a.length&&(r=e.data(a[0],"droppable"),r.greedyChild="isover"==s?1:0)}r&&"isover"==s&&(r.isover=0,r.isout=1,r._out.call(r,i)),this[s]=1,this["isout"==s?"isover":"isout"]=0,this["isover"==s?"_over":"_out"].call(this,i),r&&"isout"==s&&(r.isout=0,r.isover=1,r._over.call(r,i))}}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),jQuery.effects||function(e,t){var i=e.uiBackCompat!==!1,n="ui-effects-";e.effects={effect:{}},function(t,i){function n(e,t,i){var n=h[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function s(e){var i=u(),n=i._rgba=[];return e=e.toLowerCase(),m(c,function(t,s){var r,o=s.re.exec(e),a=o&&s.parse(o),l=s.space||"rgba";return a?(r=i[l](a),i[d[l].cache]=r[d[l].cache],n=i._rgba=r._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&t.extend(n,o.transparent),i):o[e]}function r(e,t,i){return i=(i+1)%1,1>6*i?e+(t-e)*i*6:1>2*i?t:2>3*i?e+(t-e)*(2/3-i)*6:e}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),l=/^([\-+])=\s*(\d+\.?\d*)/,c=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],u=t.Color=function(e,i,n,s){return new t.Color.fn.parse(e,i,n,s)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=u.support={},f=t("<p>")[0],m=t.each;f.style.cssText="background-color:rgba(1,1,1,.5)",p.rgba=f.style.backgroundColor.indexOf("rgba")>-1,m(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),u.fn=t.extend(u.prototype,{parse:function(r,a,l,c){if(r===i)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=t(r).css(a),a=i);var h=this,p=t.type(r),f=this._rgba=[];return a!==i&&(r=[r,a,l,c],p="array"),"string"===p?this.parse(s(r)||o._default):"array"===p?(m(d.rgba.props,function(e,t){f[t.idx]=n(r[t.idx],t)}),this):"object"===p?(r instanceof u?m(d,function(e,t){r[t.cache]&&(h[t.cache]=r[t.cache].slice())}):m(d,function(t,i){var s=i.cache;m(i.props,function(e,t){if(!h[s]&&i.to){if("alpha"===e||null==r[e])return;h[s]=i.to(h._rgba)}h[s][t.idx]=n(r[e],t,!0)}),h[s]&&e.inArray(null,h[s].slice(0,3))<0&&(h[s][3]=1,i.from&&(h._rgba=i.from(h[s])))}),this):void 0},is:function(e){var t=u(e),i=!0,n=this;return m(d,function(e,s){var r,o=t[s.cache];return o&&(r=n[s.cache]||s.to&&s.to(n._rgba)||[],m(s.props,function(e,t){return null!=o[t.idx]?i=o[t.idx]===r[t.idx]:void 0})),i}),i},_space:function(){var e=[],t=this;return m(d,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var i=u(e),s=i._space(),r=d[s],o=0===this.alpha()?u("transparent"):this,a=o[r.cache]||r.to(o._rgba),l=a.slice();return i=i[r.cache],m(r.props,function(e,s){var r=s.idx,o=a[r],c=i[r],u=h[s.type]||{};null!==c&&(null===o?l[r]=c:(u.mod&&(c-o>u.mod/2?o+=u.mod:o-c>u.mod/2&&(o-=u.mod)),l[r]=n((c-o)*t+o,s)))}),this[s](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=u(e)._rgba;return u(t.map(i,function(e,t){return(1-n)*s[t]+n*e}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,s=e[1]/255,r=e[2]/255,o=e[3],a=Math.max(n,s,r),l=Math.min(n,s,r),c=a-l,u=a+l,d=.5*u;return t=l===a?0:n===a?60*(s-r)/c+360:s===a?60*(r-n)/c+120:60*(n-s)/c+240,i=0===d||1===d?d:.5>=d?c/u:c/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],s=e[3],o=.5>=n?n*(1+i):n+i-n*i,a=2*n-o;return[Math.round(255*r(a,o,t+1/3)),Math.round(255*r(a,o,t)),Math.round(255*r(a,o,t-1/3)),s]},m(d,function(e,s){var r=s.props,o=s.cache,a=s.to,c=s.from;u.fn[e]=function(e){if(a&&!this[o]&&(this[o]=a(this._rgba)),e===i)return this[o].slice();var s,l=t.type(e),d="array"===l||"object"===l?e:arguments,h=this[o].slice();return m(r,function(e,t){var i=d["object"===l?e:t.idx];null==i&&(i=h[t.idx]),h[t.idx]=n(i,t)}),c?(s=u(c(h)),s[o]=h,s):u(h)},m(r,function(i,n){u.fn[i]||(u.fn[i]=function(s){var r,o=t.type(s),a="alpha"===i?this._hsla?"hsla":"rgba":e,c=this[a](),u=c[n.idx];return"undefined"===o?u:("function"===o&&(s=s.call(this,u),o=t.type(s)),null==s&&n.empty?this:("string"===o&&(r=l.exec(s),r&&(s=u+parseFloat(r[2])*("+"===r[1]?1:-1))),c[n.idx]=s,this[a](c)))})})}),m(a,function(e,i){t.cssHooks[i]={set:function(e,n){var r,o,a="";if("string"!==t.type(n)||(r=s(n))){if(n=u(r||n),!p.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?e.parentNode:e;(""===a||"transparent"===a)&&o&&o.style;)try{a=t.css(o,"backgroundColor"),o=o.parentNode}catch(l){}n=n.blend(a&&"transparent"!==a?a:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(c){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=u(e.elem,i),e.end=u(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return m(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var t,i,n=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,s={};if(n&&n.length&&n[0]&&n[n[0]])for(i=n.length;i--;)t=n[i],"string"==typeof n[t]&&(s[e.camelCase(t)]=n[t]);else for(t in n)"string"==typeof n[t]&&(s[t]=n[t]);return s}function n(t,i){var n,s,o={};for(n in i)s=i[n],t[n]!==s&&!r[n]&&(e.fx.step[n]||!isNaN(parseFloat(s)))&&(o[n]=s);return o}var s=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.effects.animateClass=function(t,r,o,a){var l=e.speed(r,o,a);return this.queue(function(){var r,o=e(this),a=o.attr("class")||"",c=l.children?o.find("*").andSelf():o;c=c.map(function(){var t=e(this);return{el:t,start:i.call(this)}}),r=function(){e.each(s,function(e,i){t[i]&&o[i+"Class"](t[i])})},r(),c=c.map(function(){return this.end=i.call(this.el[0]),this.diff=n(this.start,this.end),this}),o.attr("class",a),c=c.map(function(){var t=this,i=e.Deferred(),n=jQuery.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){r(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(o[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,i,n,s){return i?e.effects.animateClass.call(this,{add:t},i,n,s):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,i,n,s){return i?e.effects.animateClass.call(this,{remove:t},i,n,s):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(i,n,s,r,o){return"boolean"==typeof n||n===t?s?e.effects.animateClass.call(this,n?{add:i}:{remove:i},s,r,o):this._toggleClass(i,n):e.effects.animateClass.call(this,{toggle:i},n,s,r)},switchClass:function(t,i,n,s,r){return e.effects.animateClass.call(this,{add:i,remove:t},n,s,r)}})}(),function(){function s(t,i,n,s){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(s=n,n=i,i={}),e.isFunction(n)&&(s=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=s||i.complete,t}function r(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?!1:i&&e.effects[t]?!1:!0}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,i){var s,r;for(r=0;r<i.length;r++)null!==i[r]&&(s=e.data(n+i[r]),s===t&&(s=""),e.css(i[r],s))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(o){r=document.body}return t.wrap(n),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(s),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,s){return s=s||{},e.each(i,function(e,i){var r=t.cssUnit(i);r[0]>0&&(s[i]=r[0]*n+r[1])}),s}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(r)&&r.call(s[0]),e.isFunction(t)&&t()}var s=e(this),r=n.complete,o=n.mode;(s.is(":hidden")?"hide"===o:"show"===o)?i():a.call(s[0],n,i)}var n=s.apply(this,arguments),r=n.mode,o=n.queue,a=e.effects.effect[n.effect],l=!a&&i&&e.effects[n.effect];return e.fx.off||!a&&!l?r?this[r](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):a?o===!1?this.each(t):this.queue(o||"fx",t):l.call(this,{options:n,duration:n.duration,callback:n.complete,mode:n.mode})},_show:e.fn.show,show:function(e){if(r(e))return this._show.apply(this,arguments);var t=s.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(r(e))return this._hide.apply(this,arguments);var t=s.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(r(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}()}(jQuery),function(e,t){var i=/up|down|vertical/,n=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,s){var r,o,a,l=e(this),c=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(l,t.mode||"hide"),d=t.direction||"up",h=i.test(d),p=h?"height":"width",f=h?"top":"left",m=n.test(d),g={},v="show"===u;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),r=e.effects.createWrapper(l).css({overflow:"hidden"}),o=r[p](),a=parseFloat(r.css(f))||0,g[p]=v?o:0,m||(l.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:o+a),v&&(r.css(p,0),m||r.css(f,a+o)),r.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),s()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,i){var n,s,r,o=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(o,t.mode||"effect"),c="hide"===l,u="show"===l,d=t.direction||"up",h=t.distance,p=t.times||5,f=2*p+(u||c?1:0),m=t.duration/f,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=o.queue(),_=b.length;
for((u||c)&&a.push("opacity"),e.effects.save(o,a),o.show(),e.effects.createWrapper(o),h||(h=o["top"===v?"outerHeight":"outerWidth"]()/3),u&&(r={opacity:1},r[v]=0,o.css("opacity",0).css(v,y?2*-h:2*h).animate(r,m,g)),c&&(h/=Math.pow(2,p-1)),r={},r[v]=0,n=0;p>n;n++)s={},s[v]=(y?"-=":"+=")+h,o.animate(s,m,g).animate(r,m,g),h=c?2*h:h/2;c&&(s={opacity:0},s[v]=(y?"-=":"+=")+h,o.animate(s,m,g)),o.queue(function(){c&&o.hide(),e.effects.restore(o,a),e.effects.removeWrapper(o),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),o.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,i){var n,s,r,o=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(o,t.mode||"hide"),c="show"===l,u=t.direction||"vertical",d="vertical"===u,h=d?"height":"width",p=d?"top":"left",f={};e.effects.save(o,a),o.show(),n=e.effects.createWrapper(o).css({overflow:"hidden"}),s="IMG"===o[0].tagName?n:o,r=s[h](),c&&(s.css(h,0),s.css(p,r/2)),f[h]=c?r:0,f[p]=c?0:r/2,s.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||o.hide(),e.effects.restore(o,a),e.effects.removeWrapper(o),i()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,i){var n,s=e(this),r=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(s,t.mode||"hide"),a="show"===o,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",d={opacity:a?1:0};e.effects.save(s,r),s.show(),e.effects.createWrapper(s),n=t.distance||s["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&s.css("opacity",0).css(c,"pos"===u?-n:n),d[c]=(a?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+n,s.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&s.hide(),e.effects.restore(s,r),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,i){function n(){b.push(this),b.length===d*h&&s()}function s(){p.css({visibility:"visible"}),e(b).remove(),m||p.hide(),i()}var r,o,a,l,c,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=d,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/h),y=Math.ceil(p.outerHeight()/d),b=[];for(r=0;d>r;r++)for(l=g.top+r*y,u=r-(d-1)/2,o=0;h>o;o++)a=g.left+o*v,c=o-(h-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-r*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:a+(m?c*v:0),top:l+(m?u*y:0),opacity:m?0:1}).animate({left:a+(m?0:c*v),top:l+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,n)}}(jQuery),function(e,t){e.effects.effect.fade=function(t,i){var n=e(this),s=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:s},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,i){var n,s,r=e(this),o=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(r,t.mode||"hide"),l="show"===a,c="hide"===a,u=t.size||15,d=/([0-9]+)%/.exec(u),h=!!t.horizFirst,p=l!==h,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(r,o),r.show(),n=e.effects.createWrapper(r).css({overflow:"hidden"}),s=p?[n.width(),n.height()]:[n.height(),n.width()],d&&(u=parseInt(d[1],10)/100*s[c?0:1]),l&&n.css(h?{height:0,width:u}:{height:u,width:0}),g[f[0]]=l?s[0]:u,v[f[1]]=l?s[1]:0,n.animate(g,m,t.easing).animate(v,m,t.easing,function(){c&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),i()})}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,i){var n=e(this),s=["backgroundImage","backgroundColor","opacity"],r=e.effects.setMode(n,t.mode||"show"),o={backgroundColor:n.css("backgroundColor")};"hide"===r&&(o.opacity=0),e.effects.save(n,s),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&n.hide(),e.effects.restore(n,s),i()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,i){var n,s=e(this),r=e.effects.setMode(s,t.mode||"show"),o="show"===r,a="hide"===r,l=o||"hide"===r,c=2*(t.times||5)+(l?1:0),u=t.duration/c,d=0,h=s.queue(),p=h.length;for((o||!s.is(":visible"))&&(s.css("opacity",0).show(),d=1),n=1;c>n;n++)s.animate({opacity:d},u,t.easing),d=1-d;s.animate({opacity:d},u,t.easing),s.queue(function(){a&&s.hide(),i()}),p>1&&h.splice.apply(h,[1,0].concat(h.splice(p,c+1))),s.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,i){var n=e(this),s=e.effects.setMode(n,t.mode||"hide"),r="hide"===s,o=parseInt(t.percent,10)||150,a=o/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:s,complete:i,percent:r?o:100,from:r?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),s=e.extend(!0,{},t),r=e.effects.setMode(n,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===r?0:100),a=t.direction||"both",l=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},u={y:"horizontal"!==a?o/100:1,x:"vertical"!==a?o/100:1};s.effect="size",s.queue=!1,s.complete=i,"effect"!==r&&(s.origin=l||["middle","center"],s.restore=!0),s.from=t.from||("show"===r?{height:0,width:0,outerHeight:0,outerWidth:0}:c),s.to={height:c.height*u.y,width:c.width*u.x,outerHeight:c.outerHeight*u.y,outerWidth:c.outerWidth*u.x},s.fade&&("show"===r&&(s.from.opacity=0,s.to.opacity=1),"hide"===r&&(s.from.opacity=1,s.to.opacity=0)),n.effect(s)},e.effects.effect.size=function(t,i){var n,s,r,o=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=o.css("position"),y=f?a:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),n={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||n):(o.from=t.from||("show"===p?b:n),o.to=t.to||("hide"===p?b:n)),r={from:{y:o.from.height/n.height,x:o.from.width/n.width},to:{y:o.to.height/n.height,x:o.to.width/n.width}},("box"===m||"both"===m)&&(r.from.y!==r.to.y&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,r.from.y,o.from),o.to=e.effects.setTransition(o,d,r.to.y,o.to)),r.from.x!==r.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,r.from.x,o.from),o.to=e.effects.setTransition(o,h,r.to.x,o.to))),("content"===m||"both"===m)&&r.from.y!==r.to.y&&(y=y.concat(u).concat(c),o.from=e.effects.setTransition(o,u,r.from.y,o.from),o.to=e.effects.setTransition(o,u,r.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(s=e.effects.getBaseline(g,n),o.from.top=(n.outerHeight-o.outerHeight())*s.y,o.from.left=(n.outerWidth-o.outerWidth())*s.x,o.to.top=(n.outerHeight-o.to.outerHeight)*s.y,o.to.left=(n.outerWidth-o.to.outerWidth)*s.x),o.css(o.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),h=h.concat(["marginLeft","marginRight"]),c=a.concat(d).concat(h),o.find("*[width]").each(function(){var i=e(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,c),i.from={height:n.height*r.from.y,width:n.width*r.from.x,outerHeight:n.outerHeight*r.from.y,outerWidth:n.outerWidth*r.from.x},i.to={height:n.height*r.to.y,width:n.width*r.to.x,outerHeight:n.height*r.to.y,outerWidth:n.width*r.to.x},r.from.y!==r.to.y&&(i.from=e.effects.setTransition(i,d,r.from.y,i.from),i.to=e.effects.setTransition(i,d,r.to.y,i.to)),r.from.x!==r.to.x&&(i.from=e.effects.setTransition(i,h,r.from.x,i.from),i.to=e.effects.setTransition(i,h,r.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,c)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var n=parseInt(i,10),s=e?o.to.left:o.to.top;return"auto"===i?s+"px":n+s+"px"})})),e.effects.removeWrapper(o),i()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,i){var n,s=e(this),r=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(s,t.mode||"effect"),a=t.direction||"left",l=t.distance||20,c=t.times||3,u=2*c+1,d=Math.round(t.duration/u),h="up"===a||"down"===a?"top":"left",p="up"===a||"left"===a,f={},m={},g={},v=s.queue(),y=v.length;for(e.effects.save(s,r),s.show(),e.effects.createWrapper(s),f[h]=(p?"-=":"+=")+l,m[h]=(p?"+=":"-=")+2*l,g[h]=(p?"-=":"+=")+2*l,s.animate(f,d,t.easing),n=1;c>n;n++)s.animate(m,d,t.easing).animate(g,d,t.easing);s.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){"hide"===o&&s.hide(),e.effects.restore(s,r),e.effects.removeWrapper(s),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),s.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,i){var n,s=e(this),r=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(s,t.mode||"show"),a="show"===o,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,d={};e.effects.save(s,r),s.show(),n=t.distance||s["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(s).css({overflow:"hidden"}),a&&s.css(c,u?isNaN(n)?"-"+n:-n:n),d[c]=(a?u?"+=":"-=":u?"-=":"+=")+n,s.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&s.hide(),e.effects.restore(s,r),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,i){var n=e(this),s=e(t.to),r="fixed"===s.css("position"),o=e("body"),a=r?o.scrollTop():0,l=r?o.scrollLeft():0,c=s.offset(),u={top:c.top-a,left:c.left-l,height:s.innerHeight(),width:s.innerWidth()},d=n.offset(),h=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.className).css({top:d.top-a,left:d.left-l,height:n.innerHeight(),width:n.innerWidth(),position:r?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){h.remove(),i()})}}(jQuery),function(e,t){var i=!1;e.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!i&&n.not(".ui-state-disabled").length&&(i=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),i=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,s,r,o,a,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,s=this.previousFilter||"",r=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),r===s?o=!0:r=s+r,a=new RegExp("^"+i(r),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())}),n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(r=String.fromCharCode(t.keyCode),a=new RegExp("^"+i(r),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),s=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,s,r,o,a;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,s=t.offset().top-this.activeMenu.offset().top-i-n,r=this.activeMenu.scrollTop(),o=this.activeMenu.height(),a=t.height(),0>s?this.activeMenu.scrollTop(r+s):s+a>o&&this.activeMenu.scrollTop(r+s-o+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,s;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n-s<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,s;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+s>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(e,t){"value"===e&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(e,t)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}})}(jQuery),function(e,t){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,i=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var n=this.handles.split(",");this.handles={};for(var s=0;s<n.length;s++){var r=e.trim(n[s]),o="ui-resizable-"+r,a=e('<div class="ui-resizable-handle '+o+'"></div>');a.css({zIndex:i.zIndex}),"se"==r&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(a)}}this._renderAxis=function(t){t=t||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n=e(this.handles[i],this.element),s=0;s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth();var r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");t.css(r,s),this._proportionallyResize()}e(this.handles[i]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),i.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){i.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())}).mouseleave(function(){i.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var i=this.element;this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var n in this.handles)e(this.handles[n])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var n=this.options,s=this.element.position(),r=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(r.is(".ui-draggable")||/absolute/.test(r.css("position")))&&r.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy();var o=i(this.helper.css("left")),a=i(this.helper.css("top"));n.containment&&(o+=e(n.containment).scrollLeft()||0,a+=e(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:a},this.size=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalPosition={left:o,top:a},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==l?this.axis+"-resize":l),r.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var t=this.helper,i=(this.options,this.originalMousePosition),n=this.axis,s=e.pageX-i.left||0,r=e.pageY-i.top||0,o=this._change[n];if(!o)return!1;var a=o.apply(this,[e,s,r]);return this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(a=this._updateRatio(a,e)),a=this._respectSize(a,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(a),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var i=this.options,n=this;if(this._helper){var s=this._proportionallyResizeElements,r=s.length&&/textarea/i.test(s[0].nodeName),o=r&&e.ui.hasScroll(s[0],"left")?0:n.sizeDiff.height,a=r?0:n.sizeDiff.width,l={width:n.helper.width()-a,height:n.helper.height()-o},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;i.animate||this.element.css(e.extend(l,{top:u,left:c})),n.helper.height(n.size.height),n.helper.width(n.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,s,r,o,a=this.options;o={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,r=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),s>o.minHeight&&(o.minHeight=s),i<o.maxWidth&&(o.maxWidth=i),r<o.maxHeight&&(o.maxHeight=r)),this._vBoundaries=o},_updateCache:function(e){this.options;this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var i=(this.options,this.position),s=this.size,r=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==r&&(e.left=i.left+(s.width-e.width),e.top=null),"nw"==r&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var i=(this.helper,this._vBoundaries),s=(this._aspectRatio||t.shiftKey,this.axis),r=n(e.width)&&i.maxWidth&&i.maxWidth<e.width,o=n(e.height)&&i.maxHeight&&i.maxHeight<e.height,a=n(e.width)&&i.minWidth&&i.minWidth>e.width,l=n(e.height)&&i.minHeight&&i.minHeight>e.height;a&&(e.width=i.minWidth),l&&(e.height=i.minHeight),r&&(e.width=i.maxWidth),o&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,d=/sw|nw|w/.test(s),h=/nw|ne|n/.test(s);a&&d&&(e.left=c-i.minWidth),r&&d&&(e.left=c-i.maxWidth),l&&h&&(e.top=u-i.minHeight),o&&h&&(e.top=u-i.maxHeight);var p=!e.width&&!e.height;return p&&!e.left&&e.top?e.top=null:p&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var t=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var n=this._proportionallyResizeElements[i];if(!this.borderDif){var s=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],r=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var i=parseInt(e,10)||0,n=parseInt(r[t],10)||0;return i+n})}n.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,i=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var n=e.ui.ie6?1:0,s=e.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+s,height:this.element.outerHeight()+s,position:"absolute",left:this.elementOffset.left-n+"px",top:this.elementOffset.top-n+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,i){return{width:this.originalSize.width+t}},w:function(e,t,i){var n=(this.options,this.originalSize),s=this.originalPosition;return{left:s.left+t,width:n.width-t}},n:function(e,t,i){var n=(this.options,this.originalSize),s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!=t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,i){var n=e(this).data("resizable"),s=n.options,r=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof s.alsoResize||s.alsoResize.parentNode?r(s.alsoResize):s.alsoResize.length?(s.alsoResize=s.alsoResize[0],r(s.alsoResize)):e.each(s.alsoResize,function(e){r(e)})},resize:function(t,i){var n=e(this).data("resizable"),s=n.options,r=n.originalSize,o=n.originalPosition,a={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0},l=function(t,n){e(t).each(function(){
var t=e(this),s=e(this).data("resizable-alsoresize"),r={},o=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(s[t]||0)+(a[t]||0);i&&i>=0&&(r[t]=i||null)}),t.css(r)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?l(s.alsoResize):e.each(s.alsoResize,function(e,t){l(e,t)})},stop:function(t,i){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,i){var n=e(this).data("resizable"),s=n.options,r=n._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),a=o&&e.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,l=o?0:n.sizeDiff.width,c={width:n.size.width-l,height:n.size.height-a},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,d=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(c,d&&u?{top:d,left:u}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,n){var s=e(this).data("resizable"),r=s.options,o=s.element,a=r.containment,l=a instanceof e?a.get(0):/parent/.test(a)?o.parent().get(0):a;if(l)if(s.containerElement=e(l),/document/.test(a)||a==document)s.containerOffset={left:0,top:0},s.containerPosition={left:0,top:0},s.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var c=e(l),u=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){u[e]=i(c.css("padding"+t))}),s.containerOffset=c.offset(),s.containerPosition=c.position(),s.containerSize={height:c.innerHeight()-u[3],width:c.innerWidth()-u[1]};var d=s.containerOffset,h=s.containerSize.height,p=s.containerSize.width,f=e.ui.hasScroll(l,"left")?l.scrollWidth:p,m=e.ui.hasScroll(l)?l.scrollHeight:h;s.parentData={element:l,left:d.left,top:d.top,width:f,height:m}}},resize:function(t,i){var n=e(this).data("resizable"),s=n.options,r=(n.containerSize,n.containerOffset),o=(n.size,n.position),a=n._aspectRatio||t.shiftKey,l={top:0,left:0},c=n.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=r),o.left<(n._helper?r.left:0)&&(n.size.width=n.size.width+(n._helper?n.position.left-r.left:n.position.left-l.left),a&&(n.size.height=n.size.width/n.aspectRatio),n.position.left=s.helper?r.left:0),o.top<(n._helper?r.top:0)&&(n.size.height=n.size.height+(n._helper?n.position.top-r.top:n.position.top),a&&(n.size.width=n.size.height*n.aspectRatio),n.position.top=n._helper?r.top:0),n.offset.left=n.parentData.left+n.position.left,n.offset.top=n.parentData.top+n.position.top;var u=Math.abs((n._helper?n.offset.left-l.left:n.offset.left-l.left)+n.sizeDiff.width),d=Math.abs((n._helper?n.offset.top-l.top:n.offset.top-r.top)+n.sizeDiff.height),h=n.containerElement.get(0)==n.element.parent().get(0),p=/relative|absolute/.test(n.containerElement.css("position"));h&&p&&(u-=n.parentData.left),u+n.size.width>=n.parentData.width&&(n.size.width=n.parentData.width-u,a&&(n.size.height=n.size.width/n.aspectRatio)),d+n.size.height>=n.parentData.height&&(n.size.height=n.parentData.height-d,a&&(n.size.width=n.size.height*n.aspectRatio))},stop:function(t,i){var n=e(this).data("resizable"),s=n.options,r=(n.position,n.containerOffset),o=n.containerPosition,a=n.containerElement,l=e(n.helper),c=l.offset(),u=l.outerWidth()-n.sizeDiff.width,d=l.outerHeight()-n.sizeDiff.height;n._helper&&!s.animate&&/relative/.test(a.css("position"))&&e(this).css({left:c.left-o.left-r.left,width:u,height:d}),n._helper&&!s.animate&&/static/.test(a.css("position"))&&e(this).css({left:c.left-o.left-r.left,width:u,height:d})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,i){var n=e(this).data("resizable"),s=n.options,r=n.size;n.ghost=n.originalElement.clone(),n.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof s.ghost?s.ghost:""),n.ghost.appendTo(n.helper)},resize:function(t,i){var n=e(this).data("resizable");n.options;n.ghost&&n.ghost.css({position:"relative",height:n.size.height,width:n.size.width})},stop:function(t,i){var n=e(this).data("resizable");n.options;n.ghost&&n.helper&&n.helper.get(0).removeChild(n.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,i){var n=e(this).data("resizable"),s=n.options,r=n.size,o=n.originalSize,a=n.originalPosition,l=n.axis;s._aspectRatio||t.shiftKey;s.grid="number"==typeof s.grid?[s.grid,s.grid]:s.grid;var c=Math.round((r.width-o.width)/(s.grid[0]||1))*(s.grid[0]||1),u=Math.round((r.height-o.height)/(s.grid[1]||1))*(s.grid[1]||1);/^(se|s|e)$/.test(l)?(n.size.width=o.width+c,n.size.height=o.height+u):/^(ne)$/.test(l)?(n.size.width=o.width+c,n.size.height=o.height+u,n.position.top=a.top-u):/^(sw)$/.test(l)?(n.size.width=o.width+c,n.size.height=o.height+u,n.position.left=a.left-c):(n.size.width=o.width+c,n.size.height=o.height+u,n.position.top=a.top-u,n.position.left=a.left-c)}});var i=function(e){return parseInt(e,10)||0},n=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var i;this.refresh=function(){i=e(t.options.filter,t.element[0]),i.addClass("ui-selectee"),i.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=i.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var n=this.options;this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,!t.metaKey&&!t.ctrlKey&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().andSelf().each(function(){var n=e.data(this,"selectable-item");if(n){var s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected");return n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1}})}},_mouseDrag:function(t){var i=this;if(this.dragged=!0,!this.options.disabled){var n=this.options,s=this.opos[0],r=this.opos[1],o=t.pageX,a=t.pageY;if(s>o){var l=o;o=s,s=l}if(r>a){var l=a;a=r,r=l}return this.helper.css({left:s,top:r,width:o-s,height:a-r}),this.selectees.each(function(){var l=e.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var c=!1;"touch"==n.tolerance?c=!(l.left>o||l.right<s||l.top>a||l.bottom<r):"fit"==n.tolerance&&(c=l.left>s&&l.right<o&&l.top>r&&l.bottom<a),c?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&((t.metaKey||t.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&!t.metaKey&&!t.ctrlKey&&!l.startselected&&(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",t,{unselecting:l.element})))}}),!1}},_mouseStop:function(t){var i=this;this.dragged=!1;this.options;return e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){var i=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,n,s=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(s.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),s.range&&(s.range===!0&&(s.values||(s.values=[this._valueMin(),this._valueMin()]),s.values.length&&2!==s.values.length&&(s.values=[s.values[0],s.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===s.range||"max"===s.range?" ui-slider-range-"+s.range:""))),n=s.values&&s.values.length||1,t=r.length;n>t;t++)a.push(o);this.handles=r.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){s.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){s.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(t){var n,s,r,o,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),n=this._start(t,a),n===!1))return}switch(o=this.options.step,s=r=this.options.values&&this.options.values.length?this.values(a):this.value(),t.keyCode){case e.ui.keyCode.HOME:r=this._valueMin();break;case e.ui.keyCode.END:r=this._valueMax();break;case e.ui.keyCode.PAGE_UP:r=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/i);break;case e.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/i);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;r=this._trimAlignValue(s+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;r=this._trimAlignValue(s-o)}this._slide(t,a,r)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,s,r,o,a,l,c,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-u.values(t));s>i&&(s=i,r=e(this),o=t)}),d.range===!0&&this.values(1)===d.min&&(o+=1,r=e(this.handles[o])),a=this._start(t,o),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,r.addClass("ui-state-active").focus(),l=r.offset(),c=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-r.width()/2,top:t.pageY-l.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,s,r;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),r=this._valueMin()+n*s,this._trimAlignValue(r)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,s,r;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(s=this.values(),s[t]=i,r=this._trigger("slide",e,{handle:this.handles[t],value:i,values:s}),n=this.values(t?0:1),r!==!1&&this.values(t,i,!0))):i!==this.value()&&(r=this._trigger("slide",e,{handle:this.handles[t],value:i}),r!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var n,s,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,s=arguments[0],r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(s[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,i){var n,s=0;switch(e.isArray(this.options.values)&&(s=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,s,r,o=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](u,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(n=this.value(),s=this._valueMin(),r=this._valueMax(),i=r!==s?(n-s)/(r-s)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))}})}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var s=null;e(t.target).parents().each(function(){return e.data(this,n.widgetName+"-item")==n?(s=e(this),!1):void 0});if(e.data(t.target,n.widgetName+"-item")==n&&(s=e(t.target)),!s)return!1;if(this.options.handle&&!i){var r=!1;if(e(this.options.handle,s).find("*").andSelf().each(function(){this==t.target&&(r=!0)}),!r)return!1}return this.currentItem=s,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,i,n){var s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this._createPlaceholder(),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),s.containment&&this._setContainment(),s.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",s.cursor)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(var r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,n=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-e(document).scrollTop()<i.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed)),t.pageX-e(document).scrollLeft()<i.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))),n!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var s=this.items.length-1;s>=0;s--){var r=this.items[s],o=r.item[0],a=this._intersectsWithPointer(r);if(a&&r.instance===this.currentContainer&&o!=this.currentItem[0]&&this.placeholder[1==a?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"==this.options.type?!e.contains(this.element[0],o):!0)){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,s=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,r=e.left,o=r+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,d=n+c>a&&l>n+c&&t+u>r&&o>t+u;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:r<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&a<n+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),s=i&&n,r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return s?this.floating?o&&"right"==o||"down"==r?2:1:r&&("down"==r?2:1):!1},_intersectsWithSides:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"==r&&n||"left"==r&&!n:s&&("down"==s&&i||"up"==s&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i=[],n=[],s=this._connectWith();if(s&&t)for(var r=s.length-1;r>=0;r--)for(var o=e(s[r]),a=o.length-1;a>=0;a--){var l=e.data(o[a],this.widgetName);l&&l!=this&&!l.options.disabled&&n.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}n.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var r=n.length-1;r>=0;r--)n[r][0].each(function(){i.push(this)});return e(i)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i=this.items,n=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],s=this._connectWith();if(s&&this.ready)for(var r=s.length-1;r>=0;r--)for(var o=e(s[r]),a=o.length-1;a>=0;a--){var l=e.data(o[a],this.widgetName);l&&l!=this&&!l.options.disabled&&(n.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var r=n.length-1;r>=0;r--)for(var c=n[r][1],u=n[r][0],a=0,d=u.length;d>a;a++){var h=e(u[a]);h.data(this.widgetName+"-item",c),i.push({item:h,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var n=this.items[i];if(n.instance==this.currentContainer||!this.currentContainer||n.item[0]==this.currentItem[0]){var s=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;t||(n.width=s.outerWidth(),n.height=s.outerHeight());var r=s.offset();n.left=r.left,n.top=r.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var r=this.containers[i].element.offset();this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var i=t.options;if(!i.placeholder||i.placeholder.constructor==String){var n=i.placeholder;i.placeholder={element:function(){var i=e(document.createElement(t.currentItem[0].nodeName)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(i.style.visibility="hidden"),i},update:function(e,s){(!n||i.forcePlaceholderSize)&&(s.height()||s.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}}t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){for(var i=null,n=null,s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(i&&e.contains(this.containers[s].element[0],i.element[0]))continue;i=this.containers[s],n=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",t,this._uiHash(this)),this.containers[s].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1;else{for(var r=1e4,o=null,a=this.containers[n].floating?"left":"top",l=this.containers[n].floating?"width":"height",c=this.positionAbs[a]+this.offset.click[a],u=this.items.length-1;u>=0;u--)if(e.contains(this.containers[n].element[0],this.items[u].item[0])&&this.items[u].item[0]!=this.currentItem[0]){
var d=this.items[u].item.offset()[a],h=!1;Math.abs(d-c)>Math.abs(d+this.items[u][l]-c)&&(h=!0,d+=this.items[u][l]),Math.abs(d-c)<r&&(r=Math.abs(d-c),o=this.items[u],this.direction=h?"up":"down")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[n],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[n].element,!0),this._trigger("change",t,this._uiHash()),this.containers[n]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(""==n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var i=e(t.containment)[0],n=e(t.containment).offset(),s="hidden"!=e(i).css("overflow");this.containment=[n.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0)-this.margins.top,n.left+(s?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(s?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*n}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(n[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var r=t.pageX,o=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid)){var a=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1];o=this.containment&&(a-this.offset.click.top<this.containment[1]||a-this.offset.click.top>this.containment[3])?a-this.offset.click.top<this.containment[1]?a+i.grid[1]:a-i.grid[1]:a;var l=this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0];r=this.containment&&(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:n.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:n.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s==this.counter&&this.refreshPositions(!n)})},_clear:function(t,i){this.reverting=!1;var n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var s in this._storedCSS)("auto"==this._storedCSS[s]||"static"==this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!i&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!i&&n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(i||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var s=this.containers.length-1;s>=0;s--)i||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",t,this._uiHash());for(var s=0;s<n.length;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var s=0;s<n.length;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var s=i.attr(n);void 0!==s&&s.length&&(t[n]=s)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){return t?this.spinning||this._start(e)?(this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault(),void 0):!1:void 0},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._spin((e||1)*this.options.step)},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._spin((e||1)*-this.options.step)},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++s}function n(e){return e.hash.length>1&&e.href.replace(r,"")===location.href.replace(r,"").replace(/\s/g,"%20")}var s=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options,n=i.active,s=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),null===n&&(s&&this.tabs.each(function(t,i){return e(i).attr("aria-controls")===s?(n=t,!1):void 0}),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===n||-1===n)&&(n=this.tabs.length?0:!1)),n!==!1&&(n=this.tabs.index(this.tabs.eq(n)),-1===n&&(n=i.collapsible?!1:0)),i.active=n,!i.collapsible&&i.active===!1&&this.anchors.length&&(i.active=0),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=e(),this._refresh(),this.active.length&&this.load(i.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),s=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:s=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(n),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(n===this.options.active?!1:n),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,s),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function n(){return t>s&&(t=0),0>t&&(t=s),t}for(var s=this.tabs.length-1;-1!==e.inArray(n(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var r,o,a,l=e(s).uniqueId().attr("id"),c=e(s).closest("li"),u=c.attr("aria-controls");n(s)?(r=s.hash,o=t.element.find(t._sanitizeSelector(r))):(a=t._tabId(c),r="#"+a,o=t.element.find(r),o.length||(o=t._createPanel(a),o.insertAfter(t.panels[i-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),u&&c.data("ui-tabs-aria-controls",u),c.attr({"aria-controls":r.substring(1),"aria-labelledby":l}),o.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)t===!0||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n,s=this.element.parent();"fill"===t?(e.support.minHeight||(n=s.css("overflow"),s.css("overflow","hidden")),i=s.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),n&&s.css("overflow",n),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget),r=s.closest("li"),o=r[0]===n[0],a=o&&i.collapsible,l=a?e():this._getPanelForTab(r),c=n.length?this._getPanelForTab(n):e(),u={oldTab:n,oldPanel:c,newTab:a?e():r,newPanel:l};t.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=a?!1:this.tabs.index(r),this.active=o?e():r,this.xhr&&this.xhr.abort(),!c.length&&!l.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(r),t),this._toggle(t,u))},_toggle:function(t,i){function n(){r.running=!1,r._trigger("activate",t,i)}function s(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&r.options.show?r._show(o,r.options.show,n):(o.show(),n())}var r=this,o=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),s()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&a.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var s=this,r=this.tabs.eq(t),o=r.find(".ui-tabs-anchor"),a=this._getPanelForTab(r),l={tab:r,panel:a};n(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(r.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){a.html(e),s._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&s.panels.stop(!1,!0),r.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(t,i,n){var s=this;return{url:t.attr("href"),beforeSend:function(t,r){return s._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:r},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),e.uiBackCompat!==!1&&(e.ui.tabs.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},e.widget("ui.tabs",e.ui.tabs,{url:function(e,t){this.anchors.eq(e).attr("href",t)}}),e.widget("ui.tabs",e.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var t=this;this._on({tabsbeforeload:function(i,n){return e.data(n.tab[0],"cache.tabs")?void i.preventDefault():void n.jqXHR.success(function(){t.options.cache&&e.data(n.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(t,i,n){var s=this.options.ajaxOptions;return e.extend({},s,{error:function(e,t){try{s.error(e,t,n.tab.closest("li").index(),n.tab[0])}catch(i){}}},this._superApply(arguments))},_setOption:function(e,t){"cache"===e&&t===!1&&this.anchors.removeData("cache.tabs"),this._super(e,t)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(e){this.anchors.eq(e).removeData("cache.tabs"),this._superApply(arguments)}}),e.widget("ui.tabs",e.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),e.widget("ui.tabs",e.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(e,t){if(e.target===this.element[0]&&this.options.spinner){var i=t.tab.find("span"),n=i.html();i.html(this.options.spinner),t.jqXHR.complete(function(){i.html(n)})}}})}}),e.widget("ui.tabs",e.ui.tabs,{options:{enable:null,disable:null},enable:function(t){var i,n=this.options;(t&&n.disabled===!0||e.isArray(n.disabled)&&-1!==e.inArray(t,n.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(t){var i,n=this.options;(t&&n.disabled===!1||e.isArray(n.disabled)&&-1===e.inArray(t,n.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))}}),e.widget("ui.tabs",e.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(i,n,s){s===t&&(s=this.anchors.length);var r,o,a=this.options,l=e(a.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,n)),c=i.indexOf("#")?this._tabId(l):i.replace("#","");return l.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),l.attr("aria-controls",c),r=s>=this.tabs.length,o=this.element.find("#"+c),o.length||(o=this._createPanel(c),r?s>0?o.insertAfter(this.panels.eq(-1)):o.appendTo(this.element):o.insertBefore(this.panels[s])),o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),r?l.appendTo(this.tablist):l.insertBefore(this.tabs[s]),a.disabled=e.map(a.disabled,function(e){return e>=s?++e:e}),this.refresh(),1===this.tabs.length&&a.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[s],this.panels[s])),this},remove:function(t){t=this._getIndex(t);var i=this.options,n=this.tabs.eq(t).remove(),s=this._getPanelForTab(n).remove();return n.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(t+(t+1<this.anchors.length?1:-1)),i.disabled=e.map(e.grep(i.disabled,function(e){return e!==t}),function(e){return e>=t?--e:e}),this.refresh(),this._trigger("remove",null,this._ui(n.find("a")[0],s[0])),this}}),e.widget("ui.tabs",e.ui.tabs,{length:function(){return this.anchors.length}}),e.widget("ui.tabs",e.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(t){var n=t.is("li")?t.find("a[href]"):t;return n=n[0],e(n).closest("li").attr("aria-controls")||n.title&&n.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),e.widget("ui.tabs",e.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(t){return e(this.options.panelTemplate).attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),e.widget("ui.tabs",e.ui.tabs,{_create:function(){var e=this.options;null===e.active&&e.selected!==t&&(e.active=-1===e.selected?!1:e.selected),this._super(),e.selected=e.active,e.selected===!1&&(e.selected=-1)},_setOption:function(e,t){if("selected"!==e)return this._super(e,t);var i=this.options;this._super("active",-1===t?!1:t),i.selected=i.active,i.selected===!1&&(i.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),e.widget("ui.tabs",e.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(e,t,i){var n,s,r=this._superApply(arguments);return r?("beforeActivate"===e?(n=i.newTab.length?i.newTab:i.oldTab,s=i.newPanel.length?i.newPanel:i.oldPanel,r=this._super("select",t,{tab:n.find(".ui-tabs-anchor")[0],panel:s[0],index:n.closest("li").index()})):"activate"===e&&i.newTab.length&&(r=this._super("show",t,{tab:i.newTab.find(".ui-tabs-anchor")[0],panel:i.newPanel[0],index:i.newTab.closest("li").index()})),r):!1}}),e.widget("ui.tabs",e.ui.tabs,{select:function(e){if(e=this._getIndex(e),-1===e){if(!this.options.collapsible||-1===this.options.selected)return;e=this.options.selected}this.anchors.eq(e).trigger(this.options.event+this.eventNamespace)}}),function(){var t=0;e.widget("ui.tabs",e.ui.tabs,{options:{cookie:null},_create:function(){var e,t=this.options;null==t.active&&t.cookie&&(e=parseInt(this._cookie(),10),-1===e&&(e=!1),t.active=e),this._super()},_cookie:function(i){var n=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++t)];
return arguments.length&&(n.push(i===!1?-1:i),n.push(this.options.cookie)),e.cookie.apply(null,n)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),e.widget("ui.tabs",e.ui.tabs,{_trigger:function(t,i,n){var s=e.extend({},n);return"load"===t&&(s.panel=s.panel[0],s.tab=s.tab.find(".ui-tabs-anchor")[0]),this._super(t,i,s)}}),e.widget("ui.tabs",e.ui.tabs,{options:{fx:null},_getFx:function(){var t,i,n=this.options.fx;return n&&(e.isArray(n)?(t=n[0],i=n[1]):t=i=n),n?{show:i,hide:t}:null},_toggle:function(e,t){function i(){s.running=!1,s._trigger("activate",e,t)}function n(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&a.show?r.animate(a.show,a.show.duration,function(){i()}):(r.show(),i())}var s=this,r=t.newPanel,o=t.oldPanel,a=this._getFx();return a?(s.running=!0,void(o.length&&a.hide?o.animate(a.hide,a.hide.duration,function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o.hide(),n()))):this._super(e,t)}}))}(jQuery),function(e){function t(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),s=e.inArray(i,n);-1!==s&&n.splice(s,1),t.removeData("ui-tooltip-id"),n=e.trim(n.join(" ")),n?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}var n=0;e.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return e(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;return"disabled"===t?(this[i?"_disable":"_enable"](),void(this.options[t]=i)):(this._super(t,i),void("content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var s=e.Event("blur");s.target=s.currentTarget=n[0],t.close(s,!0)}),this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,s=this,r=t?t.type:null;return"string"==typeof n?this._open(t,e,n):(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&s._delay(function(){t&&(t.type=r),this._open(t,e,i)})}),void(i&&this._open(t,e,i)))},_open:function(i,n,s){function r(e){c.of=e,o.is(":hidden")||o.position(c)}var o,a,l,c=e.extend({},this.options.position);if(s){if(o=this._find(n),o.length)return void o.find(".ui-tooltip-content").html(s);n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),o=this._tooltip(n),t(n,o.attr("id")),o.find(".ui-tooltip-content").html(s),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:r}),r(i)):o.position(e.extend({of:n},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(l=setInterval(function(){o.is(":visible")&&(r(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:o}),a={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(o)}},i&&"mouseover"!==i.type||(a.mouseleave="close"),i&&"focusin"!==i.type||(a.focusout="close"),this._on(!0,n,a)}},close:function(t){var n=this,s=e(t?t.currentTarget:this.element),r=this._find(s);this.closing||(s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),i(s),r.stop(!0),this._hide(r,this.options.hide,function(){n._removeTooltip(e(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:r}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+n++,s=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(s),s.appendTo(this.document[0].body),e.fn.bgiframe&&s.bgiframe(),this.tooltips[i]=t,s},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var s=e.Event("blur");s.target=s.currentTarget=n[0],t.close(s,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");/* ========================================================================
 * Bootstrap: transition.js v3.2.0
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||e(n).trigger(e.support.transition.end)};return setTimeout(s,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),/* ========================================================================
 * Bootstrap: alert.js v3.2.0
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),s=i.data("bs.alert");s||i.data("bs.alert",s=new n(this)),"string"==typeof t&&s[t].call(i)})}var i='[data-dismiss="alert"]',n=function(t){e(t).on("click",i,this.close)};n.VERSION="3.2.0",n.prototype.close=function(t){function i(){r.detach().trigger("closed.bs.alert").remove()}var n=e(this),s=n.attr("data-target");s||(s=n.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var r=e(s);t&&t.preventDefault(),r.length||(r=n.hasClass("alert")?n:n.parent()),r.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(r.removeClass("in"),e.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(150):i())};var s=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=s,this},e(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),/* ========================================================================
 * Bootstrap: button.js v3.2.0
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.button"),r="object"==typeof t&&t;s||n.data("bs.button",s=new i(this,r)),"toggle"==t?s.toggle():t&&s.setState(t)})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.2.0",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(t){var i="disabled",n=this.$element,s=n.is("input")?"val":"html",r=n.data();t+="Text",null==r.resetText&&n.data("resetText",n[s]()),n[s](null==r[t]?this.options[t]:r[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=t,e.fn.button.Constructor=i,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=e(i.target);n.hasClass("btn")||(n=n.closest(".btn")),t.call(n,"toggle"),i.preventDefault()})}(jQuery),/* ========================================================================
 * Bootstrap: carousel.js v3.2.0
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.carousel"),r=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t),o="string"==typeof t?t:r.slide;s||n.data("bs.carousel",s=new i(this,r)),"number"==typeof t?s.to(t):o?s[o]():r.interval&&s.pause().cycle()})}var i=function(t,i){this.$element=e(t).on("keydown.bs.carousel",e.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};i.VERSION="3.2.0",i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},i.prototype.keydown=function(e){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()},i.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},i.prototype.to=function(t){var i=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",e(this.$items[t]))},i.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(t,i){var n=this.$element.find(".item.active"),s=i||n[t](),r=this.interval,o="next"==t?"left":"right",a="next"==t?"first":"last",l=this;if(!s.length){if(!this.options.wrap)return;s=this.$element.find(".item")[a]()}if(s.hasClass("active"))return this.sliding=!1;var c=s[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:o});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(s)]);d&&d.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:c,direction:o});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(t),s[0].offsetWidth,n.addClass(o),s.addClass(o),n.one("bsTransitionEnd",function(){s.removeClass([t,o].join(" ")).addClass("active"),n.removeClass(["active",o].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(1e3*n.css("transition-duration").slice(0,-1))):(n.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(h)),r&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=i,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(i){var n,s=e(this),r=e(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var o=e.extend({},r.data(),s.data()),a=s.attr("data-slide-to");a&&(o.interval=!1),t.call(r,o),a&&r.data("bs.carousel").to(a),i.preventDefault()}}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var i=e(this);t.call(i,i.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: collapse.js v3.2.0
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.collapse"),r=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!s&&r.toggle&&"show"==t&&(t=!t),s||n.data("bs.collapse",s=new i(this,r)),"string"==typeof t&&s[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};i.VERSION="3.2.0",i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i=e.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var s=n.data("bs.collapse");if(s&&s.transitioning)return;t.call(n,"hide"),s||n.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return o.call(this);var a=e.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(350)[r](this.$element[0][a])}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[i](0).one("bsTransitionEnd",e.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=t,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var n,s=e(this),r=s.attr("data-target")||i.preventDefault()||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),o=e(r),a=o.data("bs.collapse"),l=a?"toggle":s.data(),c=s.attr("data-parent"),u=c&&e(c);a&&a.transitioning||(u&&u.find('[data-toggle="collapse"][data-parent="'+c+'"]').not(s).addClass("collapsed"),s[o.hasClass("in")?"addClass":"removeClass"]("collapsed")),t.call(o,l)})}(jQuery),/* ========================================================================
 * Bootstrap: dropdown.js v3.2.0
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){t&&3===t.which||(e(s).remove(),e(r).each(function(){var n=i(e(this)),s={relatedTarget:this};n.hasClass("open")&&(n.trigger(t=e.Event("hide.bs.dropdown",s)),t.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown",s))}))}function i(t){var i=t.attr("data-target");i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&e(i);return n&&n.length?n:t.parent()}function n(t){return this.each(function(){var i=e(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new o(this)),"string"==typeof t&&n[t].call(i)})}var s=".dropdown-backdrop",r='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.2.0",o.prototype.toggle=function(n){var s=e(this);if(!s.is(".disabled, :disabled")){var r=i(s),o=r.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var a={relatedTarget:this};if(r.trigger(n=e.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;s.trigger("focus"),r.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},o.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var n=e(this);if(t.preventDefault(),t.stopPropagation(),!n.is(".disabled, :disabled")){var s=i(n),o=s.hasClass("open");if(!o||o&&27==t.keyCode)return 27==t.which&&s.find(r).trigger("focus"),n.trigger("click");var a=" li:not(.divider):visible a",l=s.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var c=l.index(l.filter(":focus"));38==t.keyCode&&c>0&&c--,40==t.keyCode&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=e.fn.dropdown;e.fn.dropdown=n,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r+', [role="menu"], [role="listbox"]',o.prototype.keydown)}(jQuery),/* ========================================================================
 * Bootstrap: modal.js v3.2.0
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t,n){return this.each(function(){var s=e(this),r=s.data("bs.modal"),o=e.extend({},i.DEFAULTS,s.data(),"object"==typeof t&&t);r||s.data("bs.modal",r=new i(this,o)),"string"==typeof t?r[t](n):o.show&&r.show(n)})}var i=function(t,i){this.options=i,this.$body=e(document.body),this.$element=e(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.2.0",i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},i.prototype.show=function(t){var i=this,n=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var n=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),n&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:t});n?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},i.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},i.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(t){var i=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(this.$body),this.$element.on("mousedown.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(150):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(150):r()}else t&&t()},i.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},i.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",e+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var n=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=i,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=e(this),s=n.attr("href"),r=e(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(s)&&s},r.data(),n.data());n.is("a")&&i.preventDefault(),r.one("show.bs.modal",function(e){e.isDefaultPrevented()||r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),t.call(r,o,this)})}(jQuery),/* ========================================================================
 * Bootstrap: tooltip.js v3.2.0
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.tooltip"),r="object"==typeof t&&t;(s||"destroy"!=t)&&(s||n.data("bs.tooltip",s=new i(this,r)),"string"==typeof t&&s[t]())})}var i=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};i.VERSION="3.2.0",i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(t,i,n){this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var s=this.options.trigger.split(" "),r=s.length;r--;){var o=s[r];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var a="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},i.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,function(e,n){i[e]!=n&&(t[e]=n)}),t},i.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},i.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(document.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var n=this,s=this.tip(),r=this.getUID(this.type);this.setContent(),s.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&s.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,l=a.test(o);l&&(o=o.replace(a,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var c=this.getPosition(),u=s[0].offsetWidth,d=s[0].offsetHeight;if(l){var h=o,p=this.$element.parent(),f=this.getPosition(p);o="bottom"==o&&c.top+c.height+d-f.scroll>f.height?"top":"top"==o&&c.top-f.scroll-d<0?"bottom":"right"==o&&c.right+u>f.width?"left":"left"==o&&c.left-u<f.left?"right":o,s.removeClass(h).addClass(o)}var m=this.getCalculatedOffset(o,c,u,d);this.applyPlacement(m,o);var g=function(){n.$element.trigger("shown.bs."+n.type),n.hoverState=null};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}},i.prototype.applyPlacement=function(t,i){var n=this.tip(),s=n[0].offsetWidth,r=n[0].offsetHeight,o=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(a)&&(a=0),t.top=t.top+o,t.left=t.left+a,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=r&&(t.top=t.top+r-c);var u=this.getViewportAdjustedDelta(i,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var d=/top|bottom/.test(i),h=d?2*u.left-s+l:2*u.top-r+c,p=d?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(h,n[0][p],d)},i.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},i.prototype.hide=function(){function t(){"in"!=i.hoverState&&n.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,n=this.tip(),s=e.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(s),s.isDefaultPrevented()?void 0:(n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(t){t=t||this.$element;var i=t[0],n="BODY"==i.tagName;return e.extend({},"function"==typeof i.getBoundingClientRect?i.getBoundingClientRect():null,{scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop(),width:n?e(window).width():t.outerWidth(),height:n?e(window).height():t.outerHeight()},n?{top:0,left:0}:t.offset())},i.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},i.prototype.getViewportAdjustedDelta=function(e,t,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var r=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var a=t.top-r-o.scroll,l=t.top+r-o.scroll+n;a<o.top?s.top=o.top-a:l>o.top+o.height&&(s.top=o.top+o.height-l)}else{var c=t.left-r,u=t.left+r+i;c<o.left?s.left=o.left-c:u>o.width&&(s.left=o.left+o.width-u)}return s},i.prototype.getTitle=function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},i.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},i.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(t){var i=this;t&&(i=e(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=i,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),/* ========================================================================
 * Bootstrap: popover.js v3.2.0
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.popover"),r="object"==typeof t&&t;(s||"destroy"!=t)&&(s||n.data("bs.popover",s=new i(this,r)),"string"==typeof t&&s[t]())})}var i=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.2.0",i.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").empty()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=i,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),/* ========================================================================
 * Bootstrap: scrollspy.js v3.2.0
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(i,n){var s=e.proxy(this.process,this);this.$body=e("body"),this.$scrollElement=e(e(i).is("body")?window:i),this.options=e.extend({},t.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",s),this.refresh(),this.process()}function i(i){return this.each(function(){var n=e(this),s=n.data("bs.scrollspy"),r="object"==typeof i&&i;s||n.data("bs.scrollspy",s=new t(this,r)),"string"==typeof i&&s[i]()})}t.VERSION="3.2.0",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t="offset",i=0;e.isWindow(this.$scrollElement[0])||(t="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var n=this;this.$body.find(this.selector).map(function(){var n=e(this),s=n.data("target")||n.attr("href"),r=/^#./.test(s)&&e(s);return r&&r.length&&r.is(":visible")&&[[r[t]().top+i,s]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,r=this.targets,o=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),t>=n)return o!=(e=r[r.length-1])&&this.activate(e);if(o&&t<=s[0])return o!=(e=r[0])&&this.activate(e);for(e=s.length;e--;)o!=r[e]&&t>=s[e]&&(!s[e+1]||t<=s[e+1])&&this.activate(r[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")};var n=e.fn.scrollspy;e.fn.scrollspy=i,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: tab.js v3.2.0
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.tab");s||n.data("bs.tab",s=new i(this)),"string"==typeof t&&s[t]()})}var i=function(t){this.element=e(t)};i.VERSION="3.2.0",i.prototype.show=function(){var t=this.element,i=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=t.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var s=i.find(".active:last a")[0],r=e.Event("show.bs.tab",{relatedTarget:s});if(t.trigger(r),!r.isDefaultPrevented()){var o=e(n);this.activate(t.closest("li"),i),this.activate(o,o.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:s})})}}},i.prototype.activate=function(t,i,n){function s(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}var r=i.find("> .active"),o=n&&e.support.transition&&r.hasClass("fade");o?r.one("bsTransitionEnd",s).emulateTransitionEnd(150):s(),r.removeClass("in")};var n=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=i,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(i){i.preventDefault(),t.call(e(this),"show")})}(jQuery),/* ========================================================================
 * Bootstrap: affix.js v3.2.0
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.affix"),r="object"==typeof t&&t;s||n.data("bs.affix",s=new i(this,r)),"string"==typeof t&&s[t]()})}var i=function(t,n){this.options=e.extend({},i.DEFAULTS,n),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.2.0",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},i.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=e(document).height(),n=this.$target.scrollTop(),s=this.$element.offset(),r=this.options.offset,o=r.top,a=r.bottom;"object"!=typeof r&&(a=o=r),"function"==typeof o&&(o=r.top(this.$element)),"function"==typeof a&&(a=r.bottom(this.$element));var l=null!=this.unpin&&n+this.unpin<=s.top?!1:null!=a&&s.top+this.$element.height()>=t-a?"bottom":null!=o&&o>=n?"top":!1;if(this.affixed!==l){null!=this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),u=e.Event(c+".bs.affix");this.$element.trigger(u),u.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(c).trigger(e.Event(c.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:t-this.$element.height()-a}))}}};var n=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=i,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var i=e(this),n=i.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.call(i,n)})})}(jQuery),$.fn.modal.Constructor.prototype.backdrop=function(e){var t=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=$.support.transition&&i;if(this.$backdrop=$('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){e.target===e.currentTarget&&("static"===this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){t.removeBackdrop(),e&&e()};$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(150):s()}else e&&e()},$.fn.popover.Constructor.prototype.applyPlacement=function(e,t){var i=this.tip(),n=i[0].offsetWidth,s=i[0].offsetHeight,r=parseInt(i.css("margin-top"),10),o=parseInt(i.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(o)&&(o=0),e.top=e.top+r,e.left=e.left+o,$.offset.setOffset(i[0],$.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},e),0),i.addClass("in");var a=i[0].offsetWidth,l=i[0].offsetHeight;"top"==t&&l!=s&&(e.top=e.top+s-l);var c=this.getViewportAdjustedDelta(t,e,a,l);c.left?e.left+=c.left:e.top+=c.top;var u=/top|bottom/.test(t),d=u?2*c.left-n+a:2*c.top-s+l,h=u?"offsetWidth":"offsetHeight";0==Boolean(this.options.excludeOffset)&&(i.offset(e),this.replaceArrow(d,i[0][h],u))},!function(e){e.expr[":"].icontains=function(t,i,n){return e(t).text().toUpperCase().indexOf(n[3].toUpperCase())>=0};var t=function(i,n,s){s&&(s.stopPropagation(),s.preventDefault()),this.$element=e(i),this.$newElement=null,this.$button=null,this.$menu=null,this.options=e.extend({},e.fn.selectpicker.defaults,this.$element.data(),"object"==typeof n&&n),null==this.options.title&&(this.options.title=this.$element.attr("title")),this.val=t.prototype.val,this.render=t.prototype.render,this.refresh=t.prototype.refresh,this.setStyle=t.prototype.setStyle,this.selectAll=t.prototype.selectAll,this.deselectAll=t.prototype.deselectAll,this.init()};t.prototype={constructor:t,init:function(t){this.$element.hide(),this.multiple=this.$element.prop("multiple");var i=this.$element.attr("id");if(this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$menu=this.$newElement.find("> .dropdown-menu"),this.$button=this.$newElement.find("> button"),this.$searchbox=this.$newElement.find("input"),this.scrollListeners=[],this.resizeListeners=[],this.clickListeners=[],this.touchstartListeners=[],void 0!==i){var n=this;this.$button.attr("data-id",i),e('label[for="'+i+'"]').click(function(e){e.preventDefault(),n.$button.focus()})}this.checkDisabled(),this.clickListener(),this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this)},createDropdown:function(){var t=this.multiple?" show-tick":"",i=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",n=this.options.liveSearch?'<div class="bootstrap-select-searchbox"><input type="text" class="input-block-level form-control" /></div>':"",s="<div class='btn-group bootstrap-select"+t+"'><button type='button' class='btn dropdown-toggle' data-toggle='dropdown'><div class='filter-option pull-left'></div>&nbsp;<div class='caret'></div></button><div class='dropdown-menu open'>"+i+n+"<ul class='dropdown-menu inner' role='menu'></ul></div></div>";return e(s)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul").append(t),e},reloadLi:function(){this.destroyLi();var e=this.createLi();this.$menu.find("ul").append(e)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var t=this,i=[],n="";return this.$element.find("option").each(function(n){var s=e(this),r=s.attr("class")||"",o=s.attr("style")||"",a=s.data("content")?s.data("content"):s.html(),l=void 0!==s.data("subtext")?'<small class="muted text-muted">'+s.data("subtext")+"</small>":"",c=void 0!==s.data("icon")?'<i class="glyphicon '+s.data("icon")+'"></i> ':"";if(""!==c&&(s.is(":disabled")||s.parent().is(":disabled"))&&(c="<span>"+c+"</span>"),s.data("content")||(a=c+'<span class="text">'+a+l+"</span>"),t.options.hideDisabled&&(s.is(":disabled")||s.parent().is(":disabled")))i.push('<a style="min-height: 0; padding: 0"></a>');else if(s.parent().is("optgroup")&&1!=s.data("divider"))if(0==s.index()){var u=s.parent().attr("label"),d=void 0!==s.parent().data("subtext")?'<small class="muted text-muted">'+s.parent().data("subtext")+"</small>":"",h=s.parent().data("icon")?'<i class="'+s.parent().data("icon")+'"></i> ':"";u=h+'<span class="text">'+u+d+"</span>",0!=s[0].index?i.push('<div class="div-contain"><div class="divider"></div></div><dt>'+u+"</dt>"+t.createA(a,"opt "+r,o)):i.push("<dt>"+u+"</dt>"+t.createA(a,"opt "+r,o))}else i.push(t.createA(a,"opt "+r,o));else 1==s.data("divider")?i.push('<div class="div-contain"><div class="divider"></div></div>'):1==e(this).data("hidden")?i.push(""):i.push(t.createA(a,r,o))}),e.each(i,function(e,t){n+="<li rel="+e+">"+t+"</li>"}),this.multiple||0!=this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),e(n)},createA:function(e,t,i){return'<a tabindex="0" class="'+t+'" style="'+i+'">'+e+'<i class="glyphicon glyphicon-ok icon-ok check-mark"></i></a>'},render:function(){var t=this;this.$element.find("option").each(function(i){t.setDisabled(i,e(this).is(":disabled")||e(this).parent().is(":disabled")),t.setSelected(i,e(this).is(":selected"))}),this.tabIndex();var i=this.$element.find("option:selected").map(function(i,n){var s,r=e(this),o=r.data("icon")&&t.options.showIcon?'<i class="glyphicon '+r.data("icon")+'"></i> ':"";return s=t.options.showSubtext&&r.attr("data-subtext")&&!t.multiple?' <small class="muted text-muted">'+r.data("subtext")+"</small>":"",r.data("content")&&t.options.showContent?r.data("content"):void 0!=r.attr("title")?r.attr("title"):o+r.html()+s}).toArray(),n=this.multiple?i.join(", "):i[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var s=this.options.selectedTextFormat.split(">"),r=this.options.hideDisabled?":not([disabled])":"";(s.length>1&&i.length>s[1]||1==s.length&&i.length>=2)&&(n=this.options.countSelectedText.replace("{0}",i.length).replace("{1}",this.$element.find('option:not([data-divider="true"]):not([data-hidden="true"])'+r).length))}n||(n=void 0!=this.options.title?this.options.title:this.options.noneSelectedText),this.$newElement.find(".filter-option").html(n)},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device/gi,""));var i=e?e:this.options.style;"add"==t?this.$button.addClass(i):"remove"==t?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(){var e=this.$newElement.clone();e.appendTo("body");var t=e.addClass("open").find("> .dropdown-menu"),i=t.find("li > a").outerHeight(),n=this.options.header?t.find(".popover-title").outerHeight():0,s=this.options.liveSearch?t.find(".bootstrap-select-searchbox").outerHeight():0;e.remove(),this.$newElement.data("liHeight",i).data("headerHeight",n).data("searchHeight",s)},setSize:function(){var t,i,n,s=this,r=this.$menu,o=r.find(".inner"),a=(o.find("li > a"),this.$newElement.outerHeight()),l=this.$newElement.data("liHeight"),c=this.$newElement.data("headerHeight"),u=this.$newElement.data("searchHeight"),d=r.find("li .divider").outerHeight(!0),h=parseInt(r.css("padding-top"))+parseInt(r.css("padding-bottom"))+parseInt(r.css("border-top-width"))+parseInt(r.css("border-bottom-width")),p=this.options.hideDisabled?":not(.disabled)":"",f=e(window),m=h+parseInt(r.css("margin-top"))+parseInt(r.css("margin-bottom"))+2,g=function(){i=s.$newElement.offset().top-f.scrollTop(),n=f.height()-i-a};if(g(),this.options.header&&r.css("padding-top",0),"auto"==this.options.size){var v=function(){var e;g(),t=n-m,s.$newElement.toggleClass("dropup",i>n&&t-m<r.height()&&s.options.dropupAuto),s.$newElement.hasClass("dropup")&&(t=i-m),e=r.find("li").length+r.find("dt").length>3?3*l+m-2:0,r.css({"max-height":t+"px",overflow:"hidden","min-height":e+"px"}),o.css({"max-height":t-c-u-h+"px","overflow-y":"auto","min-height":e-h+"px"})};v(),e(window).resize(v),e(window).scroll(v),this.scrollListeners.push(v),this.resizeListeners.push(v)}else if(this.options.size&&"auto"!=this.options.size&&r.find("li"+p).length>this.options.size){var y=r.find("li"+p+" > *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index(),b=r.find("li").slice(0,y+1).find(".div-contain").length;t=l*this.options.size+b*d+h,this.$newElement.toggleClass("dropup",i>n&&t<r.height()&&this.options.dropupAuto),r.css({"max-height":t+c+u+"px",overflow:"hidden"}),o.css({"max-height":t-h+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var e=this.$newElement.clone().appendTo("body"),t=e.find("> .dropdown-menu").css("width");e.remove(),this.$newElement.css("width",t)}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var t,i,n=this,s="<div />",r=e(s),o=function(e){r.addClass(e.attr("class")).toggleClass("dropup",e.hasClass("dropup")),t=e.offset(),i=e.hasClass("dropup")?0:e[0].offsetHeight,r.css({top:t.top+i,left:t.left,width:e[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(t){o(e(this)),r.appendTo(n.options.container),r.toggleClass("open",!e(this).hasClass("open")),r.append(n.$menu)});var a=function(){o(n.$newElement)};e(window).resize(a),this.resizeListeners.push(a);var l=function(e){o(n.$newElement)};e(window).on("scroll",l),this.scrollListeners.push(l);var c=function(t){e(t.target).closest(n.$newElement).length<1&&r.removeClass("open")};e("html").on("click",c),this.clickListeners.push(c)},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},update:function(){this.reloadLi(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},setSelected:function(e,t){this.$menu.find("li").eq(e).toggleClass("selected",t)},setDisabled:function(e,t){t?this.$menu.find("li").eq(e).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):this.$menu.find("li").eq(e).removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var e=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1==this.$button.attr("tabindex")&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex"))),this.$button.click(function(){return!e.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var t=this,i=function(e){e.stopPropagation()};e("body").on("touchstart.dropdown",".dropdown-menu",i),this.touchstartListeners.push(i),this.$newElement.on("click",function(){t.setSize()}),this.$menu.on("click","li a",function(i){var n=e(this).parent().index(),s=(e(this).parent(),t.$element.val());if(t.multiple&&i.stopPropagation(),i.preventDefault(),!t.isDisabled()&&!e(this).parent().hasClass("disabled")){var r=t.$element.find("option"),o=r.eq(n);if(t.multiple){var a=o.prop("selected");o.prop("selected",!a)}else r.prop("selected",!1),o.prop("selected",!0);t.$button.focus(),s!=t.$element.val()&&t.$element.change()}}),this.$menu.on("click","li.disabled a, li dt, li .div-contain, h3.popover-title",function(e){e.target==this&&(e.preventDefault(),e.stopPropagation(),t.$button.focus())}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$element.change(function(){t.render()})},liveSearchListener:function(){var e=this;this.$newElement.on("click.dropdown.data-api",function(t){e.options.liveSearch&&setTimeout(function(){e.$searchbox.focus()},10)}),this.$searchbox.on("input",function(){e.$searchbox.val()?e.$menu.find("li").show().not(":icontains("+e.$searchbox.val()+")").hide():e.$menu.find("li").show()})},val:function(e){return void 0!=e?(this.$element.val(e),this.$element.change(),this.$element):this.$element.val()},selectAll:function(){this.$element.find("option").prop("selected",!0).attr("selected","selected"),this.render()},deselectAll:function(){this.$element.find("option").prop("selected",!1).removeAttr("selected"),this.render()},keydown:function(t){var i,n,s,r,o,a,l,c,u,d;if(i=e(this),s=i.parent(),d=s.data("this"),d.options.container&&(s=d.$menu),n=e("[role=menu] li:not(.divider):visible a",s),n.length){if(/(38|40)/.test(t.keyCode))r=n.index(n.filter(":focus")),a=n.parent(":not(.disabled)").first().index(),l=n.parent(":not(.disabled)").last().index(),o=n.eq(r).parent().nextAll(":not(.disabled)").eq(0).index(),c=n.eq(r).parent().prevAll(":not(.disabled)").eq(0).index(),u=n.eq(o).parent().prevAll(":not(.disabled)").eq(0).index(),38==t.keyCode&&(r!=u&&r>c&&(r=c),a>r&&(r=a)),40==t.keyCode&&(r!=u&&o>r&&(r=o),r>l&&(r=l),-1==r&&(r=0)),n.eq(r).focus();else{var h={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},p=[];n.each(function(){e(this).parent().is(":not(.disabled)")&&e.trim(e(this).text().toLowerCase()).substring(0,1)==h[t.keyCode]&&p.push(e(this).parent().index())});var f=e(document).data("keycount");f++,e(document).data("keycount",f);var m=e.trim(e(":focus").text().toLowerCase()).substring(0,1);m!=h[t.keyCode]?(f=1,e(document).data("keycount",f)):f>=p.length&&e(document).data("keycount",0),n.eq(p[f-1]).focus()}/(13|32)/.test(t.keyCode)&&(t.preventDefault(),e(":focus").click(),e(document).data("keycount",0))}},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},destroy:function(){this.resizeListeners.forEach(function(t){e(window).off("resize",t)}),this.scrollListeners.forEach(function(t){e(window).off("scroll",t)}),this.clickListeners.forEach(function(t){e("html").off("click",t)}),this.touchstartListeners.forEach(function(t){e("body").off("touchstart.dropdown",".dropdown-menu",t)}),e(document).off("keydown","[data-toggle=dropdown], [role=menu]",t.prototype.keydown),this.$newElement.remove(),this.$element.remove();for(var i in this)this.hasOwnProperty(i)&&(this[i]=null)}},e.fn.selectpicker=function(i,n){var s,r=arguments,o=this.each(function(){if(e(this).is("select")){var o=e(this),a=o.data("selectpicker"),l="object"==typeof i&&i;if(a){if(l)for(var c in l)a.options[c]=l[c]}else o.data("selectpicker",a=new t(this,l,n));if("string"==typeof i){var u=i;a[u]instanceof Function?([].shift.apply(r),s=a[u].apply(a,r)):s=a.options[u]}}});return void 0!=s?s:o},e.fn.selectpicker.defaults={style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",countSelectedText:"{0} of {1} selected",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1},e(document).data("keycount",0).on("keydown","[data-toggle=dropdown], [role=menu]",t.prototype.keydown)}(window.jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],function(t){e(t,window,document)}):e(jQuery,window,document)}(function(e,t,i,n){"use strict";function s(t,i){this.element=t,this.options=e.extend({},a,i),this._defaults=a,this.ns="."+r+o++,this._name=r,this.init()}var r="countrySelect",o=1,a={defaultCountry:"",defaultStyling:"inside",excludeCountries:[],onlyCountries:[],preferredCountries:["us","gb"]},l={UP:38,DOWN:40,ENTER:13,ESC:27,PLUS:43,A:65,Z:90,SPACE:32,DELETE:8,TAB:9},c=!1;e(t).on("load",function(){c=!0}),s.prototype={init:function(){return this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this.autoCountryDeferred=new e.Deferred,this._initAutoCountry(),this.autoCountryDeferred},_processCountryData:function(){this._setInstanceCountryData(),this._setPreferredCountries()},_setInstanceCountryData:function(){var t=this;if(this.options.onlyCountries.length){var i=[];e.each(this.options.onlyCountries,function(e,n){var s=t._getCountryData(n,!0);s&&i.push(s)}),this.countries=i}else if(this.options.excludeCountries.length){var n=this.options.excludeCountries.map(function(e){return e.toLowerCase()});this.countries=u.filter(function(e){return-1===n.indexOf(e.iso2)})}else this.countries=u},_setPreferredCountries:function(){var t=this;this.preferredCountries=[],e.each(this.options.preferredCountries,function(e,i){var n=t._getCountryData(i,!1);n&&t.preferredCountries.push(n)})},_generateMarkup:function(){this.countryInput=e(this.element);var t="country-select";this.options.defaultStyling&&(t+=" "+this.options.defaultStyling),this.countryInput.wrap(e("<div>",{"class":t}));var i=e("<div>",{"class":"flag-dropdown"}).insertAfter(this.countryInput),n=e("<div>",{"class":"flag-dropdown country-picker-right"}).insertAfter(this.countryInput),s=e("<div>",{"class":"selected-flag"}).appendTo(i);this.selectedFlagInner=e("<div>",{"class":"flag"}).appendTo(s);var r=e("<div>",{"class":"selected-flag"}).appendTo(n);this.selectedFlagInnerArrow=e("<div>",{"class":"arrow"}).appendTo(r),this.countryList=e("<ul>",{"class":"country-list v-hide"}).appendTo(i),this.preferredCountries.length&&(this._appendListItems(this.preferredCountries,"preferred"),e("<li>",{"class":"divider"}).appendTo(this.countryList)),this._appendListItems(this.countries,""),this.countryCodeInput=e("#"+this.countryInput.attr("id")+"_code"),this.countryCodeInput||(this.countryCodeInput=e('<input type="hidden" id="'+this.countryInput.attr("id")+'_code" name="'+this.countryInput.attr("name")+'_code" value="" />'),this.countryCodeInput.insertAfter(this.countryInput)),this.dropdownHeight=this.countryList.outerHeight(),this.countryList.removeClass("v-hide").addClass("hide"),this.countryListItems=this.countryList.children(".country")},_appendListItems:function(t,i){var n="";e.each(t,function(e,t){n+='<li class="country '+i+'" data-country-code="'+t.iso2+'">',n+='<div class="flag '+t.iso2+'"></div>',n+='<span class="country-name">'+t.name+"</span>",n+="</li>"}),this.countryList.append(n)},_setInitialState:function(){var e=!1;this.countryInput.val()&&(e=this._updateFlagFromInputVal());var t=this.countryCodeInput.val();if(t&&this.selectCountry(t),!e){var i;this.options.defaultCountry?(i=this._getCountryData(this.options.defaultCountry,!1),i||(i=this.preferredCountries.length?this.preferredCountries[0]:this.countries[0])):i=this.preferredCountries.length?this.preferredCountries[0]:this.countries[0],this.defaultCountry=i.iso2}},_initListeners:function(){var e=this;this.countryInput.on("keyup"+this.ns,function(){e._updateFlagFromInputVal()});var t=this.selectedFlagInner.parent(),i=this.selectedFlagInnerArrow.parent();t.on("click"+this.ns,function(t){e.countryList.hasClass("hide")&&!e.countryInput.prop("disabled")&&e._showDropdown()});var i=this.selectedFlagInnerArrow.parent();i.on("click"+this.ns,function(t){e.countryList.hasClass("hide")&&!e.countryInput.prop("disabled")&&e._showDropdown()}),this.countryInput.on("blur"+this.ns,function(){e.countryInput.val()!=e.getSelectedCountryData().name&&e.setCountry(e.countryInput.val()),e.countryInput.val(e.getSelectedCountryData().name)})},_initAutoCountry:function(){"auto"===this.options.initialCountry?this._loadAutoCountry():(this.selectCountry(this.defaultCountry),this.autoCountryDeferred.resolve())},_loadAutoCountry:function(){e.fn[r].autoCountry?this.handleAutoCountry():e.fn[r].startedLoadingAutoCountry||(e.fn[r].startedLoadingAutoCountry=!0,"function"==typeof this.options.geoIpLookup&&this.options.geoIpLookup(function(t){e.fn[r].autoCountry=t.toLowerCase(),setTimeout(function(){e(".country-select input").countrySelect("handleAutoCountry")})}))},_focus:function(){this.countryInput.focus();var e=this.countryInput[0];if(e.setSelectionRange){var t=this.countryInput.val().length;e.setSelectionRange(t,t)}},_showDropdown:function(){this._setDropdownPosition();var e=this.countryList.children(".active");this._highlightListItem(e),this.countryList.removeClass("hide"),this._scrollTo(e),this._bindDropdownListeners(),this.selectedFlagInnerArrow.parent().children(".arrow").addClass("up")},_setDropdownPosition:function(){var i=this.countryInput.offset().top,n=e(t).scrollTop(),s=i+this.countryInput.outerHeight()+this.dropdownHeight<n+e(t).height(),r=i-this.dropdownHeight>n,o=!s&&r?this.countryInput.outerHeight():"";this.countryList.css("bottom",o)},_bindDropdownListeners:function(){var t=this;this.countryList.on("mouseover"+this.ns,".country",function(i){t._highlightListItem(e(this))}),this.countryList.on("click"+this.ns,".country",function(i){t._selectListItem(e(this))});var n=!0;e("html").on("click"+this.ns,function(e){n||(t.settedValue&&t.setCountry(t.settedValue.name),t._closeDropdown()),n=!1}),e(i).on("keydown"+this.ns,function(e){e.preventDefault(),e.which==l.UP||e.which==l.DOWN?t._handleUpDownKey(e.which):e.which==l.ENTER?t._handleEnterKey():e.which==l.ESC?(t.settedValue&&t.setCountry(t.settedValue.name),t._closeDropdown()):e.which>=l.A&&e.which<=l.Z||e.which==l.SPACE||e.which==l.DELETE?t._handleLetterKey(e.key.charCodeAt(0),e.which==l.DELETE):e.which==l.TAB&&t._handleTabKey()})},_handleTabKey:function(){this._handleEnterKey(),console.log(this.element);var t=e(this.element).closest("form").find(":focusable");t.eq(t.index(this.element)+1).focus()},_handleUpDownKey:function(e){var t=this._getNextElement(e);this._highlightListItem(t),this._scrollTo(t)},_getNextElement:function(t){var i="li:not(.hide, .divider)",n=this.countryList.children(".highlight").first()[0],s=this.countryList.children(i).toArray(),r=t==l.UP?-1:1,o=s.indexOf(n),a=o+r;return e(0>a||a>s.length-1?n:s[a])},_handleEnterKey:function(){var e=this.countryList.children(".highlight").first();e.length&&this._selectListItem(e)},_handleLetterKey:function(t,i){if(this.settedValue)if(i===!1)this.countryInput.val(this.countryInput.val()+String.fromCharCode(t));else{var n=this.countryInput.val();this.countryInput.val(n.substring(0,n.length-1))}else this.settedValue=this.getSelectedCountryData(),this.countryInput.val(String.fromCharCode(t));var s=this.countryInput.val().replace(/(?=[()])/g,"\\"),r=this.countryListItems.filter(function(){var t=new RegExp("^"+s,"i"),i=e(this).text().match(t)&&!e(this).hasClass("preferred");return i?e(this).removeClass("hide"):e(this).addClass("hide"),i});if(r.length){var o,a=r.filter(".highlight").first();o=a&&a.next()&&a.next().text().charAt(0)==s?a.next():r.first(),this._highlightListItem(o),this._updateFlagFromInputVal(),this._scrollTo(o)}else this.countryListItems.removeClass("hide")},_updateFlagFromInputVal:function(){var t=this,i=this.countryInput.val().replace(/(?=[() ])/g,"\\");if(i){for(var n=[],s=new RegExp("^"+i,"i"),r=0;r<this.countries.length;r++)this.countries[r].name.match(s)&&n.push(this.countries[r].iso2);var o=!1;return e.each(n,function(e,i){t.selectedFlagInner.hasClass(i)&&(o=!0)}),o||(this._selectFlag(n[0]),this.countryCodeInput.val(n[0]).trigger("change")),!0}return!1},_highlightListItem:function(e){this.countryListItems.removeClass("highlight"),e.addClass("highlight")},_getCountryData:function(e,t){for(var i=t?u:this.countries,n=0;n<i.length;n++)if(i[n].iso2==e)return i[n];return null},_selectFlag:function(e){if(!e)return!1;this.selectedFlagInner.attr("class","flag "+e);var t=this._getCountryData(e);this.selectedFlagInner.parent().attr("title",t.name);var i=this.countryListItems.children(".flag."+e).first().parent();this.countryListItems.removeClass("active"),i.addClass("active")},_selectListItem:function(e){var t=e.attr("data-country-code");this._selectFlag(t),this._closeDropdown(),this._updateName(t),this.countryInput.trigger("change"),this.countryCodeInput.trigger("change"),this._focus()},_closeDropdown:function(){this.countryList.addClass("hide"),this.settedValue=null,this.countryListItems.removeClass("hide"),this.selectedFlagInnerArrow.parent().children(".arrow").removeClass("up"),e(i).off("keydown"+this.ns),e("html").off("click"+this.ns),this.countryList.off(this.ns)},_scrollTo:function(e){if(e&&e.offset()){var t=this.countryList,i=t.height(),n=t.offset().top,s=n+i,r=e.outerHeight(),o=e.offset().top,a=o+r,l=o-n+t.scrollTop();if(n>o)t.scrollTop(l);else if(a>s){var c=i-r;t.scrollTop(l-c)}}},_updateName:function(e){this.countryCodeInput.val(e).trigger("change"),this.countryInput.val(this._getCountryData(e).name)},handleAutoCountry:function(){"auto"===this.options.initialCountry&&(this.defaultCountry=e.fn[r].autoCountry,this.countryInput.val()||this.selectCountry(this.defaultCountry),this.autoCountryDeferred.resolve())},getSelectedCountryData:function(){var e=this.selectedFlagInner.attr("class").split(" ")[1];return this._getCountryData(e)},selectCountry:function(e){e=e.toLowerCase(),this.selectedFlagInner.hasClass(e)||(this._selectFlag(e),this._updateName(e))},setCountry:function(e){this.countryInput.val(e),this._updateFlagFromInputVal()},destroy:function(){this.countryInput.off(this.ns),this.selectedFlagInner.parent().off(this.ns);var e=this.countryInput.parent();e.before(this.countryInput).remove()}},e.fn[r]=function(t){var i=arguments;if(t===n||"object"==typeof t)return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new s(this,t))});if("string"==typeof t&&"_"!==t[0]&&"init"!==t){var o;return this.each(function(){var n=e.data(this,"plugin_"+r);n instanceof s&&"function"==typeof n[t]&&(o=n[t].apply(n,Array.prototype.slice.call(i,1))),"destroy"===t&&e.data(this,"plugin_"+r,null)}),o!==n?o:this}},e.fn[r].getCountryData=function(){return u},e.fn[r].setCountryData=function(e){u=e};var u=e.each([{n:"Afghanistan (\u202b\u0627\u0641\u063a\u0627\u0646\u0633\u062a\u0627\u0646\u202c\u200e)",i:"af"},{n:"\xc5land Islands (\xc5land)",i:"ax"},{n:"Albania (Shqip\xebri)",i:"al"},{n:"Algeria (\u202b\u0627\u0644\u062c\u0632\u0627\u0626\u0631\u202c\u200e)",i:"dz"},{n:"American Samoa",i:"as"},{n:"Andorra",i:"ad"},{n:"Angola",i:"ao"},{n:"Anguilla",i:"ai"},{n:"Antigua and Barbuda",i:"ag"},{n:"Argentina",i:"ar"},{n:"Armenia (\u0540\u0561\u0575\u0561\u057d\u057f\u0561\u0576)",i:"am"},{n:"Aruba",i:"aw"},{n:"Australia",i:"au"},{n:"Austria (\xd6sterreich)",i:"at"},{n:"Azerbaijan (Az\u0259rbaycan)",i:"az"},{n:"Bahamas",i:"bs"},{n:"Bahrain (\u202b\u0627\u0644\u0628\u062d\u0631\u064a\u0646\u202c\u200e)",i:"bh"},{n:"Bangladesh (\u09ac\u09be\u0982\u09b2\u09be\u09a6\u09c7\u09b6)",i:"bd"},{n:"Barbados",i:"bb"},{n:"Belarus (\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u044c)",i:"by"},{n:"Belgium (Belgi\xeb)",i:"be"},{n:"Belize",i:"bz"},{n:"Benin (B\xe9nin)",i:"bj"},{n:"Bermuda",i:"bm"},{n:"Bhutan (\u0f60\u0f56\u0fb2\u0f74\u0f42)",i:"bt"},{n:"Bolivia",i:"bo"},{n:"Bosnia and Herzegovina (\u0411\u043e\u0441\u043d\u0430 \u0438 \u0425\u0435\u0440\u0446\u0435\u0433\u043e\u0432\u0438\u043d\u0430)",i:"ba"},{n:"Botswana",i:"bw"},{n:"Brazil (Brasil)",i:"br"},{n:"British Indian Ocean Territory",i:"io"},{n:"British Virgin Islands",i:"vg"},{n:"Brunei",i:"bn"},{n:"Bulgaria (\u0411\u044a\u043b\u0433\u0430\u0440\u0438\u044f)",i:"bg"},{n:"Burkina Faso",i:"bf"},{n:"Burundi (Uburundi)",i:"bi"},{n:"Cambodia (\u1780\u1798\u17d2\u1796\u17bb\u1787\u17b6)",i:"kh"},{n:"Cameroon (Cameroun)",i:"cm"},{n:"Canada",i:"ca"},{n:"Cape Verde (Kabu Verdi)",i:"cv"},{n:"Caribbean Netherlands",i:"bq"},{n:"Cayman Islands",i:"ky"},{n:"Central African Republic (R\xe9publique Centrafricaine)",i:"cf"},{n:"Chad (Tchad)",i:"td"},{n:"Chile",i:"cl"},{n:"China (\u4e2d\u56fd)",i:"cn"},{n:"Christmas Island",i:"cx"},{n:"Cocos (Keeling) Islands (Kepulauan Cocos (Keeling))",i:"cc"},{n:"Colombia",i:"co"},{n:"Comoros (\u202b\u062c\u0632\u0631 \u0627\u0644\u0642\u0645\u0631\u202c\u200e)",i:"km"},{n:"Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)",i:"cd"},{n:"Congo (Republic) (Congo-Brazzaville)",i:"cg"},{n:"Cook Islands",i:"ck"},{n:"Costa Rica",i:"cr"},{n:"C\xf4te d\u2019Ivoire",i:"ci"},{n:"Croatia (Hrvatska)",i:"hr"},{n:"Cuba",i:"cu"},{n:"Cura\xe7ao",i:"cw"},{n:"Cyprus (\u039a\u03cd\u03c0\u03c1\u03bf\u03c2)",i:"cy"},{n:"Czech Republic (\u010cesk\xe1 republika)",i:"cz"},{n:"Denmark (Danmark)",i:"dk"},{n:"Djibouti",i:"dj"},{n:"Dominica",i:"dm"},{n:"Dominican Republic (Rep\xfablica Dominicana)",i:"do"},{n:"Ecuador",i:"ec"},{n:"Egypt (\u202b\u0645\u0635\u0631\u202c\u200e)",i:"eg"},{n:"El Salvador",i:"sv"},{n:"Equatorial Guinea (Guinea Ecuatorial)",i:"gq"},{n:"Eritrea",i:"er"},{n:"Estonia (Eesti)",i:"ee"},{n:"Ethiopia",i:"et"},{n:"Falkland Islands (Islas Malvinas)",i:"fk"},{n:"Faroe Islands (F\xf8royar)",i:"fo"},{n:"Fiji",i:"fj"},{n:"Finland (Suomi)",i:"fi"},{n:"France",i:"fr"},{n:"French Guiana (Guyane fran\xe7aise)",i:"gf"},{n:"French Polynesia (Polyn\xe9sie fran\xe7aise)",i:"pf"},{n:"Gabon",i:"ga"},{n:"Gambia",i:"gm"},{n:"Georgia (\u10e1\u10d0\u10e5\u10d0\u10e0\u10d7\u10d5\u10d4\u10da\u10dd)",i:"ge"},{n:"Germany (Deutschland)",i:"de"},{n:"Ghana (Gaana)",i:"gh"},{n:"Gibraltar",i:"gi"},{n:"Greece (\u0395\u03bb\u03bb\u03ac\u03b4\u03b1)",i:"gr"},{n:"Greenland (Kalaallit Nunaat)",i:"gl"},{n:"Grenada",i:"gd"},{n:"Guadeloupe",i:"gp"},{n:"Guam",i:"gu"},{n:"Guatemala",i:"gt"},{n:"Guernsey",i:"gg"},{n:"Guinea (Guin\xe9e)",i:"gn"},{n:"Guinea-Bissau (Guin\xe9 Bissau)",i:"gw"},{n:"Guyana",i:"gy"},{n:"Haiti",i:"ht"},{n:"Honduras",i:"hn"},{n:"Hong Kong (\u9999\u6e2f)",i:"hk"},{n:"Hungary (Magyarorsz\xe1g)",i:"hu"},{n:"Iceland (\xcdsland)",i:"is"},{n:"India (\u092d\u093e\u0930\u0924)",i:"in"},{n:"Indonesia",i:"id"},{n:"Iran (\u202b\u0627\u06cc\u0631\u0627\u0646\u202c\u200e)",
i:"ir"},{n:"Iraq (\u202b\u0627\u0644\u0639\u0631\u0627\u0642\u202c\u200e)",i:"iq"},{n:"Ireland",i:"ie"},{n:"Isle of Man",i:"im"},{n:"Israel (\u202b\u05d9\u05e9\u05e8\u05d0\u05dc\u202c\u200e)",i:"il"},{n:"Italy (Italia)",i:"it"},{n:"Jamaica",i:"jm"},{n:"Japan (\u65e5\u672c)",i:"jp"},{n:"Jersey",i:"je"},{n:"Jordan (\u202b\u0627\u0644\u0623\u0631\u062f\u0646\u202c\u200e)",i:"jo"},{n:"Kazakhstan (\u041a\u0430\u0437\u0430\u0445\u0441\u0442\u0430\u043d)",i:"kz"},{n:"Kenya",i:"ke"},{n:"Kiribati",i:"ki"},{n:"Kosovo (Kosov\xeb)",i:"xk"},{n:"Kuwait (\u202b\u0627\u0644\u0643\u0648\u064a\u062a\u202c\u200e)",i:"kw"},{n:"Kyrgyzstan (\u041a\u044b\u0440\u0433\u044b\u0437\u0441\u0442\u0430\u043d)",i:"kg"},{n:"Laos (\u0ea5\u0eb2\u0ea7)",i:"la"},{n:"Latvia (Latvija)",i:"lv"},{n:"Lebanon (\u202b\u0644\u0628\u0646\u0627\u0646\u202c\u200e)",i:"lb"},{n:"Lesotho",i:"ls"},{n:"Liberia",i:"lr"},{n:"Libya (\u202b\u0644\u064a\u0628\u064a\u0627\u202c\u200e)",i:"ly"},{n:"Liechtenstein",i:"li"},{n:"Lithuania (Lietuva)",i:"lt"},{n:"Luxembourg",i:"lu"},{n:"Macau (\u6fb3\u9580)",i:"mo"},{n:"Macedonia (FYROM) (\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0438\u0458\u0430)",i:"mk"},{n:"Madagascar (Madagasikara)",i:"mg"},{n:"Malawi",i:"mw"},{n:"Malaysia",i:"my"},{n:"Maldives",i:"mv"},{n:"Mali",i:"ml"},{n:"Malta",i:"mt"},{n:"Marshall Islands",i:"mh"},{n:"Martinique",i:"mq"},{n:"Mauritania (\u202b\u0645\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u0627\u202c\u200e)",i:"mr"},{n:"Mauritius (Moris)",i:"mu"},{n:"Mayotte",i:"yt"},{n:"Mexico (M\xe9xico)",i:"mx"},{n:"Micronesia",i:"fm"},{n:"Moldova (Republica Moldova)",i:"md"},{n:"Monaco",i:"mc"},{n:"Mongolia (\u041c\u043e\u043d\u0433\u043e\u043b)",i:"mn"},{n:"Montenegro (Crna Gora)",i:"me"},{n:"Montserrat",i:"ms"},{n:"Morocco (\u202b\u0627\u0644\u0645\u063a\u0631\u0628\u202c\u200e)",i:"ma"},{n:"Mozambique (Mo\xe7ambique)",i:"mz"},{n:"Myanmar (Burma) (\u1019\u103c\u1014\u103a\u1019\u102c)",i:"mm"},{n:"Namibia (Namibi\xeb)",i:"na"},{n:"Nauru",i:"nr"},{n:"Nepal (\u0928\u0947\u092a\u093e\u0932)",i:"np"},{n:"Netherlands (Nederland)",i:"nl"},{n:"New Caledonia (Nouvelle-Cal\xe9donie)",i:"nc"},{n:"New Zealand",i:"nz"},{n:"Nicaragua",i:"ni"},{n:"Niger (Nijar)",i:"ne"},{n:"Nigeria",i:"ng"},{n:"Niue",i:"nu"},{n:"Norfolk Island",i:"nf"},{n:"North Korea (\uc870\uc120 \ubbfc\uc8fc\uc8fc\uc758 \uc778\ubbfc \uacf5\ud654\uad6d)",i:"kp"},{n:"Northern Mariana Islands",i:"mp"},{n:"Norway (Norge)",i:"no"},{n:"Oman (\u202b\u0639\u064f\u0645\u0627\u0646\u202c\u200e)",i:"om"},{n:"Pakistan (\u202b\u067e\u0627\u06a9\u0633\u062a\u0627\u0646\u202c\u200e)",i:"pk"},{n:"Palau",i:"pw"},{n:"Palestine (\u202b\u0641\u0644\u0633\u0637\u064a\u0646\u202c\u200e)",i:"ps"},{n:"Panama (Panam\xe1)",i:"pa"},{n:"Papua New Guinea",i:"pg"},{n:"Paraguay",i:"py"},{n:"Peru (Per\xfa)",i:"pe"},{n:"Philippines",i:"ph"},{n:"Pitcairn Islands",i:"pn"},{n:"Poland (Polska)",i:"pl"},{n:"Portugal",i:"pt"},{n:"Puerto Rico",i:"pr"},{n:"Qatar (\u202b\u0642\u0637\u0631\u202c\u200e)",i:"qa"},{n:"R\xe9union (La R\xe9union)",i:"re"},{n:"Romania (Rom\xe2nia)",i:"ro"},{n:"Russia (\u0420\u043e\u0441\u0441\u0438\u044f)",i:"ru"},{n:"Rwanda",i:"rw"},{n:"Saint Barth\xe9lemy (Saint-Barth\xe9lemy)",i:"bl"},{n:"Saint Helena",i:"sh"},{n:"Saint Kitts and Nevis",i:"kn"},{n:"Saint Lucia",i:"lc"},{n:"Saint Martin (Saint-Martin (partie fran\xe7aise))",i:"mf"},{n:"Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)",i:"pm"},{n:"Saint Vincent and the Grenadines",i:"vc"},{n:"Samoa",i:"ws"},{n:"San Marino",i:"sm"},{n:"S\xe3o Tom\xe9 and Pr\xedncipe (S\xe3o Tom\xe9 e Pr\xedncipe)",i:"st"},{n:"Saudi Arabia (\u202b\u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629\u202c\u200e)",i:"sa"},{n:"Senegal (S\xe9n\xe9gal)",i:"sn"},{n:"Serbia (\u0421\u0440\u0431\u0438\u0458\u0430)",i:"rs"},{n:"Seychelles",i:"sc"},{n:"Sierra Leone",i:"sl"},{n:"Singapore",i:"sg"},{n:"Sint Maarten",i:"sx"},{n:"Slovakia (Slovensko)",i:"sk"},{n:"Slovenia (Slovenija)",i:"si"},{n:"Solomon Islands",i:"sb"},{n:"Somalia (Soomaaliya)",i:"so"},{n:"South Africa",i:"za"},{n:"South Georgia & South Sandwich Islands",i:"gs"},{n:"South Korea (\ub300\ud55c\ubbfc\uad6d)",i:"kr"},{n:"South Sudan (\u202b\u062c\u0646\u0648\u0628 \u0627\u0644\u0633\u0648\u062f\u0627\u0646\u202c\u200e)",i:"ss"},{n:"Spain (Espa\xf1a)",i:"es"},{n:"Sri Lanka (\u0dc1\u0dca\u200d\u0dbb\u0dd3 \u0dbd\u0d82\u0d9a\u0dcf\u0dc0)",i:"lk"},{n:"Sudan (\u202b\u0627\u0644\u0633\u0648\u062f\u0627\u0646\u202c\u200e)",i:"sd"},{n:"Suriname",i:"sr"},{n:"Svalbard and Jan Mayen (Svalbard og Jan Mayen)",i:"sj"},{n:"Swaziland",i:"sz"},{n:"Sweden (Sverige)",i:"se"},{n:"Switzerland (Schweiz)",i:"ch"},{n:"Syria (\u202b\u0633\u0648\u0631\u064a\u0627\u202c\u200e)",i:"sy"},{n:"Taiwan (\u53f0\u7063)",i:"tw"},{n:"Tajikistan",i:"tj"},{n:"Tanzania",i:"tz"},{n:"Thailand (\u0e44\u0e17\u0e22)",i:"th"},{n:"Timor-Leste",i:"tl"},{n:"Togo",i:"tg"},{n:"Tokelau",i:"tk"},{n:"Tonga",i:"to"},{n:"Trinidad and Tobago",i:"tt"},{n:"Tunisia (\u202b\u062a\u0648\u0646\u0633\u202c\u200e)",i:"tn"},{n:"Turkey (T\xfcrkiye)",i:"tr"},{n:"Turkmenistan",i:"tm"},{n:"Turks and Caicos Islands",i:"tc"},{n:"Tuvalu",i:"tv"},{n:"Uganda",i:"ug"},{n:"Ukraine (\u0423\u043a\u0440\u0430\u0457\u043d\u0430)",i:"ua"},{n:"United Arab Emirates (\u202b\u0627\u0644\u0625\u0645\u0627\u0631\u0627\u062a \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0645\u062a\u062d\u062f\u0629\u202c\u200e)",i:"ae"},{n:"United Kingdom",i:"gb"},{n:"United States",i:"us"},{n:"U.S. Minor Outlying Islands",i:"um"},{n:"U.S. Virgin Islands",i:"vi"},{n:"Uruguay",i:"uy"},{n:"Uzbekistan (O\u02bbzbekiston)",i:"uz"},{n:"Vanuatu",i:"vu"},{n:"Vatican City (Citt\xe0 del Vaticano)",i:"va"},{n:"Venezuela",i:"ve"},{n:"Vietnam (Vi\u1ec7t Nam)",i:"vn"},{n:"Wallis and Futuna",i:"wf"},{n:"Western Sahara (\u202b\u0627\u0644\u0635\u062d\u0631\u0627\u0621 \u0627\u0644\u063a\u0631\u0628\u064a\u0629\u202c\u200e)",i:"eh"},{n:"Yemen (\u202b\u0627\u0644\u064a\u0645\u0646\u202c\u200e)",i:"ye"},{n:"Zambia",i:"zm"},{n:"Zimbabwe",i:"zw"}],function(e,t){t.name=t.n,t.iso2=t.i,delete t.n,delete t.i})});var envatoSso=function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function t(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&i.path)}},i.exports),i.exports}function i(e,t){return i.get(e,t)}function n(e,t,i){var n=t[e];return i.includes(e)&&(n=n||function(){return console.log("".concat(e," invoked"))}),n}function s(e,t){var i;return function(){var n=arguments,s=this;clearTimeout(i),i=setTimeout(function(){return e.apply(s,n)},t)}}function r(e,t,i,n,s){this.method=e,this.url=t,this.timeout=i,this.data=n||{},this.withCredentials=s||!1}function o(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.withCredentials=e.withCredentials,this.httpMethod="post",this.data=e.data,$(this,e,["onSuccess","onFailure","onError","onCaptchaRequired","onCaptchaInvalid","onTwoFactorRequired","onTwoFactorInvalid","onSignInVerification","onForcedPasswordReset","onEmailConfirmationRequired"],["onEmailConfirmationRequired"])}function a(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.withCredentials=e.withCredentials,this.httpMethod="post",this.data=e.data,$(this,e,["onSuccess","onFailure","onError"])}function l(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.withCredentials=e.withCredentials,this.httpMethod="post",this.data=e.data,$(this,e,["onSuccess","onFailure","onError"])}function c(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.withCredentials=e.withCredentials,this.httpMethod="delete",this.data=e.data,$(this,e,["onSuccess","onError"])}function u(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.withCredentials=e.withCredentials,this.httpMethod="post",this.data=e.data,$(this,e,["onSuccess","onFailure","onError","onEmailConfirmationRequired"],["onEmailConfirmationRequired"])}function d(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.withCredentials=e.withCredentials,this.httpMethod="put",this.data=e.data,$(this,e,["onSuccess","onFailure","onError"])}function h(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.withCredentials=e.withCredentials,this.httpMethod="post",this.data=e.data,$(this,e,["onSuccess","onFailure","onError"])}function p(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.httpMethod="get",this.data=e.data,$(this,e,["onSuccess","onFailure","onError"])}function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach(function(t){N(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function g(e){this.options=e,$(this,e,["onSuccess","onFailure","onError"])}function v(e){this.options=e,$(this,e,["onSuccess","onFailure","onError","onPopupBlocked","onPopupClosed"])}function y(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.withCredentials=e.withCredentials,this.httpMethod="post",this.data={access_token:e.access_token,language_code:e.language_code},$(this,e,["onSuccess","onFailure","onError","onConnectNotAllowed","onSignupNotAllowed","onSignupFailure","onAccountDisabled"])}function b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function _(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?b(Object(i),!0).forEach(function(t){N(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function w(e){this.options=e,$(this,e,["onSuccess","onFailure","onError","onPopupBlocked","onPopupClosed","onSignupNotAllowed","onConnectNotAllowed","onSignupFailure","onAccountDisabled"])}function C(e){this.endpoint=e.endpoint,this.withCredentials=e.withCredentials,this.httpMethod="post",this.data=e.data,$(this,e,["onSuccess","onFailure","onError"])}function S(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.httpMethod="post",this.data=e.data,$(this,e,["onSuccess","onFailure","onError"])}function T(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.httpMethod="post",this.data=e.data,$(this,e,["onSuccess","onFailure","onError"])}function k(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.httpMethod="post",this.data=e.data,$(this,e,["onSuccess","onFailure","onError"])}function E(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.httpMethod="post",this.data=e.data,$(this,e,["onSuccess","onFailure","onError"])}function I(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.httpMethod="post",this.data=e.data,$(this,e,["onSuccess","onFailure","onError"])}function x(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.httpMethod="post",this.data=e.data,$(this,e,["onSuccess","onFailure","onError"])}function P(e){this.endpoint=e.endpoint,this.timeout=e.timeout,this.httpMethod="post",this.data=e.data,$(this,e,["onSuccess","onFailure","onError"])}function A(e,t){this.feature=e,this.status=t}function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function L(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach(function(t){N(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function O(e){var t=this;this.config=L(L({},X),e||{}),H(this.config.serverHost);var i=function(e){return void 0===t.config[e]?t.config.debounceWindowMilliseconds:t.config[e]};this.emailValidation=s(this.emailValidation,i("debounceEmailMs")),this.usernameAvailability=s(this.usernameAvailability,i("debounceUsernameMs")),this.usernameFormatValidation=s(this.usernameFormatValidation,i("debounceUsernameMs")),this.passwordValidation=s(this.passwordValidation,i("debouncePasswordMs"))}var M="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},N=e(t(function(e){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports["default"]=e.exports,e.exports.__esModule=!0})),R={_toggles:{},load:function(e){this._toggles=e},isFeatureEnabled:function(e){var t=this._toggles[e];if("function"==typeof t)try{var i=Array.prototype.slice.call(arguments,1);t=t.apply(this,i)}catch(e){return!1}return!0===t},middleware:function(e,t,i){t.locals.isFeatureEnabled=function(i){return R.isFeatureEnabled(i,e,t)},i()}},U=R;i.map={},i.get=function(e,t){if(e in i.map)return new i.map[e](t);throw new Error("invalid error")},i.add=function(e,t){function n(i){Error.call(this),this.name=this.code=e,this.message=i.message||t.message,this.requestId=i.requestId,this.responseText=i.responseText,this.responseStatus=i.responseStatus}return t=t||{},n.prototype=new Error,i.map[e]=n},i.add("api-error",{message:"There was an error with your request."}),i.add("api-timeout",{message:"The API request timed out."}),i.add("missing-callback",{message:"Missing callback."}),i.add("invalid-options",{message:"Options must be an object."}),i.add("no-browser-support",{message:"This browser is not supported."});var $=function(e,t,s){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];s.forEach(function(s){if(e[s]=n(s,t,r),"function"!=typeof e[s])throw i("missing-callback",{message:"Missing ".concat(s," callback")})})},H=function(e){if(!document.querySelector("link[href='".concat(e,"']"))){var t=document.createElement("link");t.setAttribute("rel","preconnect"),t.setAttribute("href",e);var i=document.head;i&&i.insertBefore(t,i.firstChild)}},B=t(function(e){e.exports=function(e){return Array.isArray(e)?e:void 0},e.exports["default"]=e.exports,e.exports.__esModule=!0}),F=t(function(e){e.exports=function(e,t){var i=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=i){var n,s,r=[],o=!0,a=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(r.push(n.value),!t||r.length!==t);o=!0);}catch(e){a=!0,s=e}finally{try{o||null==i["return"]||i["return"]()}finally{if(a)throw s}}return r}},e.exports["default"]=e.exports,e.exports.__esModule=!0}),j=t(function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);t>i;i++)n[i]=e[i];return n},e.exports["default"]=e.exports,e.exports.__esModule=!0}),z=t(function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return j(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?j(e,t):void 0}},e.exports["default"]=e.exports,e.exports.__esModule=!0}),W=t(function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports["default"]=e.exports,e.exports.__esModule=!0}),V=e(t(function(e){e.exports=function(e,t){return B(e)||F(e,t)||z(e,t)||W()},e.exports["default"]=e.exports,e.exports.__esModule=!0})),q=function(e){var t=e.XMLHttpRequest,i=e.XDomainRequest;return t&&"withCredentials"in new t?t:i||void 0}("undefined"!=typeof window?window:void 0!==M?M:"undefined"!=typeof self?self:{});r.prototype.execute=function(e){return"undefined"==typeof URLSearchParams||void 0===q?e(i("no-browser-support")):this.xhr(e)},r.prototype.xhr=function(e){var t=new q,n=new URLSearchParams;Object.entries(this.data).forEach(function(e){var t=V(e,2),i=t[0],s=t[1];return n.set(i,s)});var s=n.toString();"get"===this.method&&(this.url+="?"+s),t.open(this.method,this.url),t.timeout=this.timeout,t.setRequestHeader("Accept","application/json");var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)});t.setRequestHeader("X-Request-Id",r),t.withCredentials=this.withCredentials,t.setRequestHeader("X-Client-Version","2.6.4"),"post"===this.method||"put"===this.method?(t.setRequestHeader&&(t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("Content-type","application/x-www-form-urlencoded")),t.send(s)):t.send();var o=function(e){return{message:e,requestId:r,responseText:t.responseText,responseStatus:t.status}};t.ontimeout=function(){e(i("api-timeout",o("XMLHttpRequest.ontimeout")))},t.onerror=function(){e(i("api-error",o("Network level failure (XMLHttpRequest.onerror)")))},t.onprogress=function(){},t.onload=function(){var t;switch(this.status){case 200:case 201:try{t=JSON.parse(this.responseText)}catch(t){return e(i("api-error",o("There was a problem parsing the API response.")))}break;case 204:t={};break;case 404:return e(i("api-error",o("API endpoint not found.")));case 406:return e(i("api-error",o("API endpoint method not available.")));case 415:return e(i("api-error",o("Invalid Content Type - Expecting application/json")));case 422:try{t=JSON.parse(this.responseText)}catch(t){return e(i("api-error",o("There was a problem parsing the API response.")))}break;case 429:return e(i("api-error",o("Too many requests.")));default:return e(i("api-error",o("There was an unknown server error.")))}e(null,t)}},o.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data,this.withCredentials),t=function(e,t){if(e)return this.onError(e.message,e);if(t)switch(t.state){case"ok":return this.onSuccess(t.token);case"password":return this.onFailure(t.error_message);case"captcha":return null!=t.error_message?this.onCaptchaInvalid(t.error_message):this.onCaptchaRequired();case"two_factor":return null!=t.error_message?this.onTwoFactorInvalid(t.error_message):this.onTwoFactorRequired();case"sign_in_verification":return this.onSignInVerification(t.sign_in_verification_token);case"password_reset_required":return this.onForcedPasswordReset("Forced password reset");case"email_confirmation_required":return this.onEmailConfirmationRequired();default:return t.error_message?this.onFailure(t.error_message):this.onFailure("Unknown failure.")}},i=this;e.execute(function(){t.apply(i,arguments)})},a.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data,this.withCredentials),t=function(e,t){if(e)return this.onError(e.message,e);if(t){if(t.token)return this.onSuccess(t.token);if(t.error)return this.onFailure(t.error)}},i=this;e.execute(function(){t.apply(i,arguments)})},l.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data,this.withCredentials),t=function(e,t){if(e)return this.onError(e.message,e);if(t)switch(t.state){case"ok":return this.onSuccess(t.token);case"unauthenticated":return this.onFailure("No active session on Envato SSO")}},i=this;e.execute(function(){t.apply(i,arguments)})},c.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data,this.withCredentials),t=function(e,t){return e?this.onError(e.message,e):t?this.onSuccess():void 0},i=this;e.execute(function(){t.apply(i,arguments)})},u.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data,this.withCredentials),t=function(e,t){if(e)return this.onError(e.message,e);if(t){if(t.token)return this.onSuccess(t.token);if(t.errors)return this.onFailure(t.errors);if("email_confirmation_required"===t.state)return this.onEmailConfirmationRequired()}},i=this;e.execute(function(){t.apply(i,arguments)})},d.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data,this.withCredentials),t=function(e,t){return e?this.onError(e.message,e):t?t.errors?this.onFailure(t.errors):this.onSuccess():void 0},i=this;e.execute(function(){t.apply(i,arguments)})},h.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data,this.withCredentials),t=function(e,t){if(e)return this.onError(e.message,e);if(t){if(t.token)return this.onSuccess(t.token);if(t.error)return this.onFailure(t.error)}},i=this;e.execute(function(){t.apply(i,arguments)})},p.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data,this.withCredentials),t=function(e,t){return e?this.onError(e.message,e):t?t.errors?this.onFailure(t.errors):this.onSuccess(t):void 0},i=this;e.execute(function(){t.apply(i,arguments)})},g.prototype.execute=function(){var e=this;if(H("https://apis.google.com"),H("https://accounts.google.com"),document.getElementById("GoogleAuth"))this.onSuccess();else{window.googleAuthLoaded=function(){var t={endpoint:e.options.oauthEndpoint,timeout:e.options.timeout},i={onSuccess:function(t){return i=t.google_oauth2.client_id,void window.gapi.load("auth2:client",function(){window.gapi.client.init({scope:"email profile",client_id:i,prompt:"select_account"}).then(e.onSuccess,function(t){return e.onFailure(t.details)})});var i},onFailure:e.onFailure,onError:e.onError};new p(m(m({},t),i)).execute()};var t=document.createElement("script");t.setAttribute("id","GoogleAuth"),t.setAttribute("src","https://apis.google.com/js/platform.js?onload=googleAuthLoaded"),t.setAttribute("type","text/javascript");var i=document.head;i&&i.insertBefore(t,i.firstChild)}},v.prototype.execute=function(){var e=this;return window.gapi&&window.gapi.auth2?window.gapi.auth2.getAuthInstance().signIn().then(function(t){var i=t.getAuthResponse().access_token;e.onSuccess(i)})["catch"](function(t){switch(t.error){case"popup_blocked_by_browser":e.onPopupBlocked();break;case"popup_closed_by_user":e.onPopupClosed();break;default:e.onError(t.error)}}):void this.onFailure("Unable to load Google Sign In API")},y.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data,this.withCredentials),t=function(e,t){if(e)return this.onError(e.message,e);if(t)switch(t.state){case"ok":return this.onSuccess(t);case"sign_up_not_allowed":return this.onSignupNotAllowed(t);case"connect_not_allowed":return this.onConnectNotAllowed(t);case"sign_up_failure":return this.onSignupFailure(t.errors);case"access_disabled":return this.onAccountDisabled();default:return this.onFailure(t)}},i=this;e.execute(function(){t.apply(i,arguments)})},w.prototype.execute=function(){var e,t=this;e={onSuccess:function(e){return function(e){var i={access_token:e,language_code:t.options.language_code,endpoint:t.options.callbackEndpoint,withCredentials:t.options.withCredentials,timeout:t.options.timeout},n={onSuccess:t.onSuccess,onFailure:t.onFailure,onError:t.onError,onConnectNotAllowed:t.onConnectNotAllowed,onSignupNotAllowed:t.onSignupNotAllowed,onSignupFailure:t.onSignupFailure,onAccountDisabled:t.onAccountDisabled};new y(_(_({},i),n)).execute()}(e)},onFailure:t.onFailure,onError:t.onError,onPopupBlocked:t.onPopupBlocked,onPopupClosed:t.onPopupClosed},new v(_(_({},{}),e)).execute()},C.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data,this.withCredentials),t=function(e,t){return e?this.onError(e.message,e):t?t.errors?this.onFailure(t.errors):this.onSuccess(t):void 0},i=this;e.execute(function(){t.apply(i,arguments)})},S.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data),t=function(e,t){if(e)return this.onError(e.message,e);if(t){if(1==t.valid)return this.onSuccess("Username is available");if(0==t.valid)return this.onFailure(t.error)}},i=this;e.execute(function(){t.apply(i,arguments)})},T.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data),t=function(e,t){if(e)return this.onError(e.message,e);if(t){if(1==t.acceptable)return this.onSuccess(t.strength);if(0==t.acceptable)return this.onFailure(t.strength)}},i=this;e.execute(function(){t.apply(i,arguments)})},k.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data),t=function(e,t){if(e)return this.onError(e.message,e);if(t){if(1==t.valid)return this.onSuccess("Email not in use");if(0==t.valid)return this.onFailure(t.error)}},i=this;e.execute(function(){t.apply(i,arguments)})},E.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data),t=function(e,t){if(e)return this.onError(e.message,e);if(t){if(1==t.valid)return this.onSuccess("First Name has valid characters");if(0==t.valid)return this.onFailure(t.error)}},i=this;e.execute(function(){t.apply(i,arguments)})},I.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data),t=function(e,t){if(e)return this.onError(e.message,e);if(t){if(1==t.valid)return this.onSuccess("Last Name has valid characters");if(0==t.valid)return this.onFailure(t.error)}},i=this;e.execute(function(){t.apply(i,arguments)})},x.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data),t=function(e,t){return e?this.onError(e.message,e):t?t.error?this.onFailure(t.error):this.onSuccess("Password reset email triggered on SSO"):void 0},i=this;e.execute(function(){t.apply(i,arguments)})},P.prototype.execute=function(){var e=new r(this.httpMethod,this.endpoint,this.timeout,this.data),t=function(e,t){return e?this.onError(e.message,e):t?t.error?this.onFailure(t.error):this.onSuccess("Forgot username email triggered on SSO"):void 0},i=this;e.execute(function(){t.apply(i,arguments)})};var G="feature::",Y={socialAuth:function(){try{return localStorage=window.localStorage,null!==localStorage.getItem("feature::socialAuth")}catch(e){return!1}}};window.EnvatoSSOFeature={enable:function(e){return void 0===e?"Missing feature name to be enabled":(localStorage.setItem(G+e,"enabled"),G+e+" enabled")},disable:function(e){return void 0===e?"Missing feature name to be enabled":(localStorage.removeItem(G+e),G+e+" disabled")},list:function(){var e=[];return Object.keys(Y).forEach(function(t,i){var n=localStorage.getItem(G+t);null===n&&(n="disabled"),e.push(new A(t,n))}),console.table(e),e}},U.load(Y);var X={serverHost:"https://account.envato.com",signInPath:"/api/sign_in",signUpPath:"/api/sign_up",updateAccountPath:"/api/update_account",signInVerificationPath:"/api/verify_sign_in",autoSignInPath:"/api/auto_sign_in",signOutPath:"/api/sign_out",passwordStrengthPath:"/api/validate_password",usernameValidationPath:"/api/validate_username",emailValidationPath:"/api/validate_email",resetPasswordRequestPath:"/api/request_password_reset",recoverUsernameRequestPath:"/api/recover_username",resetPasswordPath:"/api/reset_password",firstNameValidationPath:"/api/validate_first_name",lastNameValidationPath:"/api/validate_last_name",oAuthConfigurationPath:"/api/oauth/configuration",googleCallbackPath:"/api/oauth/google/callback",suggestUsernamesPath:"/api/suggest_usernames",timeout:1e4,withCredentials:!1,debounceWindowMilliseconds:500};return O.prototype.configure=function(e){this.config=L(L({},this.config),e)},O.prototype.signIn=function(e){new o(L(L({},{endpoint:this.config.serverHost+this.config.signInPath,withCredentials:!0,timeout:this.config.timeout}),e)).execute()},O.prototype.signInVerification=function(e){new a(L(L({},{endpoint:this.config.serverHost+this.config.signInVerificationPath,withCredentials:!0,timeout:this.config.timeout}),e)).execute()},O.prototype.autoSignIn=function(e){new l(L(L({},{endpoint:this.config.serverHost+this.config.autoSignInPath,withCredentials:!0,timeout:this.config.timeout}),e)).execute()},O.prototype.signOut=function(e){new c(L(L({},{endpoint:this.config.serverHost+this.config.signOutPath,withCredentials:!0,timeout:this.config.timeout}),e)).execute()},O.prototype.signUp=function(e){new u(L(L({},{endpoint:this.config.serverHost+this.config.signUpPath,withCredentials:!0,timeout:this.config.timeout}),e)).execute()},O.prototype.usernameAvailability=function(e){new S(L(L({},{endpoint:this.config.serverHost+this.config.usernameValidationPath,timeout:this.config.timeout}),e)).execute()},O.prototype.usernameFormatValidation=function(e){var t=L(L({},{endpoint:this.config.serverHost+this.config.usernameValidationPath,timeout:this.config.timeout}),e);t.data.check_availability=!1,new S(t).execute()},O.prototype.passwordValidation=function(e){new T(L(L({},{endpoint:this.config.serverHost+this.config.passwordStrengthPath,timeout:this.config.timeout}),e)).execute()},O.prototype.emailValidation=function(e){new k(L(L({},{endpoint:this.config.serverHost+this.config.emailValidationPath,timeout:this.config.timeout}),e)).execute()},O.prototype.passwordResetRequest=function(e){new x(L(L({},{endpoint:this.config.serverHost+this.config.resetPasswordRequestPath,timeout:this.config.timeout}),e)).execute()},O.prototype.recoverUsernameRequest=function(e){new P(L(L({},{endpoint:this.config.serverHost+this.config.recoverUsernameRequestPath,timeout:this.config.timeout}),e)).execute()},O.prototype.resetPassword=function(e){new h(L(L({},{endpoint:this.config.serverHost+this.config.resetPasswordPath,withCredentials:!0,timeout:this.config.timeout}),e)).execute()},O.prototype.updateAccount=function(e){new d(L(L({},{endpoint:this.config.serverHost+this.config.updateAccountPath,withCredentials:!0,timeout:this.config.timeout}),e)).execute()},O.prototype.firstNameValidation=function(e){new E(L(L({},{endpoint:this.config.serverHost+this.config.firstNameValidationPath,timeout:this.config.timeout}),e)).execute()},O.prototype.lastNameValidation=function(e){new I(L(L({},{endpoint:this.config.serverHost+this.config.lastNameValidationPath,timeout:this.config.timeout}),e)).execute()},O.prototype.suggestUsernames=function(e){new C(L(L({},{endpoint:this.config.serverHost+this.config.suggestUsernamesPath,timeout:this.config.timeout}),e)).execute()},O.prototype.initGoogle=function(e){new g(L(L({},{oauthEndpoint:this.config.serverHost+this.config.oAuthConfigurationPath,timeout:this.config.timeout}),e)).execute()},O.prototype.signInWithGoogle=function(e){new w(L(L({},{callbackEndpoint:this.config.serverHost+this.config.googleCallbackPath,withCredentials:!0,timeout:this.config.timeout}),e)).execute()},new O}();!function(e){var t=function(e,t){return e<<t|e>>>32-t},i=function(e,t){var i,n,s,r,o;return s=2147483648&e,r=2147483648&t,i=1073741824&e,n=1073741824&t,o=(1073741823&e)+(1073741823&t),i&n?2147483648^o^s^r:i|n?1073741824&o?3221225472^o^s^r:1073741824^o^s^r:o^s^r},n=function(e,t,i){return e&t|~e&i},s=function(e,t,i){return e&i|t&~i},r=function(e,t,i){return e^t^i},o=function(e,t,i){return t^(e|~i)},a=function(e,s,r,o,a,l,c){return e=i(e,i(i(n(s,r,o),a),c)),i(t(e,l),s)},l=function(e,n,r,o,a,l,c){return e=i(e,i(i(s(n,r,o),a),c)),i(t(e,l),n)},c=function(e,n,s,o,a,l,c){return e=i(e,i(i(r(n,s,o),a),c)),i(t(e,l),n)},u=function(e,n,s,r,a,l,c){return e=i(e,i(i(o(n,s,r),a),c)),i(t(e,l),n)},d=function(e){for(var t,i=e.length,n=i+8,s=(n-n%64)/64,r=16*(s+1),o=Array(r-1),a=0,l=0;i>l;)t=(l-l%4)/4,a=l%4*8,o[t]=o[t]|e.charCodeAt(l)<<a,l++;return t=(l-l%4)/4,a=l%4*8,o[t]=o[t]|128<<a,o[r-2]=i<<3,o[r-1]=i>>>29,o},h=function(e){var t,i,n="",s="";for(i=0;3>=i;i++)t=e>>>8*i&255,s="0"+t.toString(16),n+=s.substr(s.length-2,2);return n},p=function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t};e.extend({md5:function(e){var t,n,s,r,o,f,m,g,v,y=Array(),b=7,_=12,w=17,C=22,S=5,T=9,k=14,E=20,I=4,x=11,P=16,A=23,D=6,L=10,O=15,M=21;for(e=p(e),y=d(e),f=1732584193,m=4023233417,g=2562383102,v=271733878,t=0;t<y.length;t+=16)n=f,s=m,r=g,o=v,f=a(f,m,g,v,y[t+0],b,3614090360),v=a(v,f,m,g,y[t+1],_,3905402710),g=a(g,v,f,m,y[t+2],w,606105819),m=a(m,g,v,f,y[t+3],C,3250441966),f=a(f,m,g,v,y[t+4],b,4118548399),v=a(v,f,m,g,y[t+5],_,1200080426),g=a(g,v,f,m,y[t+6],w,2821735955),m=a(m,g,v,f,y[t+7],C,4249261313),f=a(f,m,g,v,y[t+8],b,1770035416),v=a(v,f,m,g,y[t+9],_,2336552879),g=a(g,v,f,m,y[t+10],w,4294925233),
m=a(m,g,v,f,y[t+11],C,2304563134),f=a(f,m,g,v,y[t+12],b,1804603682),v=a(v,f,m,g,y[t+13],_,4254626195),g=a(g,v,f,m,y[t+14],w,2792965006),m=a(m,g,v,f,y[t+15],C,1236535329),f=l(f,m,g,v,y[t+1],S,4129170786),v=l(v,f,m,g,y[t+6],T,3225465664),g=l(g,v,f,m,y[t+11],k,643717713),m=l(m,g,v,f,y[t+0],E,3921069994),f=l(f,m,g,v,y[t+5],S,3593408605),v=l(v,f,m,g,y[t+10],T,38016083),g=l(g,v,f,m,y[t+15],k,3634488961),m=l(m,g,v,f,y[t+4],E,3889429448),f=l(f,m,g,v,y[t+9],S,568446438),v=l(v,f,m,g,y[t+14],T,3275163606),g=l(g,v,f,m,y[t+3],k,4107603335),m=l(m,g,v,f,y[t+8],E,1163531501),f=l(f,m,g,v,y[t+13],S,2850285829),v=l(v,f,m,g,y[t+2],T,4243563512),g=l(g,v,f,m,y[t+7],k,1735328473),m=l(m,g,v,f,y[t+12],E,2368359562),f=c(f,m,g,v,y[t+5],I,4294588738),v=c(v,f,m,g,y[t+8],x,2272392833),g=c(g,v,f,m,y[t+11],P,1839030562),m=c(m,g,v,f,y[t+14],A,4259657740),f=c(f,m,g,v,y[t+1],I,2763975236),v=c(v,f,m,g,y[t+4],x,1272893353),g=c(g,v,f,m,y[t+7],P,4139469664),m=c(m,g,v,f,y[t+10],A,3200236656),f=c(f,m,g,v,y[t+13],I,681279174),v=c(v,f,m,g,y[t+0],x,3936430074),g=c(g,v,f,m,y[t+3],P,3572445317),m=c(m,g,v,f,y[t+6],A,76029189),f=c(f,m,g,v,y[t+9],I,3654602809),v=c(v,f,m,g,y[t+12],x,3873151461),g=c(g,v,f,m,y[t+15],P,530742520),m=c(m,g,v,f,y[t+2],A,3299628645),f=u(f,m,g,v,y[t+0],D,4096336452),v=u(v,f,m,g,y[t+7],L,1126891415),g=u(g,v,f,m,y[t+14],O,2878612391),m=u(m,g,v,f,y[t+5],M,4237533241),f=u(f,m,g,v,y[t+12],D,1700485571),v=u(v,f,m,g,y[t+3],L,2399980690),g=u(g,v,f,m,y[t+10],O,4293915773),m=u(m,g,v,f,y[t+1],M,2240044497),f=u(f,m,g,v,y[t+8],D,1873313359),v=u(v,f,m,g,y[t+15],L,4264355552),g=u(g,v,f,m,y[t+6],O,2734768916),m=u(m,g,v,f,y[t+13],M,1309151649),f=u(f,m,g,v,y[t+4],D,4149444226),v=u(v,f,m,g,y[t+11],L,3174756917),g=u(g,v,f,m,y[t+2],O,718787259),m=u(m,g,v,f,y[t+9],M,3951481745),f=i(f,n),m=i(m,s),g=i(g,r),v=i(v,o);var N=h(f)+h(m)+h(g)+h(v);return N.toLowerCase()}})}(jQuery),/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var i=e.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}if(e.support.touch="ontouchend"in document,e.support.touch){var i,n=e.ui.mouse.prototype,s=n._mouseInit,r=n._mouseDestroy;n._touchStart=function(e){var n=this;!i&&n._mouseCapture(e.originalEvent.changedTouches[0])&&(i=!0,n._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},n._touchMove=function(e){i&&(this._touchMoved=!0,t(e,"mousemove"))},n._touchEnd=function(e){i&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),i=!1)},n._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),s.call(t)},n._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),r.call(t)}}}(jQuery),!function(e){var t;"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).braintree||(t.braintree={})).client=e()}(function(){return function e(t,i,n){function s(o,a){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){return s(t[o][1][e]||e)},u,u.exports,e,t,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(i,"__esModule",{value:!0}),i.PromiseGlobal=void 0;var s=n(e("promise-polyfill")),r="undefined"!=typeof Promise?Promise:s["default"];i.PromiseGlobal=r},{"promise-polyfill":15}],2:[function(e,t,i){"use strict";function n(e){var t,i=JSON.stringify(e);if(!e.forceScriptReload&&(t=r[i]))return t;var n=document.createElement("script"),o=e.dataAttributes||{},a=e.container||document.head;return n.src=e.src,n.id=e.id||"",n.async=!0,e.crossorigin&&n.setAttribute("crossorigin",""+e.crossorigin),Object.keys(o).forEach(function(e){n.setAttribute("data-"+e,""+o[e])}),t=new s.PromiseGlobal(function(t,i){n.addEventListener("load",function(){t(n)}),n.addEventListener("error",function(){i(new Error(e.src+" failed to load."))}),n.addEventListener("abort",function(){i(new Error(e.src+" has aborted."))}),a.appendChild(n)}),r[i]=t}var s=e("./lib/promise"),r={};n.clearCache=function(){r={}},t.exports=n},{"./lib/promise":1}],3:[function(e,t,i){t.exports=e("./dist/load-script")},{"./dist/load-script":2}],4:[function(e,t,i){"use strict";var n=e("./is-ie11");t.exports=function(e){return-1!==(e=e||window.navigator.userAgent).indexOf("MSIE")||n(e)}},{"./is-ie11":5}],5:[function(e,t,i){"use strict";t.exports=function(e){return-1!==(e=e||window.navigator.userAgent).indexOf("Trident/7")}},{}],6:[function(e,t,i){"use strict";t.exports=function(e){return-1!==(e=e||window.navigator.userAgent).indexOf("MSIE 9")}},{}],7:[function(e,t,i){t.exports=e("./dist/is-ie")},{"./dist/is-ie":4}],8:[function(e,t,i){t.exports=e("./dist/is-ie9")},{"./dist/is-ie9":6}],9:[function(e,t,i){"use strict";function n(e){var t=this;"function"!=typeof e?(this._promise=new n.Promise(function(e,i){t._resolveFunction=e,t._rejectFunction=i}),e=e||{},this._onResolve=e.onResolve||n.defaultOnResolve,this._onReject=e.onReject||n.defaultOnReject,n.shouldCatchExceptions(e)&&this._promise["catch"](function(){}),this._resetState()):this._promise=new n.Promise(e)}var s="undefined"!=typeof Promise?Promise:null,r=(n.defaultOnResolve=function(e){return n.Promise.resolve(e)},n.defaultOnReject=function(e){return n.Promise.reject(e)},n.setPromise=function(e){n.Promise=e},n.shouldCatchExceptions=function(e){return e.hasOwnProperty("suppressUnhandledPromiseMessage")?Boolean(e.suppressUnhandledPromiseMessage):Boolean(n.suppressUnhandledPromiseMessage)},n.all=function(e){return n.Promise.all(e)},n.allSettled=function(e){return n.Promise.allSettled(e)},n.race=function(e){return n.Promise.race(e)},n.reject=function(e){return n.Promise.reject(e)},n.resolve=function(e){return n.Promise.resolve(e)},n.prototype.then=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(e=this._promise).then.apply(e,t)},n.prototype["catch"]=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(e=this._promise)["catch"].apply(e,t)},n.prototype.resolve=function(e){var t=this;return this.isFulfilled||(this._setResolved(),n.Promise.resolve().then(function(){return t._onResolve(e)}).then(function(e){t._resolveFunction(e)})["catch"](function(e){t._resetState(),t.reject(e)})),this},n.prototype.reject=function(e){var t=this;return this.isFulfilled||(this._setRejected(),n.Promise.resolve().then(function(){return t._onReject(e)}).then(function(e){t._setResolved(),t._resolveFunction(e)})["catch"](function(e){return t._rejectFunction(e)})),this},n.prototype._resetState=function(){this.isFulfilled=!1,this.isResolved=!1,this.isRejected=!1},n.prototype._setResolved=function(){this.isFulfilled=!0,this.isResolved=!0,this.isRejected=!1},n.prototype._setRejected=function(){this.isFulfilled=!0,this.isResolved=!1,this.isRejected=!0},n.Promise=s,n);t.exports=r},{}],10:[function(e,t,i){"use strict";t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},{}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.deferred=function(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];setTimeout(function(){try{e.apply(void 0,t)}catch(t){console.log("Error in callback function"),console.log(t)}},1)}}},{}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.once=function(e){var t=!1;return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t||(t=!0,e.apply(void 0,i))}}},{}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.promiseOrCallback=function(e,t){return t?void e.then(function(e){return t(null,e)})["catch"](function(e){return t(e)}):e}},{}],14:[function(e,t,i){"use strict";function n(e){return function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return"function"==typeof i[i.length-1]&&(t=i.pop(),t=r.once(s.deferred(t))),o.promiseOrCallback(e.apply(this,i),t)}}var s=e("./lib/deferred"),r=e("./lib/once"),o=e("./lib/promise-or-callback");n.wrapPrototype=function(e,t){void 0===t&&(t={});var i=t.ignoreMethods||[],s=!0===t.transformPrivateMethods;return Object.getOwnPropertyNames(e.prototype).filter(function(t){var n="constructor"!==t&&"function"==typeof e.prototype[t],r=-1===i.indexOf(t),o=s||"_"!==t.charAt(0);return n&&o&&r}).forEach(function(t){var i=e.prototype[t];e.prototype[t]=n(i)}),e},t.exports=n},{"./lib/deferred":11,"./lib/once":12,"./lib/promise-or-callback":13}],15:[function(e,t,i){"use strict";function n(e){return Boolean(e&&void 0!==e.length)}function s(){}function r(e){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,r._immediateFn(function(){var i,n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){try{i=n(e._value)}catch(i){return void l(t.promise,i)}a(t.promise,i)}else(1===e._state?a:l)(t.promise,e._value)})):e._deferreds.push(t)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof r)return e._state=3,e._value=t,void c(e);if("function"==typeof i)return void d((n=i,s=t,function(){n.apply(s,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){l(e,t)}var n,s}function l(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,i=e._deferreds.length;i>t;t++)o(e,e._deferreds[t]);e._deferreds=null}function u(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function d(e,t){var i=!1;try{e(function(e){i||(i=!0,a(t,e))},function(e){i||(i=!0,l(t,e))})}catch(e){if(i)return;i=!0,l(t,e)}}var h=setTimeout;r.prototype["catch"]=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var i=new this.constructor(s);return o(this,new u(e,t,i)),i},r.prototype["finally"]=function(e){var t=this.constructor;return this.then(function(i){return t.resolve(e()).then(function(){return i})},function(i){return t.resolve(e()).then(function(){return t.reject(i)})})},r.all=function(e){return new r(function(t,i){if(!n(e))return i(new TypeError("Promise.all accepts an array"));var s=Array.prototype.slice.call(e);if(0===s.length)return t([]);for(var r=s.length,o=0;o<s.length;o++)!function a(e,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var o=n.then;if("function"==typeof o)return void o.call(n,function(t){a(e,t)},i)}s[e]=n,0==--r&&t(s)}catch(n){i(n)}}(o,s[o])})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,i){i(e)})},r.race=function(e){return new r(function(t,i){if(!n(e))return i(new TypeError("Promise.race accepts an array"));for(var s=0,o=e.length;o>s;s++)r.resolve(e[s]).then(t,i)})},r._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){h(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.exports=r},{}],16:[function(e,t,i){"use strict";var n=e("@braintree/browser-detection/is-ie"),s=e("@braintree/browser-detection/is-ie9");t.exports={isIe:n,isIe9:s}},{"@braintree/browser-detection/is-ie":7,"@braintree/browser-detection/is-ie9":8}],17:[function(e,t,i){"use strict";function n(e){var t,i;if(e=e||{},t=JSON.stringify(e),!(i=e.gatewayConfiguration))throw new l(b.CLIENT_MISSING_GATEWAY_CONFIGURATION);["assetsUrl","clientApiUrl","configUrl"].forEach(function(e){if(e in i&&!a(i[e]))throw new l({type:b.CLIENT_GATEWAY_CONFIGURATION_INVALID_DOMAIN.type,code:b.CLIENT_GATEWAY_CONFIGURATION_INVALID_DOMAIN.code,message:e+" property is on an invalid domain."})}),this.getConfiguration=function(){return JSON.parse(t)},this._request=o,this._configuration=this.getConfiguration(),this._clientApiBaseUrl=i.clientApiUrl+"/v1/",i.graphQL&&(this._graphQL=new r({graphQL:i.graphQL}))}var s=e("./constants").BRAINTREE_VERSION,r=e("./request/graphql"),o=e("./request"),a=e("../lib/is-verified-domain"),l=e("../lib/braintree-error"),c=e("../lib/convert-to-braintree-error"),u=e("./get-configuration").getConfiguration,d=e("../lib/create-authorization-data"),h=e("../lib/add-metadata"),p=e("../lib/promise"),f=e("@braintree/wrap-promise"),m=e("../lib/once"),g=e("../lib/deferred"),v=e("../lib/assign").assign,y=e("../lib/analytics"),b=e("./errors"),_=e("../lib/constants").VERSION,w=e("../lib/constants").GRAPHQL_URLS,C=e("../lib/methods"),S=e("../lib/convert-methods-to-error"),T=e("../lib/assets"),k=e("../lib/constants").FRAUDNET_FNCLS,E=e("../lib/constants").FRAUDNET_SOURCE,I=e("../lib/constants").FRAUDNET_URL,x={};n.initialize=function(e){var t,i,s=x[e.authorization];if(s)return y.sendEvent(s,"custom.client.load.cached"),s;try{i=d(e.authorization)}catch(i){return p.reject(new l(b.CLIENT_INVALID_AUTHORIZATION))}return s=u(i).then(function(i){return e.debug&&(i.isDebug=!0),i.authorization=e.authorization,t=new n(i)}),x[e.authorization]=s,y.sendEvent(s,"custom.client.load.initialized"),s.then(function(e){return y.sendEvent(t,"custom.client.load.succeeded"),e})["catch"](function(t){return delete x[e.authorization],p.reject(t)})},n.clearCache=function(){x={}},n.prototype._findOrCreateFraudnetJSON=function(e){var t,i,n,s,r=document.querySelector('script[fncls="'+k+'"]');r||((r=document.body.appendChild(document.createElement("script"))).type="application/json",r.setAttribute("fncls",k)),t=this.getConfiguration(),i={rda_tenant:"bt_card",mid:t.gatewayConfiguration.merchantId},(n=t.authorizationFingerprint)&&n.split("&").forEach(function(e){var t=e.split("=");"customer_id"===t[0]&&1<t.length&&(i.cid=t[1])}),s={f:e.substr(0,32),fp:i,bu:!1,s:E},r.text=JSON.stringify(s)},n.prototype.request=function(e,t){var i=this,n=new p(function(t,n){var r,o,a,u,d,p=Boolean("payment_methods/credit_cards"===e.endpoint&&i.getConfiguration().gatewayConfiguration.creditCards.collectDeviceData);if("graphQLApi"!==e.api&&(e.method?e.endpoint||(r="options.endpoint"):r="options.method"),r)throw new l({type:b.CLIENT_OPTION_REQUIRED.type,code:b.CLIENT_OPTION_REQUIRED.code,message:r+" is required when making a request."});if(o="api"in e?e.api:"clientApi",u={method:e.method,graphQL:i._graphQL,timeout:e.timeout,metadata:i._configuration.analyticsMetadata},"clientApi"===o)a=i._clientApiBaseUrl,u.data=h(i._configuration,e.data);else{if("graphQLApi"!==o)throw new l({type:b.CLIENT_OPTION_INVALID.type,code:b.CLIENT_OPTION_INVALID.code,message:"options.api is invalid."});a=w[i._configuration.gatewayConfiguration.environment],e.endpoint="",u.method="post",u.data=v({clientSdkMetadata:{source:i._configuration.analyticsMetadata.source,integration:i._configuration.analyticsMetadata.integration,sessionId:i._configuration.analyticsMetadata.sessionId}},e.data),u.headers={Authorization:"Bearer "+((d=i._configuration).authorizationFingerprint||d.authorization),"Braintree-Version":s}}u.url=a+e.endpoint,u.sendAnalyticsEvent=function(e){y.sendEvent(i,e)},i._request(u,function(e,s,r){var a,u=function(e,t){var i;return-1===e?i=new l(b.CLIENT_REQUEST_TIMEOUT):403===e?i=new l(b.CLIENT_AUTHORIZATION_INSUFFICIENT):429===e?i=new l(b.CLIENT_RATE_LIMITED):e>=500?i=new l(b.CLIENT_GATEWAY_NETWORK):(200>e||e>=400)&&(i=c(t,{type:b.CLIENT_REQUEST_ERROR.type,code:b.CLIENT_REQUEST_ERROR.code,message:b.CLIENT_REQUEST_ERROR.message})),i?(i.details=i.details||{},i.details.httpStatus=e,i):void 0}(r,e);u?n(u):"graphQLApi"===o&&s.errors?n(c(s.errors,{type:b.CLIENT_GRAPHQL_REQUEST_ERROR.type,code:b.CLIENT_GRAPHQL_REQUEST_ERROR.code,message:b.CLIENT_GRAPHQL_REQUEST_ERROR.message})):(a=v({_httpStatus:r},s),p&&a.creditCards&&0<a.creditCards.length&&(i._findOrCreateFraudnetJSON(a.creditCards[0].nonce),T.loadScript({src:I,forceScriptReload:!0})),t(a))})});return"function"==typeof t?(t=m(g(t)),void n.then(function(e){t(null,e,e._httpStatus)})["catch"](function(e){var i=e&&e.details&&e.details.httpStatus;t(e,null,i)})):n},n.prototype.toJSON=function(){return this.getConfiguration()},n.prototype.getVersion=function(){return _},n.prototype.teardown=f(function(){return delete x[this.getConfiguration().authorization],S(this,C(n.prototype)),p.resolve()}),t.exports=n},{"../lib/add-metadata":38,"../lib/analytics":39,"../lib/assets":40,"../lib/assign":41,"../lib/braintree-error":42,"../lib/constants":43,"../lib/convert-methods-to-error":44,"../lib/convert-to-braintree-error":45,"../lib/create-authorization-data":46,"../lib/deferred":47,"../lib/is-verified-domain":51,"../lib/methods":53,"../lib/once":54,"../lib/promise":55,"./constants":18,"./errors":19,"./get-configuration":20,"./request":32,"./request/graphql":30,"@braintree/wrap-promise":14}],18:[function(e,t,i){"use strict";t.exports={BRAINTREE_VERSION:"2018-05-10"}},{}],19:[function(e,t,i){"use strict";var n=e("../lib/braintree-error");t.exports={CLIENT_GATEWAY_CONFIGURATION_INVALID_DOMAIN:{type:n.types.MERCHANT,code:"CLIENT_GATEWAY_CONFIGURATION_INVALID_DOMAIN"},CLIENT_OPTION_REQUIRED:{type:n.types.MERCHANT,code:"CLIENT_OPTION_REQUIRED"},CLIENT_OPTION_INVALID:{type:n.types.MERCHANT,code:"CLIENT_OPTION_INVALID"},CLIENT_MISSING_GATEWAY_CONFIGURATION:{type:n.types.INTERNAL,code:"CLIENT_MISSING_GATEWAY_CONFIGURATION",message:"Missing gatewayConfiguration."},CLIENT_INVALID_AUTHORIZATION:{type:n.types.MERCHANT,code:"CLIENT_INVALID_AUTHORIZATION",message:"Authorization is invalid. Make sure your client token or tokenization key is valid."},CLIENT_GATEWAY_NETWORK:{type:n.types.NETWORK,code:"CLIENT_GATEWAY_NETWORK",message:"Cannot contact the gateway at this time."},CLIENT_REQUEST_TIMEOUT:{type:n.types.NETWORK,code:"CLIENT_REQUEST_TIMEOUT",message:"Request timed out waiting for a reply."},CLIENT_REQUEST_ERROR:{type:n.types.NETWORK,code:"CLIENT_REQUEST_ERROR",message:"There was a problem with your request."},CLIENT_GRAPHQL_REQUEST_ERROR:{type:n.types.NETWORK,code:"CLIENT_GRAPHQL_REQUEST_ERROR",message:"There was a problem with your request."},CLIENT_RATE_LIMITED:{type:n.types.MERCHANT,code:"CLIENT_RATE_LIMITED",message:"You are being rate-limited; please try again in a few minutes."},CLIENT_AUTHORIZATION_INSUFFICIENT:{type:n.types.MERCHANT,code:"CLIENT_AUTHORIZATION_INSUFFICIENT",message:"The authorization used has insufficient privileges."}}},{"../lib/braintree-error":42}],20:[function(e,t,i){"use strict";var n=e("../lib/braintree-error"),s=e("../lib/promise"),r=e("@braintree/wrap-promise"),o=e("./request"),a=e("@braintree/uuid"),l=e("../lib/constants"),c=e("./errors"),u=e("./request/graphql"),d=e("../lib/constants").GRAPHQL_URLS,h=e("../lib/is-date-string-before-or-on"),p=e("./constants").BRAINTREE_VERSION;t.exports={getConfiguration:r(function(e){return new s(function(t,i){var s,r,f=a(),m={merchantAppId:window.location.host,platform:l.PLATFORM,sdkVersion:l.VERSION,source:l.SOURCE,integration:l.INTEGRATION,integrationType:l.INTEGRATION,sessionId:f},g=e.attrs,v=e.configUrl;g._meta=m,g.braintreeLibraryVersion=l.BRAINTREE_LIBRARY_VERSION,g.configVersion="3",r={url:v,method:"GET",data:g},g.authorizationFingerprint&&e.graphQL?(h(e.graphQL.date,p)&&(r.graphQL=new u({graphQL:{url:e.graphQL.url,features:["configuration"]}})),r.metadata=m):g.tokenizationKey&&(r.graphQL=new u({graphQL:{url:d[e.environment],features:["configuration"]}}),r.metadata=m),o(r,function(e,r,o){var a;return e?(a=403===o?c.CLIENT_AUTHORIZATION_INSUFFICIENT:c.CLIENT_GATEWAY_NETWORK,void i(new n({type:a.type,code:a.code,message:a.message,details:{originalError:e}}))):(s={authorizationType:g.tokenizationKey?"TOKENIZATION_KEY":"CLIENT_TOKEN",authorizationFingerprint:g.authorizationFingerprint,analyticsMetadata:m,gatewayConfiguration:r},void t(s))})})})}},{"../lib/braintree-error":42,"../lib/constants":43,"../lib/is-date-string-before-or-on":50,"../lib/promise":55,"./constants":18,"./errors":19,"./request":32,"./request/graphql":30,"@braintree/uuid":10,"@braintree/wrap-promise":14}],21:[function(e,t,i){"use strict";var n=e("../lib/braintree-error"),s=e("./client"),r=e("../lib/promise"),o=e("@braintree/wrap-promise"),a=e("../lib/errors");t.exports={create:o(function(e){return e.authorization?s.initialize(e):r.reject(new n({type:a.INSTANTIATION_OPTION_REQUIRED.type,code:a.INSTANTIATION_OPTION_REQUIRED.code,message:"options.authorization is required when instantiating a client."}))}),VERSION:"3.64.2"}},{"../lib/braintree-error":42,"../lib/errors":49,"../lib/promise":55,"./client":17,"@braintree/wrap-promise":14}],22:[function(e,t,i){"use strict";function n(e,t,i){var f,m,g,v,y,b,_,w=e.url,C=e.graphQL,S=e.timeout,T=l.getRequestObject(),k=i,E=Boolean(C&&C.isGraphQLRequest(w,e.data));e.headers=r({"Content-Type":"application/json"},e.headers),w=(g=new(E?u:d)(e)).getUrl(),v=g.getBody(),y=g.getMethod(),b=g.getHeaders(),"GET"===y&&(w=s.queryify(w,v),v=null),c?T.onreadystatechange=function(){if(4===T.readyState){if(0===T.status&&E)return delete e.graphQL,void n(e,t,i);if(_=a(T.responseText),m=g.adaptResponseBody(_),400<=(f=g.determineStatus(T.status,_))||200>f){if(E&&("UNKNOWN"===(o=!(r=_).data&&r.errors&&r.errors[0]&&r.errors[0].extensions&&r.errors[0].extensions.errorClass)||"INTERNAL"===o))return delete e.graphQL,void n(e,t,i);if(h>t&&(!(s=f)||s===p))return void n(e,++t,i);k(m||"error",null,f||500)}else k(null,m,f);var s,r,o}}:(e.headers&&(w=s.queryify(w,b)),T.onload=function(){k(null,a(T.responseText),T.status)},T.onerror=function(){k("error",null,500)},T.onprogress=function(){},T.ontimeout=function(){k("timeout",null,-1)});try{T.open(y,w,!0)}catch(v){if(!E)throw v;return delete e.graphQL,void n(e,t,i)}T.timeout=S,c&&Object.keys(b).forEach(function(e){T.setRequestHeader(e,b[e])});try{T.send(o(y,v))}catch(v){}}var s=e("../../lib/querystring"),r=e("../../lib/assign").assign,o=e("./prep-body"),a=e("./parse-body"),l=e("./xhr"),c=l.isAvailable,u=e("./graphql/request"),d=e("./default-request"),h=1,p=408;t.exports={request:function(e,t){n(e,0,t)}}},{"../../lib/assign":41,"../../lib/querystring":56,"./default-request":23,"./graphql/request":31,"./parse-body":35,"./prep-body":36,"./xhr":37}],23:[function(e,t,i){"use strict";function n(e){this._url=e.url,this._data=e.data,this._method=e.method,this._headers=e.headers}n.prototype.getUrl=function(){return this._url},n.prototype.getBody=function(){return this._data},n.prototype.getMethod=function(){return this._method},n.prototype.getHeaders=function(){return this._headers},n.prototype.adaptResponseBody=function(e){return e},n.prototype.determineStatus=function(e){return e},t.exports=n},{}],24:[function(e,t,i){"use strict";t.exports=function(){return window.navigator.userAgent}},{}],25:[function(e,t,i){"use strict";function n(e,t){return e.reduce(function(e,i){return t.hasOwnProperty(i)?e.concat(t[i]):e},[])}var s=e("./error"),r=e("../../../../lib/assign").assign,o={creditCard:{AMERICAN_EXPRESS:"American Express",DISCOVER:"Discover",INTERNATIONAL_MAESTRO:"Maestro",JCB:"JCB",MASTERCARD:"MasterCard",SOLO:"Solo",UK_MAESTRO:"UK Maestro",UNION_PAY:"UnionPay",VISA:"Visa"},applePayWeb:{VISA:"visa",MASTERCARD:"mastercard",DISCOVER:"discover",AMERICAN_EXPRESS:"amex"},visaCheckout:{VISA:"Visa",MASTERCARD:"MasterCard",DISCOVER:"Discover",AMERICAN_EXPRESS:"American Express"},googlePay:{VISA:"visa",MASTERCARD:"mastercard",DISCOVER:"discover",AMERICAN_EXPRESS:"amex"},masterpass:{VISA:"visa",MASTERCARD:"master",DISCOVER:"discover",AMERICAN_EXPRESS:"amex",DINERS:"diners",INTERNATIONAL_MAESTRO:"maestro",JCB:"jcb"}};t.exports=function(e,t){var i=e.data&&!e.errors?function(e,t){var i,s=e.data.clientConfiguration;return i={environment:s.environment.toLowerCase(),clientApiUrl:s.clientApiUrl,assetsUrl:s.assetsUrl,analytics:{url:s.analyticsUrl},merchantId:s.merchantId,venmo:"off"},s.supportedFeatures&&(i.graphQL={url:t._graphQL._config.url,features:s.supportedFeatures.map(function(e){return e.toLowerCase()})}),s.braintreeApi&&(i.braintreeApi=s.braintreeApi),s.applePayWeb&&(i.applePayWeb=s.applePayWeb,i.applePayWeb.supportedNetworks=n(s.applePayWeb.supportedCardBrands,o.applePayWeb),delete i.applePayWeb.supportedCardBrands),s.ideal&&(i.ideal=s.ideal),s.kount&&(i.kount={kountMerchantId:s.kount.merchantId}),s.creditCard?(i.challenges=s.creditCard.challenges.map(function(e){return e.toLowerCase()}),i.creditCards={supportedCardTypes:n(s.creditCard.supportedCardBrands,o.creditCard)},i.threeDSecureEnabled=s.creditCard.threeDSecureEnabled,i.threeDSecure=s.creditCard.threeDSecure):(i.challenges=[],i.creditCards={supportedCardTypes:[]},i.threeDSecureEnabled=!1),s.googlePay&&(i.androidPay={displayName:s.googlePay.displayName,enabled:!0,environment:s.googlePay.environment.toLowerCase(),googleAuthorizationFingerprint:s.googlePay.googleAuthorization,paypalClientId:s.googlePay.paypalClientId,supportedNetworks:n(s.googlePay.supportedCardBrands,o.googlePay)}),s.venmo&&(i.payWithVenmo={merchantId:s.venmo.merchantId,accessToken:s.venmo.accessToken,environment:s.venmo.environment.toLowerCase()}),s.paypal?(i.paypalEnabled=!0,i.paypal=r({},s.paypal),i.paypal.currencyIsoCode=i.paypal.currencyCode,i.paypal.environment=i.paypal.environment.toLowerCase(),delete i.paypal.currencyCode):i.paypalEnabled=!1,s.unionPay&&(i.unionPay={enabled:!0,merchantAccountId:s.unionPay.merchantAccountId}),s.visaCheckout&&(i.visaCheckout={apikey:s.visaCheckout.apiKey,externalClientId:s.visaCheckout.externalClientId,supportedCardTypes:n(s.visaCheckout.supportedCardBrands,o.visaCheckout)}),s.masterpass&&(i.masterpass={merchantCheckoutId:s.masterpass.merchantCheckoutId,supportedNetworks:n(s.masterpass.supportedCardBrands,o.masterpass)}),s.usBankAccount&&(i.usBankAccount={routeId:s.usBankAccount.routeId,plaid:{publicKey:s.usBankAccount.plaidPublicKey}}),i}(e,t):s(e);return i}},{"../../../../lib/assign":41,"./error":27}],26:[function(e,t,i){"use strict";var n=e("./error"),s={AMERICAN_EXPRESS:"American Express",DINERS:"Discover",DISCOVER:"Discover",INTERNATIONAL_MAESTRO:"Maestro",JCB:"JCB",MASTERCARD:"MasterCard",UK_MAESTRO:"Maestro",UNION_PAY:"Union Pay",VISA:"Visa"},r={YES:"Yes",NO:"No",UNKNOWN:"Unknown"},o={PSDTWO:"psd2"};t.exports=function(e){var t=(e.data&&!e.errors?function(e){var t,i,n=e.data.tokenizeCreditCard,a=n.creditCard,l=a.last4?a.last4.substr(2,4):"",c=a.binData;return c&&(["commercial","debit","durbinRegulated","healthcare","payroll","prepaid"].forEach(function(e){c[e]?c[e]=r[c[e]]:c[e]="Unknown"}),["issuingBank","countryOfIssuance","productId"].forEach(function(e){c[e]||(c[e]="Unknown")})),t={creditCards:[{binData:c,consumed:!1,description:l?"ending in "+l:"",nonce:n.token,details:{expirationMonth:a.expirationMonth,expirationYear:a.expirationYear,bin:a.bin||"",cardType:s[a.brandCode]||"Unknown",lastFour:a.last4||"",lastTwo:l},type:"CreditCard",threeDSecureInfo:null}]},n.authenticationInsight&&(i=n.authenticationInsight.customerAuthenticationRegulationEnvironment,t.creditCards[0].authenticationInsight={regulationEnvironment:o[i]||i.toLowerCase()}),t}:n)(e);return t}},{"./error":27}],27:[function(e,t,i){"use strict";t.exports=function(e){var t,i,n=e.errors&&e.errors[0]&&e.errors[0].extensions&&e.errors[0].extensions.errorClass,s="VALIDATION"===n?0!==(i=function(e){var t=[];return e.forEach(function(e){e.extensions&&e.extensions.inputPath&&!function i(e,t,n){var s,r=t.extensions.legacyCode,o=e[0];return 1===e.length?void n.push({code:r,field:o,message:t.message}):(n.forEach(function(e){e.field===o&&(s=e)}),s||(s={field:o,fieldErrors:[]},n.push(s)),void i(e.slice(1),t,s.fieldErrors))}(e.extensions.inputPath.slice(1),e,t)}),t}((t=e).errors)).length?{error:{message:function(e){var t=e[0].field;return{creditCard:"Credit card is invalid"}[t]}(i)},fieldErrors:i}:{error:{message:t.errors[0].message}}:n?{error:{message:e.errors[0].message},fieldErrors:[]}:{error:{message:"There was a problem serving your request"},fieldErrors:[]};return s}},{}],28:[function(e,t,i){"use strict";t.exports=function(){return{query:"query ClientConfiguration {   clientConfiguration {     analyticsUrl     environment     merchantId     assetsUrl     clientApiUrl     creditCard {       supportedCardBrands       challenges       threeDSecureEnabled       threeDSecure {         cardinalAuthenticationJWT       }     }     applePayWeb {       countryCode       currencyCode       merchantIdentifier       supportedCardBrands     }     googlePay {       displayName       supportedCardBrands       environment       googleAuthorization       paypalClientId     }     ideal {       routeId       assetsUrl     }     kount {       merchantId     }     masterpass {       merchantCheckoutId       supportedCardBrands     }     paypal {       displayName       clientId       privacyUrl       userAgreementUrl       assetsUrl       environment       environmentNoNetwork       unvettedMerchant       braintreeClientId       billingAgreementsEnabled       merchantAccountId       currencyCode       payeeEmail     }     unionPay {       merchantAccountId     }     usBankAccount {       routeId       plaidPublicKey     }     venmo {       merchantId       accessToken       environment     }     visaCheckout {       apiKey       externalClientId       supportedCardBrands     }     braintreeApi {       accessToken       url     }     supportedFeatures   } }",operationName:"ClientConfiguration"}}},{}],29:[function(e,t,i){"use strict";function n(e,t){var i=e.creditCard,n=i&&i.billingAddress,r=i&&i.expirationDate,o=i&&(i.expirationMonth||r&&r.split("/")[0].trim()),a=i&&(i.expirationYear||r&&r.split("/")[1].trim()),l={input:{creditCard:{number:i&&i.number,expirationMonth:o,expirationYear:a,cvv:i&&i.cvv,cardholderName:i&&i.cardholderName},options:{}}};return t.hasAuthenticationInsight&&(l.authenticationInsightInput={merchantAccountId:e.merchantAccountId}),n&&(l.input.creditCard.billingAddress=n),l.input=function(e,t){var i;return e.creditCard&&e.creditCard.options&&"boolean"==typeof e.creditCard.options.validate?i=e.creditCard.options.validate:e.authorizationFingerprint&&e.tokenizationKey||e.authorizationFingerprint?i=!0:e.tokenizationKey&&(i=!1),"boolean"==typeof i&&(t.options=s({validate:i},t.options)),t}(e,l.input),l}var s=e("../../../../lib/assign").assign;t.exports=function(e){var t,i,s={hasAuthenticationInsight:Boolean(e.authenticationInsight&&e.merchantAccountId)};return{query:(i="mutation TokenizeCreditCard($input: TokenizeCreditCardInput!",(t=s.hasAuthenticationInsight)&&(i+=", $authenticationInsightInput: AuthenticationInsightInput!"),i+=") {   tokenizeCreditCard(input: $input) {     token     creditCard {       bin       brandCode       last4       expirationMonth      expirationYear      binData {         prepaid         healthcare         debit         durbinRegulated         commercial         payroll         issuingBank         countryOfIssuance         productId       }     } ",t&&(i+="    authenticationInsight(input: $authenticationInsightInput) {      customerAuthenticationRegulationEnvironment    }"),i+="  } }"),variables:n(e,s),operationName:"TokenizeCreditCard"}}},{"../../../../lib/assign":41}],30:[function(e,t,i){"use strict";function n(e){this._config=e.graphQL}var s=e("../../browser-detection"),r={tokenize_credit_cards:"payment_methods/credit_cards",configuration:"configuration"},o=["creditCard.options.unionPayEnrollment"];n.prototype.getGraphQLEndpoint=function(){return this._config.url},n.prototype.isGraphQLRequest=function(e,t){var i,n,a=this.getClientApiPath(e);return!(!this._isGraphQLEnabled()||!a||s.isIe9())&&(i=this._config.features.some(function(e){return r[e]===a}),n=t,!o.some(function(e){return void 0!==e.split(".").reduce(function(e,t){return e&&e[t]},n)})&&i)},n.prototype.getClientApiPath=function(e){var t,i=e.split("/client_api/v1/");return 1<i.length&&(t=i[1].split("?")[0]),t},n.prototype._isGraphQLEnabled=function(){return Boolean(this._config)},t.exports=n},{"../../browser-detection":16}],31:[function(e,t,i){"use strict";function n(e){var t=e.graphQL.getClientApiPath(e.url);this._graphQL=e.graphQL,this._data=e.data,this._method=e.method,this._headers=e.headers,this._clientSdkMetadata={source:e.metadata.source,integration:e.metadata.integration,sessionId:e.metadata.sessionId},this._sendAnalyticsEvent=e.sendAnalyticsEvent||Function.prototype,this._generator=d[t],this._adapter=h[t],this._sendAnalyticsEvent("graphql.init")}function s(e){return-1===e.indexOf("_")?e:e.toLowerCase().replace(/(\_\w)/g,function(e){return e[1].toUpperCase()})}var r=e("../../constants").BRAINTREE_VERSION,o=e("../../../lib/assign").assign,a=e("./generators/credit-card-tokenization"),l=e("./adapters/credit-card-tokenization"),c=e("./generators/configuration"),u=e("./adapters/configuration"),d={"payment_methods/credit_cards":a,configuration:c},h={"payment_methods/credit_cards":l,configuration:u};n.prototype.getUrl=function(){return this._graphQL.getGraphQLEndpoint()},n.prototype.getBody=function(){var e=function n(e){var t={};return Object.keys(e).forEach(function(i){var r=s(i);"object"==typeof e[i]?t[r]=n(e[i]):"number"==typeof e[i]?t[r]=String(e[i]):t[r]=e[i]}),t}(this._data),t=this._generator(e),i=o({clientSdkMetadata:this._clientSdkMetadata},t);return JSON.stringify(i)},n.prototype.getMethod=function(){return"POST"},n.prototype.getHeaders=function(){var e=this._data.authorizationFingerprint?(this._sendAnalyticsEvent("graphql.authorization-fingerprint"),this._data.authorizationFingerprint):(this._sendAnalyticsEvent("graphql.tokenization-key"),this._data.tokenizationKey),t={Authorization:"Bearer "+e,"Braintree-Version":r};return o({},this._headers,t)},n.prototype.adaptResponseBody=function(e){return this._adapter(e,this)},n.prototype.determineStatus=function(e,t){var i,n,s=200===e?(i=t.errors&&t.errors[0]&&t.errors[0].extensions&&t.errors[0].extensions.errorClass,t.data&&!t.errors?200:"VALIDATION"===i?422:"AUTHORIZATION"===i?403:"AUTHENTICATION"===i?401:(n=t,
!i&&n.errors[0].message?403:500)):e||500;return this._sendAnalyticsEvent("graphql.status."+e),this._sendAnalyticsEvent("graphql.determinedStatus."+s),s},t.exports=n},{"../../../lib/assign":41,"../../constants":18,"./adapters/configuration":25,"./adapters/credit-card-tokenization":26,"./generators/configuration":28,"./generators/credit-card-tokenization":29}],32:[function(e,t,i){"use strict";var n,s=e("../../lib/once"),r=e("./jsonp-driver"),o=e("./ajax-driver"),a=e("./get-user-agent"),l=e("./is-http");t.exports=function(e,t){t=s(t||Function.prototype),e.method=(e.method||"GET").toUpperCase(),e.timeout=null==e.timeout?6e4:e.timeout,e.data=e.data||{},null==n&&(n=!(l()&&/MSIE\s(8|9)/.test(a()))),n?o.request(e,t):r.request(e,t)}},{"../../lib/once":54,"./ajax-driver":22,"./get-user-agent":24,"./is-http":33,"./jsonp-driver":34}],33:[function(e,t,i){"use strict";t.exports=function(){return"http:"===window.location.protocol}},{}],34:[function(e,t,i){"use strict";function n(e){try{delete window[e]}catch(t){window[e]=null}}function s(e,t,i){window[i]=function(s){var r,o=s.status||500,a=null,c=null;delete s.status,o>=400||200>o?a=s:c=s,n(i),(r=e)&&r.parentNode&&r.parentNode.removeChild(r),clearTimeout(l[i]),t(a,c,o)}}var r,o=e("@braintree/uuid"),a=e("../../lib/querystring"),l={};t.exports={request:function(e,t){var i,c,u,d,h,p,f,m="callback_json_"+o().replace(/-/g,""),g=e.url,v=e.data,y=e.method,b=e.timeout,g=a.queryify(g,v);g=a.queryify(g,{_method:y,callback:m}),c=g,u=m,d=document.createElement("script"),h=!1,d.src=c,d.async=!0,d.onerror=function(){window[u]({message:"error",status:500})},d.onload=d.onreadystatechange=function(){h||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(h=!0,d.onload=d.onreadystatechange=null)},s(i=d,t,m),p=b,l[f=m]=setTimeout(function(){l[f]=null,window[f]({error:"timeout",status:-1}),window[f]=function(){n(f)}},p),(r=r||document.getElementsByTagName("head")[0]).appendChild(i)}}},{"../../lib/querystring":56,"@braintree/uuid":10}],35:[function(e,t,i){"use strict";t.exports=function(e){try{e=JSON.parse(e)}catch(e){}return e}},{}],36:[function(e,t,i){"use strict";t.exports=function(e,t){if("string"!=typeof e)throw new Error("Method must be a string");return"get"!==e.toLowerCase()&&null!=t&&(t="string"==typeof t?t:JSON.stringify(t)),t}},{}],37:[function(e,t,i){"use strict";var n="undefined"!=typeof window&&window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest;t.exports={isAvailable:n,getRequestObject:function(){return n?new window.XMLHttpRequest:new window.XDomainRequest}}},{}],38:[function(e,t,i){"use strict";var n=e("./create-authorization-data"),s=e("./json-clone"),r=e("./constants");t.exports=function(e,t){var i,o=t?s(t):{},a=n(e.authorization).attrs,l=s(e.analyticsMetadata);for(i in o.braintreeLibraryVersion=r.BRAINTREE_LIBRARY_VERSION,o._meta)o._meta.hasOwnProperty(i)&&(l[i]=o._meta[i]);return o._meta=l,a.tokenizationKey?o.tokenizationKey=a.tokenizationKey:o.authorizationFingerprint=a.authorizationFingerprint,o}},{"./constants":43,"./create-authorization-data":46,"./json-clone":52}],39:[function(e,t,i){"use strict";var n=e("./promise"),s=e("./constants"),r=e("./add-metadata");t.exports={sendEvent:function(e,t,i){var o=Date.now();return n.resolve(e).then(function(e){var n=Date.now(),a=e.getConfiguration(),l=e._request,c=a.gatewayConfiguration.analytics.url,u={analytics:[{kind:s.ANALYTICS_PREFIX+t,isAsync:Math.floor(n/1e3)!==Math.floor(o/1e3),timestamp:o}]};l({url:c,method:"post",data:r(a,u),timeout:s.ANALYTICS_REQUEST_TIMEOUT_MS},i)})}}},{"./add-metadata":38,"./constants":43,"./promise":55}],40:[function(e,t,i){"use strict";var n=e("@braintree/asset-loader/load-script");t.exports={loadScript:n}},{"@braintree/asset-loader/load-script":3}],41:[function(e,t,i){"use strict";function n(e){for(var t,i,n=1;n<arguments.length;n++)for(i in t=arguments[n])t.hasOwnProperty(i)&&(e[i]=t[i]);return e}var s="function"==typeof Object.assign?Object.assign:n;t.exports={assign:s,_assign:n}},{}],42:[function(e,t,i){"use strict";function n(e){if(!n.types.hasOwnProperty(e.type))throw new Error(e.type+" is not a valid type.");if(!e.code)throw new Error("Error code required.");if(!e.message)throw new Error("Error message required.");this.name="BraintreeError",this.code=e.code,this.message=e.message,this.type=e.type,this.details=e.details}var s=e("./enumerate");n.prototype=Object.create(Error.prototype),(n.prototype.constructor=n).types=s(["CUSTOMER","MERCHANT","NETWORK","INTERNAL","UNKNOWN"]),n.findRootError=function(e){return e instanceof n&&e.details&&e.details.originalError?n.findRootError(e.details.originalError):e},t.exports=n},{"./enumerate":48}],43:[function(e,t,i){"use strict";t.exports={ANALYTICS_PREFIX:"web.",ANALYTICS_REQUEST_TIMEOUT_MS:2e3,ASSETS_URLS:{production:"https://assets.braintreegateway.com",sandbox:"https://assets.braintreegateway.com"},CLIENT_API_URLS:{production:"https://api.braintreegateway.com:443",sandbox:"https://api.sandbox.braintreegateway.com:443"},FRAUDNET_SOURCE:"BRAINTREE_SIGNIN",FRAUDNET_FNCLS:"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99",FRAUDNET_URL:"https://c.paypal.com/da/r/fb.js",GRAPHQL_URLS:{production:"https://payments.braintree-api.com/graphql",sandbox:"https://payments.sandbox.braintree-api.com/graphql"},INTEGRATION_TIMEOUT_MS:6e4,VERSION:"3.64.2",INTEGRATION:"custom",SOURCE:"client",PLATFORM:"web",BRAINTREE_LIBRARY_VERSION:"braintree/web/3.64.2"}},{}],44:[function(e,t,i){"use strict";var n=e("./braintree-error"),s=e("./errors");t.exports=function(e,t){t.forEach(function(t){e[t]=function(){throw new n({type:s.METHOD_CALLED_AFTER_TEARDOWN.type,code:s.METHOD_CALLED_AFTER_TEARDOWN.code,message:t+" cannot be called after teardown."})}})}},{"./braintree-error":42,"./errors":49}],45:[function(e,t,i){"use strict";var n=e("./braintree-error");t.exports=function(e,t){return e instanceof n?e:new n({type:t.type,code:t.code,message:t.message,details:{originalError:e}})}},{"./braintree-error":42}],46:[function(e,t,i){"use strict";var n=e("../lib/vendor/polyfill").atob,s=e("../lib/constants").CLIENT_API_URLS;t.exports=function(e){var t,i,r,o,a={attrs:{},configUrl:""};return/^[a-zA-Z0-9]+_[a-zA-Z0-9]+_[a-zA-Z0-9_]+$/.test(e)?(r=e.split("_"),o=r[0],i={merchantId:r.slice(2).join("_"),environment:o},a.environment=i.environment,a.attrs.tokenizationKey=e,a.configUrl=s[i.environment]+"/merchants/"+i.merchantId+"/client_api/v1/configuration"):(t=JSON.parse(n(e)),a.environment=t.environment,a.attrs.authorizationFingerprint=t.authorizationFingerprint,a.configUrl=t.configUrl,a.graphQL=t.graphQL),a}},{"../lib/constants":43,"../lib/vendor/polyfill":57}],47:[function(e,t,i){"use strict";t.exports=function(e){return function(){var t=arguments;setTimeout(function(){e.apply(null,t)},1)}}},{}],48:[function(e,t,i){"use strict";t.exports=function(e,t){return t=null==t?"":t,e.reduce(function(e,i){return e[i]=t+i,e},{})}},{}],49:[function(e,t,i){"use strict";var n=e("./braintree-error");t.exports={INVALID_USE_OF_INTERNAL_FUNCTION:{type:n.types.INTERNAL,code:"INVALID_USE_OF_INTERNAL_FUNCTION"},INSTANTIATION_OPTION_REQUIRED:{type:n.types.MERCHANT,code:"INSTANTIATION_OPTION_REQUIRED"},INCOMPATIBLE_VERSIONS:{type:n.types.MERCHANT,code:"INCOMPATIBLE_VERSIONS"},CLIENT_SCRIPT_FAILED_TO_LOAD:{type:n.types.NETWORK,code:"CLIENT_SCRIPT_FAILED_TO_LOAD",message:"Braintree client script could not be loaded."},METHOD_CALLED_AFTER_TEARDOWN:{type:n.types.MERCHANT,code:"METHOD_CALLED_AFTER_TEARDOWN"}}},{"./braintree-error":42}],50:[function(e,t,i){"use strict";function n(e){var t=e.split("-");return new Date(t[0],t[1],t[2])}t.exports=function(e,t){return n(e)<=n(t)}},{}],51:[function(e,t,i){"use strict";var n,s={"paypal.com":1,"braintreepayments.com":1,"braintreegateway.com":1,"braintree-api.com":1};t.exports=function(e){var t;return e=e.toLowerCase(),!!/^https:/.test(e)&&((n=n||document.createElement("a")).href=e,t=n.hostname.split(".").slice(-2).join("."),s.hasOwnProperty(t))}},{}],52:[function(e,t,i){"use strict";t.exports=function(e){return JSON.parse(JSON.stringify(e))}},{}],53:[function(e,t,i){"use strict";t.exports=function(e){return Object.keys(e).filter(function(t){return"function"==typeof e[t]})}},{}],54:[function(e,t,i){"use strict";t.exports=function(e){var t=!1;return function(){t||(t=!0,e.apply(null,arguments))}}},{}],55:[function(e,t,i){"use strict";var n=e("promise-polyfill"),s=e("@braintree/extended-promise"),r="undefined"!=typeof Promise?Promise:n;s.suppressUnhandledPromiseMessage=!0,s.setPromise(r),t.exports=r},{"@braintree/extended-promise":9,"promise-polyfill":15}],56:[function(e,t,i){"use strict";function n(e,t){var i,s,r,o,a=[];for(r in e)e.hasOwnProperty(r)&&(s=e[r],i=t?(o=e)&&"object"==typeof o&&"number"==typeof o.length&&"[object Array]"===Object.prototype.toString.call(o)?t+"[]":t+"["+r+"]":r,"object"==typeof s?a.push(n(s,i)):a.push(encodeURIComponent(i)+"="+encodeURIComponent(s)));return a.join("&")}t.exports={parse:function(e){return e=e||window.location.href,/\?/.test(e)?e.replace(/#.*$/,"").replace(/^.*\?/,"").split("&").reduce(function(e,t){var i=t.split("="),n=decodeURIComponent(i[0]),s=decodeURIComponent(i[1]);return e[n]=s,e},{}):{}},stringify:n,queryify:function(e,t){return e=e||"",null!=t&&"object"==typeof t&&function(e){var t;for(t in e)if(e.hasOwnProperty(t))return 1}(t)&&(e+=-1===e.indexOf("?")?"?":"",e+=-1!==e.indexOf("=")?"&":"",e+=n(t)),e}}},{}],57:[function(e,t,i){"use strict";function n(e){var t,i,n,s,r,o,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="";if(!new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})([=]{1,2})?$").test(e))throw new Error("Non base64 encoded input passed to window.atob polyfill");for(o=0;t=(63&a.indexOf(e.charAt(o++)))<<2|(s=a.indexOf(e.charAt(o++)))>>4&3,i=(15&s)<<4|(r=a.indexOf(e.charAt(o++)))>>2&15,n=(3&r)<<6|63&a.indexOf(e.charAt(o++)),l+=String.fromCharCode(t)+(i?String.fromCharCode(i):"")+(n?String.fromCharCode(n):""),o<e.length;);return l}var s="function"==typeof atob?window.atob:n;t.exports={atob:function(e){return s.call(window,e)},_atob:n}},{}]},{},[21])(21)}),!function(e){var t;"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).braintree||(t.braintree={})).dataCollector=e()}(function(){return function e(t,i,n){function s(o,a){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){return s(t[o][1][e]||e)},u,u.exports,e,t,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(i,"__esModule",{value:!0}),i.PromiseGlobal=void 0;var s=n(e("promise-polyfill")),r="undefined"!=typeof Promise?Promise:s["default"];i.PromiseGlobal=r},{"promise-polyfill":9}],2:[function(e,t,i){"use strict";function n(e){var t,i=JSON.stringify(e);if(!e.forceScriptReload&&(t=r[i]))return t;var n=document.createElement("script"),o=e.dataAttributes||{},a=e.container||document.head;return n.src=e.src,n.id=e.id||"",n.async=!0,e.crossorigin&&n.setAttribute("crossorigin",""+e.crossorigin),Object.keys(o).forEach(function(e){n.setAttribute("data-"+e,""+o[e])}),t=new s.PromiseGlobal(function(t,i){n.addEventListener("load",function(){t(n)}),n.addEventListener("error",function(){i(new Error(e.src+" failed to load."))}),n.addEventListener("abort",function(){i(new Error(e.src+" has aborted."))}),a.appendChild(n)}),r[i]=t}var s=e("./lib/promise"),r={};n.clearCache=function(){r={}},t.exports=n},{"./lib/promise":1}],3:[function(e,t,i){t.exports=e("./dist/load-script")},{"./dist/load-script":2}],4:[function(e,t,i){"use strict";function n(e){var t=this;"function"!=typeof e?(this._promise=new n.Promise(function(e,i){t._resolveFunction=e,t._rejectFunction=i}),e=e||{},this._onResolve=e.onResolve||n.defaultOnResolve,this._onReject=e.onReject||n.defaultOnReject,n.shouldCatchExceptions(e)&&this._promise["catch"](function(){}),this._resetState()):this._promise=new n.Promise(e)}var s="undefined"!=typeof Promise?Promise:null,r=(n.defaultOnResolve=function(e){return n.Promise.resolve(e)},n.defaultOnReject=function(e){return n.Promise.reject(e)},n.setPromise=function(e){n.Promise=e},n.shouldCatchExceptions=function(e){return e.hasOwnProperty("suppressUnhandledPromiseMessage")?Boolean(e.suppressUnhandledPromiseMessage):Boolean(n.suppressUnhandledPromiseMessage)},n.all=function(e){return n.Promise.all(e)},n.allSettled=function(e){return n.Promise.allSettled(e)},n.race=function(e){return n.Promise.race(e)},n.reject=function(e){return n.Promise.reject(e)},n.resolve=function(e){return n.Promise.resolve(e)},n.prototype.then=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(e=this._promise).then.apply(e,t)},n.prototype["catch"]=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(e=this._promise)["catch"].apply(e,t)},n.prototype.resolve=function(e){var t=this;return this.isFulfilled||(this._setResolved(),n.Promise.resolve().then(function(){return t._onResolve(e)}).then(function(e){t._resolveFunction(e)})["catch"](function(e){t._resetState(),t.reject(e)})),this},n.prototype.reject=function(e){var t=this;return this.isFulfilled||(this._setRejected(),n.Promise.resolve().then(function(){return t._onReject(e)}).then(function(e){t._setResolved(),t._resolveFunction(e)})["catch"](function(e){return t._rejectFunction(e)})),this},n.prototype._resetState=function(){this.isFulfilled=!1,this.isResolved=!1,this.isRejected=!1},n.prototype._setResolved=function(){this.isFulfilled=!0,this.isResolved=!0,this.isRejected=!1},n.prototype._setRejected=function(){this.isFulfilled=!0,this.isResolved=!1,this.isRejected=!0},n.Promise=s,n);t.exports=r},{}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.deferred=function(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];setTimeout(function(){try{e.apply(void 0,t)}catch(t){console.log("Error in callback function"),console.log(t)}},1)}}},{}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.once=function(e){var t=!1;return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t||(t=!0,e.apply(void 0,i))}}},{}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.promiseOrCallback=function(e,t){return t?void e.then(function(e){return t(null,e)})["catch"](function(e){return t(e)}):e}},{}],8:[function(e,t,i){"use strict";function n(e){return function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return"function"==typeof i[i.length-1]&&(t=i.pop(),t=r.once(s.deferred(t))),o.promiseOrCallback(e.apply(this,i),t)}}var s=e("./lib/deferred"),r=e("./lib/once"),o=e("./lib/promise-or-callback");n.wrapPrototype=function(e,t){void 0===t&&(t={});var i=t.ignoreMethods||[],s=!0===t.transformPrivateMethods;return Object.getOwnPropertyNames(e.prototype).filter(function(t){var n="constructor"!==t&&"function"==typeof e.prototype[t],r=-1===i.indexOf(t),o=s||"_"!==t.charAt(0);return n&&o&&r}).forEach(function(t){var i=e.prototype[t];e.prototype[t]=n(i)}),e},t.exports=n},{"./lib/deferred":5,"./lib/once":6,"./lib/promise-or-callback":7}],9:[function(e,t,i){"use strict";function n(e){return Boolean(e&&void 0!==e.length)}function s(){}function r(e){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,r._immediateFn(function(){var i,n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){try{i=n(e._value)}catch(i){return void l(t.promise,i)}a(t.promise,i)}else(1===e._state?a:l)(t.promise,e._value)})):e._deferreds.push(t)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof r)return e._state=3,e._value=t,void c(e);if("function"==typeof i)return void d((n=i,s=t,function(){n.apply(s,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){l(e,t)}var n,s}function l(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,i=e._deferreds.length;i>t;t++)o(e,e._deferreds[t]);e._deferreds=null}function u(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function d(e,t){var i=!1;try{e(function(e){i||(i=!0,a(t,e))},function(e){i||(i=!0,l(t,e))})}catch(e){if(i)return;i=!0,l(t,e)}}var h=setTimeout;r.prototype["catch"]=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var i=new this.constructor(s);return o(this,new u(e,t,i)),i},r.prototype["finally"]=function(e){var t=this.constructor;return this.then(function(i){return t.resolve(e()).then(function(){return i})},function(i){return t.resolve(e()).then(function(){return t.reject(i)})})},r.all=function(e){return new r(function(t,i){if(!n(e))return i(new TypeError("Promise.all accepts an array"));var s=Array.prototype.slice.call(e);if(0===s.length)return t([]);for(var r=s.length,o=0;o<s.length;o++)!function a(e,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var o=n.then;if("function"==typeof o)return void o.call(n,function(t){a(e,t)},i)}s[e]=n,0==--r&&t(s)}catch(n){i(n)}}(o,s[o])})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,i){i(e)})},r.race=function(e){return new r(function(t,i){if(!n(e))return i(new TypeError("Promise.race accepts an array"));for(var s=0,o=e.length;o>s;s++)r.resolve(e[s]).then(t,i)})},r._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){h(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.exports=r},{}],10:[function(e,t,i){"use strict";var n=e("../lib/braintree-error");t.exports={DATA_COLLECTOR_KOUNT_NOT_ENABLED:{type:n.types.MERCHANT,code:"DATA_COLLECTOR_KOUNT_NOT_ENABLED",message:"Kount is not enabled for this merchant."},DATA_COLLECTOR_KOUNT_ERROR:{type:n.types.MERCHANT,code:"DATA_COLLECTOR_KOUNT_ERROR"},DATA_COLLECTOR_REQUIRES_CREATE_OPTIONS:{type:n.types.MERCHANT,code:"DATA_COLLECTOR_REQUIRES_CREATE_OPTIONS",message:"Data Collector must be created with Kount and/or PayPal."}}},{"../lib/braintree-error":17}],11:[function(e,t,i){"use strict";function n(){}function s(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var r,o=e("../lib/constants").FRAUDNET_FNCLS,a=e("../lib/constants").FRAUDNET_SOURCE,l=e("../lib/constants").FRAUDNET_URL,c=e("../lib/assets").loadScript,u=e("../lib/promise");n.prototype.initialize=function(){var e,t,i,n,s,u=this;return this.sessionId=r=function(){var e,t="";for(e=0;32>e;e++)t+=Math.floor(16*Math.random()).toString(16);return t}(),this._beaconId=(e=this.sessionId,t=(new Date).getTime()/1e3,"https://b.stats.paypal.com/counter.cgi?i=127.0.0.1&p="+e+"&t="+t+"&a=14"),this._parameterBlock=(i=this.sessionId,n=this._beaconId,(s=document.body.appendChild(document.createElement("script"))).type="application/json",s.setAttribute("fncls",o),s.text=JSON.stringify({f:i,s:a,b:n}),s),c({src:l}).then(function(e){return u._thirdPartyBlock=e,u})["catch"](function(){return null})},n.prototype.teardown=function(){s(document.querySelector('iframe[title="ppfniframe"]')),s(document.querySelector('iframe[title="pbf"]')),s(this._parameterBlock),s(this._thirdPartyBlock)},t.exports={setup:function(){var e=new n;return r?(e.sessionId=r,u.resolve(e)):e.initialize()},clearSessionIdCache:function(){r=null}}},{"../lib/assets":15,"../lib/constants":19,"../lib/promise":26}],12:[function(e,t,i){"use strict";var n=e("./kount"),s=e("./fraudnet"),r=e("../lib/braintree-error"),o=e("../lib/basic-component-verification"),a=e("../lib/create-deferred-client"),l=e("../lib/create-assets-url"),c=e("../lib/methods"),u=e("../lib/convert-methods-to-error"),d=e("../lib/promise"),h=e("@braintree/wrap-promise"),p=e("./errors");t.exports={create:h(function(e){var t,i="Data Collector",f={_instances:[]};return o.verify({name:i,client:e.client,authorization:e.authorization}).then(function(){var o,m;return f._instantiatedWithAClient=!e.useDeferredClient,f._createPromise=a.create({authorization:e.authorization,client:e.client,debug:e.debug,assetsUrl:l.create(e.authorization),name:i}).then(function(i){var s,o=i.getConfiguration();if(!0===e.kount&&o.gatewayConfiguration.kount){try{s=n.setup({environment:o.gatewayConfiguration.environment,merchantId:o.gatewayConfiguration.kount.kountMerchantId})}catch(i){return d.reject(new r({type:p.DATA_COLLECTOR_KOUNT_ERROR.type,code:p.DATA_COLLECTOR_KOUNT_ERROR.code,message:i.message}))}t=s.deviceData,f._instances.push(s)}else t={};return d.resolve()}).then(function(){return s.setup().then(function(e){e&&(t.correlation_id=e.sessionId,f._instances.push(e))})}).then(function(){return 0===f._instances.length?d.reject(new r(p.DATA_COLLECTOR_REQUIRES_CREATE_OPTIONS)):(f.deviceData=JSON.stringify(t),f.rawDeviceData=t,f)}),f.teardown=(o=f,h(function(){return o._createPromise.then(function(){o._instances.forEach(function(e){e&&e.teardown()}),u(o,c(o))})})),f.getDeviceData=(m=f,h(function(e){return e=e||{},m._createPromise.then(function(){return e.raw?d.resolve(m.rawDeviceData):d.resolve(m.deviceData)})})),f._instantiatedWithAClient?f._createPromise:f})}),VERSION:"3.64.2"}},{"../lib/basic-component-verification":16,"../lib/braintree-error":17,"../lib/convert-methods-to-error":20,"../lib/create-assets-url":21,"../lib/create-deferred-client":22,"../lib/methods":25,"../lib/promise":26,"./errors":10,"./fraudnet":11,"./kount":13,"@braintree/wrap-promise":8}],13:[function(e,t,i){"use strict";function n(e){var t=n.getCachedDeviceData(e.merchantId);return t?(this.deviceData=t,void(this._isCached=!0)):(this._currentEnvironment=this._initializeEnvironment(e),s.random.startCollectors(),this._deviceSessionId=this._generateDeviceSessionId(),this.deviceData=this._getDeviceData(),n.setCachedDeviceData(e.merchantId,this.deviceData),this._iframe=this._setupIFrame(),void 0)}var s=e("./vendor/sjcl"),r=e("../lib/camel-case-to-snake-case"),o="https://assets.qa.braintreepayments.com/data",a={development:o,qa:o,sandbox:"https://assets.braintreegateway.com/sandbox/data",production:"https://assets.braintreegateway.com/data"},l={};n.getCachedDeviceData=function(e){return l[e]},n.setCachedDeviceData=function(e,t){l[e]=t},n.prototype.teardown=function(){this._isCached||(s.random.stopCollectors(),this._removeIframe())},n.prototype._removeIframe=function(){this._iframe.parentNode.removeChild(this._iframe)},n.prototype._getDeviceData=function(){return r({deviceSessionId:this._deviceSessionId,fraudMerchantId:this._currentEnvironment.id})},n.prototype._generateDeviceSessionId=function(){var e=s.random.randomWords(4,0);return s.codec.hex.fromBits(e)},n.prototype._setupIFrame=function(){var e=this,t="?m="+this._currentEnvironment.id+"&s="+this._deviceSessionId,i=document.createElement("iframe");return i.width=1,i.id="braintreeDataFrame-"+this._deviceSessionId,i.height=1,i.frameBorder=0,i.scrolling="no",i.style.position="fixed",i.style.left="-999999px",i.style.top="-999999px",i.title="Braintree-Kount-iframe",i.setAttribute("aria-hidden","true"),document.body.appendChild(i),setTimeout(function(){i.src=e._currentEnvironment.url+"/logo.htm"+t,i.innerHTML='<img src="'+e._currentEnvironment.url+"/logo.gif"+t+'" alt="" />'},10),i},n.prototype._initializeEnvironment=function(e){var t=a[e.environment];if(null==t)throw new Error(e.environment+" is not a valid environment for kount.environment");return{url:t,name:e.environment,id:e.merchantId}},t.exports={setup:function(e){return new n(null!=e?e:{})},Kount:n,environmentUrls:a}},{"../lib/camel-case-to-snake-case":18,"./vendor/sjcl":14}],14:[function(e,t,i){"use strict";function n(e,t,i){if(4!==t.length)throw new m.exception.invalid("invalid aes block size");var n=e.b[i],s=t[0]^n[0],r=t[i?3:1]^n[1],o=t[2]^n[2];t=t[i?1:3]^n[3];var a,l,c=n.length/4-2,u=4,d=[0,0,0,0],h=e.l[i];e=h[0];for(var p=h[1],f=h[2],g=h[3],v=h[4],y=0;c>y;y++)h=e[s>>>24]^p[r>>16&255]^f[o>>8&255]^g[255&t]^n[u],a=e[r>>>24]^p[o>>16&255]^f[t>>8&255]^g[255&s]^n[u+1],l=e[o>>>24]^p[t>>16&255]^f[s>>8&255]^g[255&r]^n[u+2],t=e[t>>>24]^p[s>>16&255]^f[r>>8&255]^g[255&o]^n[u+3],u+=4,s=h,r=a,o=l;for(y=0;4>y;y++)d[i?3&-y:y]=v[s>>>24]<<24^v[r>>16&255]<<16^v[o>>8&255]<<8^v[255&t]^n[u++],h=s,s=r,r=o,o=t,t=h;return d}function s(e,t){for(var i,n,s=e.u,r=e.b,o=s[0],a=s[1],l=s[2],c=s[3],u=s[4],d=s[5],h=s[6],p=s[7],f=0;64>f;f++)i=(i=16>f?t[f]:(i=t[f+1&15],n=t[f+14&15],t[15&f]=(i>>>7^i>>>18^i>>>3^i<<25^i<<14)+(n>>>17^n>>>19^n>>>10^n<<15^n<<13)+t[15&f]+t[f+9&15]|0))+p+(u>>>6^u>>>11^u>>>25^u<<26^u<<21^u<<7)+(h^u&(d^h))+r[f],p=h,h=d,d=u,u=c+i|0,c=l,l=a,o=i+((a=o)&l^c&(a^l))+(a>>>2^a>>>13^a>>>22^a<<30^a<<19^a<<10)|0;s[0]=s[0]+o|0,s[1]=s[1]+a|0,s[2]=s[2]+l|0,s[3]=s[3]+c|0,s[4]=s[4]+u|0,s[5]=s[5]+d|0,s[6]=s[6]+h|0,s[7]=s[7]+p|0}function r(e,t){var i,n=m.random.B[e],s=[];for(i in n)n.hasOwnProperty(i)&&s.push(n[i]);for(i=0;i<s.length;i++)s[i](t)}function o(e,t){"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?e.addEntropy(window.performance.now(),t,"loadtime"):e.addEntropy((new Date).valueOf(),t,"loadtime")}function a(e){e.b=l(e).concat(l(e)),e.C=new m.cipher.aes(e.b)}function l(e){for(var t=0;4>t&&(e.g[t]=e.g[t]+1|0,!e.g[t]);t++);return e.C.encrypt(e.g)}function c(e,t){return function(){t.apply(e,arguments)}}var u,d,h,p,f,m={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}};m.cipher.aes=function(e){this.l[0][0][0]||this.G();var t,i,n,s=this.l[0][4],r=this.l[1],o=e.length,a=1;if(4!==o&&6!==o&&8!==o)throw new m.exception.invalid("invalid aes key size");for(this.b=[i=e.slice(0),n=[]],e=o;4*o+28>e;e++)t=i[e-1],(0==e%o||8===o&&4==e%o)&&(t=s[t>>>24]<<24^s[t>>16&255]<<16^s[t>>8&255]<<8^s[255&t],0==e%o&&(t=t<<8^t>>>24^a<<24,a=a<<1^283*(a>>7))),i[e]=i[e-o]^t;for(o=0;e;o++,e--)t=i[3&o?e:e-4],n[o]=4>=e||4>o?t:r[0][s[t>>>24]]^r[1][s[t>>16&255]]^r[2][s[t>>8&255]]^r[3][s[255&t]]},m.cipher.aes.prototype={encrypt:function(e){return n(this,e,0)},decrypt:function(e){return n(this,e,1)},l:[[[],[],[],[],[]],[[],[],[],[],[]]],G:function(){for(var e,t,i,n,s,r,o=this.l[0],a=this.l[1],l=o[4],c=a[4],u=[],d=[],h=0;256>h;h++)d[(u[h]=h<<1^283*(h>>7))^h]=h;for(e=t=0;!l[e];e^=i||1,t=d[t]||1)for(s=(s=t^t<<1^t<<2^t<<3^t<<4)>>8^255&s^99,r=16843009*(n=u[h=u[i=u[c[l[e]=s]=e]]])^65537*h^257*i^16843008*e,n=257*u[s]^16843008*s,h=0;4>h;h++)o[h][e]=n=n<<24^n>>>8,a[h][s]=r=r<<24^r>>>8;for(h=0;5>h;h++)o[h]=o[h].slice(0),a[h]=a[h].slice(0)}},m.bitArray={bitSlice:function(e,t,i){return e=m.bitArray.M(e.slice(t/32),32-(31&t)).slice(1),void 0===i?e:m.bitArray.clamp(e,i-t)},extract:function(e,t,i){var n=Math.floor(-t-i&31);return(-32&(t+i-1^t)?e[t/32|0]<<32-n^e[t/32+1|0]>>>n:e[t/32|0]>>>n)&(1<<i)-1},concat:function(e,t){if(0===e.length||0===t.length)return e.concat(t);var i=e[e.length-1],n=m.bitArray.getPartial(i);return 32===n?e.concat(t):m.bitArray.M(t,n,0|i,e.slice(0,e.length-1))},bitLength:function(e){var t=e.length;return 0===t?0:32*(t-1)+m.bitArray.getPartial(e[t-1])},clamp:function(e,t){if(32*e.length<t)return e;var i=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,i>0&&t&&(e[i-1]=m.bitArray.partial(t,e[i-1]&2147483648>>t-1,1)),e},partial:function(e,t,i){return 32===e?t:(i?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(m.bitArray.bitLength(e)!==m.bitArray.bitLength(t))return!1;for(var i=0,n=0;n<e.length;n++)i|=e[n]^t[n];return 0===i},M:function(e,t,i,n){var s=0;for(void 0===n&&(n=[]);t>=32;t-=32)n.push(i),i=0;if(0===t)return n.concat(e);for(s=0;s<e.length;s++)n.push(i|e[s]>>>t),i=e[s]<<32-t;return s=e.length?e[e.length-1]:0,e=m.bitArray.getPartial(s),n.push(m.bitArray.partial(t+e&31,t+e>32?i:n.pop(),1)),n},Y:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){for(var t,i=0;i<e.length;++i)t=e[i],e[i]=t>>>24|t>>>8&65280|(65280&t)<<8|t<<24;return e}},m.codec.utf8String={fromBits:function(e){for(var t,i="",n=m.bitArray.bitLength(e),s=0;n/8>s;s++)0==(3&s)&&(t=e[s/4]),i+=String.fromCharCode(t>>>8>>>8>>>8),t<<=8;return decodeURIComponent(escape(i))},toBits:function(e){e=unescape(encodeURIComponent(e));for(var t=[],i=0,n=0;n<e.length;n++)i=i<<8|e.charCodeAt(n),3==(3&n)&&(t.push(i),i=0);return 3&n&&t.push(m.bitArray.partial(8*(3&n),i)),t}},m.codec.hex={fromBits:function(e){for(var t="",i=0;i<e.length;i++)t+=(0xf00000000000+(0|e[i])).toString(16).substr(4);return t.substr(0,m.bitArray.bitLength(e)/4)},toBits:function(e){var t,i=[],n=(e=e.replace(/\s|0x/g,"")).length;for(e+="00000000",t=0;t<e.length;t+=8)i.push(0^parseInt(e.substr(t,8),16));return m.bitArray.clamp(i,4*n)}},m.hash.sha256=function(e){this.b[0]||this.G(),e?(this.u=e.u.slice(0),this.o=e.o.slice(0),this.h=e.h):this.reset()},m.hash.sha256.hash=function(e){return(new m.hash.sha256).update(e).finalize()},m.hash.sha256.prototype={blockSize:512,reset:function(){return this.u=this.K.slice(0),this.o=[],this.h=0,this},update:function(e){"string"==typeof e&&(e=m.codec.utf8String.toBits(e));var t=this.o=m.bitArray.concat(this.o,e);if(r=this.h,9007199254740991<(e=this.h=r+m.bitArray.bitLength(e)))throw new m.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!=typeof Uint32Array){for(var i=new Uint32Array(t),n=0,r=512+r-(512+r&511);e>=r;r+=512)s(this,i.subarray(16*n,16*(n+1))),n+=1;t.splice(0,16*n)}else for(r=512+r-(512+r&511);e>=r;r+=512)s(this,t.splice(0,16));return this},finalize:function(){for(var e=this.o,t=this.u,i=(e=m.bitArray.concat(e,[m.bitArray.partial(1,1)])).length+2;15&i;i++)e.push(0);for(e.push(Math.floor(this.h/4294967296)),e.push(0|this.h);e.length;)s(this,e.splice(0,16));return this.reset(),t},K:[],b:[],G:function(){function e(e){return 4294967296*(e-Math.floor(e))|0}for(var t,i,n=0,s=2;64>n;s++){for(i=!0,t=2;s>=t*t;t++)if(0==s%t){i=!1;break}i&&(8>n&&(this.K[n]=e(Math.pow(s,.5))),this.b[n]=e(Math.pow(s,1/3)),n++)}}},m.prng=function(e){this.c=[new m.hash.sha256],this.i=[0],this.H=0,this.v={},this.F=0,this.J={},this.L=this.f=this.j=this.T=0,this.b=[0,0,0,0,0,0,0,0],this.g=[0,0,0,0],this.C=void 0,this.D=e,this.s=!1,this.B={progress:{},seeded:{}},this.m=this.S=0,this.w=1,this.A=2,this.O=65536,this.I=[0,48,64,96,128,192,256,384,512,768,1024],this.P=3e4,this.N=80},m.prng.prototype={randomWords:function(e,t){var i,n=[],s=this.isReady(t);if(s===this.m)throw new m.exception.notReady("generator isn't seeded");if(s&this.A){s=!(s&this.w),i=[];var r,o=0;for(this.L=i[0]=(new Date).valueOf()+this.P,r=0;16>r;r++)i.push(4294967296*Math.random()|0);for(r=0;r<this.c.length&&(i=i.concat(this.c[r].finalize()),o+=this.i[r],this.i[r]=0,s||!(this.H&1<<r));r++);for(this.H>=1<<this.c.length&&(this.c.push(new m.hash.sha256),this.i.push(0)),this.f-=o,o>this.j&&(this.j=o),this.H++,this.b=m.hash.sha256.hash(this.b.concat(i)),this.C=new m.cipher.aes(this.b),s=0;4>s&&(this.g[s]=this.g[s]+1|0,!this.g[s]);s++);}for(s=0;e>s;s+=4)0==(s+1)%this.O&&a(this),i=l(this),n.push(i[0],i[1],i[2],i[3]);return a(this),n.slice(0,e)},setDefaultParanoia:function(e,t){if(0===e&&"Setting paranoia=0 will ruin your security; use it only for testing"!==t)throw new m.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing");this.D=e},addEntropy:function(e,t,i){i=i||"user";var n,s=(new Date).valueOf(),o=this.v[i],a=this.isReady(),l=0,c=this.J[i];switch(void 0===c&&(c=this.J[i]=this.T++),void 0===o&&(o=this.v[i]=0),this.v[i]=(this.v[i]+1)%this.c.length,typeof e){case"number":void 0===t&&(t=1),this.c[o].update([c,this.F++,1,t,s,1,0|e]);break;case"object":if("[object Uint32Array]"===(i=Object.prototype.toString.call(e))){for(n=[],i=0;i<e.length;i++)n.push(e[i]);e=n}else for("[object Array]"!==i&&(l=1),
i=0;i<e.length&&!l;i++)"number"!=typeof e[i]&&(l=1);if(!l){if(void 0===t)for(i=t=0;i<e.length;i++)for(n=e[i];n>0;)t++,n>>>=1;this.c[o].update([c,this.F++,2,t,s,e.length].concat(e))}break;case"string":void 0===t&&(t=e.length),this.c[o].update([c,this.F++,3,t,s,e.length]),this.c[o].update(e);break;default:l=1}if(l)throw new m.exception.bug("random: addEntropy only supports number, array of numbers or string");this.i[o]+=t,this.f+=t,a===this.m&&(this.isReady()!==this.m&&r("seeded",Math.max(this.j,this.f)),r("progress",this.getProgress()))},isReady:function(e){return e=this.I[void 0!==e?e:this.D],this.j&&this.j>=e?this.i[0]>this.N&&(new Date).valueOf()>this.L?this.A|this.w:this.w:this.f>=e?this.A|this.m:this.m},getProgress:function(e){return e=this.I[e||this.D],this.j>=e||this.f>e?1:this.f/e},startCollectors:function(){if(!this.s){if(this.a={loadTimeCollector:c(this,this.V),mouseCollector:c(this,this.W),keyboardCollector:c(this,this.U),accelerometerCollector:c(this,this.R),touchCollector:c(this,this.X)},window.addEventListener)window.addEventListener("load",this.a.loadTimeCollector,!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else{if(!document.attachEvent)throw new m.exception.bug("can't attach event");document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector)}this.s=!0}},stopCollectors:function(){this.s&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.s=!1)},addEventListener:function(e,t){this.B[e][this.S++]=t},removeEventListener:function(e,t){var i,n,s=this.B[e],r=[];for(n in s)s.hasOwnProperty(n)&&s[n]===t&&r.push(n);for(i=0;i<r.length;i++)delete s[n=r[i]]},U:function(){o(this,1)},W:function(e){var t,i;try{t=e.x||e.clientX||e.offsetX||0,i=e.y||e.clientY||e.offsetY||0}catch(e){i=t=0}0!=t&&0!=i&&this.addEntropy([t,i],2,"mouse"),o(this,0)},X:function(e){e=e.touches[0]||e.changedTouches[0],this.addEntropy([e.pageX||e.clientX,e.pageY||e.clientY],1,"touch"),o(this,0)},V:function(){o(this,2)},R:function(e){var t;e=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z,!window.orientation||"number"==typeof(t=window.orientation)&&this.addEntropy(t,1,"accelerometer"),e&&this.addEntropy(e,2,"accelerometer"),o(this,0)}},m.random=new m.prng(6);e:try{if(p=void 0!==t&&t.exports){try{f=e("crypto")}catch(e){f=null}p=d=f}if(p&&d.randomBytes)u=d.randomBytes(128),u=new Uint32Array(new Uint8Array(u).buffer),m.random.addEntropy(u,1024,"crypto['randomBytes']");else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){if(h=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(h);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break e;window.msCrypto.getRandomValues(h)}m.random.addEntropy(h,1024,"crypto['getRandomValues']")}}catch(e){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(e))}void 0!==t&&t.exports&&(t.exports=m)},{crypto:void 0}],15:[function(e,t,i){"use strict";var n=e("@braintree/asset-loader/load-script");t.exports={loadScript:n}},{"@braintree/asset-loader/load-script":3}],16:[function(e,t,i){"use strict";var n=e("./braintree-error"),s=e("./promise"),r=e("./errors");t.exports={verify:function(e){var t,i,o;return e?(o=e.name,t=e.client,i=e.authorization,t||i?i||"3.64.2"===t.getVersion()?s.resolve():s.reject(new n({type:r.INCOMPATIBLE_VERSIONS.type,code:r.INCOMPATIBLE_VERSIONS.code,message:"Client (version "+t.getVersion()+") and "+o+" (version 3.64.2) components must be from the same SDK version."})):s.reject(new n({type:r.INSTANTIATION_OPTION_REQUIRED.type,code:r.INSTANTIATION_OPTION_REQUIRED.code,message:"options.client is required when instantiating "+o+"."}))):s.reject(new n({type:r.INVALID_USE_OF_INTERNAL_FUNCTION.type,code:r.INVALID_USE_OF_INTERNAL_FUNCTION.code,message:"Options must be passed to basicComponentVerification function."}))}}},{"./braintree-error":17,"./errors":24,"./promise":26}],17:[function(e,t,i){"use strict";function n(e){if(!n.types.hasOwnProperty(e.type))throw new Error(e.type+" is not a valid type.");if(!e.code)throw new Error("Error code required.");if(!e.message)throw new Error("Error message required.");this.name="BraintreeError",this.code=e.code,this.message=e.message,this.type=e.type,this.details=e.details}var s=e("./enumerate");n.prototype=Object.create(Error.prototype),(n.prototype.constructor=n).types=s(["CUSTOMER","MERCHANT","NETWORK","INTERNAL","UNKNOWN"]),n.findRootError=function(e){return e instanceof n&&e.details&&e.details.originalError?n.findRootError(e.details.originalError):e},t.exports=n},{"./enumerate":23}],18:[function(e,t,i){"use strict";t.exports=function(e){return Object.keys(e).reduce(function(t,i){return t[i.replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1_$2").toLowerCase()]=e[i],t},{})}},{}],19:[function(e,t,i){"use strict";t.exports={ANALYTICS_PREFIX:"web.",ANALYTICS_REQUEST_TIMEOUT_MS:2e3,ASSETS_URLS:{production:"https://assets.braintreegateway.com",sandbox:"https://assets.braintreegateway.com"},CLIENT_API_URLS:{production:"https://api.braintreegateway.com:443",sandbox:"https://api.sandbox.braintreegateway.com:443"},FRAUDNET_SOURCE:"BRAINTREE_SIGNIN",FRAUDNET_FNCLS:"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99",FRAUDNET_URL:"https://c.paypal.com/da/r/fb.js",GRAPHQL_URLS:{production:"https://payments.braintree-api.com/graphql",sandbox:"https://payments.sandbox.braintree-api.com/graphql"},INTEGRATION_TIMEOUT_MS:6e4,VERSION:"3.64.2",INTEGRATION:"custom",SOURCE:"client",PLATFORM:"web",BRAINTREE_LIBRARY_VERSION:"braintree/web/3.64.2"}},{}],20:[function(e,t,i){"use strict";var n=e("./braintree-error"),s=e("./errors");t.exports=function(e,t){t.forEach(function(t){e[t]=function(){throw new n({type:s.METHOD_CALLED_AFTER_TEARDOWN.type,code:s.METHOD_CALLED_AFTER_TEARDOWN.code,message:t+" cannot be called after teardown."})}})}},{"./braintree-error":17,"./errors":24}],21:[function(e,t,i){"use strict";var n=e("./constants").ASSETS_URLS;t.exports={create:function(e){return n.production}}},{"./constants":19}],22:[function(e,t,i){"use strict";var n=e("./braintree-error"),s=e("./promise"),r=e("./assets"),o=e("./errors"),a="3.64.2";t.exports={create:function(e){var t=s.resolve();return e.client?s.resolve(e.client):(window.braintree&&window.braintree.client||(t=r.loadScript({src:e.assetsUrl+"/web/"+a+"/js/client.min.js"})["catch"](function(e){return s.reject(new n({type:o.CLIENT_SCRIPT_FAILED_TO_LOAD.type,code:o.CLIENT_SCRIPT_FAILED_TO_LOAD.code,message:o.CLIENT_SCRIPT_FAILED_TO_LOAD.message,details:{originalError:e}}))})),t.then(function(){return window.braintree.client.VERSION!==a?s.reject(new n({type:o.INCOMPATIBLE_VERSIONS.type,code:o.INCOMPATIBLE_VERSIONS.code,message:"Client (version "+window.braintree.client.VERSION+") and "+e.name+" (version "+a+") components must be from the same SDK version."})):window.braintree.client.create({authorization:e.authorization,debug:e.debug})}))}}},{"./assets":15,"./braintree-error":17,"./errors":24,"./promise":26}],23:[function(e,t,i){"use strict";t.exports=function(e,t){return t=null==t?"":t,e.reduce(function(e,i){return e[i]=t+i,e},{})}},{}],24:[function(e,t,i){"use strict";var n=e("./braintree-error");t.exports={INVALID_USE_OF_INTERNAL_FUNCTION:{type:n.types.INTERNAL,code:"INVALID_USE_OF_INTERNAL_FUNCTION"},INSTANTIATION_OPTION_REQUIRED:{type:n.types.MERCHANT,code:"INSTANTIATION_OPTION_REQUIRED"},INCOMPATIBLE_VERSIONS:{type:n.types.MERCHANT,code:"INCOMPATIBLE_VERSIONS"},CLIENT_SCRIPT_FAILED_TO_LOAD:{type:n.types.NETWORK,code:"CLIENT_SCRIPT_FAILED_TO_LOAD",message:"Braintree client script could not be loaded."},METHOD_CALLED_AFTER_TEARDOWN:{type:n.types.MERCHANT,code:"METHOD_CALLED_AFTER_TEARDOWN"}}},{"./braintree-error":17}],25:[function(e,t,i){"use strict";t.exports=function(e){return Object.keys(e).filter(function(t){return"function"==typeof e[t]})}},{}],26:[function(e,t,i){"use strict";var n=e("promise-polyfill"),s=e("@braintree/extended-promise"),r="undefined"!=typeof Promise?Promise:n;s.suppressUnhandledPromiseMessage=!0,s.setPromise(r),t.exports=r},{"@braintree/extended-promise":4,"promise-polyfill":9}]},{},[12])(12)}),jQuery.fn.visibleInScroll=function(e){var t=$(this[0]).scrollParent()[0],i=this[0].getBoundingClientRect(),n=[t.getBoundingClientRect()];if(i={left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height,visibleWidth:i.width,visibleHeight:i.height,isVisible:!0,isContained:!0},t===this[0].ownerDocument)return i;for(;t!==this[0].ownerDocument&&null!==t&&((t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)&&n.push(t.getBoundingClientRect()),!n.length||!e);)t=$(t).scrollParent()[0];e||(n.length=1);for(var s=0;s<n.length;s+=1){var r=n[s];i.left=Math.max(i.left,r.left),i.top=Math.max(i.top,r.top),i.right=Math.min(i.right,r.right),i.bottom=Math.min(i.bottom,r.bottom)}return i.visibleWidth=Math.max(0,i.right-i.left),i.visibleHeight=i.visibleWidth&&Math.max(0,i.bottom-i.top),i.visibleHeight||(i.visibleWidth=0),i.isVisible=i.visibleWidth>0&&i.visibleHeight>0,i.isContained=i.visibleWidth===i.width&&i.visibleHeight===i.height,i.isContained||(i.partlyHiddenSide=i.left===n[0].left?"left":"right"),i},function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=window.Slick||{};t=function(){function t(t,n){var s,r=this;r.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(t),appendDots:e(t),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,i){return e('<button type="button" />').text(i+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},r.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},e.extend(r,r.initials),r.activeBreakpoint=null,r.animType=null,r.animProp=null,r.breakpoints=[],r.breakpointSettings=[],r.cssTransitions=!1,r.focussed=!1,r.interrupted=!1,r.hidden="hidden",r.paused=!0,r.positionProp=null,r.respondTo=null,r.rowCount=1,r.shouldClick=!0,r.$slider=e(t),r.$slidesCache=null,r.transformType=null,r.transitionType=null,r.visibilityChange="visibilitychange",r.windowWidth=0,r.windowTimer=null,s=e(t).data("slick")||{},r.options=e.extend({},r.defaults,n,s),r.currentSlide=r.options.initialSlide,r.originalSettings=r.options,"undefined"!=typeof document.mozHidden?(r.hidden="mozHidden",r.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(r.hidden="webkitHidden",r.visibilityChange="webkitvisibilitychange"),r.autoPlay=e.proxy(r.autoPlay,r),r.autoPlayClear=e.proxy(r.autoPlayClear,r),r.autoPlayIterator=e.proxy(r.autoPlayIterator,r),r.changeSlide=e.proxy(r.changeSlide,r),r.clickHandler=e.proxy(r.clickHandler,r),r.selectHandler=e.proxy(r.selectHandler,r),r.setPosition=e.proxy(r.setPosition,r),r.swipeHandler=e.proxy(r.swipeHandler,r),r.dragHandler=e.proxy(r.dragHandler,r),r.keyHandler=e.proxy(r.keyHandler,r),r.instanceUid=i++,r.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,r.registerBreakpoints(),r.init(!0)}var i=0;return t}(),t.prototype.activateADA=function(){var e=this;e.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},t.prototype.addSlide=t.prototype.slickAdd=function(t,i,n){var s=this;if("boolean"==typeof i)n=i,i=null;else if(0>i||i>=s.slideCount)return!1;s.unload(),"number"==typeof i?0===i&&0===s.$slides.length?e(t).appendTo(s.$slideTrack):n?e(t).insertBefore(s.$slides.eq(i)):e(t).insertAfter(s.$slides.eq(i)):n===!0?e(t).prependTo(s.$slideTrack):e(t).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each(function(t,i){e(i).attr("data-slick-index",t)}),s.$slidesCache=s.$slides,s.reinit()},t.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},t.prototype.animateSlide=function(t,i){var n={},s=this;s.animateHeight(),s.options.rtl===!0&&s.options.vertical===!1&&(t=-t),s.transformsEnabled===!1?s.options.vertical===!1?s.$slideTrack.animate({left:t},s.options.speed,s.options.easing,i):s.$slideTrack.animate({top:t},s.options.speed,s.options.easing,i):s.cssTransitions===!1?(s.options.rtl===!0&&(s.currentLeft=-s.currentLeft),e({animStart:s.currentLeft}).animate({animStart:t},{duration:s.options.speed,easing:s.options.easing,step:function(e){e=Math.ceil(e),s.options.vertical===!1?(n[s.animType]="translate("+e+"px, 0px)",s.$slideTrack.css(n)):(n[s.animType]="translate(0px,"+e+"px)",s.$slideTrack.css(n))},complete:function(){i&&i.call()}})):(s.applyTransition(),t=Math.ceil(t),s.options.vertical===!1?n[s.animType]="translate3d("+t+"px, 0px, 0px)":n[s.animType]="translate3d(0px,"+t+"px, 0px)",s.$slideTrack.css(n),i&&setTimeout(function(){s.disableTransition(),i.call()},s.options.speed))},t.prototype.getNavTarget=function(){var t=this,i=t.options.asNavFor;return i&&null!==i&&(i=e(i).not(t.$slider)),i},t.prototype.asNavFor=function(t){var i=this,n=i.getNavTarget();null!==n&&"object"==typeof n&&n.each(function(){var i=e(this).slick("getSlick");i.unslicked||i.slideHandler(t,!0)})},t.prototype.applyTransition=function(e){var t=this,i={};t.options.fade===!1?i[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:i[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.autoPlay=function(){var e=this;e.autoPlayClear(),e.slideCount>e.options.slidesToShow&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this,t=e.currentSlide+e.options.slidesToScroll;e.paused||e.interrupted||e.focussed||(e.options.infinite===!1&&(1===e.direction&&e.currentSlide+1===e.slideCount-1?e.direction=0:0===e.direction&&(t=e.currentSlide-e.options.slidesToScroll,e.currentSlide-1===0&&(e.direction=1))),e.slideHandler(t))},t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&(t.$prevArrow=e(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=e(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},t.prototype.buildDots=function(){var t,i,n=this;if(n.options.dots===!0){for(n.$slider.addClass("slick-dotted"),i=e("<ul />").addClass(n.options.dotsClass),t=0;t<=n.getDotCount();t+=1)i.append(e("<li />").append(n.options.customPaging.call(this,n,t)));n.$dots=i.appendTo(n.options.appendDots),n.$dots.find("li").first().addClass("slick-active")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,i){e(i).attr("data-slick-index",t).data("originalStyling",e(i).attr("style")||"")}),t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),(t.options.centerMode===!0||t.options.swipeToSlide===!0)&&(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},t.prototype.buildRows=function(){var e,t,i,n,s,r,o,a=this;if(n=document.createDocumentFragment(),r=a.$slider.children(),a.options.rows>1){for(o=a.options.slidesPerRow*a.options.rows,s=Math.ceil(r.length/o),e=0;s>e;e++){var l=document.createElement("div");for(t=0;t<a.options.rows;t++){var c=document.createElement("div");for(i=0;i<a.options.slidesPerRow;i++){var u=e*o+(t*a.options.slidesPerRow+i);r.get(u)&&c.appendChild(r.get(u))}l.appendChild(c)}n.appendChild(l)}a.$slider.empty().append(n),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},t.prototype.checkResponsive=function(t,i){var n,s,r,o=this,a=!1,l=o.$slider.width(),c=window.innerWidth||e(window).width();if("window"===o.respondTo?r=c:"slider"===o.respondTo?r=l:"min"===o.respondTo&&(r=Math.min(c,l)),o.options.responsive&&o.options.responsive.length&&null!==o.options.responsive){s=null;for(n in o.breakpoints)o.breakpoints.hasOwnProperty(n)&&(o.originalSettings.mobileFirst===!1?r<o.breakpoints[n]&&(s=o.breakpoints[n]):r>o.breakpoints[n]&&(s=o.breakpoints[n]));null!==s?null!==o.activeBreakpoint?(s!==o.activeBreakpoint||i)&&(o.activeBreakpoint=s,"unslick"===o.breakpointSettings[s]?o.unslick(s):(o.options=e.extend({},o.originalSettings,o.breakpointSettings[s]),t===!0&&(o.currentSlide=o.options.initialSlide),o.refresh(t)),a=s):(o.activeBreakpoint=s,"unslick"===o.breakpointSettings[s]?o.unslick(s):(o.options=e.extend({},o.originalSettings,o.breakpointSettings[s]),t===!0&&(o.currentSlide=o.options.initialSlide),o.refresh(t)),a=s):null!==o.activeBreakpoint&&(o.activeBreakpoint=null,o.options=o.originalSettings,t===!0&&(o.currentSlide=o.options.initialSlide),o.refresh(t),a=s),t||a===!1||o.$slider.trigger("breakpoint",[o,a])}},t.prototype.changeSlide=function(t,i){var n,s,r,o=this,a=e(t.currentTarget);switch(a.is("a")&&t.preventDefault(),a.is("li")||(a=a.closest("li")),r=o.slideCount%o.options.slidesToScroll!==0,n=r?0:(o.slideCount-o.currentSlide)%o.options.slidesToScroll,t.data.message){case"previous":s=0===n?o.options.slidesToScroll:o.options.slidesToShow-n,o.slideCount>o.options.slidesToShow&&o.slideHandler(o.currentSlide-s,!1,i);break;case"next":s=0===n?o.options.slidesToScroll:n,o.slideCount>o.options.slidesToShow&&o.slideHandler(o.currentSlide+s,!1,i);break;case"index":var l=0===t.data.index?0:t.data.index||a.index()*o.options.slidesToScroll;o.slideHandler(o.checkNavigable(l),!1,i),a.children().trigger("focus");break;default:return}},t.prototype.checkNavigable=function(e){var t,i,n=this;if(t=n.getNavigableIndexes(),i=0,e>t[t.length-1])e=t[t.length-1];else for(var s in t){if(e<t[s]){e=i;break}i=t[s]}return e},t.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&(e("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",e.proxy(t.interrupt,t,!0)).off("mouseleave.slick",e.proxy(t.interrupt,t,!1)),t.options.accessibility===!0&&t.$dots.off("keydown.slick",t.keyHandler)),t.$slider.off("focus.slick blur.slick"),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide),t.options.accessibility===!0&&(t.$prevArrow&&t.$prevArrow.off("keydown.slick",t.keyHandler),t.$nextArrow&&t.$nextArrow.off("keydown.slick",t.keyHandler))),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),e(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),t.options.accessibility===!0&&t.$list.off("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpSlideEvents=function(){var t=this;t.$list.off("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.off("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>1&&(e=t.$slides.children().children(),e.removeAttr("style"),t.$slider.empty().append(e))},t.prototype.clickHandler=function(e){var t=this;t.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(t){var i=this;i.autoPlayClear(),i.touchObject={},i.cleanUpEvents(),e(".slick-cloned",i.$slider).detach(),i.$dots&&i.$dots.remove(),i.$prevArrow&&i.$prevArrow.length&&(i.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.prevArrow)&&i.$prevArrow.remove()),i.$nextArrow&&i.$nextArrow.length&&(i.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.nextArrow)&&i.$nextArrow.remove()),i.$slides&&(i.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){e(this).attr("style",e(this).data("originalStyling"))}),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.detach(),i.$list.detach(),i.$slider.append(i.$slides)),i.cleanUpRows(),i.$slider.removeClass("slick-slider"),i.$slider.removeClass("slick-initialized"),i.$slider.removeClass("slick-dotted"),i.unslicked=!0,t||i.$slider.trigger("destroy",[i])},t.prototype.disableTransition=function(e){var t=this,i={};i[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.fadeSlide=function(e,t){var i=this;i.cssTransitions===!1?(i.$slides.eq(e).css({zIndex:i.options.zIndex}),i.$slides.eq(e).animate({opacity:1},i.options.speed,i.options.easing,t)):(i.applyTransition(e),i.$slides.eq(e).css({opacity:1,zIndex:i.options.zIndex}),t&&setTimeout(function(){i.disableTransition(e),t.call()},i.options.speed))},t.prototype.fadeSlideOut=function(e){var t=this;t.cssTransitions===!1?t.$slides.eq(e).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({opacity:0,zIndex:t.options.zIndex-2}))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;null!==e&&(t.$slidesCache=t.$slides,t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.focusHandler=function(){var t=this;t.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(i){i.stopImmediatePropagation();var n=e(this);setTimeout(function(){t.options.pauseOnFocus&&(t.focussed=n.is(":focus"),t.autoPlay())},0)})},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){var e=this;return e.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,i=0,n=0;if(e.options.infinite===!0)if(e.slideCount<=e.options.slidesToShow)++n;else for(;t<e.slideCount;)++n,t=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(e.options.centerMode===!0)n=e.slideCount;else if(e.options.asNavFor)for(;t<e.slideCount;)++n,t=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else n=1+Math.ceil((e.slideCount-e.options.slidesToShow)/e.options.slidesToScroll);return n-1},t.prototype.getLeft=function(e){var t,i,n,s,r=this,o=0;return r.slideOffset=0,i=r.$slides.first().outerHeight(!0),r.options.infinite===!0?(r.slideCount>r.options.slidesToShow&&(r.slideOffset=r.slideWidth*r.options.slidesToShow*-1,s=-1,r.options.vertical===!0&&r.options.centerMode===!0&&(2===r.options.slidesToShow?s=-1.5:1===r.options.slidesToShow&&(s=-2)),o=i*r.options.slidesToShow*s),r.slideCount%r.options.slidesToScroll!==0&&e+r.options.slidesToScroll>r.slideCount&&r.slideCount>r.options.slidesToShow&&(e>r.slideCount?(r.slideOffset=(r.options.slidesToShow-(e-r.slideCount))*r.slideWidth*-1,o=(r.options.slidesToShow-(e-r.slideCount))*i*-1):(r.slideOffset=r.slideCount%r.options.slidesToScroll*r.slideWidth*-1,o=r.slideCount%r.options.slidesToScroll*i*-1))):e+r.options.slidesToShow>r.slideCount&&(r.slideOffset=(e+r.options.slidesToShow-r.slideCount)*r.slideWidth,o=(e+r.options.slidesToShow-r.slideCount)*i),r.slideCount<=r.options.slidesToShow&&(r.slideOffset=0,o=0),r.options.centerMode===!0&&r.slideCount<=r.options.slidesToShow?r.slideOffset=r.slideWidth*Math.floor(r.options.slidesToShow)/2-r.slideWidth*r.slideCount/2:r.options.centerMode===!0&&r.options.infinite===!0?r.slideOffset+=r.slideWidth*Math.floor(r.options.slidesToShow/2)-r.slideWidth:r.options.centerMode===!0&&(r.slideOffset=0,r.slideOffset+=r.slideWidth*Math.floor(r.options.slidesToShow/2)),t=r.options.vertical===!1?e*r.slideWidth*-1+r.slideOffset:e*i*-1+o,r.options.variableWidth===!0&&(n=r.slideCount<=r.options.slidesToShow||r.options.infinite===!1?r.$slideTrack.children(".slick-slide").eq(e):r.$slideTrack.children(".slick-slide").eq(e+r.options.slidesToShow),t=r.options.rtl===!0?n[0]?-1*(r.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,r.options.centerMode===!0&&(n=r.slideCount<=r.options.slidesToShow||r.options.infinite===!1?r.$slideTrack.children(".slick-slide").eq(e):r.$slideTrack.children(".slick-slide").eq(e+r.options.slidesToShow+1),t=r.options.rtl===!0?n[0]?-1*(r.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,t+=(r.$list.width()-n.outerWidth())/2)),t},t.prototype.getOption=t.prototype.slickGetOption=function(e){var t=this;return t.options[e]},t.prototype.getNavigableIndexes=function(){var e,t=this,i=0,n=0,s=[];for(t.options.infinite===!1?e=t.slideCount:(i=-1*t.options.slidesToScroll,n=-1*t.options.slidesToScroll,e=2*t.slideCount);e>i;)s.push(i),i=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return s},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var t,i,n,s=this;return n=s.options.centerMode===!0?s.slideWidth*Math.floor(s.options.slidesToShow/2):0,s.options.swipeToSlide===!0?(s.$slideTrack.find(".slick-slide").each(function(t,r){return r.offsetLeft-n+e(r).outerWidth()/2>-1*s.swipeLeft?(i=r,!1):void 0}),t=Math.abs(e(i).attr("data-slick-index")-s.currentSlide)||1):s.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){var i=this;i.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(t){var i=this;e(i.$slider).hasClass("slick-initialized")||(e(i.$slider).addClass("slick-initialized"),i.buildRows(),i.buildOut(),i.setProps(),i.startLoad(),i.loadSlider(),i.initializeEvents(),i.updateArrows(),i.updateDots(),i.checkResponsive(!0),i.focusHandler()),t&&i.$slider.trigger("init",[i]),i.options.accessibility===!0&&i.initADA(),i.options.autoplay&&(i.paused=!1,i.autoPlay())},t.prototype.initADA=function(){var t=this,i=Math.ceil(t.slideCount/t.options.slidesToShow),n=t.getNavigableIndexes().filter(function(e){return e>=0&&e<t.slideCount});t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==t.$dots&&(t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(i){var s=n.indexOf(i);e(this).attr({role:"tabpanel",id:"slick-slide"+t.instanceUid+i,tabindex:-1}),-1!==s&&e(this).attr({"aria-describedby":"slick-slide-control"+t.instanceUid+s})}),t.$dots.attr("role","tablist").find("li").each(function(s){var r=n[s];e(this).attr({role:"presentation"}),e(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+t.instanceUid+s,"aria-controls":"slick-slide"+t.instanceUid+r,"aria-label":s+1+" of "+i,"aria-selected":null,tabindex:"-1"})}).eq(t.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var s=t.currentSlide,r=s+t.options.slidesToShow;r>s;s++)t.$slides.eq(s).attr("tabindex",0);t.activateADA()},t.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.off("click.slick").on("click.slick",{message:"next"},e.changeSlide),e.options.accessibility===!0&&(e.$prevArrow.on("keydown.slick",e.keyHandler),e.$nextArrow.on("keydown.slick",e.keyHandler)))},t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&(e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.accessibility===!0&&t.$dots.on("keydown.slick",t.keyHandler)),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&e("li",t.$dots).on("mouseenter.slick",e.proxy(t.interrupt,t,!0)).on("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.initSlideEvents=function(){var t=this;t.options.pauseOnHover&&(t.$list.on("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.on("mouseleave.slick",e.proxy(t.interrupt,t,!1)))},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.initSlideEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),e(document).on(t.visibilityChange,e.proxy(t.visibility,t)),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,e.proxy(t.orientationChange,t)),e(window).on("resize.slick.slick-"+t.instanceUid,e.proxy(t.resize,t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(t.setPosition)},t.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show()},t.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&t.options.accessibility===!0?t.changeSlide({data:{message:t.options.rtl===!0?"next":"previous"}}):39===e.keyCode&&t.options.accessibility===!0&&t.changeSlide({
data:{message:t.options.rtl===!0?"previous":"next"}}))},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each(function(){var t=e(this),i=e(this).attr("data-lazy"),n=e(this).attr("data-srcset"),s=e(this).attr("data-sizes")||o.$slider.attr("data-sizes"),r=document.createElement("img");r.onload=function(){t.animate({opacity:0},100,function(){n&&(t.attr("srcset",n),s&&t.attr("sizes",s)),t.attr("src",i).animate({opacity:1},200,function(){t.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),o.$slider.trigger("lazyLoaded",[o,t,i])})},r.onerror=function(){t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),o.$slider.trigger("lazyLoadError",[o,t,i])},r.src=i})}var i,n,s,r,o=this;if(o.options.centerMode===!0?o.options.infinite===!0?(s=o.currentSlide+(o.options.slidesToShow/2+1),r=s+o.options.slidesToShow+2):(s=Math.max(0,o.currentSlide-(o.options.slidesToShow/2+1)),r=2+(o.options.slidesToShow/2+1)+o.currentSlide):(s=o.options.infinite?o.options.slidesToShow+o.currentSlide:o.currentSlide,r=Math.ceil(s+o.options.slidesToShow),o.options.fade===!0&&(s>0&&s--,r<=o.slideCount&&r++)),i=o.$slider.find(".slick-slide").slice(s,r),"anticipated"===o.options.lazyLoad)for(var a=s-1,l=r,c=o.$slider.find(".slick-slide"),u=0;u<o.options.slidesToScroll;u++)0>a&&(a=o.slideCount-1),i=i.add(c.eq(a)),i=i.add(c.eq(l)),a--,l++;t(i),o.slideCount<=o.options.slidesToShow?(n=o.$slider.find(".slick-slide"),t(n)):o.currentSlide>=o.slideCount-o.options.slidesToShow?(n=o.$slider.find(".slick-cloned").slice(0,o.options.slidesToShow),t(n)):0===o.currentSlide&&(n=o.$slider.find(".slick-cloned").slice(-1*o.options.slidesToShow),t(n))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){var e=this;e.changeSlide({data:{message:"next"}})},t.prototype.orientationChange=function(){var e=this;e.checkResponsive(),e.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.autoPlay(),e.options.autoplay=!0,e.paused=!1,e.focussed=!1,e.interrupted=!1},t.prototype.postSlide=function(t){var i=this;if(!i.unslicked&&(i.$slider.trigger("afterChange",[i,t]),i.animating=!1,i.slideCount>i.options.slidesToShow&&i.setPosition(),i.swipeLeft=null,i.options.autoplay&&i.autoPlay(),i.options.accessibility===!0&&(i.initADA(),i.options.focusOnChange))){var n=e(i.$slides.get(i.currentSlide));n.attr("tabindex",0).focus()}},t.prototype.prev=t.prototype.slickPrev=function(){var e=this;e.changeSlide({data:{message:"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(t){t=t||1;var i,n,s,r,o,a=this,l=e("img[data-lazy]",a.$slider);l.length?(i=l.first(),n=i.attr("data-lazy"),s=i.attr("data-srcset"),r=i.attr("data-sizes")||a.$slider.attr("data-sizes"),o=document.createElement("img"),o.onload=function(){s&&(i.attr("srcset",s),r&&i.attr("sizes",r)),i.attr("src",n).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),a.options.adaptiveHeight===!0&&a.setPosition(),a.$slider.trigger("lazyLoaded",[a,i,n]),a.progressiveLazyLoad()},o.onerror=function(){3>t?setTimeout(function(){a.progressiveLazyLoad(t+1)},500):(i.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),a.$slider.trigger("lazyLoadError",[a,i,n]),a.progressiveLazyLoad())},o.src=n):a.$slider.trigger("allImagesLoaded",[a])},t.prototype.refresh=function(t){var i,n,s=this;n=s.slideCount-s.options.slidesToShow,!s.options.infinite&&s.currentSlide>n&&(s.currentSlide=n),s.slideCount<=s.options.slidesToShow&&(s.currentSlide=0),i=s.currentSlide,s.destroy(!0),e.extend(s,s.initials,{currentSlide:i}),s.init(),t||s.changeSlide({data:{message:"index",index:i}},!1)},t.prototype.registerBreakpoints=function(){var t,i,n,s=this,r=s.options.responsive||null;if("array"===e.type(r)&&r.length){s.respondTo=s.options.respondTo||"window";for(t in r)if(n=s.breakpoints.length-1,r.hasOwnProperty(t)){for(i=r[t].breakpoint;n>=0;)s.breakpoints[n]&&s.breakpoints[n]===i&&s.breakpoints.splice(n,1),n--;s.breakpoints.push(i),s.breakpointSettings[i]=r[t].settings}s.breakpoints.sort(function(e,t){return s.options.mobileFirst?e-t:t-e})}},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.cleanUpSlideEvents(),t.initSlideEvents(),t.checkResponsive(!1,!0),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.setPosition(),t.focusHandler(),t.paused=!t.options.autoplay,t.autoPlay(),t.$slider.trigger("reInit",[t])},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,i){var n=this;return"boolean"==typeof e?(t=e,e=t===!0?0:n.slideCount-1):e=t===!0?--e:e,n.slideCount<1||0>e||e>n.slideCount-1?!1:(n.unload(),i===!0?n.$slideTrack.children().remove():n.$slideTrack.children(this.options.slide).eq(e).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,void n.reinit())},t.prototype.setCSS=function(e){var t,i,n=this,s={};n.options.rtl===!0&&(e=-e),t="left"==n.positionProp?Math.ceil(e)+"px":"0px",i="top"==n.positionProp?Math.ceil(e)+"px":"0px",s[n.positionProp]=e,n.transformsEnabled===!1?n.$slideTrack.css(s):(s={},n.cssTransitions===!1?(s[n.animType]="translate("+t+", "+i+")",n.$slideTrack.css(s)):(s[n.animType]="translate3d("+t+", "+i+", 0px)",n.$slideTrack.css(s)))},t.prototype.setDimensions=function(){var e=this;e.options.vertical===!1?e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.options.vertical===!1&&e.options.variableWidth===!1?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):e.options.variableWidth===!0?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();e.options.variableWidth===!1&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var t,i=this;i.$slides.each(function(n,s){t=i.slideWidth*n*-1,i.options.rtl===!0?e(s).css({position:"relative",right:t,top:0,zIndex:i.options.zIndex-2,opacity:0}):e(s).css({position:"relative",left:t,top:0,zIndex:i.options.zIndex-2,opacity:0})}),i.$slides.eq(i.currentSlide).css({zIndex:i.options.zIndex-1,opacity:1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setOption=t.prototype.slickSetOption=function(){var t,i,n,s,r,o=this,a=!1;if("object"===e.type(arguments[0])?(n=arguments[0],a=arguments[1],r="multiple"):"string"===e.type(arguments[0])&&(n=arguments[0],s=arguments[1],a=arguments[2],"responsive"===arguments[0]&&"array"===e.type(arguments[1])?r="responsive":"undefined"!=typeof arguments[1]&&(r="single")),"single"===r)o.options[n]=s;else if("multiple"===r)e.each(n,function(e,t){o.options[e]=t});else if("responsive"===r)for(i in s)if("array"!==e.type(o.options.responsive))o.options.responsive=[s[i]];else{for(t=o.options.responsive.length-1;t>=0;)o.options.responsive[t].breakpoint===s[i].breakpoint&&o.options.responsive.splice(t,1),t--;o.options.responsive.push(s[i])}a&&(o.unload(),o.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.msTransition)&&e.options.useCSS===!0&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.options.useTransform&&null!==e.animType&&e.animType!==!1},t.prototype.setSlideClasses=function(e){var t,i,n,s,r=this;if(i=r.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),r.$slides.eq(e).addClass("slick-current"),r.options.centerMode===!0){var o=r.options.slidesToShow%2===0?1:0;t=Math.floor(r.options.slidesToShow/2),r.options.infinite===!0&&(e>=t&&e<=r.slideCount-1-t?r.$slides.slice(e-t+o,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(n=r.options.slidesToShow+e,i.slice(n-t+1+o,n+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?i.eq(i.length-1-r.options.slidesToShow).addClass("slick-center"):e===r.slideCount-1&&i.eq(r.options.slidesToShow).addClass("slick-center")),r.$slides.eq(e).addClass("slick-center")}else e>=0&&e<=r.slideCount-r.options.slidesToShow?r.$slides.slice(e,e+r.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):i.length<=r.options.slidesToShow?i.addClass("slick-active").attr("aria-hidden","false"):(s=r.slideCount%r.options.slidesToShow,n=r.options.infinite===!0?r.options.slidesToShow+e:e,r.options.slidesToShow==r.options.slidesToScroll&&r.slideCount-e<r.options.slidesToShow?i.slice(n-(r.options.slidesToShow-s),n+s).addClass("slick-active").attr("aria-hidden","false"):i.slice(n,n+r.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));("ondemand"===r.options.lazyLoad||"anticipated"===r.options.lazyLoad)&&r.lazyLoad()},t.prototype.setupInfinite=function(){var t,i,n,s=this;if(s.options.fade===!0&&(s.options.centerMode=!1),s.options.infinite===!0&&s.options.fade===!1&&(i=null,s.slideCount>s.options.slidesToShow)){for(n=s.options.centerMode===!0?s.options.slidesToShow+1:s.options.slidesToShow,t=s.slideCount;t>s.slideCount-n;t-=1)i=t-1,e(s.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i-s.slideCount).prependTo(s.$slideTrack).addClass("slick-cloned");for(t=0;t<n+s.slideCount;t+=1)i=t,e(s.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i+s.slideCount).appendTo(s.$slideTrack).addClass("slick-cloned");s.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.interrupt=function(e){var t=this;e||t.autoPlay(),t.interrupted=e},t.prototype.selectHandler=function(t){var i=this,n=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide"),s=parseInt(n.attr("data-slick-index"));return s||(s=0),i.slideCount<=i.options.slidesToShow?void i.slideHandler(s,!1,!0):void i.slideHandler(s)},t.prototype.slideHandler=function(e,t,i){var n,s,r,o,a,l=null,c=this;return t=t||!1,c.animating===!0&&c.options.waitForAnimate===!0||c.options.fade===!0&&c.currentSlide===e?void 0:(t===!1&&c.asNavFor(e),n=e,l=c.getLeft(n),o=c.getLeft(c.currentSlide),c.currentLeft=null===c.swipeLeft?o:c.swipeLeft,c.options.infinite===!1&&c.options.centerMode===!1&&(0>e||e>c.getDotCount()*c.options.slidesToScroll)?void(c.options.fade===!1&&(n=c.currentSlide,i!==!0?c.animateSlide(o,function(){c.postSlide(n)}):c.postSlide(n))):c.options.infinite===!1&&c.options.centerMode===!0&&(0>e||e>c.slideCount-c.options.slidesToScroll)?void(c.options.fade===!1&&(n=c.currentSlide,i!==!0?c.animateSlide(o,function(){c.postSlide(n)}):c.postSlide(n))):(c.options.autoplay&&clearInterval(c.autoPlayTimer),s=0>n?c.slideCount%c.options.slidesToScroll!==0?c.slideCount-c.slideCount%c.options.slidesToScroll:c.slideCount+n:n>=c.slideCount?c.slideCount%c.options.slidesToScroll!==0?0:n-c.slideCount:n,c.animating=!0,c.$slider.trigger("beforeChange",[c,c.currentSlide,s]),r=c.currentSlide,c.currentSlide=s,c.setSlideClasses(c.currentSlide),c.options.asNavFor&&(a=c.getNavTarget(),a=a.slick("getSlick"),a.slideCount<=a.options.slidesToShow&&a.setSlideClasses(c.currentSlide)),c.updateDots(),c.updateArrows(),c.options.fade===!0?(i!==!0?(c.fadeSlideOut(r),c.fadeSlide(s,function(){c.postSlide(s)})):c.postSlide(s),void c.animateHeight()):void(i!==!0?c.animateSlide(l,function(){c.postSlide(s)}):c.postSlide(s))))},t.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,i,n,s=this;return e=s.touchObject.startX-s.touchObject.curX,t=s.touchObject.startY-s.touchObject.curY,i=Math.atan2(t,e),n=Math.round(180*i/Math.PI),0>n&&(n=360-Math.abs(n)),45>=n&&n>=0?s.options.rtl===!1?"left":"right":360>=n&&n>=315?s.options.rtl===!1?"left":"right":n>=135&&225>=n?s.options.rtl===!1?"right":"left":s.options.verticalSwiping===!0?n>=35&&135>=n?"down":"up":"vertical"},t.prototype.swipeEnd=function(e){var t,i,n=this;if(n.dragging=!1,n.swiping=!1,n.scrolling)return n.scrolling=!1,!1;if(n.interrupted=!1,n.shouldClick=n.touchObject.swipeLength>10?!1:!0,void 0===n.touchObject.curX)return!1;if(n.touchObject.edgeHit===!0&&n.$slider.trigger("edge",[n,n.swipeDirection()]),n.touchObject.swipeLength>=n.touchObject.minSwipe){switch(i=n.swipeDirection()){case"left":case"down":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide+n.getSlideCount()):n.currentSlide+n.getSlideCount(),n.currentDirection=0;break;case"right":case"up":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide-n.getSlideCount()):n.currentSlide-n.getSlideCount(),n.currentDirection=1}"vertical"!=i&&(n.slideHandler(t),n.touchObject={},n.$slider.trigger("swipe",[n,i]))}else n.touchObject.startX!==n.touchObject.curX&&(n.slideHandler(n.currentSlide),n.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1||t.options.draggable===!1&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,t.options.verticalSwiping===!0&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,i,n,s,r,o,a=this;return r=void 0!==e.originalEvent?e.originalEvent.touches:null,!a.dragging||a.scrolling||r&&1!==r.length?!1:(t=a.getLeft(a.currentSlide),a.touchObject.curX=void 0!==r?r[0].pageX:e.clientX,a.touchObject.curY=void 0!==r?r[0].pageY:e.clientY,a.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(a.touchObject.curX-a.touchObject.startX,2))),o=Math.round(Math.sqrt(Math.pow(a.touchObject.curY-a.touchObject.startY,2))),!a.options.verticalSwiping&&!a.swiping&&o>4?(a.scrolling=!0,!1):(a.options.verticalSwiping===!0&&(a.touchObject.swipeLength=o),i=a.swipeDirection(),void 0!==e.originalEvent&&a.touchObject.swipeLength>4&&(a.swiping=!0,e.preventDefault()),s=(a.options.rtl===!1?1:-1)*(a.touchObject.curX>a.touchObject.startX?1:-1),a.options.verticalSwiping===!0&&(s=a.touchObject.curY>a.touchObject.startY?1:-1),n=a.touchObject.swipeLength,a.touchObject.edgeHit=!1,a.options.infinite===!1&&(0===a.currentSlide&&"right"===i||a.currentSlide>=a.getDotCount()&&"left"===i)&&(n=a.touchObject.swipeLength*a.options.edgeFriction,a.touchObject.edgeHit=!0),a.options.vertical===!1?a.swipeLeft=t+n*s:a.swipeLeft=t+n*(a.$list.height()/a.listWidth)*s,a.options.verticalSwiping===!0&&(a.swipeLeft=t+n*s),a.options.fade===!0||a.options.touchMove===!1?!1:a.animating===!0?(a.swipeLeft=null,!1):void a.setCSS(a.swipeLeft)))},t.prototype.swipeStart=function(e){var t,i=this;return i.interrupted=!0,1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow?(i.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==t?t.pageX:e.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==t?t.pageY:e.clientY,void(i.dragging=!0))},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},t.prototype.updateArrows=function(){var e,t=this;e=Math.floor(t.options.slidesToShow/2),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&t.options.centerMode===!1?(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-1&&t.options.centerMode===!0&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").end(),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},t.prototype.visibility=function(){var e=this;e.options.autoplay&&(document[e.hidden]?e.interrupted=!0:e.interrupted=!1)},e.fn.slick=function(){var e,i,n=this,s=arguments[0],r=Array.prototype.slice.call(arguments,1),o=n.length;for(e=0;o>e;e++)if("object"==typeof s||"undefined"==typeof s?n[e].slick=new t(n[e],s):i=n[e].slick[s].apply(n[e].slick,r),"undefined"!=typeof i)return i;return n}});var geoip2=function(){function Lookup(e,t,i,n){this.successCallback=e,this.errorCallback=t,this.geolocation=i&&i.hasOwnProperty("geolocation")?i.geolocation:navigator.geolocation,this.type=n}var exports={};Lookup.prototype.returnSuccess=function(e){this.successCallback&&"function"==typeof this.successCallback&&this.successCallback(this.fillInObject(this.objectFromJSON(e)))},Lookup.prototype.returnError=function(e){this.errorCallback&&"function"==typeof this.errorCallback&&(e||(e={error:"Unknown error"}),this.errorCallback(e))},Lookup.prototype.objectFromJSON=function(json){return"undefined"!=typeof window.JSON&&"function"==typeof window.JSON.parse?window.JSON.parse(json):eval("("+json+")")};var fillIns={country:[["continent","Object","names","Object"],["country","Object","names","Object"],["registered_country","Object","names","Object"],["represented_country","Object","names","Object"],["traits","Object"]],city:[["city","Object","names","Object"],["continent","Object","names","Object"],["country","Object","names","Object"],["location","Object"],["postal","Object"],["registered_country","Object","names","Object"],["represented_country","Object","names","Object"],["subdivisions","Array",0,"Object","names","Object"],["traits","Object"]]};return Lookup.prototype.fillInObject=function(e){for(var t="country"===this.type?fillIns.country:fillIns.city,i=0;i<t.length;i++)for(var n=t[i],s=e,r=0;r<n.length;r+=2){var o=n[r];s[o]||(s[o]="Object"===n[r+1]?{}:[]),s=s[o]}try{Object.defineProperty(e.continent,"continent_code",{enumerable:!1,get:function(){return this.code},set:function(e){this.code=e}})}catch(a){e.continent.code&&(e.continent.continent_code=e.continent.code)}if("country"!==this.type)try{Object.defineProperty(e,"most_specific_subdivision",{enumerable:!1,get:function(){return this.subdivisions[this.subdivisions.length-1]},set:function(e){this.subdivisions[this.subdivisions.length-1]=e}})}catch(a){e.most_specific_subdivision=e.subdivisions[e.subdivisions.length-1]}return e},Lookup.prototype.getGeoIPResult=function(){var e,t,i=this,n="//geoip-js.maxmind.com/geoip/v2.1/"+this.type+"/me?",s={referrer:location.protocol+"//"+location.hostname};if(!this.alreadyRan){this.alreadyRan=1,"Microsoft Internet Explorer"===navigator.appName&&window.XDomainRequest&&-1===navigator.appVersion.indexOf("MSIE 1")?(t=new XDomainRequest,n=window.location.protocol+n,t.onprogress=function(){}):(t=new window.XMLHttpRequest,n="https:"+n);for(e in s)s.hasOwnProperty(e)&&s[e]&&(n+=e+"="+encodeURIComponent(s[e])+"&");n=n.substring(0,n.length-1),t.open("GET",n,!0),t.onload=function(){if("undefined"==typeof t.status||200===t.status)i.returnSuccess(t.responseText);else{var e,n=t.hasOwnProperty("contentType")?t.contentType:t.getResponseHeader("Content-Type");if(/json/.test(n)&&t.responseText.length)try{e=i.objectFromJSON(t.responseText)}catch(s){e={code:"HTTP_ERROR",error:"The server returned a "+t.status+" status with an invalid JSON body."}}else e=t.responseText.length?{code:"HTTP_ERROR",error:"The server returned a "+t.status+" status with the following body: "+t.responseText}:{code:"HTTP_ERROR",error:"The server returned a "+t.status+" status but either the server did not return a body or this browser is a version of Internet Explorer that hides error bodies."};i.returnError(e)}},t.ontimeout=function(){i.returnError({code:"HTTP_TIMEOUT",error:"The request to the GeoIP2 web service timed out."})},t.onerror=function(){i.returnError({code:"HTTP_ERROR",error:"There was a network error receiving the response from the GeoIP2 web service."})},t.send(null)}},exports.country=function(e,t,i){var n=new Lookup(e,t,i,"country");n.getGeoIPResult()},exports.city=function(e,t,i){var n=new Lookup(e,t,i,"city");n.getGeoIPResult()},exports.insights=function(e,t,i){var n=new Lookup(e,t,i,"insights");n.getGeoIPResult()},exports}();/*! lazysizes - v5.2.0-beta1 */
!function(e,t){var i=t(e,e.document);e.lazySizes=i,"object"==typeof module&&module.exports&&(module.exports=i)}("undefined"!=typeof window?window:{},function(e,t){"use strict";var i,n;if(function(){var t,i={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};n=e.lazySizesConfig||e.lazysizesConfig||{};for(t in i)t in n||(n[t]=i[t])}(),!t||!t.getElementsByClassName)return{init:function(){},cfg:n,noSupport:!0};var s=t.documentElement,r=e.Date,o=e.HTMLPictureElement,a="addEventListener",l="getAttribute",c=e[a],u=e.setTimeout,d=e.requestAnimationFrame||u,h=e.requestIdleCallback,p=/^picture$/i,f=["load","error","lazyincluded","_lazyloaded"],m={},g=Array.prototype.forEach,v=function(e,t){return m[t]||(m[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),m[t].test(e[l]("class")||"")&&m[t]},y=function(e,t){v(e,t)||e.setAttribute("class",(e[l]("class")||"").trim()+" "+t)},b=function(e,t){var i;(i=v(e,t))&&e.setAttribute("class",(e[l]("class")||"").replace(i," "))},_=function(e,t,i){var n=i?a:"removeEventListener";i&&_(e,t),f.forEach(function(i){e[n](i,t)})},w=function(e,n,s,r,o){var a=t.createEvent("Event");return s||(s={}),s.instance=i,a.initEvent(n,!r,!o),a.detail=s,e.dispatchEvent(a),a},C=function(t,i){var s;!o&&(s=e.picturefill||n.pf)?(i&&i.src&&!t[l]("srcset")&&t.setAttribute("srcset",i.src),s({reevaluate:!0,elements:[t]})):i&&i.src&&(t.src=i.src)},S=function(e,t){return(getComputedStyle(e,null)||{})[t]},T=function(e,t,i){for(i=i||e.offsetWidth;i<n.minSize&&t&&!e._lazysizesWidth;)i=t.offsetWidth,t=t.parentNode;return i},k=function(){var e,i,n=[],s=[],r=n,o=function(){var t=r;for(r=n.length?s:n,e=!0,i=!1;t.length;)t.shift()();e=!1},a=function(n,s){e&&!s?n.apply(this,arguments):(r.push(n),i||(i=!0,(t.hidden?u:d)(o)))};return a._lsFlush=o,a}(),E=function(e,t){return t?function(){k(e)}:function(){var t=this,i=arguments;k(function(){e.apply(t,i)})}},I=function(e){var t,i=0,s=n.throttleDelay,o=n.ricTimeout,a=function(){t=!1,i=r.now(),e()},l=h&&o>49?function(){h(a,{timeout:o}),o!==n.ricTimeout&&(o=n.ricTimeout)}:E(function(){u(a)},!0);return function(e){var n;(e=!0===e)&&(o=33),t||(t=!0,n=s-(r.now()-i),0>n&&(n=0),e||9>n?l():u(l,n))}},x=function(e){var t,i,n=99,s=function(){t=null,e()},o=function(){var e=r.now()-i;n>e?u(o,n-e):(h||s)(s)};return function(){i=r.now(),t||(t=u(o,n))}},P=function(){var o,h,f,m,T,P,D,L,O,M,N,R,U=/^img$/i,$=/^iframe$/i,H="onscroll"in e&&!/(gle|ing)bot/.test(navigator.userAgent),B=0,F=0,j=0,z=-1,W=function(e){j--,(!e||0>j||!e.target)&&(j=0)},V=function(e){return null==R&&(R="hidden"==S(t.body,"visibility")),R||!("hidden"==S(e.parentNode,"visibility")&&"hidden"==S(e,"visibility"))},q=function(e,i){var n,r=e,o=V(e);for(L-=i,N+=i,O-=i,M+=i;o&&(r=r.offsetParent)&&r!=t.body&&r!=s;)(o=(S(r,"opacity")||1)>0)&&"visible"!=S(r,"overflow")&&(n=r.getBoundingClientRect(),o=M>n.left&&O<n.right&&N>n.top-1&&L<n.bottom+1);return o},G=function(){var e,r,a,c,u,d,p,f,g,v,y,b,_=i.elements;if((m=n.loadMode)&&8>j&&(e=_.length)){for(r=0,z++;e>r;r++)if(_[r]&&!_[r]._lazyRace)if(!H||i.prematureUnveil&&i.prematureUnveil(_[r]))te(_[r]);else if((f=_[r][l]("data-expand"))&&(d=1*f)||(d=F),v||(v=!n.expand||n.expand<1?s.clientHeight>500&&s.clientWidth>500?500:370:n.expand,i._defEx=v,y=v*n.expFactor,b=n.hFac,R=null,y>F&&1>j&&z>2&&m>2&&!t.hidden?(F=y,z=0):F=m>1&&z>1&&6>j?v:B),g!==d&&(P=innerWidth+d*b,D=innerHeight+d,p=-1*d,g=d),a=_[r].getBoundingClientRect(),(N=a.bottom)>=p&&(L=a.top)<=D&&(M=a.right)>=p*b&&(O=a.left)<=P&&(N||M||O||L)&&(n.loadHidden||V(_[r]))&&(h&&3>j&&!f&&(3>m||4>z)||q(_[r],d))){if(te(_[r]),u=!0,j>9)break}else!u&&h&&!c&&4>j&&4>z&&m>2&&(o[0]||n.preloadAfterLoad)&&(o[0]||!f&&(N||M||O||L||"auto"!=_[r][l](n.sizesAttr)))&&(c=o[0]||_[r]);c&&!u&&te(c)}},Y=I(G),X=function(e){var t=e.target;return t._lazyCache?void delete t._lazyCache:(W(e),y(t,n.loadedClass),b(t,n.loadingClass),_(t,K),w(t,"lazyloaded"),void 0)},Q=E(X),K=function(e){Q({target:e.target})},J=function(e,t){try{e.contentWindow.location.replace(t)}catch(i){e.src=t}},Z=function(e){var t,i=e[l](n.srcsetAttr);(t=n.customMedia[e[l]("data-media")||e[l]("media")])&&e.setAttribute("media",t),i&&e.setAttribute("srcset",i)},ee=E(function(e,t,i,s,r){var o,a,c,d,h,m;(h=w(e,"lazybeforeunveil",t)).defaultPrevented||(s&&(i?y(e,n.autosizesClass):e.setAttribute("sizes",s)),a=e[l](n.srcsetAttr),o=e[l](n.srcAttr),r&&(c=e.parentNode,d=c&&p.test(c.nodeName||"")),m=t.firesLoad||"src"in e&&(a||o||d),h={target:e},y(e,n.loadingClass),m&&(clearTimeout(f),f=u(W,2500),_(e,K,!0)),d&&g.call(c.getElementsByTagName("source"),Z),a?e.setAttribute("srcset",a):o&&!d&&($.test(e.nodeName)?J(e,o):e.src=o),r&&(a||d)&&C(e,{src:o})),e._lazyRace&&delete e._lazyRace,b(e,n.lazyClass),k(function(){var t=e.complete&&e.naturalWidth>1;m&&!t||(t&&y(e,"ls-is-cached"),X(h),e._lazyCache=!0,u(function(){"_lazyCache"in e&&delete e._lazyCache},9)),"lazy"==e.loading&&j--},!0)}),te=function(e){if(!e._lazyRace){var t,i=U.test(e.nodeName),s=i&&(e[l](n.sizesAttr)||e[l]("sizes")),r="auto"==s;(!r&&h||!i||!e[l]("src")&&!e.srcset||e.complete||v(e,n.errorClass)||!v(e,n.lazyClass))&&(t=w(e,"lazyunveilread").detail,r&&A.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,j++,ee(e,t,r,s,i))}},ie=x(function(){n.loadMode=3,Y()}),ne=function(){3==n.loadMode&&(n.loadMode=2),ie()},se=function(){if(!h){if(r.now()-T<999)return void u(se,999);h=!0,n.loadMode=3,Y(),c("scroll",ne,!0)}};return{_:function(){T=r.now(),i.elements=t.getElementsByClassName(n.lazyClass),o=t.getElementsByClassName(n.lazyClass+" "+n.preloadClass),c("scroll",Y,!0),c("resize",Y,!0),c("pageshow",function(e){if(e.persisted){var i=t.querySelectorAll("."+n.loadingClass);i.length&&i.forEach&&d(function(){i.forEach(function(e){e.complete&&te(e)})})}}),e.MutationObserver?new MutationObserver(Y).observe(s,{childList:!0,subtree:!0,attributes:!0}):(s[a]("DOMNodeInserted",Y,!0),s[a]("DOMAttrModified",Y,!0),setInterval(Y,999)),c("hashchange",Y,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(e){t[a](e,Y,!0)}),/d$|^c/.test(t.readyState)?se():(c("load",se),t[a]("DOMContentLoaded",Y),u(se,2e4)),i.elements.length?(G(),k._lsFlush()):Y()},checkElems:Y,unveil:te,_aLSL:ne}}(),A=function(){var e,i=E(function(e,t,i,n){var s,r,o;if(e._lazysizesWidth=n,n+="px",e.setAttribute("sizes",n),p.test(t.nodeName||""))for(s=t.getElementsByTagName("source"),r=0,o=s.length;o>r;r++)s[r].setAttribute("sizes",n);i.detail.dataAttr||C(e,i.detail)}),s=function(e,t,n){var s,r=e.parentNode;r&&(n=T(e,r,n),s=w(e,"lazybeforesizes",{width:n,dataAttr:!!t}),s.defaultPrevented||(n=s.detail.width)&&n!==e._lazysizesWidth&&i(e,r,s,n))},r=function(){var t,i=e.length;if(i)for(t=0;i>t;t++)s(e[t])},o=x(r);return{_:function(){e=t.getElementsByClassName(n.autosizesClass),c("resize",o)},checkElems:o,updateElem:s}}(),D=function(){!D.i&&t.getElementsByClassName&&(D.i=!0,A._(),P._())};return u(function(){n.init&&D()}),i={cfg:n,autoSizer:A,loader:P,init:D,uP:C,aC:y,rC:b,hC:v,fire:w,gW:T,rAF:k}}),/*!
 * autocomplete.js 0.31.0
 * https://github.com/algolia/autocomplete.js
 * Copyright 2018 Algolia, Inc. and other contributors; Licensed MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.autocomplete=t():e.autocomplete=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return e[n].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";e.exports=i(1)},function(e,t,i){"use strict";function n(e,t,i,n){i=r.isArray(i)?i:[].slice.call(arguments,2);var c=s(e).each(function(e,r){var c=s(r),u=new l({el:c}),d=n||new a({input:c,eventBus:u,dropdownMenuContainer:t.dropdownMenuContainer,hint:void 0===t.hint||!!t.hint,minLength:t.minLength,autoselect:t.autoselect,autoselectOnBlur:t.autoselectOnBlur,openOnFocus:t.openOnFocus,templates:t.templates,debug:t.debug,clearOnSelected:t.clearOnSelected,cssClasses:t.cssClasses,datasets:i,keyboardShortcuts:t.keyboardShortcuts,appendTo:t.appendTo,autoWidth:t.autoWidth});c.data(o,d)});return c.autocomplete={},r.each(["open","close","getVal","setVal","destroy","getWrapper"],function(e){c.autocomplete[e]=function(){var t,i=arguments;return c.each(function(n,r){var a=s(r).data(o);t=a[e].apply(a,i)}),t}}),c}var s=i(2);i(3).element=s;var r=i(4);r.isArray=s.isArray,r.isFunction=s.isFunction,r.isObject=s.isPlainObject,r.bind=s.proxy,r.each=function(e,t){function i(e,i){return t(i,e)}s.each(e,i)},r.map=s.map,r.mixin=s.extend,r.Event=s.Event;var o="aaAutocomplete",a=i(5),l=i(6);n.sources=a.sources,n.escapeHighlightedString=r.escapeHighlightedString;var c="autocomplete"in window,u=window.autocomplete;n.noConflict=function(){return c?window.autocomplete=u:delete window.autocomplete,n},e.exports=n},function(e,t){!function(t,i){e.exports=function(e){var t=function(){function t(e){return null==e?String(e):G[Y.call(e)]||"object"}function i(e){return"function"==t(e)}function n(e){return null!=e&&e==e.window}function s(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function r(e){return"object"==t(e)}function o(e){return r(e)&&!n(e)&&Object.getPrototypeOf(e)==Object.prototype}function a(e){var t=!!e&&"length"in e&&e.length,i=k.type(e);return"function"!=i&&!n(e)&&("array"==i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function l(e){return D.call(e,function(e){return null!=e})}function c(e){return e.length>0?k.fn.concat.apply([],e):e}function u(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function d(e){return e in N?N[e]:N[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function h(e,t){return"number"!=typeof t||R[u(e)]?t:t+"px"}function p(e){var t,i;return M[e]||(t=O.createElement(e),O.body.appendChild(t),i=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==i&&(i="block"),M[e]=i),M[e]}function f(e){return"children"in e?L.call(e.children):k.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function m(e,t){var i,n=e?e.length:0;for(i=0;n>i;i++)this[i]=e[i];this.length=n,this.selector=t||""}function g(e,t,i){for(T in t)i&&(o(t[T])||J(t[T]))?(o(t[T])&&!o(e[T])&&(e[T]={}),J(t[T])&&!J(e[T])&&(e[T]=[]),g(e[T],t[T],i)):t[T]!==S&&(e[T]=t[T])}function v(e,t){return null==t?k(e):k(e).filter(t)}function y(e,t,n,s){return i(t)?t.call(e,n,s):t}function b(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function _(e,t){var i=e.className||"",n=i&&i.baseVal!==S;return t===S?n?i.baseVal:i:void(n?i.baseVal=t:e.className=t)}function w(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?k.parseJSON(e):e):e}catch(t){return e}}function C(e,t){t(e);for(var i=0,n=e.childNodes.length;n>i;i++)C(e.childNodes[i],t)}var S,T,k,E,I,x,P=[],A=P.concat,D=P.filter,L=P.slice,O=e.document,M={},N={},R={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},U=/^\s*<(\w+|!)[^>]*>/,$=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,H=/^(?:body|html)$/i,B=["val","css","html","text","data","width","height","offset"],F=["after","prepend","before","append"],j=O.createElement("table"),z=O.createElement("tr"),W={tr:O.createElement("tbody"),tbody:j,thead:j,tfoot:j,td:z,th:z,"*":O.createElement("div")},V=/complete|loaded|interactive/,q=/^[\w-]*$/,G={},Y=G.toString,X={},Q=O.createElement("div"),K={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},J=Array.isArray||function(e){return e instanceof Array};return X.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var i=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(i)return i.call(e,t);var n,s=e.parentNode,r=!s;return r&&(s=Q).appendChild(e),n=~X.qsa(s,t).indexOf(e),r&&Q.removeChild(e),n},I=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},x=function(e){return D.call(e,function(t,i){return e.indexOf(t)==i})},X.fragment=function(e,t,i){var n,s,r;return $.test(e)&&(n=k(O.createElement(RegExp.$1))),n||(e.replace&&(e=e.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>")),t===S&&(t=U.test(e)&&RegExp.$1),t in W||(t="*"),r=W[t],r.innerHTML=""+e,n=k.each(L.call(r.childNodes),function(){r.removeChild(this)})),o(i)&&(s=k(n),k.each(i,function(e,t){B.indexOf(e)>-1?s[e](t):s.attr(e,t)})),n},X.Z=function(e,t){return new m(e,t)},X.isZ=function(e){return e instanceof X.Z},X.init=function(e,t){var n;if(!e)return X.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&U.test(e))n=X.fragment(e,RegExp.$1,t),e=null;else{if(t!==S)return k(t).find(e);n=X.qsa(O,e)}else{if(i(e))return k(O).ready(e);if(X.isZ(e))return e;if(J(e))n=l(e);else if(r(e))n=[e],e=null;else if(U.test(e))n=X.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==S)return k(t).find(e);n=X.qsa(O,e)}}return X.Z(n,e)},k=function(e,t){return X.init(e,t)},k.extend=function(e){var t,i=L.call(arguments,1);return"boolean"==typeof e&&(t=e,e=i.shift()),i.forEach(function(i){g(e,i,t)}),e},X.qsa=function(e,t){var i,n="#"==t[0],s=!n&&"."==t[0],r=n||s?t.slice(1):t,o=q.test(r);return e.getElementById&&o&&n?(i=e.getElementById(r))?[i]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:L.call(o&&!n&&e.getElementsByClassName?s?e.getElementsByClassName(r):e.getElementsByTagName(t):e.querySelectorAll(t))},k.contains=O.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},k.type=t,k.isFunction=i,k.isWindow=n,k.isArray=J,k.isPlainObject=o,k.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},k.isNumeric=function(e){var t=Number(e),i=typeof e;return null!=e&&"boolean"!=i&&("string"!=i||e.length)&&!isNaN(t)&&isFinite(t)||!1},k.inArray=function(e,t,i){return P.indexOf.call(t,e,i)},k.camelCase=I,k.trim=function(e){return null==e?"":String.prototype.trim.call(e)},k.uuid=0,k.support={},k.expr={},k.noop=function(){},k.map=function(e,t){var i,n,s,r=[];if(a(e))for(n=0;n<e.length;n++)null!=(i=t(e[n],n))&&r.push(i);else for(s in e)null!=(i=t(e[s],s))&&r.push(i);return c(r)},k.each=function(e,t){var i,n;if(a(e)){for(i=0;i<e.length;i++)if(t.call(e[i],i,e[i])===!1)return e}else for(n in e)if(t.call(e[n],n,e[n])===!1)return e;return e},k.grep=function(e,t){return D.call(e,t)},e.JSON&&(k.parseJSON=JSON.parse),k.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){G["[object "+t+"]"]=t.toLowerCase()}),k.fn={constructor:X.Z,length:0,forEach:P.forEach,reduce:P.reduce,push:P.push,sort:P.sort,splice:P.splice,indexOf:P.indexOf,concat:function(){var e,t,i=[];for(e=0;e<arguments.length;e++)t=arguments[e],i[e]=X.isZ(t)?t.toArray():t;return A.apply(X.isZ(this)?this.toArray():this,i)},map:function(e){return k(k.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return k(L.apply(this,arguments))},ready:function(e){return V.test(O.readyState)&&O.body?e(k):O.addEventListener("DOMContentLoaded",function(){e(k)},!1),this},get:function(e){return e===S?L.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return P.every.call(this,function(t,i){return e.call(t,i,t)!==!1}),this},filter:function(e){return i(e)?this.not(this.not(e)):k(D.call(this,function(t){return X.matches(t,e)}))},add:function(e,t){return k(x(this.concat(k(e,t))))},is:function(e){return this.length>0&&X.matches(this[0],e)},not:function(e){var t=[];if(i(e)&&e.call!==S)this.each(function(i){e.call(this,i)||t.push(this)});else{var n="string"==typeof e?this.filter(e):a(e)&&i(e.item)?L.call(e):k(e);this.forEach(function(e){n.indexOf(e)<0&&t.push(e)})}return k(t)},has:function(e){return this.filter(function(){return r(e)?k.contains(this,e):k(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!r(e)?e:k(e)},last:function(){var e=this[this.length-1];return e&&!r(e)?e:k(e)},find:function(e){var t=this;return e?"object"==typeof e?k(e).filter(function(){var e=this;return P.some.call(t,function(t){return k.contains(t,e)})}):1==this.length?k(X.qsa(this[0],e)):this.map(function(){return X.qsa(this,e)}):k()},closest:function(e,t){var i=[],n="object"==typeof e&&k(e);return this.each(function(r,o){for(;o&&!(n?n.indexOf(o)>=0:X.matches(o,e));)o=o!==t&&!s(o)&&o.parentNode;o&&i.indexOf(o)<0&&i.push(o)}),k(i)},parents:function(e){for(var t=[],i=this;i.length>0;)i=k.map(i,function(e){return(e=e.parentNode)&&!s(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return v(t,e)},parent:function(e){return v(x(this.pluck("parentNode")),e)},children:function(e){return v(this.map(function(){return f(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||L.call(this.childNodes)})},siblings:function(e){return v(this.map(function(e,t){return D.call(f(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return k.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=p(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=i(e);if(this[0]&&!t)var n=k(e).get(0),s=n.parentNode||this.length>1;return this.each(function(i){k(this).wrapAll(t?e.call(this,i):s?n.cloneNode(!0):n)})},wrapAll:function(e){if(this[0]){k(this[0]).before(e=k(e));for(var t;(t=e.children()).length;)e=t.first();k(e).append(this)}return this},wrapInner:function(e){var t=i(e);return this.each(function(i){var n=k(this),s=n.contents(),r=t?e.call(this,i):e;s.length?s.wrapAll(r):n.append(r)})},unwrap:function(){return this.parent().each(function(){k(this).replaceWith(k(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=k(this);(e===S?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return k(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return k(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var i=this.innerHTML;k(this).empty().append(y(this,e,t,i))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var i=y(this,e,t,this.textContent);this.textContent=null==i?"":""+i}):0 in this?this.pluck("textContent").join(""):null},attr:function(e,t){var i;return"string"!=typeof e||1 in arguments?this.each(function(i){if(1===this.nodeType)if(r(e))for(T in e)b(this,T,e[T]);else b(this,e,y(this,t,i,this.getAttribute(e)))}):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(e))?i:S},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){b(this,e)},this)})},prop:function(e,t){return e=K[e]||e,1 in arguments?this.each(function(i){this[e]=y(this,t,i,this[e])}):this[0]&&this[0][e]},removeProp:function(e){return e=K[e]||e,this.each(function(){delete this[e]})},data:function(e,t){var i="data-"+e.replace(/([A-Z])/g,"-$1").toLowerCase(),n=1 in arguments?this.attr(i,t):this.attr(i);return null!==n?w(n):S},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each(function(t){this.value=y(this,e,t,this.value)})):this[0]&&(this[0].multiple?k(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var i=k(this),n=y(this,t,e,i.offset()),s=i.offsetParent().offset(),r={top:n.top-s.top,left:n.left-s.left};"static"==i.css("position")&&(r.position="relative"),i.css(r)});if(!this.length)return null;if(O.documentElement!==this[0]&&!k.contains(O.documentElement,this[0]))return{top:0,left:0};var i=this[0].getBoundingClientRect();return{left:i.left+e.pageXOffset,top:i.top+e.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}},css:function(e,i){if(arguments.length<2){var n=this[0];if("string"==typeof e){if(!n)return;return n.style[I(e)]||getComputedStyle(n,"").getPropertyValue(e)}if(J(e)){if(!n)return;var s={},r=getComputedStyle(n,"");return k.each(e,function(e,t){s[t]=n.style[I(t)]||r.getPropertyValue(t)}),s}}var o="";if("string"==t(e))i||0===i?o=u(e)+":"+h(e,i):this.each(function(){this.style.removeProperty(u(e))});else for(T in e)e[T]||0===e[T]?o+=u(T)+":"+h(T,e[T])+";":this.each(function(){this.style.removeProperty(u(T))});return this.each(function(){this.style.cssText+=";"+o})},index:function(e){return e?this.indexOf(k(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&P.some.call(this,function(e){return this.test(_(e))},d(e))},addClass:function(e){return e?this.each(function(t){if("className"in this){E=[];var i=_(this);y(this,e,t,i).split(/\s+/g).forEach(function(e){k(this).hasClass(e)||E.push(e)},this),E.length&&_(this,i+(i?" ":"")+E.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===S)return _(this,"");E=_(this),y(this,e,t,E).split(/\s+/g).forEach(function(e){E=E.replace(d(e)," ")}),_(this,E.trim())}})},toggleClass:function(e,t){return e?this.each(function(i){var n=k(this);y(this,e,i,_(this)).split(/\s+/g).forEach(function(e){(t===S?!n.hasClass(e):t)?n.addClass(e):n.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===S?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===S?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),i=this.offset(),n=H.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(k(e).css("margin-top"))||0,i.left-=parseFloat(k(e).css("margin-left"))||0,n.top+=parseFloat(k(t[0]).css("border-top-width"))||0,n.left+=parseFloat(k(t[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||O.body;e&&!H.test(e.nodeName)&&"static"==k(e).css("position");)e=e.offsetParent;return e})}},k.fn.detach=k.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});k.fn[e]=function(i){var r,o=this[0];return i===S?n(o)?o["inner"+t]:s(o)?o.documentElement["scroll"+t]:(r=this.offset())&&r[e]:this.each(function(t){o=k(this),o.css(e,y(this,i,t,o[e]()))})}}),F.forEach(function(i,n){var s=n%2;k.fn[i]=function(){var i,r,o=k.map(arguments,function(e){var n=[];return i=t(e),"array"==i?(e.forEach(function(e){return e.nodeType!==S?n.push(e):k.zepto.isZ(e)?n=n.concat(e.get()):void(n=n.concat(X.fragment(e)))}),n):"object"==i||null==e?e:X.fragment(e)}),a=this.length>1;return o.length<1?this:this.each(function(t,i){r=s?i:i.parentNode,i=0==n?i.nextSibling:1==n?i.firstChild:2==n?i:null;var l=k.contains(O.documentElement,r);o.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!r)return k(t).remove();r.insertBefore(t,i),l&&C(t,function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var i=t.ownerDocument?t.ownerDocument.defaultView:e;i.eval.call(i,t.innerHTML)}})})})},k.fn[s?i+"To":"insert"+(n?"Before":"After")]=function(e){return k(e)[i](this),this}}),X.Z.prototype=m.prototype=k.fn,X.uniq=x,X.deserializeValue=w,k.zepto=X,k}();return function(t){function i(e){return e._zid||(e._zid=p++)}function n(e,t,n,o){if(t=s(t),t.ns)var a=r(t.ns);return(v[i(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||a.test(e.ns))&&(!n||i(e.fn)===i(n))&&(!o||e.sel==o)})}function s(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function r(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function o(e,t){return e.del&&!b&&e.e in _||!!t}function a(e){return w[e]||b&&_[e]||e}function l(e,n,r,l,c,d,p){var f=i(e),m=v[f]||(v[f]=[]);n.split(/\s/).forEach(function(i){if("ready"==i)return t(document).ready(r);var n=s(i);n.fn=r,n.sel=c,n.e in w&&(r=function(e){var i=e.relatedTarget;return!i||i!==this&&!t.contains(this,i)?n.fn.apply(this,arguments):void 0}),n.del=d;var f=d||r;n.proxy=function(t){if(t=u(t),!t.isImmediatePropagationStopped()){t.data=l;var i=f.apply(e,t._args==h?[t]:[t].concat(t._args));return i===!1&&(t.preventDefault(),t.stopPropagation()),i}},n.i=m.length,m.push(n),"addEventListener"in e&&e.addEventListener(a(n.e),n.proxy,o(n,p))})}function c(e,t,s,r,l){var c=i(e);(t||"").split(/\s/).forEach(function(t){n(e,t,s,r).forEach(function(t){delete v[c][t.i],"removeEventListener"in e&&e.removeEventListener(a(t.e),t.proxy,o(t,l))})})}function u(e,i){return!i&&e.isDefaultPrevented||(i||(i=e),t.each(k,function(t,n){var s=i[t];e[t]=function(){return this[n]=C,s&&s.apply(i,arguments)},e[n]=S}),e.timeStamp||(e.timeStamp=Date.now()),(i.defaultPrevented!==h?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=C)),e}function d(e){var t,i={originalEvent:e};for(t in e)T.test(t)||e[t]===h||(i[t]=e[t]);return u(i,e)}var h,p=1,f=Array.prototype.slice,m=t.isFunction,g=function(e){return"string"==typeof e},v={},y={},b="onfocusin"in e,_={focus:"focusin",blur:"focusout"},w={mouseenter:"mouseover",mouseleave:"mouseout"};y.click=y.mousedown=y.mouseup=y.mousemove="MouseEvents",t.event={add:l,remove:c},t.proxy=function(e,n){var s=2 in arguments&&f.call(arguments,2);if(m(e)){var r=function(){return e.apply(n,s?s.concat(f.call(arguments)):arguments)};return r._zid=i(e),r}if(g(n))return s?(s.unshift(e[n],e),t.proxy.apply(null,s)):t.proxy(e[n],e);throw new TypeError("expected function")},t.fn.bind=function(e,t,i){return this.on(e,t,i)},t.fn.unbind=function(e,t){return this.off(e,t)},t.fn.one=function(e,t,i,n){return this.on(e,t,i,n,1)};var C=function(){return!0},S=function(){return!1},T=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,k={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(e,t,i){return this.on(t,e,i)},t.fn.undelegate=function(e,t,i){return this.off(t,e,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(e,i,n,s,r){var o,a,u=this;return e&&!g(e)?(t.each(e,function(e,t){u.on(e,i,n,t,r)}),u):(g(i)||m(s)||s===!1||(s=n,n=i,i=h),s!==h&&n!==!1||(s=n,n=h),s===!1&&(s=S),u.each(function(u,h){r&&(o=function(e){return c(h,e.type,s),s.apply(this,arguments)}),i&&(a=function(e){var n,r=t(e.target).closest(i,h).get(0);return r&&r!==h?(n=t.extend(d(e),{currentTarget:r,liveFired:h}),(o||s).apply(r,[n].concat(f.call(arguments,1)))):void 0}),l(h,e,s,n,i,a||o)}))},t.fn.off=function(e,i,n){var s=this;return e&&!g(e)?(t.each(e,function(e,t){s.off(e,i,t)}),s):(g(i)||m(n)||n===!1||(n=i,i=h),n===!1&&(n=S),s.each(function(){c(this,e,n,i)}))},t.fn.trigger=function(e,i){return e=g(e)||t.isPlainObject(e)?t.Event(e):u(e),e._args=i,this.each(function(){e.type in _&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)})},t.fn.triggerHandler=function(e,i){var s,r;return this.each(function(o,a){s=d(g(e)?t.Event(e):e),s._args=i,s.target=a,t.each(n(a,e.type||e),function(e,t){return r=t.proxy(s),s.isImmediatePropagationStopped()?!1:void 0})}),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(e,t){g(e)||(t=e,e=t.type);var i=document.createEvent(y[e]||"Events"),n=!0;if(t)for(var s in t)"bubbles"==s?n=!!t[s]:i[s]=t[s];return i.initEvent(e,n,!0),u(i)}}(t),function(e){var t,i=[];e.fn.remove=function(){return this.each(function(){this.parentNode&&("IMG"===this.tagName&&(i.push(this),this.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",t&&clearTimeout(t),t=setTimeout(function(){i=[]},6e4)),this.parentNode.removeChild(this))})}}(t),function(e){function t(t,n){var l=t[a],c=l&&s[l];if(void 0===n)return c||i(t);if(c){if(n in c)return c[n];var u=o(n);if(u in c)return c[u]}return r.call(e(t),n)}function i(t,i,r){var l=t[a]||(t[a]=++e.uuid),c=s[l]||(s[l]=n(t));return void 0!==i&&(c[o(i)]=r),c}function n(t){var i={};return e.each(t.attributes||l,function(t,n){0==n.name.indexOf("data-")&&(i[o(n.name.replace("data-",""))]=e.zepto.deserializeValue(n.value))}),i}var s={},r=e.fn.data,o=e.camelCase,a=e.expando="Zepto"+ +new Date,l=[];e.fn.data=function(n,s){return void 0===s?e.isPlainObject(n)?this.each(function(t,s){e.each(n,function(e,t){i(s,e,t)})}):0 in this?t(this[0],n):void 0:this.each(function(){i(this,n,s)})},e.data=function(t,i,n){return e(t).data(i,n)},e.hasData=function(t){var i=t[a],n=i&&s[i];return!!n&&!e.isEmptyObject(n)},e.fn.removeData=function(t){return"string"==typeof t&&(t=t.split(/\s+/)),this.each(function(){var i=this[a],n=i&&s[i];n&&e.each(t||n,function(e){delete n[t?o(this):e]})})},["remove","empty"].forEach(function(t){var i=e.fn[t];e.fn[t]=function(){var e=this.find("*");return"remove"===t&&(e=e.add(this)),e.removeData(),i.call(this)}})}(t),t}(t)}(window)},function(e,t){"use strict";e.exports={element:null}},function(e,t,i){"use strict";function n(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var s=i(3);e.exports={isArray:null,isFunction:null,isObject:null,bind:null,each:null,map:null,mixin:null,isMsie:function(e){if(void 0===e&&(e=navigator.userAgent),/(msie|trident)/i.test(e)){var t=e.match(/(msie |rv:)(\d+(.\d+)?)/i);if(t)return t[2]}return!1},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isNumber:function(e){return"number"==typeof e},toStr:function(e){return void 0===e||null===e?"":e+""},cloneDeep:function(e){var t=this.mixin({},e),i=this;return this.each(t,function(e,n){e&&(i.isArray(e)?t[n]=[].concat(e):i.isObject(e)&&(t[n]=i.cloneDeep(e)))}),t},error:function(e){throw new Error(e)},every:function(e,t){var i=!0;return e?(this.each(e,function(n,s){return(i=t.call(null,n,s,e))?void 0:!1}),!!i):i},any:function(e,t){var i=!1;return e?(this.each(e,function(n,s){return t.call(null,n,s,e)?(i=!0,!1):void 0}),i):i},getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(e){if(this.isFunction(e))return e;var t=s.element(e);return"SCRIPT"===t.prop("tagName")?function(){return t.text()}:function(){return String(e)}},defer:function(e){setTimeout(e,0)},noop:function(){},formatPrefix:function(e,t){return t?"":e+"-"},className:function(e,t,i){return(i?"":".")+e+t},escapeHighlightedString:function(e,t,i){t=t||"<em>";var s=document.createElement("div");s.appendChild(document.createTextNode(t)),i=i||"</em>";var r=document.createElement("div");r.appendChild(document.createTextNode(i));var o=document.createElement("div");return o.appendChild(document.createTextNode(e)),o.innerHTML.replace(RegExp(n(s.innerHTML),"g"),t).replace(RegExp(n(r.innerHTML),"g"),i)}}},function(e,t,i){"use strict";function n(e){var t,i;if(e=e||{},e.input||l.error("missing input"),this.isActivated=!1,this.debug=!!e.debug,this.autoselect=!!e.autoselect,this.autoselectOnBlur=!!e.autoselectOnBlur,this.openOnFocus=!!e.openOnFocus,this.minLength=l.isNumber(e.minLength)?e.minLength:1,this.autoWidth=void 0===e.autoWidth||!!e.autoWidth,this.clearOnSelected=!!e.clearOnSelected,e.hint=!!e.hint,e.hint&&e.appendTo)throw new Error("[autocomplete.js] hint and appendTo options can't be used at the same time");this.css=e.css=l.mixin({},f,e.appendTo?f.appendTo:{}),this.cssClasses=e.cssClasses=l.mixin({},f.defaultClasses,e.cssClasses||{}),this.cssClasses.prefix=e.cssClasses.formattedPrefix=l.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),this.listboxId=e.listboxId=[this.cssClasses.root,"listbox",l.getUniqueId()].join("-");var r=s(e);this.$node=r.wrapper;var o=this.$input=r.input;t=r.menu,i=r.hint,e.dropdownMenuContainer&&c.element(e.dropdownMenuContainer).css("position","relative").append(t.css("top","0")),o.on("blur.aa",function(e){var i=document.activeElement;l.isMsie()&&(t[0]===i||t[0].contains(i))&&(e.preventDefault(),e.stopImmediatePropagation(),l.defer(function(){o.focus()}))}),t.on("mousedown.aa",function(e){e.preventDefault()}),this.eventBus=e.eventBus||new u({el:o}),this.dropdown=new n.Dropdown({appendTo:e.appendTo,wrapper:this.$node,menu:t,datasets:e.datasets,templates:e.templates,cssClasses:e.cssClasses,minLength:this.minLength}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onSync("shown",this._onShown,this).onSync("empty",this._onEmpty,this).onSync("redrawn",this._onRedrawn,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new n.Input({input:o,hint:i}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._bindKeyboardShortcuts(e),this._setLanguageDirection()}function s(e){var t,i,n,s;t=c.element(e.input),i=c.element(p.wrapper.replace("%ROOT%",e.cssClasses.root)).css(e.css.wrapper),e.appendTo||"block"!==t.css("display")||"table"!==t.parent().css("display")||i.css("display","table-cell");var o=p.dropdown.replace("%PREFIX%",e.cssClasses.prefix).replace("%DROPDOWN_MENU%",e.cssClasses.dropdownMenu);n=c.element(o).css(e.css.dropdown).attr({role:"listbox",id:e.listboxId}),e.templates&&e.templates.dropdownMenu&&n.html(l.templatify(e.templates.dropdownMenu)()),s=t.clone().css(e.css.hint).css(r(t)),s.val("").addClass(l.className(e.cssClasses.prefix,e.cssClasses.hint,!0)).removeAttr("id name placeholder required").prop("readonly",!0).attr({"aria-hidden":"true",autocomplete:"off",spellcheck:"false",tabindex:-1}),s.removeData&&s.removeData(),t.data(a,{"aria-autocomplete":t.attr("aria-autocomplete"),"aria-expanded":t.attr("aria-expanded"),"aria-owns":t.attr("aria-owns"),autocomplete:t.attr("autocomplete"),dir:t.attr("dir"),role:t.attr("role"),spellcheck:t.attr("spellcheck"),style:t.attr("style"),type:t.attr("type")}),t.addClass(l.className(e.cssClasses.prefix,e.cssClasses.input,!0)).attr({autocomplete:"off",spellcheck:!1,role:"combobox","aria-autocomplete":e.datasets&&e.datasets[0]&&e.datasets[0].displayKey?"both":"list","aria-expanded":"false","aria-label":e.ariaLabel,"aria-owns":e.listboxId}).css(e.hint?e.css.input:e.css.inputWithNoHint);try{t.attr("dir")||t.attr("dir","auto")}catch(e){}return i=e.appendTo?i.appendTo(c.element(e.appendTo).eq(0)).eq(0):t.wrap(i).parent(),i.prepend(e.hint?s:null).append(n),{wrapper:i,input:t,hint:s,menu:n}}function r(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function o(e,t){var i=e.find(l.className(t.prefix,t.input));l.each(i.data(a),function(e,t){void 0===e?i.removeAttr(t):i.attr(t,e)}),i.detach().removeClass(l.className(t.prefix,t.input,!0)).insertAfter(e),i.removeData&&i.removeData(a),e.remove()}var a="aaAttrs",l=i(4),c=i(3),u=i(6),d=i(7),h=i(16),p=i(18),f=i(19);l.mixin(n.prototype,{_bindKeyboardShortcuts:function(e){if(e.keyboardShortcuts){var t=this.$input,i=[];l.each(e.keyboardShortcuts,function(e){"string"==typeof e&&(e=e.toUpperCase().charCodeAt(0)),i.push(e)}),c.element(document).keydown(function(e){var n=e.target||e.srcElement,s=n.tagName;if(!n.isContentEditable&&"INPUT"!==s&&"SELECT"!==s&&"TEXTAREA"!==s){var r=e.which||e.keyCode;-1!==i.indexOf(r)&&(t.focus(),e.stopPropagation(),e.preventDefault())}})}},_onSuggestionClicked:function(e,t){var i;(i=this.dropdown.getDatumForSuggestion(t))&&this._select(i)},_onCursorMoved:function(e,t){var i=this.dropdown.getDatumForCursor(),n=this.dropdown.getCurrentCursor().attr("id");this.input.setActiveDescendant(n),i&&(t&&this.input.setInputValue(i.value,!0),this.eventBus.trigger("cursorchanged",i.raw,i.datasetName))},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint(),this.eventBus.trigger("cursorremoved")},_onDatasetRendered:function(){this._updateHint(),this.eventBus.trigger("updated")},_onOpened:function(){this._updateHint(),this.input.expand(),this.eventBus.trigger("opened")},_onEmpty:function(){this.eventBus.trigger("empty")},_onRedrawn:function(){this.$node.css("top","0px"),this.$node.css("left","0px");var e=this.$input[0].getBoundingClientRect();this.autoWidth&&this.$node.css("width",e.width+"px");var t=this.$node[0].getBoundingClientRect(),i=e.bottom-t.top;this.$node.css("top",i+"px");var n=e.left-t.left;this.$node.css("left",n+"px"),this.eventBus.trigger("redrawn")},_onShown:function(){this.eventBus.trigger("shown"),this.autoselect&&this.dropdown.cursorTopSuggestion()},_onClosed:function(){this.input.clearHint(),this.input.removeActiveDescendant(),this.input.collapse(),this.eventBus.trigger("closed")},_onFocused:function(){if(this.isActivated=!0,this.openOnFocus){var e=this.input.getQuery();e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open()}},_onBlurred:function(){var e,t;e=this.dropdown.getDatumForCursor(),t=this.dropdown.getDatumForTopSuggestion(),this.debug||(this.autoselectOnBlur&&e?this._select(e):this.autoselectOnBlur&&t?this._select(t):(this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()))},_onEnterKeyed:function(e,t){var i,n;i=this.dropdown.getDatumForCursor(),n=this.dropdown.getDatumForTopSuggestion(),i?(this._select(i),t.preventDefault()):this.autoselect&&n&&(this._select(n),t.preventDefault())},_onTabKeyed:function(e,t){var i;(i=this.dropdown.getDatumForCursor())?(this._select(i),t.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,t){this.input.clearHintIfInvalid(),t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){
this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var e=this.input.getLanguageDirection();this.dir!==e&&(this.dir=e,this.$node.css("direction",e),this.dropdown.setLanguageDirection(e))},_updateHint:function(){var e,t,i,n,s,r;e=this.dropdown.getDatumForTopSuggestion(),e&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(t=this.input.getInputValue(),i=d.normalizeQuery(t),n=l.escapeRegExChars(i),s=new RegExp("^(?:"+n+")(.+$)","i"),r=s.exec(e.value),r?this.input.setHint(t+r[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(e){var t,i,n,s;t=this.input.getHint(),i=this.input.getQuery(),n=e||this.input.isCursorAtEnd(),t&&i!==t&&n&&(s=this.dropdown.getDatumForTopSuggestion(),s&&this.input.setInputValue(s.value),this.eventBus.trigger("autocompleted",s.raw,s.datasetName))},_select:function(e){void 0!==e.value&&this.input.setQuery(e.value),this.clearOnSelected?this.setVal(""):this.input.setInputValue(e.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",e.raw,e.datasetName).isDefaultPrevented()===!1&&(this.dropdown.close(),l.defer(l.bind(this.dropdown.empty,this.dropdown)))},open:function(){if(!this.isActivated){var e=this.input.getInputValue();e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty()}this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(e){e=l.toStr(e),this.isActivated?this.input.setInputValue(e):(this.input.setQuery(e),this.input.setInputValue(e,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),o(this.$node,this.cssClasses),this.$node=null},getWrapper:function(){return this.dropdown.$container[0]}}),n.Dropdown=h,n.Input=d,n.sources=i(20),e.exports=n},function(e,t,i){"use strict";function n(e){e&&e.el||s.error("EventBus initialized without el"),this.$el=r.element(e.el)}var s=i(4),r=i(3);s.mixin(n.prototype,{trigger:function(e){var t=[].slice.call(arguments,1),i=s.Event("autocomplete:"+e);return this.$el.trigger(i,t),i}}),e.exports=n},function(e,t,i){"use strict";function n(e){var t,i,n,r,o=this;e=e||{},e.input||l.error("input is missing"),t=l.bind(this._onBlur,this),i=l.bind(this._onFocus,this),n=l.bind(this._onKeydown,this),r=l.bind(this._onInput,this),this.$hint=c.element(e.hint),this.$input=c.element(e.input).on("blur.aa",t).on("focus.aa",i).on("keydown.aa",n),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=l.noop),l.isMsie()?this.$input.on("keydown.aa keypress.aa cut.aa paste.aa",function(e){a[e.which||e.keyCode]||l.defer(l.bind(o._onInput,o,e))}):this.$input.on("input.aa",r),this.query=this.$input.val(),this.$overflowHelper=s(this.$input)}function s(e){return c.element('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function r(e,t){return n.normalizeQuery(e)===n.normalizeQuery(t)}function o(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var a;a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};var l=i(4),c=i(3),u=i(8);n.normalizeQuery=function(e){return(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},l.mixin(n.prototype,u,{_onBlur:function(){this.resetInputValue(),this.$input.removeAttr("aria-activedescendant"),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(e){var t=a[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(e,t){var i,n,s;switch(e){case"tab":n=this.getHint(),s=this.getInputValue(),i=n&&n!==s&&!o(t);break;case"up":case"down":i=!o(t);break;default:i=!1}i&&t.preventDefault()},_shouldTrigger:function(e,t){var i;switch(e){case"tab":i=!o(t);break;default:i=!0}return i},_checkInputValue:function(){var e,t,i;e=this.getInputValue(),t=r(e,this.query),i=!(!t||!this.query)&&this.query.length!==e.length,this.query=e,t?i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){void 0===e&&(e=this.query),this.$input.val(e),t?this.clearHint():this._checkInputValue()},expand:function(){this.$input.attr("aria-expanded","true")},collapse:function(){this.$input.attr("aria-expanded","false")},setActiveDescendant:function(e){this.$input.attr("aria-activedescendant",e)},removeActiveDescendant:function(){this.$input.removeAttr("aria-activedescendant")},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,i,n;e=this.getInputValue(),t=this.getHint(),i=e!==t&&0===t.indexOf(e),(n=""!==e&&i&&!this.hasOverflow())||this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,t,i;return e=this.$input.val().length,t=this.$input[0].selectionStart,l.isNumber(t)?t===e:!document.selection||(i=document.selection.createRange(),i.moveStart("character",-e),e===i.text.length)},destroy:function(){this.$hint.off(".aa"),this.$input.off(".aa"),this.$hint=this.$input=this.$overflowHelper=null}}),e.exports=n},function(e,t,i){"use strict";function n(e,t,i,n){var s;if(!i)return this;for(t=t.split(d),i=n?c(i,n):i,this._callbacks=this._callbacks||{};s=t.shift();)this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][e].push(i);return this}function s(e,t,i){return n.call(this,"async",e,t,i)}function r(e,t,i){return n.call(this,"sync",e,t,i)}function o(e){var t;if(!this._callbacks)return this;for(e=e.split(d);t=e.shift();)delete this._callbacks[t];return this}function a(e){var t,i,n,s,r;if(!this._callbacks)return this;for(e=e.split(d),n=[].slice.call(arguments,1);(t=e.shift())&&(i=this._callbacks[t]);)s=l(i.sync,this,[t].concat(n)),r=l(i.async,this,[t].concat(n)),s()&&u(r);return this}function l(e,t,i){function n(){for(var n,s=0,r=e.length;!n&&r>s;s+=1)n=e[s].apply(t,i)===!1;return!n}return n}function c(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var u=i(9),d=/\s+/;e.exports={onSync:r,onAsync:s,off:o,trigger:a}},function(e,t,i){"use strict";function n(){a&&l&&(a=!1,l.length?h=l.concat(h):d=-1,h.length&&s())}function s(){if(!a){p=!1,a=!0;for(var e=h.length,t=setTimeout(n);e;){for(l=h,h=[];l&&++d<e;)l[d].run();d=-1,e=h.length}l=null,d=-1,a=!1,clearTimeout(t)}}function r(e,t){this.fun=e,this.array=t}function o(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new r(e,t)),p||a||(p=!0,c())}for(var a,l,c,u=[i(10),i(12),i(13),i(14),i(15)],d=-1,h=[],p=!1,f=-1,m=u.length;++f<m;)if(u[f]&&u[f].test&&u[f].test()){c=u[f].install(s);break}r.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}},e.exports=o},function(e,t,i){(function(e){"use strict";t.test=function(){return void 0!==e&&!e.browser},t.install=function(t){return function(){e.nextTick(t)}}}).call(t,i(11))},function(e,t){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function s(e){if(u===setTimeout)return setTimeout(e,0);if((u===i||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function r(e){if(d===clearTimeout)return clearTimeout(e);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function o(){m&&p&&(m=!1,p.length?f=p.concat(f):g=-1,f.length&&a())}function a(){if(!m){var e=s(o);m=!0;for(var t=f.length;t;){for(p=f,f=[];++g<t;)p&&p[g].run();g=-1,t=f.length}p=null,m=!1,r(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var u,d,h=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:i}catch(e){u=i}try{d="function"==typeof clearTimeout?clearTimeout:n}catch(e){d=n}}();var p,f=[],m=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];f.push(new l(e,t)),1!==f.length||m||s(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t){(function(e){"use strict";var i=e.MutationObserver||e.WebKitMutationObserver;t.test=function(){return i},t.install=function(t){var n=0,s=new i(t),r=e.document.createTextNode("");return s.observe(r,{characterData:!0}),function(){r.data=n=++n%2}}}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";t.test=function(){return!e.setImmediate&&void 0!==e.MessageChannel},t.install=function(t){var i=new e.MessageChannel;return i.port1.onmessage=t,function(){i.port2.postMessage(0)}}}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";t.test=function(){return"document"in e&&"onreadystatechange"in e.document.createElement("script")},t.install=function(t){return function(){var i=e.document.createElement("script");return i.onreadystatechange=function(){t(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},e.document.documentElement.appendChild(i),t}}}).call(t,function(){return this}())},function(e,t){"use strict";t.test=function(){return!0},t.install=function(e){return function(){setTimeout(e,0)}}},function(e,t,i){"use strict";function n(e){var t,i,n,a=this;e=e||{},e.menu||r.error("menu is required"),r.isArray(e.datasets)||r.isObject(e.datasets)||r.error("1 or more datasets required"),e.datasets||r.error("datasets is required"),this.isOpen=!1,this.isEmpty=!0,this.minLength=e.minLength||0,this.templates={},this.appendTo=e.appendTo||!1,this.css=r.mixin({},c,e.appendTo?c.appendTo:{}),this.cssClasses=e.cssClasses=r.mixin({},c.defaultClasses,e.cssClasses||{}),this.cssClasses.prefix=e.cssClasses.formattedPrefix||r.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),t=r.bind(this._onSuggestionClick,this),i=r.bind(this._onSuggestionMouseEnter,this),n=r.bind(this._onSuggestionMouseLeave,this);var l=r.className(this.cssClasses.prefix,this.cssClasses.suggestion);this.$menu=o.element(e.menu).on("mouseenter.aa",l,i).on("mouseleave.aa",l,n).on("click.aa",l,t),this.$container=e.appendTo?e.wrapper:this.$menu,e.templates&&e.templates.header&&(this.templates.header=r.templatify(e.templates.header),this.$menu.prepend(this.templates.header())),e.templates&&e.templates.empty&&(this.templates.empty=r.templatify(e.templates.empty),this.$empty=o.element('<div class="'+r.className(this.cssClasses.prefix,this.cssClasses.empty,!0)+'"></div>'),this.$menu.append(this.$empty),this.$empty.hide()),this.datasets=r.map(e.datasets,function(t){return s(a.$menu,t,e.cssClasses)}),r.each(this.datasets,function(e){var t=e.getRoot();t&&0===t.parent().length&&a.$menu.append(t),e.onSync("rendered",a._onRendered,a)}),e.templates&&e.templates.footer&&(this.templates.footer=r.templatify(e.templates.footer),this.$menu.append(this.templates.footer()));var u=this;o.element(window).resize(function(){u._redraw()})}function s(e,t,i){return new n.Dataset(r.mixin({$menu:e,cssClasses:i},t))}var r=i(4),o=i(3),a=i(8),l=i(17),c=i(19);r.mixin(n.prototype,a,{_onSuggestionClick:function(e){this.trigger("suggestionClicked",o.element(e.currentTarget))},_onSuggestionMouseEnter:function(e){var t=o.element(e.currentTarget);if(!t.hasClass(r.className(this.cssClasses.prefix,this.cssClasses.cursor,!0))){this._removeCursor();var i=this;setTimeout(function(){i._setCursor(t,!1)},0)}},_onSuggestionMouseLeave:function(e){e.relatedTarget&&o.element(e.relatedTarget).closest("."+r.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).length>0||(this._removeCursor(),this.trigger("cursorRemoved"))},_onRendered:function(e,t){function i(e){return e.isEmpty()}function n(e){return e.templates&&e.templates.empty}if(this.isEmpty=r.every(this.datasets,i),this.isEmpty)if(t.length>=this.minLength&&this.trigger("empty"),this.$empty)if(t.length<this.minLength)this._hide();else{var s=this.templates.empty({query:this.datasets[0]&&this.datasets[0].query});this.$empty.html(s),this.$empty.show(),this._show()}else r.any(this.datasets,n)?t.length<this.minLength?this._hide():this._show():this._hide();else this.isOpen&&(this.$empty&&(this.$empty.empty(),this.$empty.hide()),t.length>=this.minLength?this._show():this._hide());this.trigger("datasetRendered")},_hide:function(){this.$container.hide()},_show:function(){this.$container.css("display","block"),this._redraw(),this.trigger("shown")},_redraw:function(){this.isOpen&&this.appendTo&&this.trigger("redrawn")},_getSuggestions:function(){return this.$menu.find(r.className(this.cssClasses.prefix,this.cssClasses.suggestion))},_getCursor:function(){return this.$menu.find(r.className(this.cssClasses.prefix,this.cssClasses.cursor)).first()},_setCursor:function(e,t){e.first().addClass(r.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).attr("aria-selected","true"),this.trigger("cursorMoved",t)},_removeCursor:function(){this._getCursor().removeClass(r.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).removeAttr("aria-selected")},_moveCursor:function(e){var t,i,n,s;if(this.isOpen){if(i=this._getCursor(),t=this._getSuggestions(),this._removeCursor(),n=t.index(i)+e,-1===(n=(n+1)%(t.length+1)-1))return void this.trigger("cursorRemoved");-1>n&&(n=t.length-1),this._setCursor(s=t.eq(n),!0),this._ensureVisible(s)}},_ensureVisible:function(e){var t,i,n,s;t=e.position().top,i=t+e.height()+parseInt(e.css("margin-top"),10)+parseInt(e.css("margin-bottom"),10),n=this.$menu.scrollTop(),s=this.$menu.height()+parseInt(this.$menu.css("padding-top"),10)+parseInt(this.$menu.css("padding-bottom"),10),0>t?this.$menu.scrollTop(n+t):i>s&&this.$menu.scrollTop(n+(i-s))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,this.isEmpty||this._show(),this.trigger("opened"))},setLanguageDirection:function(e){this.$menu.css("ltr"===e?this.css.ltr:this.css.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(e){var t=null;return e.length&&(t={raw:l.extractDatum(e),value:l.extractValue(e),datasetName:l.extractDatasetName(e)}),t},getCurrentCursor:function(){return this._getCursor().first()},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},cursorTopSuggestion:function(){this._setCursor(this._getSuggestions().first(),!1)},update:function(e){function t(t){t.update(e)}r.each(this.datasets,t)},empty:function(){function e(e){e.clear()}r.each(this.datasets,e),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function e(e){e.destroy()}this.$menu.off(".aa"),this.$menu=null,r.each(this.datasets,e)}}),n.Dataset=l,e.exports=n},function(e,t,i){"use strict";function n(e){e=e||{},e.templates=e.templates||{},e.source||u.error("missing source"),e.name&&!o(e.name)&&u.error("invalid dataset name: "+e.name),this.query=null,this._isEmpty=!0,this.highlight=!!e.highlight,this.name=void 0===e.name||null===e.name?u.getUniqueId():e.name,this.source=e.source,this.displayFn=s(e.display||e.displayKey),this.debounce=e.debounce,this.templates=r(e.templates,this.displayFn),this.css=u.mixin({},p,e.appendTo?p.appendTo:{}),this.cssClasses=e.cssClasses=u.mixin({},p.defaultClasses,e.cssClasses||{}),this.cssClasses.prefix=e.cssClasses.formattedPrefix||u.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix);var t=u.className(this.cssClasses.prefix,this.cssClasses.dataset);this.$el=e.$menu&&e.$menu.find(t+"-"+this.name).length>0?d.element(e.$menu.find(t+"-"+this.name)[0]):d.element(h.dataset.replace("%CLASS%",this.name).replace("%PREFIX%",this.cssClasses.prefix).replace("%DATASET%",this.cssClasses.dataset)),this.$menu=e.$menu,this.clearCachedSuggestions()}function s(e){function t(t){return t[e]}return e=e||"value",u.isFunction(e)?e:t}function r(e,t){function i(e){return"<p>"+t(e)+"</p>"}return{empty:e.empty&&u.templatify(e.empty),header:e.header&&u.templatify(e.header),footer:e.footer&&u.templatify(e.footer),suggestion:e.suggestion||i}}function o(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var a="aaDataset",l="aaValue",c="aaDatum",u=i(4),d=i(3),h=i(18),p=i(19),f=i(8);n.extractDatasetName=function(e){return d.element(e).data(a)},n.extractValue=function(e){return d.element(e).data(l)},n.extractDatum=function(e){var t=d.element(e).data(c);return"string"==typeof t&&(t=JSON.parse(t)),t},u.mixin(n.prototype,f,{_render:function(e,t){function i(){var t=[].slice.call(arguments,0);return t=[{query:e,isEmpty:!0}].concat(t),p.templates.empty.apply(this,t)}function n(){function e(e){var t,i=h.suggestion.replace("%PREFIX%",r.cssClasses.prefix).replace("%SUGGESTION%",r.cssClasses.suggestion);return t=d.element(i).attr({role:"option",id:["option",Math.floor(1e8*Math.random())].join("-")}).append(p.templates.suggestion.apply(this,[e].concat(s))),t.data(a,p.name),t.data(l,p.displayFn(e)||void 0),t.data(c,JSON.stringify(e)),t.children().each(function(){d.element(this).css(r.css.suggestionChild)}),t}var i,n,s=[].slice.call(arguments,0),r=this,o=h.suggestions.replace("%PREFIX%",this.cssClasses.prefix).replace("%SUGGESTIONS%",this.cssClasses.suggestions);return i=d.element(o).css(this.css.suggestions),n=u.map(t,e),i.append.apply(i,n),i}function s(){var t=[].slice.call(arguments,0);return t=[{query:e,isEmpty:!o}].concat(t),p.templates.header.apply(this,t)}function r(){var t=[].slice.call(arguments,0);return t=[{query:e,isEmpty:!o}].concat(t),p.templates.footer.apply(this,t)}if(this.$el){var o,p=this,f=[].slice.call(arguments,2);this.$el.empty(),o=t&&t.length,this._isEmpty=!o,!o&&this.templates.empty?this.$el.html(i.apply(this,f)).prepend(p.templates.header?s.apply(this,f):null).append(p.templates.footer?r.apply(this,f):null):o&&this.$el.html(n.apply(this,f)).prepend(p.templates.header?s.apply(this,f):null).append(p.templates.footer?r.apply(this,f):null),this.$menu&&this.$menu.addClass(this.cssClasses.prefix+(o?"with":"without")+"-"+this.name).removeClass(this.cssClasses.prefix+(o?"without":"with")+"-"+this.name),this.trigger("rendered",e)}},getRoot:function(){return this.$el},update:function(e){function t(t){if(!this.canceled&&e===this.query){var i=[].slice.call(arguments,1);this.cacheSuggestions(e,t,i),this._render.apply(this,[e,t].concat(i))}}if(this.query=e,this.canceled=!1,this.shouldFetchFromCache(e))t.apply(this,[this.cachedSuggestions].concat(this.cachedRenderExtraArgs));else{var i=this,n=function(){i.canceled||i.source(e,t.bind(i))};if(this.debounce){var s=function(){i.debounceTimeout=null,n()};clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(s,this.debounce)}else n()}},cacheSuggestions:function(e,t,i){this.cachedQuery=e,this.cachedSuggestions=t,this.cachedRenderExtraArgs=i},shouldFetchFromCache:function(e){return this.cachedQuery===e&&this.cachedSuggestions&&this.cachedSuggestions.length},clearCachedSuggestions:function(){delete this.cachedQuery,delete this.cachedSuggestions,delete this.cachedRenderExtraArgs},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered","")},isEmpty:function(){return this._isEmpty},destroy:function(){this.clearCachedSuggestions(),this.$el=null}}),e.exports=n},function(e,t){"use strict";e.exports={wrapper:'<span class="%ROOT%"></span>',dropdown:'<span class="%PREFIX%%DROPDOWN_MENU%"></span>',dataset:'<div class="%PREFIX%%DATASET%-%CLASS%"></div>',suggestions:'<span class="%PREFIX%%SUGGESTIONS%"></span>',suggestion:'<div class="%PREFIX%%SUGGESTION%"></div>'}},function(e,t,i){"use strict";var n=i(4),s={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:"0"},defaultClasses:{root:"algolia-autocomplete",prefix:"aa",noPrefix:!1,dropdownMenu:"dropdown-menu",input:"input",hint:"hint",suggestions:"suggestions",suggestion:"suggestion",cursor:"cursor",dataset:"dataset",empty:"empty"},appendTo:{wrapper:{position:"absolute",zIndex:"100",display:"none"},input:{},inputWithNoHint:{},dropdown:{display:"block"}}};n.isMsie()&&n.mixin(s.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),n.isMsie()&&n.isMsie()<=7&&n.mixin(s.input,{marginTop:"-1px"}),e.exports=s},function(e,t,i){"use strict";e.exports={hits:i(21),popularIn:i(24)}},function(e,t,i){"use strict";var n=i(4),s=i(22),r=i(23);e.exports=function(e,t){function i(i,s){e.search(i,t,function(e,t){return e?void n.error(e.message):void s(t.hits,t)})}var o=r(e.as._ua);return o&&o[0]>=3&&o[1]>20&&(t=t||{},t.additionalUA="autocomplete.js "+s),i}},function(e,t){e.exports="0.31.0"},function(e,t){"use strict";e.exports=function(e){var t=e.match(/Algolia for vanilla JavaScript (\d+\.)(\d+\.)(\d+)/);return t?[t[1],t[2],t[3]]:void 0}},function(e,t,i){"use strict";var n=i(4),s=i(22),r=i(23);e.exports=function(e,t,i,o){function a(a,l){e.search(a,t,function(e,a){if(e)return void n.error(e.message);if(a.hits.length>0){var d=a.hits[0],h=n.mixin({hitsPerPage:0},i);delete h.source,delete h.index;var p=r(u.as._ua);return p&&p[0]>=3&&p[1]>20&&(t.additionalUA="autocomplete.js "+s),void u.search(c(d),h,function(e,t){if(e)return void n.error(e.message);var i=[];if(o.includeAll){var s=o.allTitle||"All departments";i.push(n.mixin({facet:{value:s,count:t.nbHits}},n.cloneDeep(d)))}n.each(t.facets,function(e,t){n.each(e,function(e,s){i.push(n.mixin({facet:{facet:t,value:s,count:e}},n.cloneDeep(d)))})});for(var r=1;r<a.hits.length;++r)i.push(a.hits[r]);l(i,a)})}l([])})}var l=r(e.as._ua);if(l&&l[0]>=3&&l[1]>20&&(t=t||{},t.additionalUA="autocomplete.js "+s),!i.source)return n.error("Missing 'source' key");var c=n.isFunction(i.source)?i.source:function(e){return e[i.source]};if(!i.index)return n.error("Missing 'index' key");var u=i.index;return o=o||{},a}}])}),window.AlgoliaAnalyticsObject="aa",window.aa=window.aa||function(){(window.aa.queue=window.aa.queue||[]).push(arguments)},!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).AlgoliaAnalytics={})}(this,function(e){"use strict";function t(e){var t,i=e.AlgoliaAnalyticsObject;if(i){var n=(t=this,function(e){for(var i=[],n=arguments.length-1;n-->0;)i[n]=arguments[n+1];e&&p(t[e])&&t[e].apply(t,i)}),s=e[i];s.queue=s.queue||[];var r=s.queue;r.forEach(function(e){var t=[].slice.call(e),i=t[0],s=t.slice(1);n.apply(void 0,[i].concat(s))}),r.push=function(e){var t=[].slice.call(e),i=t[0],s=t.slice(1);n.apply(void 0,[i].concat(s))}}}function i(e){var i=new C({requestFn:e});return"undefined"!=typeof window&&t.call(i,window),i}var n,s,r,o,a=function(){try{return Boolean(navigator.cookieEnabled)}catch(e){return!1}},l=function(){try{return Boolean(navigator.sendBeacon)}catch(e){return!1}},c=function(){try{return Boolean(XMLHttpRequest)}catch(e){return!1}},u=function(e){return void 0===e},d=function(e){return"string"==typeof e},h=function(e){return"number"==typeof e},p=function(e){return"function"==typeof e},f="insights-js (1.6.3)",m=["de","us"],g=2592e6,v=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},y="_ALGOLIA",b=function(e,t,i){var n=new Date;n.setTime(n.getTime()+i);var s="expires="+n.toUTCString();document.cookie=e+"="+t+";"+s+";path=/"},_=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var s=i[n];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return""},w="ANONYMOUS_USER_TOKEN";Object.keys||(Object.keys=(n=Object.prototype.hasOwnProperty,s=!{toString:null}.propertyIsEnumerable("toString"),o=(r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("function"!=typeof e&&("object"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,i,a=[];for(t in e)n.call(e,t)&&a.push(t);if(s)for(i=0;o>i;i++)n.call(e,r[i])&&a.push(r[i]);return a})),"function"!=typeof Object.assign&&(Object.assign=function(e,t){var i=arguments;if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),s=1;s<arguments.length;s++){var r=i[s];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n});var C=function(e){var t=e.requestFn;this._ua="",this._uaURIEncoded="",this.version="1.6.3",this._hasCredentials=!1,this.sendEvent=function(e){return function(t,i){if(!this._userHasOptedOut){if(!this._hasCredentials)throw new Error("Before calling any methods on the analytics, you first need to call the 'init' function with appId and apiKey parameters");if(""===i.userToken||""===this._userToken)throw new Error("`userToken` cannot be an empty string.");var n=i.userToken||this._userToken;if(u(n))throw new Error("Before calling any methods on the analytics, you first need to call 'setUserToken' function or include 'userToken' in the event payload.");if(!d(i.index))throw new TypeError("expected required parameter `index` to be a string");if(!d(i.eventName))throw new TypeError("expected required parameter `eventName` to be a string");if(!u(i.userToken)&&!d(i.userToken))throw new TypeError("expected optional parameter `userToken` to be a string");var s={eventType:t,eventName:i.eventName,userToken:n,index:i.index};if(!u(i.timestamp)){if(!h(i.timestamp))throw new TypeError("expected optional parameter `timestamp` to be a number");s.timestamp=i.timestamp}if(!u(i.queryID)){if(!d(i.queryID))throw new TypeError("expected optional parameter `queryID` to be a string");s.queryID=i.queryID}if(!u(i.objectIDs)){if(!Array.isArray(i.objectIDs))throw new TypeError("expected optional parameter `objectIDs` to be an array");s.objectIDs=i.objectIDs}if(!u(i.positions)){if(!Array.isArray(i.positions))throw new TypeError("expected optional parameter `positions` to be an array");if(u(i.objectIDs))throw new Error("cannot use `positions` without providing `objectIDs`");if(i.objectIDs.length!==i.positions.length)throw new Error("objectIDs and positions need to be of the same size");s.positions=i.positions}if(!u(i.filters)){if(!u(i.objectIDs))throw new Error("cannot use `objectIDs` and `filters` for the same event");if(!Array.isArray(i.filters))throw new TypeError("expected optional parameter `filters` to be an array");s.filters=i.filters}if(u(i.objectIDs)&&u(i.filters))throw new Error("expected either `objectIDs` or `filters` to be provided");return function(e,t,i,n,s,r){return e(s+"/1/events?X-Algolia-Application-Id="+t+"&X-Algolia-API-Key="+i+"&X-Algolia-Agent="+n,{events:r})}(e,this._appId,this._apiKey,this._uaURIEncoded,this._endpointOrigin,[s])}}}(t).bind(this),this.init=function(e){if(!e)throw new Error("Init function should be called with an object argument containing your apiKey and appId");if(u(e.apiKey)||!d(e.apiKey))throw new Error("apiKey is missing, please provide it so we can authenticate the application");if(u(e.appId)||!d(e.appId))throw new Error("appId is missing, please provide it, so we can properly attribute data to your application");if(!u(e.region)&&-1===m.indexOf(e.region))throw new Error("optional region is incorrect, please provide either one of: "+m.join(", ")+".");if(!(u(e.cookieDuration)||h(e.cookieDuration)&&isFinite(e.cookieDuration)&&Math.floor(e.cookieDuration)===e.cookieDuration))throw new Error("optional cookieDuration is incorrect, expected an integer.");this._apiKey=e.apiKey,this._appId=e.appId,this._userHasOptedOut=!!e.userHasOptedOut,this._region=e.region,this._endpointOrigin=e.region?"https://insights."+e.region+".algolia.io":"https://insights.algolia.io",this._cookieDuration=e.cookieDuration?e.cookieDuration:6*g,this._hasCredentials=!0,this._ua=f,this._uaURIEncoded=encodeURIComponent(f),!this._userHasOptedOut&&a()&&this.setUserToken(this.ANONYMOUS_USER_TOKEN)}.bind(this),this.initSearch=function(e){if(!this._hasCredentials)throw new Error("Before calling any methods on the analytics, you first need to call the 'init' function with appId and apiKey parameters");if(!e)throw new Error("initSearch function requires an argument with getQueryID and hitsContainer arguments");if(!e.getQueryID||"function"!=typeof e.getQueryID)throw new Error("getQueryID must be a function that returns the queryID of the last search operation");this.getQueryID=e.getQueryID}.bind(this),this.addAlgoliaAgent=function(e){-1===this._ua.indexOf("; "+e)&&(this._ua+="; "+e,this._uaURIEncoded=encodeURIComponent(this._ua))}.bind(this),this.ANONYMOUS_USER_TOKEN=w,this.setUserToken=function(e){if(e===w){if(!a())throw new Error("Tracking of anonymous users is only possible on environments which support cookies.");var t=_(y);t&&""!==t&&0===t.indexOf("anonymous-")?this._userToken=t:(this._userToken="anonymous-"+v(),b(y,this._userToken,this._cookieDuration))}else this._userToken=e;p(this._onUserTokenChangeCallback)&&this._onUserTokenChangeCallback(this._userToken)}.bind(this),this.getUserToken=function(e,t){return p(t)&&t(null,this._userToken),this._userToken}.bind(this),this.onUserTokenChange=function(e,t){this._onUserTokenChangeCallback=e,t&&t.immediate&&p(this._onUserTokenChangeCallback)&&this._onUserTokenChangeCallback(this._userToken)}.bind(this),this.clickedObjectIDsAfterSearch=function(e){if(!e)throw new Error("No params were sent to clickedObjectIDsAfterSearch function, please provide `queryID`,  `objectIDs` and `positions` to be reported");if(!e.queryID)throw new Error("required queryID parameter was not sent, click event can not be properly sent without");if(!e.objectIDs)throw new Error("required objectIDs parameter was not sent, click event can not be properly sent without");if(!e.positions)throw new Error("required positions parameter was not sent, click event can not be properly sent without");this.sendEvent("click",e)}.bind(this),this.clickedObjectIDs=function(e){if(!e)throw new Error("No params were sent to clickedObjectIDs function, please provide `objectIDs` to be reported");if(!e.objectIDs)throw new Error("required `objectIDs` parameter was not sent, click event can not be properly sent without");this.sendEvent("click",e)}.bind(this),this.clickedFilters=function(e){if(!e)throw new Error("No params were sent to clickedFilters function, please provide `filters` to be reported");if(!e.filters)throw new Error("required `filters` parameter was not sent, click event can not be properly sent without");this.sendEvent("click",e)}.bind(this),this.convertedObjectIDsAfterSearch=function(e){if(!e)throw new Error("No params were sent to convertedObjectIDsAfterSearch function, please provide `queryID` and `objectIDs` to be reported");if(!e.queryID)throw new Error("required queryID parameter was not sent, conversion event can not be properly sent without");if(!e.objectIDs)throw new Error("required objectIDs parameter was not sent, conversion event can not be properly sent without");
this.sendEvent("conversion",e)}.bind(this),this.convertedObjectIDs=function(e){if(!e)throw new Error("No params were sent to convertedObjectIDs function, please provide `objectIDs` to be reported");if(!e.objectIDs)throw new Error("required objectIDs parameter was not sent, conversion event can not be properly sent without");this.sendEvent("conversion",e)}.bind(this),this.convertedFilters=function(e){if(!e)throw new Error("No params were sent to convertedFilters function, please provide `filters` to be reported");if(!e.filters)throw new Error("required filters parameter was not sent, conversion event can not be properly sent without");this.sendEvent("conversion",e)}.bind(this),this.viewedObjectIDs=function(e){if(!e)throw new Error("No params were sent to viewedObjectIDs function, please provide `objectIDs` to be reported");if(!e.objectIDs)throw new Error("required objectIDs parameter was not sent, view event can not be properly sent without");this.sendEvent("view",e)}.bind(this),this.viewedFilters=function(e){if(!e)throw new Error("No params were sent to viewedFilters function, please provide `filters` to be reported");if(!e.filters)throw new Error("required filters parameter was not sent, view event can not be properly sent without");this.sendEvent("view",e)}.bind(this),this._get=function(e,t){t(this[e])}.bind(this)},S=function(e,t){var i=JSON.stringify(t);navigator.sendBeacon(e,i)},T=function(e,t){var i=JSON.stringify(t),n=new XMLHttpRequest;n.open("POST",e),n.send(i)},k=i(function(){if(l())return S;if(c())return T;throw new Error("Could not find a supported HTTP request client in this environment.")}());e.createInsightsClient=i,e["default"]=k,Object.defineProperty(e,"__esModule",{value:!0})}),Class("OlarkClient")({_init:function(){if(window.apiPage!==!0){var e=OlarkClient._fetch();return e.then(OlarkClient._handleLiveChat),OlarkClient._init=function(){return e},OlarkClient._init()}},_fetch:function(){var e=new Promise(function(e,t){window.olark||function(e,t,i,n,s,r){e.olark||(n="script",r=t.createElement(n),n=t.getElementsByTagName(n)[0],r.async=1,r.src="//"+i,n.parentNode.insertBefore(r,n),r=e.olark=function(){s.s.push(arguments),s.t.push(+new Date)},r.extend=function(e,t){r("extend",e,t)},r.identify=function(e){r("identify",s.i=e)},r.configure=function(e,t){r("configure",e,t),s.c[e]=t},s=r._={s:[],t:[+new Date],c:{},l:i})}(window,document,"static.olark.com/jsclient/loader.js"),olark("api.chat.onReady",function(){e("Olark Available")}),olark.identify("1989-302-10-7144")});return e},_show:function(){olark("api.box.expand")},_sendMessage:function(e){olark("api.chat.sendMessageToVisitor",{body:e})},_sendNotificationToOperator:function(e){olark("api.chat.sendNotificationToOperator",{body:e})},show:function(){OlarkClient._init().then(OlarkClient._show)},sendMessage:function(e){OlarkClient._init().then(function(){OlarkClient._sendMessage(e)})},sendNotificationToOperator:function(e){return OlarkClient._init().then(function(){OlarkClient._sendNotificationToOperator(e)})},_hide:function(){olark("api.box.hide")},hide:function(){OlarkClient._init().then(OlarkClient._hide)},_handleLiveChat:function(){var e=function(){$(document).off("focusin.modal")};"function"==typeof window.olark&&(window.olark("api.chat.onReady",function(){$(document).bind("shown.bs.modal",e)}),window.olark("api.box.onExpand",function(){e(),$(document).bind("shown.bs.modal",e)}),window.olark("api.box.onShrink",function(){$(document).unbind("shown.bs.modal",e)}))},onBeginConversation:function(e){OlarkClient._init().then(function(){olark("api.chat.onBeginConversation",function(){e()})})}}),Class("AlgoliaAnalyticsClient")({TEMPLATE_INDEX:window.algoliaConfig.niceTemplatesIndex,FONTS_INDEX:window.algoliaConfig.niceFontsIndex,ASSET_INDEX:window.algoliaConfig.niceAssetsIndex,algolia:aa("init",{appId:window.algoliaConfig.appId,apiKey:window.algoliaConfig.readApiKey}),identifyLoggedInUser:function(e){aa("setUserToken",e)},sendClickEvent:function(e,t,i,n,s){var r,o=Helpers.App.getUser(),a={index:e||this.TEMPLATE_INDEX,eventName:t||"click_event",objectIDs:[n]};r="clickedObjectIDs",i&&(a.queryID=i,a.positions=[s],r="clickedObjectIDsAfterSearch"),o.id&&(a.userToken=o.id.toString()),aa(r,a)},sendMulticontrolClickEvent:function(e,t,i){this.sendClickEvent(this.ASSET_INDEX,"multicontrolClick",e,t,i)},sendStageClickEvent:function(e,t){var i,n=window.algoliaQuery&&window.algoliaQuery.queryId,s=window.algoliaQuery&&window.algoliaQuery.IndexName;s&&(i="stageClick",n&&(i="stageSearchClick"),this.sendClickEvent(s,i,n,e,t))},sendConversionEvent:function(e){var t,i,n;t="convertedObjectIDs",n={index:e.index,eventName:e.eventName,objectIDs:[e.objectID]},i=Helpers.App.getUser(),i.id&&(n.userToken=i.id.toString()),e.queryID&&(n.queryID=e.queryID,t="convertedObjectIDsAfterSearch"),aa(t,n)},sendStageConversionEvent:function(e,t,i){var n;e&&(n={index:e,eventName:"stageConversion",objectID:t},i&&(n.eventName="stageSearchConversion",n.queryID=i),this.sendConversionEvent(n))}}),Module("AlgoliaAnalyticsSupport")({prototype:{_algoliaAnalyticsQuery:{},_setAlgoliaAnalyticsQueryFromUrl:function(){var e,t;e=Helpers.App.getUrlParam("queryId"),e&&(this._algoliaAnalyticsQuery.queryId=e,Helpers.App.replaceUrlParam("queryId","")),t=Helpers.App.getUrlParam("IndexName"),t&&(this._algoliaAnalyticsQuery.indexName=t,Helpers.App.replaceUrlParam("IndexName",""))},_getUrlWithAlgoliaAnalyticsQueryParams:function(e){var t,i,n;return window.algoliaQuery?(t=e,n=[],t=Helpers.App.removeParams(["queryId","IndexName"],t),i=t.indexOf("?")<0?"?":"&",t+=i,window.algoliaQuery.queryId&&n.push("queryId="+window.algoliaQuery.queryId),window.algoliaQuery.IndexName&&n.push("IndexName="+window.algoliaQuery.IndexName),t+=n.join("&")):e},_setAlgoliaAnalyticsBindings:function(){var e,t;e=this,t=this.element.find("a"),t.bind("click",function(){var t;this.href&&window.algoliaQuery&&(t=e._getUrlWithAlgoliaAnalyticsQueryParams(this.href),this.href=t)})},sendAlgoliaAnalyticsStageConversionEvent:function(){window._stageData&&window._stageData.stage_data&&AlgoliaAnalyticsClient.sendStageConversionEvent(this._algoliaAnalyticsQuery.indexName,window._stageData.stage_data.id,this._algoliaAnalyticsQuery.queryId)}}}),Module(Helpers,"Resolutions")({_data:null,setActive:function(e){this._data=null,this._data=e},getActive:function(){return this._data},_comp:!1,setIsComp:function(e){this._comp=e},isComp:function(){return this._getComp()},_getComp:function(){return this._comp}}),Module(Helpers,"UserSegment")({_handleGetSegment:function(e,t){var i,n,s,r,o;i=new Date,e?(n="noSegment",s="true",r=1):(n="userSegment",s=t,r=3),i.setTime(i.getTime()+24*r*60*60*1e3),o=i.toUTCString(),Helpers.UserSegment.removeCookies(),document.cookie=n+"="+s+";expires="+o+";path=/"},request:function(){var e={url:"/api/v2/analytics/segment",method:"GET"},t=Helpers.RequestConfig.prepareConfig(e);return $.ajax(t).done(function(e){Helpers.UserSegment.pingSegment(e.url,0,Helpers.UserSegment._handleGetSegment)})},getCookie:function(e){for(var t=e+"=",i=decodeURIComponent(document.cookie),n=i.split(";"),s=0;s<n.length;s++){for(var r=n[s];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null},getUserSegmentCookie:function(){return Helpers.UserSegment.getCookie("userSegment")},getUserLocationCookie:function(){return Helpers.UserSegment.getCookie("gtmc_user_location")},getNoSegmentCookie:function(){return Helpers.UserSegment.getCookie("noSegment")},pingSegment:function(e,t,i){var n=function(n){return n?void i(!1,n):4===t?void i(!0):void setTimeout(function(){Helpers.UserSegment.pingSegment(e,++t,i)},1e3)},s=function(e,t,i){Helpers.GlobalEventTracker.track("pingSegmentFailed",{response:e.responseText,status:t,error:i})};return $.get(e).done(n).fail(s)},removeCookies:function(){$.removeCookie("userSegment",{path:"/"}),$.removeCookie("noSegment",{path:"/"})}}),Module(Helpers,"RequestConfig")({URL_MAP:{"/login":{api:"/api/v3/login",placeit:"/login"},"/sso/verify_signin_token":{api:"/api/v3/verify_signin_token",placeit:"/sso/verify_signin_token"},"/sso/migrate_user":{api:"/api/v3/migrate_user",placeit:"/sso/migrate_user"},"/subscriptions/{{token}}/transaction":{api:"/api/v3/subscriptions/transaction",placeit:"/subscriptions/{{token}}/transaction"},"/subscriptions/quick_transaction":{api:"/api/v3/subscriptions/quick_transaction",placeit:"/subscriptions/quick_transaction"},"/subscriptions/sign":{api:"/api/v3/subscriptions/sign",placeit:"/subscriptions/sign"},"/api/v2/analytics/segment":{api:"/api/v3/analytics/segment",placeit:"/api/v2/analytics/segment"},"/api/v2/analytics/track":{api:"/api/v3/analytics/track",placeit:"/api/v2/analytics/track"},"/purchases/show":{api:"/api/v3/purchases/show",placeit:"/purchases/show"},"/api/v1/base/processing":{api:"/api/v3/purchases/processing",placeit:"/api/v1/base/processing"}},prepareConfig:function(e){var t=Object.assign({},e);return t.url=Helpers.RequestConfig.getURL(Helpers.RequestConfig.URL_MAP,Helpers.RequestConfig.apiRouteStrategy,e.url),t},getURL:function(e,t,i){var n=t();return e[i]&&e[i][n]?e[i][n]:i},apiRouteStrategy:function(){return window.apiPage===!0?"api":"placeit"}}),Module(Helpers,"App")({_user:null,_giftModal:null,_trackerId:null,_subscription:!1,_subscriptionPeriod:"monthly",_admin:!1,_purchases:!1,_stageTypes:{},_coupon:null,_nBookmarks:null,_CDNRoundRobin:0,breakpoint:1024,_pageType:{},_userUploadsBaseUrl:{development:"https://placeit-user-uploads-staging.s3-accelerate.amazonaws.com",staging:"https://placeit-user-uploads-staging.s3-accelerate.amazonaws.com",production:"https://placeit-user-uploads.s3-accelerate.amazonaws.com"},_subscribeFromModal:null,_nextLoginAction:null,_mobileHelpTextCounter:0,_userType:{},_floatingContainerState:!1,getNextLoginAction:function(){var e=Helpers.App.getCookie("nextLoginAction");return""===e?this._nextLoginAction:e},setNextLoginAction:function(e){return null===e?void Helpers.App.clearNextLoginAction():(Helpers.App.setCookie("nextLoginAction",e,1),void(this._nextLoginAction=e))},clearNextLoginAction:function(){Helpers.App.deleteCookie("nextLoginAction"),this._nextLoginAction=null},getSubscribeFromModal:function(){return this._subscribeFromModal},setSubscribeFromModal:function(e){this._subscribeFromModal=e},getUserUploadsUrl:function(){return this._userUploadsBaseUrl[window.environment]},cdnBasePath:function(){return this._CDNRoundRobin=this._CDNRoundRobin%3+1,1===this._CDNRoundRobin?window.NICEV4_ASSETS.protocol+"://"+window.NICEV4_ASSETS.hostname.replace(/#/,""):window.NICEV4_ASSETS.protocol+"://"+window.NICEV4_ASSETS.hostname.replace(/#/,"-"+this._CDNRoundRobin)},niceProtocolHostname:function(){return this.cdnBasePath()},setTrackerId:function(e){this._trackerId=e,$.cookie("pl_tracker_id_v2",e,{path:"/",expires:3650})},getTrackerId:function(){return this._trackerId||$.cookie("pl_tracker_id_v2")},resetOldTrackerId:function(){$.cookie("pl_tracker_id",null)},setUser:function(e){this._user=e},getUser:function(){return this._user},setBookmarksCount:function(e){this._nBookmarks=e},getBookmarksCount:function(){return this._nBookmarks},setSubscription:function(e){this._subscription=e},getSubscription:function(){return this._subscription},isSubscriptionValid:function(){return this._subscription&&this._subscription!==!1&&!this._subscription.is_paused&&window.isPastDue!==!0},subscriptionIsActive:function(){return this._subscription?this._subscription.is_active:window._pl_subscriptionIsActive?!0:!1},setAdmin:function(e){this._admin=e},isAdmin:function(){return this._admin},setPurchases:function(e){this._purchases=e},hasPurchased:function(){return this._purchases},isLoggedIn:function(){var e=document.cookie.match(/logged_session=([^;]+)/),t=!1;return null!==e&&null!==this.getUser()&&null!==this.getUser().email&&(t=e[1]),t||Helpers.App.isLoggedInWithToken()?!0:!1},isLoggedInWithToken:function(){return null!==this.getUser()&&null!==this.getUser().email&&window.apiPage?!0:!1},isWindows:function(){return!!window.navigator.userAgent.match(/windows/gi)},flashInstalled:function(){return!!navigator.mimeTypes["application/x-shockwave-flash"]},_getPurchases:function(e){var t={url:"/purchases/show",type:"get",dataType:"json",success:function(t){t.subscriptions&&Helpers.App.setSubscription(t.subscriptions),t.bulk_purchases&&Registry.UserBulkPackages.set(t.bulk_purchases),t.credits&&Registry.Credits.set(t.credits),t.account_data&&t.account_data.is_past_due&&(window.isPastDue=!0,this._setAccountData(t.account_data),this.setupUpdateCardModal()),e(t)}.bind(this)},i=Helpers.RequestConfig.prepareConfig(t);$.ajax(i)},getStageTypes:function(){return this._stageTypes},getStageTypesByName:function(e){var t=this.getStageTypes();for(var i in t)if(t.hasOwnProperty(i)&&t[i].name===e)return t[i];return!1},isHTTP:function(){return"http:"===window.location.protocol},showPlansModal:function(e){var t,i,n,s,r;if(t=window.location.host,i=window.location.pathname,n=this.isHTTP(),s="https://"+t+"/account?show_plans=true",r=window.location.href,"development"!==window.environment&&n&&Helpers.App.isLoggedIn()&&"/account"!==i){var o,a,l;return s+="&referred="+r,Helpers.StageType.getStageInfo()&&Helpers.StageType.isLiveImage()&&page.stage.queuedLiveimageData&&(o=page.stage.queuedLiveimageData.remote_url,a=page.stage.queuedLiveimageData.stage_id,l=page.stage.queuedLiveimageData.background_id,s+="&remote="+o+"&stage="+a+"&bg="+l),void(window.location=s)}window.page.showSubscriptionPlans(e)},removeParam:function(e,t){t=t||window.location.href;var i,n=t.split("?")[0],s=[],r=t.match(/([^(?)]*.)(.*)/)[2];if(""!==r){s=r.split("&");for(var o=s.length-1;o>=0;o-=1)i=s[o].split("=")[0],i===e&&s.splice(o,1);n=s.length?n+"?"+s.join("&"):n}return n},removeParams:function(e,t){if(e.length){for(var i=0;i<e.length;i++)t=this.removeParam(e[i],t);return t}return!1},getParamTillEnd:function(e){var t=!1,i=new RegExp(e+"=(.+)","g"),n=i.exec(window.location.href);return n&&(t=n[1]),t},getUrlParam:function(e,t,i){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=this.getAllURLParams();if(n.stateId&&!t&&(t=[window.location.origin,window.location.pathname,window.history.state.data].join("")),"draftId"===e&&Boolean(n.draftId)===!0)return n.draftId;var s=i?"=([^()]*)":"=([^(&|?)]*)",r="[\\?&]"+e+s,o=new RegExp(r),a=o.exec(t||window.location.href);return null===a?void 0:decodeURIComponent(a[1].replace(/\+/g," "))},getAllURLParams:function(){var e={},t=this._getUrlParamsFromHref();return e=t.stateId?this._getUrlParamsFromState(t.stateId):t},_getUrlParamsFromHref:function(){return this._getParamsFromUrlSearchString(window.location.href)},_getUrlParamsFromState:function(e){var t={};return Helpers.State.getParams(e)&&(t=this._getParamsFromUrlSearchString(window.history.state.data)),t},_getParamsFromUrlSearchString:function(e){var t,i={},n=e.slice(e.indexOf("?")+1).split("&");-1===e.indexOf("?")&&(n=[]);for(var s=0;s<n.length;s++)t=n[s].split("="),i[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return i},replaceUrlParam:function(e,t){var i,n,s,r,o,a,l=this.getPageId(),c=this.getNavigationId(),u={pageId:l,navigationId:c};t=window.encodeURIComponent(t),a=Helpers.App.getUrlParam(e),i=window.location.href,n=a?e+"="+a:"",s=t.length?e+"="+t:"",r=i.replace(n,s),r=Helpers.App.removeParam(e),t.length>0&&(o=r.indexOf("?")<0?"?":"&",r=r+o+s);var d=this._getUrlParamsFromHref();return d.stateId?(window.history.state.data=r,window.history.state.pageId=l,window.history.state.navigationId=c,window.history.replaceState(window.history.state,Helpers.StageType.getStageSlug(),r)):window.history.replaceState(u,Helpers.StageType.getStageSlug(),r),this.handleCanonicality(),this},_getNewStateId:function(){return(Date.parse((new Date).toUTCString())/1e3|0).toString(36)+(16777215*Math.random()<<0).toString(16).substring(0,4)},replaceUrlParamWithHistory:function(e,t,i){window.isMultiScene||Helpers.StageType.isVideoV5()===!0?this._replaceUrlParamWithStateHistory(e,t,i):this._replaceUrlParamWithHistory(e,t,i)},_replaceUrlParamWithHistory:function(e,t,i){var n,s,r,o,a,l,c=this.generateUid(),u=this.getNavigationId(),d={pageId:c,navigationId:u};return t=encodeURIComponent(t),l=Helpers.App.getUrlParam(encodeURIComponent(e)),n=window.location.href,s=l?e+"="+l:"",r=t.length||i?e+"="+t:"",o=n.replace(s,r),o=Helpers.App.removeParam(encodeURIComponent(e)),(t.length>0||i)&&(a=o.indexOf("?")<0?"?":"&",o=o+a+r),l&&l===t||(window.history.pushState(d,Helpers.StageType.getStageSlug(),o),Helpers.State&&Helpers.State.dispatch("pushstate",d)),this},_replaceUrlParamWithStateHistory:function(e,t,i){var n,s,r,o,a,l;return n="",n=window.history.state&&window.history.state.data?window.history.state.data:"?",l=Helpers.App.getUrlParam(encodeURIComponent(e),n),t=encodeURIComponent(t),s=l?e+"="+l:"",r=t.length||i?e+"="+t:"",o=n.replace(s,r),o=Helpers.App.removeParam(encodeURIComponent(e),n),(t.length>0||i)&&(a=o.indexOf("?")<0?"?":"&",o=o+a+r),l&&l===t||Helpers.State.setParams(o),this},arrayUnique:function(e){for(var t=e.concat(),i=0;i<t.length;++i)for(var n=i+1;n<t.length;++n)t[i]===t[n]&&t.splice(n--,1);return t},arrayObjUnique:function(e,t){var i={},n=[];return e.forEach(function(e){i[e[t]]||(n.push(e),i[e[t]]=!0)}),n},sortObjAlphabetically:function(e,t){function i(e,i){var n=0;return e[t]>i[t]?n=1:e[t]<i[t]&&(n=-1),n}return e.sort(i)},getMobileUrl:function(e,t){var i="";-1!==e.indexOf("#")&&(i=e.substring(e.indexOf("#"))),$.ajax({url:"/api/v1/base/parser",data:{user_agent:Helpers.StageType.getStageInfo().user_agent,admin:Helpers.App.isAdmin(),url:e},success:function(e){return t?t(e+i):!1},error:function(){return t?t("server error"):!1}})},calcRuleOfThree:function(e,t,i){return e*t/i},displayGift:function(){var e,t;this._giftModal=new UI.ShareModal({type:"gift"}),this._giftModal.updateInput("Generating URL...").loader(!0).activate(),$.ajax({url:"/users/generate_gift_link",type:"POST",context:this,success:function(t){e=location.protocol+"//"+location.host+"/gift/"+t,this._giftModal.updateInput(e).loader(!1),this._giftModal.loadShareSocialButtons(e)},error:function(){t="There was an error generating you coupon",page.dispatch("coupon.update",t)}})},_setAccountData:function(e){return window.account=e,this},getAccountInfo:function(){$.ajax({url:"/users/account_info",type:"POST",data:{},dataType:"json",success:function(e){e.account_data&&e.account_data.is_past_due&&(Helpers.GlobalEventTracker.pastDueLogin(),window.isPastDue=!0,this._setAccountData(e.account_data),Modals.Billing.showBillingUpdateOptionsModal(),page.flashPastDue())}.bind(this)})},checkPastDueStatus:function(e){return Modals.Billing.addSpinnerOnBillingOptions(),$.ajax({url:"/users/check_past_due_status",type:"POST",data:{},dataType:"json",success:function(){window.isPastDue=!1,page.hidePastDueModal(),Modals.Billing.hideBillingUpdateOptionsModal(),"function"==typeof e.success&&e.success(),Modals.Billing.hideBillingUpdateOptionsModal()},error:function(){"function"==typeof e.error?e.error():Modals.Billing.hideBillingUpdateOptionsModal().setupUpdateCardModal()}}),this},tryToApplyInvoice:function(e){return Modals.Billing.addSpinnerOnBillingOptions(),$.ajax({url:"/users/try_to_apply_invoice",type:"POST",data:{},dataType:"json",success:function(){Helpers.GlobalEventTracker.appliedPastDueInvoice(),window.isPastDue=!1,page.hidePastDueModal(),Modals.Billing.hideBillingUpdateOptionsModal(),"function"==typeof e.success&&e.success(),Modals.Billing.hideBillingUpdateOptionsModal()},error:function(){Helpers.GlobalEventTracker.confirmRetryFailed(),"function"==typeof e.error?e.error():Modals.Billing.hideBillingUpdateOptionsModal().setupUpdateCardModal()}}),this},sendEcommerceTransaction:function(e){var t={id:Helpers.App.getUser().id+"_"+e.invoice_number,affiliation:"Placeit",revenue:(parseInt(e.amount_in_cents,10)/100).toString(),tax:0,shipping:0,city:"",state:"",country:"",currency:window.currencyHelper.getLabel(window.recurlyConfig.currency),sku:e.sku,name:e.productName,category:"",quantity:1,discount:0,coupon:"",variant:Helpers.StageType.getStageInfo().is_wide===!0?"wide":"normal"},i=t;Helpers.GlobalEventTracker.identifyUser(),Helpers.GlobalEventTracker.pristineTrack("Completed Order",{orderId:i.id,total:i.revenue,revenue:i.revenue,shipping:i.shipping,tax:i.tax,discount:i.discount,coupon:i.coupon,currency:i.currency,repeat:!1,products:[{id:i.id,sku:i.sku,name:i.name,price:i.revenue,quantity:i.quantity,category:i.category,variant:i.variant}]}),$.cookie("iterableEmailCampaignId")&&(i.iterableCampaignId=$.cookie("iterableEmailCampaignId"),i.iterableTemplateId=$.cookie("iterableTemplateId"),Helpers.GlobalEventTracker.pristineTrack("Order Completed",{orderId:i.id,user:{email:window._pl_userInfo.email},total:parseFloat(i.revenue),revenue:i.revenue,shipping:i.shipping,tax:i.tax,discount:0,coupon:i.coupon,currency:i.currency,repeat:!1,campaignId:parseInt(i.iterableCampaignId),templateId:parseInt(i.iterableTemplateId),products:[{id:i.id,sku:i.sku,name:i.name,price:parseFloat(i.revenue),quantity:parseInt(i.quantity),category:i.category,variant:i.variant}]}))},sendEnvatoTracking:function(e){if("production"===window.environment||void 0!==window.enableEnvatoEvents){var t={id:Helpers.App.getUser().id+"_"+e.orderId,revenue:(parseInt(e.subtotal,10)/100).toString(),currency:window.currencyHelper.getLabel(window.recurlyConfig.currency),sku:e.sku,name:e.productName,category:e.category,customerId:e.customerId,quantity:1,trackingCode:e.trackingCode};ire("trackConversion",t.trackingCode,{orderId:t.id,customerId:t.customerId,currencyCode:t.currency,items:[{subTotal:t.revenue,category:t.category,sku:t.sku,quantity:t.quantity}]})}},sendEnvatoSignUp:function(e){("production"===window.environment||void 0!==window.enableEnvatoEvents)&&ire("trackConversion",e.trackingCode,{customerId:e.customerId,orderId:e.customerId+"_"+e.envatoId})},generateUid:function(){var e=function(t){var i,n,s,r;for(t=t||32,n="",s=0,r=14,i=0;t>i;i++)n+=e.codes[Math.floor(Math.random()*(r-s+1))+s];return n};return e.codes=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"],e}(),handleCanonicality:function(){var e,t,i,n=$('link[rel="canonical"]');return i=window._pl_restricted_params.some(function(e){return window.location.href.indexOf(e)>-1}),i===!0?(t=window._pl_host+(window._pl_isRootCategory?"":window._pl_categoryPath),Helpers.StageType.getStageInfo()!==!1&&(e=Helpers.StageType.getStageInfo().slug,t=t+"/stages/"+e),0===n.length&&(n=$('<link rel="canonical">').appendTo(document.head)),n.attr("href")!==t&&n.attr("href",t)):n.remove(),this},getFiltersInUrl:function(){var e,t,i,n,s;return n=Helpers.StageType.getFilterNames(),s={},e=Helpers.App.getUrlParam(n.types),t=Helpers.App.getUrlParam(n.devices),i=Helpers.App.getUrlParam(n.tags),"undefined"!=typeof e&&(s[n.types]=e.split(",")),"undefined"!=typeof t&&(s[n.devices]=t.split(",")),"undefined"!=typeof i&&(s[n.tags]=i.split(",")),s},setCoupon:function(e){return e&&(this._coupon=Helpers.CouponHelper.load(e)),this},getCoupon:function(){return this._coupon=Helpers.CouponHelper.getCoupon(),this._coupon},isIOSSafari:function(){var e=window.navigator.userAgent,t=Helpers.App.isIOS(e),i=!!e.match(/WebKit/i),n=t&&i&&!e.match(/CriOS/i);return n},isIOS:function(e){var t=!!e.match(/iPad/i)||!!e.match(/iPhone/i)||this.isIpadPro();return t},isIpadPro:function(){var e=window.navigator;return!!(e.maxTouchPoints&&e.maxTouchPoints>2&&/MacIntel/.test(e.platform))},getClientWidth:function(){var e=window,t=document,i=t.documentElement,n=t.getElementsByTagName("body")[0],s=e.innerWidth||i.clientWidth||n.clientWidth;return s},isMobile:function(){var e=Helpers.App.getUrlParam("b"),t=e||this.breakpoint,i=this.getClientWidth();return t>=i?!0:!1},isMobileDevice:function(){var e=!1,t=navigator.userAgent||navigator.vendor||window.opera;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|ipad|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},filterForbiddenStages:function(e){return e&&e instanceof Array?e=e.filter(function(e){return[1,2,6,9,10,11,12].indexOf(e.image_type)>-1||3===e.image_type&&!e.has_hand?!0:!1}):[]},hasBulkPackage:function(){return window._pl_hasBulkPackage},logout:function(){var e=this;$.ajax({url:"/logout",type:"GET",dataType:"json",beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))}}).done(function(t){e._handleLogoutResponse(null,t)}).fail(function(t){e._handleLogoutResponse(t)})},_handleLogoutResponse:function(e,t){if(e)throw"Logout Error: "+e;Helpers.CouponHelper.remove(),Helpers.UserSegment.removeCookies(),t.requires_sso_logout?this._ssoLogout():window.location.href="/"},_ssoLogout:function(){var e=function(){var e={error:!1,type:"event",message:"Logged out from Envato SSO successful"};Helpers.GlobalEventTracker.ssoTrack("sso.ssoLoggedOut",e),window.location.href="/"},t=function(e){console.log("Failed to logout at SSO: "+e)},i=function(e){throw"SSO Error signing out from SSO: "+e};window.envatoSso.signOut({onSuccess:e,onFailure:t,onError:i})},isCustomExperience:function(){return"object"==typeof window.experience&&/custom_experiences|no_results/.test(window.pageType.type)},isCustomPage:function(){return"custom_pages"===window.pageType.type},isPricingPage:function(){return"pricingv2"===window.pageType.type},debounce:function(e,t,i){var n;return function(){var s=this,r=arguments,o=function(){n=null,i||e.apply(s,r)},a=i&&!n;clearTimeout(n),n=setTimeout(o,t),a&&e.apply(s,r)}},countArrayItems:function(e){return e.filter(function(e){return null!==e&&void 0!==e}).length},updateEmailNotifications:function(e,t,i){void 0===e.download_email_notifications&&(e.download_email_notifications=this._user.downloadEmailNotifications),void 0===e.placeit_promotion_notifications&&(e.placeit_promotion_notifications=this._user.placeitPromotionNotifications),void 0===e.product_update_notifications&&(e.product_update_notifications=this._user.productUpdateNotifications),void 0===e.feedback_request_notifications&&(e.feedback_request_notifications=this._user.feedbackRequestNotifications);var n=this;window.apiPage===!0&&(e.unsubscribe_code=Helpers.App._user.unsubscribe_code),$.ajax({url:"/email_lists/update_notifications",type:"POST",data:{user:e},dataType:"json",beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))}}).done(function(e){n._user.downloadEmailNotifications=e.download_email_notifications,n._user.placeitPromotionNotifications=e.placeit_promotion_notifications,n._user.productUpdateNotifications=e.product_update_notifications,n._user.feedbackRequestNotifications=e.feedback_request_notifications,"function"==typeof t&&t(e)}).fail(function(e){"function"==typeof i&&i(e)})},getEnvironment:function(){var e=location.hostname.split(".")[0];switch(e){case"staging":case"staging2":case"staging3":return e;case"placeit":return"production";default:return"development"}},pageName:function(e){return window.pageType.type=e||window.pageType.type,window.pageType.type},pageType:function(){return this._pageType=window.pageType,this._pageType.header_type=window.headerType,this._pageType},isLogoPage:function(){return window.pageType?"logos"===window.pageType.category:!1},elementFixedOnScroll:function(e,t){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;i(function(){return 0===e.length?!1:(t||(t=0),void(void 0===e.data("original-position-top")&&e.offset().top-t<=$(window).scrollTop()?(e.addClass("f-scrolling"),e.data("original-position-top",e.offset().top)):$(window).scrollTop()<e.data("original-position-top")-t&&(e.scrollTop(0),e.removeClass("f-scrolling"),e.removeData("original-position-top"))))})},getEUCountries:function(){return["AT","BE","BG","CY","CZ","DK","EE","ES","FI","FR","DE","GB","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SE","SI","SK","HR","AU"]},setSubscriptionPeriod:function(e){this._subscriptionPeriod=e,window.page&&window.page.account&&window.page.account.subscriptionsPartialBlock&&page.account.subscriptionsPartialBlock.setPeriod(e,!0)},getSubscriptionPeriod:function(){return this._subscriptionPeriod},getLayerFromRecordByName:function(e,t){return t&&Array.isArray(t.layers)!==!1?t.layers.filter(function(t){return t.name.toLowerCase().trim()===e})[0]:null},getFileNameFromURI:function(e){return e.split("/").pop()},extractNumbersFromString:function(e){return e.match(/[+-]?\d+(?:\.\d+)?/g).map(Number)},clamp:function(e,t,i){return Math.min(Math.max(e,t),i)},isDownloadIphoneFlowAvailable:function(){var e=!navigator.userAgent.match(/iPhone|iPad|iPod/i)==!1,t=!navigator.userAgent.match(/OS 12_/)==!1;return e&&t},setIOSVideoDownloadInstructionsCookie:function(){$.cookie("iOSVideoDownloadInstructionsCompleted",!0,{expires:365,path:"/"})},getIOSVideoDownloadInstructionsCookie:function(){return"true"===$.cookie("iOSVideoDownloadInstructionsCompleted")?!0:!1},shortcutInstructionsModal:function(){new UI.ShortcutFlow({steps:[UI.ShortcutInstruction1,UI.ShortcutInstruction2,UI.ShortcutInstruction3,UI.ShortcutInstruction4,UI.ShortcutInstruction5]}).activate()},shortcutDownloadModal:function(e,t){new UI.ShortcutFlow({steps:[UI.ShortcutInstruction1,UI.ShortcutInstruction2,UI.ShortcutInstruction3,UI.ShortcutInstruction4,UI.ShortcutDownloadStep],videoDownloadURL:e,videoPreviewURL:t}).activate()},getSlugFromStageURL:function(e,t){var i=t?e.replace("/?","?"):e.split("?")[0];return i.substring(i.lastIndexOf("/")+1)},setRepositionButtonPopoverCookie:function(e){$.cookie(e+"RepositionButtonPopoverShowed",!0,{expires:3650,path:"/"})},getRepositionButtonPopoverCookie:function(e){return"true"===$.cookie(e+"RepositionButtonPopoverShowed")?!0:!1},shouldPreferVideoAsset:function(e){return Helpers.StageType.isVideoV4()&&e.hasAnimated?!0:!1},removeFocusFromAllInputs:function(){var e=$("input:focus");return e.blur(),e},getMobileHelpTextCounter:function(){return this._mobileHelpTextCounter},setMobileHelpTextCounter:function(e){var t=e||1;this._mobileHelpTextCounter+=t},formatTime:function(e,t){var i,n,s,r;return i=[],n=Math.floor(e/3600),s=Math.floor(e%3600/60),r=Math.floor(e%60),n>0&&(i.push(n),10>s&&(s="0"+s)),10>r&&(r="0"+r),i.push(s),i.push(r),i.join(t)},sanitizeControlCharacters:function(){var e=/(?![\x09\x0A\x0D])[\x00-\x1F]/g;return function(t){return t.replace(e,"")}}.call(),loadVideoData:function(e,t){var i;i=document.createElement("video"),i.preload="metadata",i.onloadedmetadata=function(){URL.revokeObjectURL(i.src),t({duration:i.duration,height:i.videoHeight,url:e,width:i.videoWidth})},i.src=e},calcScalingFactor:function(e,t){var i=t.width*t.width+t.height*t.height,n=e.width*e.width+e.height*e.height;return 0===n?null:Math.sqrt(i/n)},calcScaledArea:function(e,t){return{name:e.name,width:e.width*t,height:e.height*t,y:e.y*t,x:e.x*t}},getEngine:function(){return null===window.engine||void 0===window.engine?null:window.engine},getProductShownData:function(){
var e={};return e.stageTags=Helpers.StageType.getStageTags(),e.resultUrl=window.location.href,e.eventAction="result.shown",window._stageData&&window._stageData.stage_data&&window._stageData.stage_data.image_type&&(e.eventCategory=Helpers.StageType._types[window._stageData.stage_data.image_type]),e},matchInitialAssets:function(e){return window.initialAssets&&window.initialAssets.id===e?!0:!1},checkAssetsDataCached:function(e){try{if(null===window.initialAssets)return;Helpers.App.matchInitialAssets(e)===!1&&Helpers.GlobalEventTracker.noticeError("Get cached data error",{message:"Stage id does not match",initialAssetsId:window.initialAssets&&window.initialAssets.id})}catch(t){Helpers.GlobalEventTracker.noticeError("Get cached data error",t)}},getNetworkData:function(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return e?{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:e.saveData}:{}},getUserLocation:function(){return $.cookie("gtmc_user_location")},getOverflow:function(e,t,i){var n={},s=i||0;return t.top<s?n.top=s-t.top:t.top+t.height>e.height-s&&(n.bottom=t.top+t.height-e.height+s),t.left<s?n.left=s-t.left:t.left+t.width>e.width-s&&(n.right=t.left+t.width-e.width+s),n},parseBoolean:function(e){return"string"==typeof e&&"true"===e||e===!0||1===e?!0:!1},setUserType:function(e){this._userType=e||{}},getUserType:function(){return this._userType},getCookie:function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:""},isDevMode:function(){return!!window.devMode},getMobileControlsModalState:function(){return this._floatingContainerState},setMobileControlsModalState:function(e){this._floatingContainerState=e},isMinChromeVersion:function(e){var t=navigator.userAgent,i=0;return i=t.indexOf("Chrome"),-1!==i?t.substring(i+7,i+9)>=e:!1},isBase64Image:function(e){var t=/^data:(.*?);base64,(.*)$/.exec(e);return null===t?!1:!0},getPageId:function(){var e=Boolean(window.history.state)!==!1&&Boolean(window.history.state.pageId)!==!1;return e?window.history.state.pageId:this.generateUid()},getNavigationId:function(){var e=Boolean(window.history.state)!==!1&&Boolean(window.history.state.navigationId)!==!1;return e?window.history.state.navigationId:this.generateUid()},getPerformanceNavigationType:function(){return Boolean(window.performance)!==!1?window.performance.getEntriesByType("navigation")[0]||window.performance.navigation:void 0},getNavigationType:function(){var e=this.getPerformanceNavigationType(),t="reload";return void 0===typeof e?t:"string"==typeof e?e[0]:1===e?t:"navigate"},rgbToHex:function(e,t,i){return e=e.toString(16),t=t.toString(16),i=i.toString(16),1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),"#"+e+t+i},isInWatermarkExperiment:function(){var e="1QdtL8ZYDh6q4Rnr9v:0i";return Helpers.App.getCookie("experiment_id").includes(e)&&Helpers.App.isLoggedIn()&&Helpers.StageType.isSmartTemplate()?!0:!1},isRefactorEnabled:function(){return Helpers.App.getUrlParam("devMode")?Helpers.App.isDevMode():window.isEnableRefactor&&"B"===Helpers.App.getNewGraphicsExpVariant()},redirectToPricing:function(){var e=["stateId"],t=new URL(window.location.href);e.forEach(function(e){t.searchParams["delete"](e)}),window.location.href="/pricing"+t.search},isPlaceitHomePage:function(){return window.pageType.is_home&&!window.pageType.is_search&&!window.pageType.no_results},encodeUrlStateToBase64:function(e){var t={path:e};return btoa(JSON.stringify(t))},urlHasParams:function(){var e=Helpers.App.getAllURLParams(),t=Object.keys(e).length;return 1>t?!1:!0},getUrlWithSsoProviderFallbackParam:function(e,t){var i="?",n=e+"Fallback="+t,s=window.location.href;return Helpers.App.urlHasParams()===!0&&(i="&"),Helpers.App.isApiPage()===!0&&(n+="&api_page=true"),s+i+n},isExternalSsoFallbackUrl:function(e){return Helpers.App.getUrlParam(e+"Fallback")?!0:!1},deleteURLParam:function(e){var t=window.location.href;if(e&&!(t.indexOf(e)<0)){var i=t.split("?"),n=i[1].split("&"),s=n.filter(function(t){return t.indexOf(e)<0?t:void 0}),r=s.join("&"),o=i[0];r.length>0&&(o+="?"+r),window.history.replaceState(null,"",o)}},isApiPage:function(){return window.apiPage},setCookie:function(e,t,i){var n=new Date;n.setTime(n.getTime()+864e5*i),document.cookie=e+"="+t+";path=/;expires="+n.toGMTString()},deleteCookie:function(e){Helpers.App.setCookie(e,[],-1)},getExperimentVariant:function(e,t){var i=Helpers.App.getCookie("experiment_id"),n=i.indexOf(e);if(0>n)return"";var s=n+e.length,r=i.substring(s,s+2),o=t[r];return o?o:""},updateURLByPushState:function(e){var t={pageId:Helpers.App.generateUid(),navigationId:Helpers.App.getNavigationId()};window.history.pushState(t,Helpers.StageType.getStageSlug(),e),Helpers.State&&Helpers.State.dispatch("pushstate",t)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},isRefactorFlagEnabled:function(){return Helpers.App.getUrlParam("refactorEnabled")?"true"===Helpers.App.getUrlParam("refactorEnabled"):window.isRefactorFlagEnabled},getSubscriptionEventName:function(e){var t;switch(t="Subscription:success:",e){case Registry.Plans.PLAN_MONTHLY:t+="Unlimited";break;case Registry.Plans.PLAN_ANNUAL:t+="Unlimited:Annual"}return t},isMerchPreviewEnabled:function(){return Helpers.App.getUrlParam("merchPreviewEnabled")?"true"===Helpers.App.getUrlParam("merchPreviewEnabled"):window._pl_featureFlags.pa2880_enable_merch_preview},isMoveMerchPreviewEnabled:function(){return Helpers.App.getUrlParam("moveMerchPreviewEnabled")?"true"===Helpers.App.getUrlParam("moveMerchPreviewEnabled"):window._pl_featureFlags.pa4325_enable_move_merch_preview},isHideColorPickerEnabled:function(){return Helpers.App.getUrlParam("hideColorPickerEnabled")?"true"===Helpers.App.getUrlParam("hideColorPickerEnabled"):window._pl_featureFlags.pa4216_enable_hide_colorpicker},isNewPricingCopyEnabled:function(){var e=$.cookie("experiment_id")||"";return e.includes("BDOzg4S5S86dAqyKWH")?e.includes("BDOzg4S5S86dAqyKWH:J5")?!1:!0:!1},getNewGraphicsExpVariant:function(){var e="BRK9I7MGc5S8IExsQw:",t={VA:"A",ic:"B"};return Helpers.App.getExperimentVariant(e,t)},isBrandkitEnabled:function(){return Helpers.App.getUrlParam("dev_mode")?"true"===Helpers.App.getUrlParam("dev_mode"):window.isBrandkitEnabled},getRecommendedTemplatesVersion:function(){var e="Zqp5JkDnLreTwb1RDH:",t={WB:"A",Yt:"B",hO:"C",aq:"D"},i=Helpers.App.getExperimentVariant(e,t);return i.length?i:"A"},shouldDisableGridRollovers:function(){if("BR"===window._pl_locale||Helpers.App.isMobile()===!0)return!1;var e=Helpers.App.pageType();if("custom_experiences"===e.type||"category"===e.type){if("mockups"===e.category)return!1;var t="tU4Z1Ko9WWrBhMCyYN",i=$.cookie("experiment_id")||"";if(i.includes(t+":N8"))return!0}return!1},getAllApparelVariant:function(){var e=window.location.href,t=Object.keys(Helpers.App.getAllURLParams()).length;if(e.includes("apparel-mockups")===!1)return"A";if(0!==t)return"A";var i="0GqPKF8qow0GhYzeOS:",n={sC:"A",DN:"B",GI:"C",Li:"D"};return Helpers.App.getExperimentVariant(i,n)},getDiscountHighlightVersion:function(){if("BR"===window._pl_locale)return"A";var e="jQyVmghVxdeFywxP8A:",t={"6D":"A",XZ:"B",eh:"C",BM:"D","7M":"E"};return Helpers.App.getExperimentVariant(e,t)},isMerchYggdrasilEnabled:function(){return Helpers.App.getUrlParam("merchYggdrasilEnabled")?"true"===Helpers.App.getUrlParam("merchYggdrasilEnabled"):window._pl_featureFlags.pa3585_enable_merch_yggdrasil},isRecentlyUploadedExperimentActive:function(e){var t=null,i=null,n={development:"hHCZkMtqFtMWCHcWcQ",staging:"hHCZkMtqFtMWCHcWcQ",production:"p2qxYqzP2KVTWvhhxa"},s={development:{A:"rA",B:"pS",C:"JL",D:"lt"},staging:{A:"rA",B:"pS",C:"JL",D:"lt"},production:{A:"K3",B:"hT",C:"qx",D:"yD"}},r=s[window.environment],o=Helpers.App.getUrlParam("experiment_variant",location.href);if(Boolean(o))return e.includes(o);if(t=n[window.environment],i=Helpers.App.getCookie("experiment_id"),i.includes(t)===!1&&e.includes("A"))return!0;var a=Object.keys(r).filter(function(n){return e.includes(n)&&i.includes(t+":"+r[n])});return Boolean(a.length)},isRecentlyUploadedExperimentFixedVariantsActive:function(){return Helpers.App.isRecentlyUploadedExperimentActive(["B","C","D"])&&Helpers.App.isBrandkitPage()===!1&&Helpers.StageType&&Helpers.StageType.isStage()},getRecentlyUploadedImages:function(){var e=this;return RecentlyUploadedImages.getCollection().then(function(t){return t.recently_uploaded_images.length>0&&(e._user.hasRecentlyUploadedImages=!0),t.recently_uploaded_images})["catch"](console.error)},getUserDownloadsImages:function(){var e=this;return DownloadedImages.fetch().then(function(t){return t.total_productshots>0&&(e._user.hasUserDownloadsImages=!0),t})["catch"](console.error)},isBrandkitPage:function(){return window.pageType&&window.pageType.type&&"user_brand_page"===window.pageType.type},isSidebarRedesignEnabled:function(){return Helpers.App.isRefactorEnabled()===!1?!1:Helpers.App.getUrlParam("sidebarRedesignEnabled")?"true"===Helpers.App.getUrlParam("sidebarRedesignEnabled"):window._pl_featureFlags.pa3325_enable_sidebar_redesign},isPinAssetEnabled:function(){return Helpers.App.getUrlParam("pinAssetEnabled")?"true"===Helpers.App.getUrlParam("pinAssetEnabled"):window._pl_featureFlags.pa2676_enable_pin_asset},isForYouExperimentActive:function(){var e="MfXcyBKV95w2BtbLp9:",t={Y8:"fryA",BW:"fryB"};return"fryB"===Helpers.App.getUrlParam("for_you_experiment")&&"production"!==window.environment?!0:"fryB"===Helpers.App.getExperimentVariant(e,t)&&Helpers.App.isLoggedIn()&&"home"===window.pageType.type}}),Module(Helpers,"StageType")({VIDEO_UUID_COOKIE_NAME:"video-uuid",_types:{1:"still",2:"multi-stage",3:"blender",5:"workflow",6:"wide-still",7:"liveImage",8:"video",9:"psd",10:"multicolor",11:"video-product",12:"ios-screenshot",13:"smart-template",14:"ae_video_replacement",15:"fusion_video",18:"video_v5"},_filterNames:{types:"f_types",devices:"f_devices",tags:"f_tags"},_stageInfo:null,_backgroundInfo:null,_isYouTubeUpload:!1,_isHorizontallyFlipped:!1,_structureInstance:null,_blanksCanvasStageSlug:"blank-canvas-designs",_designCategoryName:"Design Templates",setStageInfo:function(e){this._stageInfo=e,window._stageData.stage_data.custom_price=window._stagePrice},setStageId:function(e){this._stageInfo.id=e},setAlternatives:function(e){this._hasAlternatives=e},getFilterNames:function(){return this._filterNames},getStageInfo:function(){return this._stageInfo||!1},getStageID:function(){return this.getStageData().id},getRecordId:function(){return this.getStageData().smart_object_v4_id},getStageSlug:function(){return this.getStageInfo().slug},getStageType:function(){var e=this.getStageInfo().image_type;return this._types[e]},getStageName:function(e){var t=e;return this._types[t]},getCategoryName:function(){return this.getStageData().category_name},getTags:function(){return this.getStageData().tags},getStageData:function(e){return window._stageData&&window._stageData.stage_data?window._stageData.stage_data:{}},getStageTags:function(){var e,t;return t=[],e=Helpers.StageType.getStageInfo().tags||Helpers.StageType.getStageData().tags,e&&e.forEach(function(e){t.push(e.name.toLowerCase())}),t.join()},setBackgroundInfo:function(e){this._backgroundInfo=e,null!==e&&e.tags instanceof Array&&(this._backgroundInfo.transparent=e.tags.some(function(e){return"transparent"===e.name.toLowerCase()}))},getBackgroundInfo:function(){return this._backgroundInfo},getBackgroundID:function(){var e=this.getBackgroundInfo();return e&&(e=e.id),e},getBackgroundOrColorID:function(){var e,t;return e=this.getBackgroundInfo(),t=Helpers.App.getUrlParam("color"),e?e=e.id:t&&(e=t),e},_productshotInfo:null,_productshotID:null,_videoProcessID:null,_videoProductUUID:null,setProductshotInfo:function(e){this._productshotInfo=e},getProductshotInfo:function(){return this._productshotInfo},setProductshotID:function(e){this._productshotID=e},getProductshotID:function(){return this._productshotID},setVideoProcessID:function(e){this._videoProcessID=e},getVideoProcessID:function(){return this._videoProcessID},setVideoProductUUID:function(e){var t;this._videoProductUUID=e;var i=Helpers.StageType.VIDEO_UUID_COOKIE_NAME;e?(t=new Date,t.setTime(t.getTime()+18e5),$.cookie(i,e,{expires:t,path:location.pathname})):$.removeCookie(i,{path:location.pathname})},getVideoProductUUID:function(){return this._videoProductUUID?this._videoProductUUID:$.cookie(Helpers.StageType.VIDEO_UUID_COOKIE_NAME)||null},getProductshotURL:function(){return location.protocol+"//"+location.host+"/"+this.getProductshotInfo().hsh},isFree:function(){var e=!1,t=this.getStageInfo();Helpers.App.getSubscription();return t&&(e=t.is_free),e||Helpers.App.isAdmin()},hasVector:function(){var e=!1,t=this.getStageInfo();return t&&(e=t.has_vector),e},isStillshot:function(){return 1===window._stageData.stage_data.image_type},isWideStillshot:function(){return 6===window._stageData.stage_data.image_type},isRealshot:function(){var e=this.getStageInfo(),t=e&&5===e.image_type;return t},isBlender:function(){return 3===window._stageData.stage_data.image_type},hasGesture:function(){return this.getStageInfo().has_hand},isBlenderGesture:function(){return this.isBlender()&&this.hasGesture()},isLiveImage:function(){return 7===this.getStageInfo().image_type},isFusionVideo:function(){return 15===this.getStageInfo().image_type},isStageWide:function(){return null!==this.getStageInfo()&&this.getStageInfo().is_wide===!0},isBackgroundWide:function(){return null!==this.getBackgroundInfo()&&this.getBackgroundInfo().is_wide===!0},isWide:function(){return this.isStageWide()||this.isBackgroundWide()},isMultiStage:function(){return 2===window._stageData.stage_data.image_type},isTransparentStage:function(){var e,t,i=Helpers.StageType.isFree(),n=Helpers.StageType.getBackgroundInfo();return t=Helpers.StageType._isTransparentBackground(),n&&t&&i===!1?!0:(e=Helpers.StageType.isTransparent(),n&&!t&&e?!1:Helpers.StageType.isTransparent()?!0:!1)},isIOSScreenshot:function(){return 12===window._stageData.stage_data.image_type},isSmartTemplate:function(){return 13===window._stageData.stage_data.image_type||17===window._stageData.stage_data.image_type},isCropperTool:function(){return 17===window._stageData.stage_data.image_type},isPsd:function(){return 9==this.getStageInfo().image_type},isMulticolor:function(){return this.getStageInfo()&&10==this.getStageInfo().image_type},isVideoV4:function(){return this.getStageInfo()&&15==this.getStageInfo().image_type},isStage:function(){return window.pageType&&window.pageType.is_stage&&"Tools"!==window.pageType.page_type},isTool:function(){return Boolean(this.getStageData().tool_name)},isToolName:function(e){var t=this.getStageData().tool_name;return this.isTool()&&e===t?!0:!1},isLogo:function(){return this.getStageInfo()&&"Logos"===this.getStageInfo().category_name},isMultiSelect:function(){return this.getStageType()?this.getStageType().indexOf("still")>=0:!1},isShareable:function(){return this.getStageType()&&(this.isStillshot()||this.isWideStillshot()||this.isBlender())},isPublished:function(){return window._stageData&&window._stageData.stage_data&&1===window._stageData.stage_data.is_published?!0:!1},hasVideoDiscount:function(){return this.getStageInfo().has_discount},hasAlternatives:function(){return this._hasAlternatives},isYouTubeUpload:function(){return this._isYouTubeUpload},setYouTubeUploadFlag:function(e){return this._isYouTubeUpload=e,this},setFlippedState:function(e){return this._isHorizontallyFlipped=e,this},isHorizontallyFlipped:function(){return this._isHorizontallyFlipped},isTransparent:function(){return this.getStageInfo().is_transparent===!0},_isTransparentBackground:function(){var e=Helpers.StageType.getBackgroundInfo();return e&&e.is_transparent},getNiceBackgroundID:function(){return this._stageInfo.background_id},getNiceFileID:function(){return this._stageInfo.file_id},setNiceBackgroundID:function(e){return this._stageInfo.background_id=e,this},setNiceFileID:function(e){var t="";return t=/"/.test(e)?e.match(/"(.*?)"/)[1]:e,this._stageInfo.file_id=t,this},getNiceCaptionMetadata:function(){return this._stageInfo.nice_caption_metadata},setNiceCaptionMetadata:function(e){return this._stageInfo.nice_caption_metadata=e,this},setNiceImage:function(e){return this._stageInfo.nice_image=e,this},getNiceImage:function(){return this._stageInfo.nice_image},setDesignPlan:function(e){return this._stageInfo.designPlan=e,this},getDesignPlan:function(){return this._stageInfo.designPlan},setStructureInstance:function(e){this._structureInstance=new Structure({tree:e})},getStructureInstance:function(){return this._structureInstance},setPreviewImage:function(e){return this._stageInfo.previewImage=e,this},getPreviewImage:function(){var e=this;if(window.engine){window.engine._deactivateInteractions(),window.engine._refresh();var t=window.engine.getImage();return t=t.replace(/^data:(.*?);base64,/,""),Promise.resolve(t)}if(this._stageInfo.previewImage)return Promise.resolve(this._stageInfo.previewImage);var i=function(e){return e=e+"?_timestamp="+Date.now(),new Promise(function(t,i){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){var e=new FileReader;e.readAsDataURL(n.response),e.onload=function(e){t(e.target.result)}},n.onerror=function(e){i(e)},n.send()})},n=null,s=null;return page&&page.stage&&(s=page.stage),window.isApiWindow&&(s=page.stageApi),n=s._cdnBasePath()+"/smart_templates/"+s.smart_object_id+"/"+s.record.previewImage.value,i(n).then(function(t){return e._stageInfo.previewImage=t.split(",")[1],e._stageInfo.previewImage})["catch"](function(e){return{error:JSON.stringify(e),message:"Something went wrong fetching the image.",url:n}})},getCustomPrice:function(){return this.getStageInfo().custom_price},getMaxUserAddedTexts:function(){return this.getStageInfo().max_user_added_texts||0},getMaxUserAddedGraphics:function(){var e=this.getStageInfo().max_user_added_graphics||0;return e&&3},getAddGraphicAssetGroup:function(){return this.getStageInfo().add_graphic_asset_group},getStageRecordId:function(){var e=window.page&&window.page.stage,t=e&&e.record;return t&&t.id?t.id:null},getTheme:function(){return new Promise(function(e,t){Helpers.App.isAdmin()===!0&&e(ThemeSupport.ADMIN),Helpers.App.getSubscription()&&e(ThemeSupport.SUBSCRIBED);try{var i=Helpers.Price.stage(Helpers.PremiumAssetsValidator.getStageInfo());i.price.then(function(t){0===t&&e(ThemeSupport.FREE),i.priceWithDiscount.then(function(t){e(0===t?ThemeSupport.FREE:ThemeSupport.PAID)})})}catch(n){t(n)}})},isBlankCanvasStage:function(){return Helpers.StageType.pageType().isBlankCanvas},isDesignCategory:function(){return this.getCategoryName()&&this.getCategoryName()===this._designCategoryName},hasSibling:function(){var e=Helpers.StageType.isSmartTemplate(),t="Mockups"===Helpers.StageType.getCategoryName();return e&&t&&(this.isSibling()===!0||this.isSiblingOriginal()===!0)},isSibling:function(){return window._is_sibling||!1},isSiblingOriginal:function(){return window._is_sibling_original||!1},getSiblingUrl:function(){return window._sibling_url},isAnimatedTemplate:function(){return void 0!==window.linked_stage_id_for_animated_templates},isVideoV5:function(){return this.getStageInfo()&&18===this.getStageInfo().image_type},isVideo:function(){return this.isVideoV4()||this.isVideoV5()},getSmartTemplateClass:function(){return Helpers.StageType.isBlankCanvasStage()?UI.SmartTemplate.BlankCanvasStage:UI.SmartTemplate.StageCanvas},pageType:function(){return window.pageType?(window.pageType.header_type=window.headerType,window.pageType):{}},getBundleTags:function(){return this.getTags().filter(function(e){return e.is_bundle===!0})},getControlsViewport:function(){var e,t;return t=window.structureData,e={},Engine.prototype._treeWalker(t,"layers",function(t){var i=t.name.replace("_original","");if(t.layers&&t.layers.length&&t.layers[0].smartObject){var n=t.layers[0].smartObject;e[i]={width:n.width,height:n.height}}}),this.getControlsViewport=function(){return e},this.getControlsViewport()},getControlViewport:function(e){return Helpers.StageType.getControlsViewport()[e]}}),Module(Helpers,"Price")({stage:function(e){var t=Helpers.Price._checkStageInfo(e);if(t===!1)throw new Error("Incorrect stage info object.");var i=Helpers.App.getSubscription(),n={price:Promise.resolve(0),priceWithDiscount:Promise.resolve(0)};if(i&&!i.is_paused)return n;if(e.is_free||Helpers.App.isAdmin())return n;var s=14,r=2;(15===e.image_type||Helpers.StageType.isVideoV5()===!0)&&(s=11,r=3);var o=e.custom_price;o||(o=window.packages[s+":"+r]);var a=Helpers.Price._applyCoupon(o);return{price:Promise.resolve(o),priceWithDiscount:Promise.resolve(a)}},plan:function t(t){return Helpers.Price._getPlanPrice(t)},monthlyPlan:function(){var e;return e=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),Helpers.Price._getPlanPrice(e)},annualPlan:function(){var e;return e=Registry.Plans.get(Registry.Plans.PLAN_ANNUAL),Helpers.Price._getPlanPrice(e)},tax:function(e,t,i){return new Promise(function(n,s){recurly.tax({tax_code:"digital",vat_number:i,country:e},function(e,i){var r;return null!==e?void s(e):(r=Helpers.Price._calculateTax(t,i),void n(r))})})},_getPlanPrice:function(e){var t,i,n;return n=Helpers.App.getSubscription(),t=e.amount_in_cents/100,i=n?Promise.resolve(t):Helpers.Price._applyCouponToPlan(e,t),{price:Promise.resolve(t),priceWithDiscount:i}},_applyCoupon:function(e){var t;return null===Helpers.CouponHelper.getCode()?Promise.resolve(e):Helpers.CouponHelper.isValid()===!1?Promise.resolve(e):Helpers.CouponHelper.isValid()?Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)?(t=Helpers.CouponHelper.calculatePrice(e),Promise.resolve(t)):Promise.resolve(e):new Promise(function(i){var n=function(){return Helpers.CouponHelper.unbind("coupon.validated",n),Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)?(t=Helpers.CouponHelper.calculatePrice(e),i(t)):i(e)};Helpers.CouponHelper.bind("coupon.validated",n)})},_applyCouponToPlan:function(e,t){var i;return null===Helpers.CouponHelper.getCode()?Promise.resolve(t):Helpers.CouponHelper.isValid()===!1?Promise.resolve(t):Helpers.CouponHelper.isValid()?Helpers.CouponHelper.applyToPlan(e.recurly_uuid)?(i=Helpers.CouponHelper.calculatePrice(t),Promise.resolve(i)):Promise.resolve(t):new Promise(function(n){var s=function(){return Helpers.CouponHelper.unbind("coupon.validated",s),Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(e.recurly_uuid)?(i=Helpers.CouponHelper.calculatePrice(t),n(i)):n(t)};Helpers.CouponHelper.bind("coupon.validated",s)})},_calculateTax:function(e,t){var i;return i={rate:0,amount:0,type:null},t[0]&&(i.rate=t[0].rate,i.amount=e*i.rate,i.type=t[0].type),i},_checkStageInfo:function(e){return e?stagesInfo instanceof Object==!1?!1:e.hasOwnProperty("custom_price")&&e.hasOwnProperty("image_type"):!1},format:function(e){return e>0?(e=e.toFixed(2),e=e.replace(/\.?0+$/,""),e=window.currencyHelper.getSymbol(recurlyConfig.currency)+e):e="Free",e}}),Class("CurrencyHelper")({prototype:{_hashMap:{},init:function(e){this._hashMap=e},setCurrency:function(e,t){this._hashMap[e]=t},getLabel:function(e){var t=this._hashMap[e];if(!t)throw new Error("Currency code not supported");return t.label},getSymbol:function(e){var t=this._hashMap[e];if(!t)throw new Error("Currency code not supported");return t.symbol}}}),Module(Registry,"BulkPackages")({_data:null,set:function(e){return 0===arguments.length?!1:void(this._data=e)},get:function(){return this._data}}),Module(Registry,"Credits")({_data:null,set:function(e){if(0==e)return!1;var t,i,n,s,r,o;if(t=Helpers.App.getSubscription(),i=Registry.UserBulkPackages.hasAny(),n=e.credits_expire_dates,t)for(var a in n.subscriptions)n.subscriptions.hasOwnProperty(a)&&(s=new Date(n.subscriptions[a]).getTime());i&&(Registry.UserBulkPackages.getRemainingExtended()&&n.bulk_purchases.ext_credits.forEach(function(e){for(var t in e)if(e.hasOwnProperty(t)){var i=new Date(e[t]).getTime();o?o>i&&(o=i):o=i}}),Registry.UserBulkPackages.getRemainingStandard()&&n.bulk_purchases.std_credits.forEach(function(e){for(var t in e)if(e.hasOwnProperty(t)){var i=new Date(e[t]).getTime();r?r>i&&(r=i):r=i}})),e._expire_dates={subscription:s,bulk_standard:r,bulk_extended:o},this._data=e},get:function(){return this._data},getTotal:function(){var e=this.get(),t=e&&e.total_credits||0;return t}}),Module(Registry,"Licenses")({_data:null,_normalizeToString:function(e,t){Object.keys(e).forEach(function(i){e[i][t]=e[i][t].toString()})},set:function(e){return 0===arguments.length?!1:(this._data=e,void this._normalizeToString(this.get(),"id"))},get:function(){return this._data},getByKey:function(e){var t=!1,i=this.get();return Object.keys(i).some(function(n){i[n].key===e&&(t=i[n])}),t}}),Module(Registry,"Plans")({PLAN_MONTHLY:window.ACTIVE_PLANS.MONTHLY_PLAN_CODE,PLAN_ANNUAL:window.ACTIVE_PLANS.ANNUAL_PLAN_CODE,_data:null,set:function(e){return 0===arguments.length?!1:void(this._data=e)},get:function(e){var t=null;return e?(this._data&&this._data.forEach(function(i){i.recurly_uuid===e&&(t=i)}),t):this._data}}),Module(Registry,"Resolutions")({_data:null,set:function(e){return 0===arguments.length?!1:void(this._data=e)},get:function(){return this._data},getByKey:function(e,t,i){var n=!1,s=i||this.get();return Object.keys(s).some(function(i){return s[i][e]===t?(n=s[i],!0):void 0}),n}}),Module(Registry,"UserBulkPackages")({_data:null,set:function(e){return 0==e?!1:void(this._data=e)},get:function(){return this._data},hasAny:function(){return this.get()&&this.get().length>0||!1},getRemainingExtended:function(){var e=0;return this.get().forEach(function(t){for(var i in t)t.hasOwnProperty(i)&&(e+=t[i].extendeds.remaining)}),e},getRemainingStandard:function(){var e=0;return this.get().forEach(function(t){for(var i in t)t.hasOwnProperty(i)&&(e+=t[i].standards.remaining)}),e}}),Class("DataCollector")({API_KEY:window.braintreeConfig.publicKey,_dataCollectorInstancePromise:null,loadDataCollector:function(){return this._dataCollectorInstancePromise=braintree.client.create({authorization:this.API_KEY}).then(function(e){return braintree.dataCollector.create({client:e,kount:!0}).then(function(e){return e})}),this._dataCollectorInstancePromise},getDataCollector:function(){return this._dataCollectorInstancePromise?this._dataCollectorInstancePromise:this.loadDataCollector()}}),Module(Modals,"Billing")({billingUpdateOptions:null,retryCardBtn:null,updateBillingBtn:null,updateBillingInfoModal:null,failedTransactionModal:null,acceptFailedTransaction:null,_billingUpdateSuccessCallback:null,spinnerPreloaded:!1,setupUpdateCardModal:function(e){var t="/account"===window.location.pathname&&"?update=true"===window.location.search;if(t){var i=$("body");i.css("overflow","initial"),i.animate({scrollTop:$(".account-info").offset().top-98},1e3)}else this.updateBillingInfoModal.billingInfo&&this.updateBillingInfoModal.billingInfo.destroy(),this.updateBillingInfoModal.appendChild(new UI.BillingInfo({name:"billingInfo",accountRecord:window.account})),this.updateBillingInfoModal.billingInfo.bind("update.success",function(){Helpers.GlobalEventTracker.billingUpdateSuccess(),Helpers.App.checkPastDueStatus({success:e,applyInvoice:!1})}),this.updateBillingInfoModal.activate().billingInfo.render($("#billingInfoModal")),page.dispatch("billing.update");return this},setBillingUpdateCallback:function(e){this._billingUpdateSuccessCallback=e||null},showUpdateBillingInfoModal:function(){return this.updateBillingInfoModal.activate(),this},hideUpdateBillingInfoModal:function(){return this.updateBillingInfoModal.deactivate(),this},unbindBillingInfoHide:function(){return this.updateBillingInfoModal.element.off("hidden.bs.modal"),this},bindBillingInfoHide:function(e){return this.updateBillingInfoModal.element.on("hidden.bs.modal",e),this},bindBillingButtons:function(){return this.retryCardBtn=this.billingUpdateOptions.element.find(".retry-card"),this.updateBillingBtn=this.billingUpdateOptions.element.find(".update-billing"),this.optionsCloseBtn=this.billingUpdateOptions.element.find(".close"),this.retryCardBtn.click(function(){var e=$(".alert-dismissible");e.length&&e.remove(),this.retryCardBtn.addClass("loading"),Helpers.GlobalEventTracker.retryCardBtnClick(),this.billingUpdateOptions.element.off("hidden.bs.modal"),Helpers.App.tryToApplyInvoice({success:function(){this.retryCardBtn.removeClass("loading"),this.hideBillingUpdateOptionsModal(),this._billingUpdateSuccessCallback()}.bind(this),error:function(){this.retryCardBtn.removeClass("loading"),this.showFailedTransactionModal()}.bind(this),applyInvoice:!0})}.bind(this)),this.updateBillingBtn.click(function(){Helpers.GlobalEventTracker.updateBillingClick(),this.billingUpdateOptions.element.off("hidden.bs.modal"),this.setupUpdateCardModal(this._billingUpdateSuccessCallback),this.hideBillingUpdateOptionsModal()}.bind(this)),this.optionsCloseBtn.click(function(){Helpers.GlobalEventTracker.closedOptionsModal()}),this.preloadSpinner(),this},showBillingUpdateOptionsModal:function(e){return Helpers.GlobalEventTracker.showBillingUpdateOptionsModal(),this.setBillingUpdateCallback(e),this.billingUpdateOptions.element.off("hidden.bs.modal"),this.billingUpdateOptions.element.removeClass("spinner"),this.billingUpdateOptions.element.on("hidden.bs.modal",e),this.billingUpdateOptions.activate(),this},hideBillingUpdateOptionsModal:function(){return this.billingUpdateOptions.deactivate(),this},addSpinnerOnBillingOptions:function(){return this.billingUpdateOptions.element.addClass("spinner"),this},removeSpinnerOnBillingOptions:function(){return this.billingUpdateOptions.element.removeClass("spinner"),this},handleFixCTA:function(){Helpers.GlobalEventTracker.fixCTAClick(),this.unbindBillingInfoHide(),this.showBillingUpdateOptionsModal()},showFailedTransactionModal:function(){var e=$('<div style="" class="alert alert-danger alert-dismissible"></div>'),t=$('<span class="billing_error_message">Your Card Was Declined</span> <a href="#" class="close" style="text-decoration: none;" data-dismiss="alert" aria-label="close">&times;</a></div>');e.append(t);var i=$(".modal-content");e.insertBefore(i)},preloadSpinner:function(){if(!this.spinnerPreloaded){var e=$("<div style=\"background:url('/assets/loaders/7121.gif')\"></div>").appendTo("body");this.spinnerPreloaded=!0,setTimeout(function(){e.remove()},3e3)}}}),window.stagesInfo=stageData.stages,window.backgroundsInfo=stageData.backgrounds,window.handsInfo=stageData.hand_sets,Helpers.App.resetOldTrackerId(),Helpers.App.getTrackerId()||Helpers.App.setTrackerId(window.placeitTrackerId),window.placeitTrackerId=Helpers.App.getTrackerId(),Helpers.App.setUser(window._pl_userInfo),Helpers.App.setCoupon(window._pl_userCoupon),Helpers.App.setPurchases(window._pl_hasPurchases),Helpers.App.setAdmin(window._pl_isAdmin),Helpers.App.setBookmarksCount(window._pl_numberOfBookmarks),Helpers.App.setUserType(window._pl_userType),1==window._pl_hasSubscription&&Helpers.App.setSubscription(window._pl_subscription),Registry.BulkPackages.set(window._pl_bulkPackages),Registry.Plans.set(window._pl_plans),Registry.Licenses.set(window._pl_licenses),Registry.Resolutions.set(window._pl_resolutions),Registry.UserBulkPackages.set(window._pl_userBulkPkg),Registry.Credits.set(window._pl_credits),EventTracker=Class("EventTracker")({_disabled:!1,_totalErrors:0,_timeTotal:0,_startTime:0,_prevEvent:{},_debugMode:!1,send:function(e){var t=Helpers.App.getUser(),i=null;if(Li&&Li.stack&&(Li.events.push({type:e.type,instanceName:e.data?e.data.name||e.data.id||"---":"---",time:Date.now()}),Li.stack.push(Li.events[Li.events.length-1]),Li.events.length>20&&Li.stack.shift()),"undefined"!=typeof e.data?e.data=EventTrackerDataProcessor.process(e.data):e.data={},this._debugMode)return void("undefined"==typeof e.data||$.isEmptyObject(e.data)?console.log("%c EventTracker > Event pushed %c (w/o data): %c"+e.type,"color: blue; font-weight: bold;","color: gray;","color: green; font-weight: bold;"):(console.groupCollapsed("%c EventTracker > Event pushed: %c"+e.type,"color: blue;","color: green"),console.log(e.data),console.groupEnd()));if(!this._trackerDisabled()){Li&&"array"==typeof Li.stack&&Li.stack.push(e.type),t&&(i=t.id);var n="",s=window.placeitTrackerId||n,r={site_id:i,event_type:e.type,data:$.extend(e.data,{user_ip:window.userIp,session_id:window.placeitTrackerId,tracker_id:s,referrer:window.referrer,initial_url:window.initialUrl,user_agent:window.navigator.userAgent,user_time_stamp:Date.now()})};this._ajaxSend(r)}},info:function(e){var t=Helpers.App.getUser();if(t)var i=t.id;var n=window.placeitTrackerId||"",s=0;Helpers.App.getSubscription()&&(s=1),"Subscription:success:Unlimited"!==e.type&&"Subscription:success:Unlimited:Annual"!==e.type&&$.extend(e.data,{
category:window._pl_category,stage_type:Helpers.StageType._types[window._stageData.stage_data.image_type]||"No Info",tags:Helpers.StageType.getStageTags()||"No Info",background:Helpers.StageType.getBackgroundOrColorID()||"No Info",thumb:window._stageData.stage_data.large_thumb||"No Info",slug:window._stageData.stage_data.slug||"No Info",page_category:window._pl_category}),("Subscription:success:Unlimited"===e.type||"Subscription:success:Unlimited:Annual"===e.type)&&$.extend(e.data,{page_category:window._pl_category});var r={type:e.type,googleAnalytics:{clientId:this.getGoogleClientId()},amplitude:{sessionId:this.getAmplitudeSessionId()},page:this.pageFields(),data:$.extend(e.data,{user_id:i,user_ip:window.userIp,session_id:window.placeitTrackerId,tracker_id:n,referrer:window.referrer,properties:{email:t.email,status:t.status},type:"track",initial_url:window.initialUrl,user_agent:window.navigator.userAgent,user_time_stamp:Date.now(),hasSubscription:s,experiment_id:Helpers.GlobalEventTracker._getExperimentId()})};return r},debugTracker:function(){this.enable(),this._debugMode=!0,console.log("%c EventTracker > Log enabled %c (No ajax calls to the actual database)","color: blue","color: gray; font-style: italic;")},pageFields:function(){return{path:window.location.pathname,referrer:document.referrer,search:location.search,title:document.title,url:window.location.href}},getGoogleClientId:function(){return ga&&"function"==typeof ga.getAll?ga.getAll()[0].get("clientId"):void 0},getAmplitudeSessionId:function(){return void 0!==window.amplitude?amplitude.getSessionId():null},enable:function(){console.log("%c EventTracker > Enabled","color: green; font-weight: bold;"),this._disabled=!1,this.send({type:"Placeit:eventTracker:enabled"})},disable:function(){console.log("%c EventTracker > Disabled","color: red; font-weight: bold;"),this.send({type:"Placeit:eventTracker:disabled"}),this._disabled=!0},_trackerDisabled:function(){return this._disabled?!0:!1},_ajaxSend:function(e){var t=this;t._prevEvent===e?clearTimeout(t._senderTimeout):t._prevEvent=e,t._senderTimeout=setTimeout(function(){var t="event";(e.error||e.data.error)&&(t="error")},100)},setupErrorTracking:function(e,t){if(!this._trackerDisabled()){var i=this;$(document).ajaxError(function(n,s,r,o){i._ajaxSend({error:"ajax error",url:window.location.href,line:"N/A",site_id:Helpers.App.getUser().id,frame:t,meta:{type:n.type,ajaxType:r.type,url:r.url,data:n.data||null,userIp:window.userIp,sessionId:window.placeitTrackerId,trackerId:window.placeitTrackerId,history:e.Li&&e.Li.events}})})}}}),window.UI={},window.UI.Subscriptions={},window.UI.SmartTemplate={Mobile:{}},window.UI.CustomExperience={},window.UI.Tool={},window.UI.EyeDropper={},window.UI.Iframe={},window.UI.Factory={},Class(UI.Factory,"Notification")({createWarningNotification:function(e){e.closeButtonContent=e.closeButtonContent||'<icon class="p-icon p-sm remove"></icon>';var t=e.message||"",i=new UI.Notification(e),n=i.getElement(),s=n.find("span");s.addClass("alert-container");var r='            <span class="p-icon ic-warning"></span>            <span class="title">'+t+"</span>        ";return i.update(r,"warning-notification"),i},createCookieWarning:function(){var e=UI.Factory.Notification.createWarningNotification({name:"cookiesWarming",message:"We use cookies to ensure the best experience for you!<br>            <strong>Please enable third party cookies</strong> to sign up or log in."});return e.bind("cookiesWarming:close",function(){e.destroy()}),e}}),Class("UserIpLocation").includes()({prototype:{endpoint:"",key:"",_keyPrefix:"?key=",_keyParams:"",init:function(e){this.name=e.name,this.endpoint=e.endpoint,this._keyParams=this._keyPrefix+e.key},getIpAddressData:function(e){void 0===e&&(e="");var t=this,i=this.endpoint+e+this._keyParams;return new Promise(function(e,n){$.ajax({url:i,type:"GET",success:function(i){e(t._formatResponse(i))},error:function(e){n(e)}})})},_formatResponse:function(e){return{country:e.country,_originalResponse:e}}}}),Class(UI,"IncompatibleBrowser")({html:'        <div class="incompatible-browser">          <div class="dialog">            <div class="content">              <div class="body">                <div class="message">                  <h3>You\'ve got an outdated browser.<br />You need to upgrade right away!</h3>                  <p>To get the best possible experience using our website we recommend that you upgrade to a newer version or other web browser.</p>                  <p>A list of the most popular web browsers can be found below. Just click on the icons to get to the download page.</p>                  <ul class="list-unstyled browsers-list">                    <li>                      <a href="http://www.google.com/chrome" target="_blank">                        <img src="/assets/browsers/chrome-512.png" border="0" width="70">                        <span>Chrome</span>                      </a>                    </li>                    <li>                      <a href="http://getfirefox.com/" target="_blank">                        <img src="/assets/browsers/firefox-512.png" border="0" width="70">                        <span>Firefox</span>                      </a>                    </li>                    <li>                      <a href="http://www.apple.com/safari/download/" target="_blank">                        <img src="/assets/browsers/safari-512.png" border="0" width="70">                        <span>Safari</span>                      </a>                    </li>                  </ul>                </div>              </div>            </div>          </div>        </div>    ',prototype:{init:function(){$(document.body).append(this.constructor.html)}}}),Module("GenericDestroySupport")({prototype:{genericDestroy:function(){for(var e in this)-1===["name","element","children","parent"].indexOf(e)&&this.hasOwnProperty(e)&&(this[e]=null);this.element.find("*").off(),this.element.find("*").unbind(),Widget.prototype.destroy.call(this),this.eventListeners=null,this.name=null,this.element=null,this.children=null,this.parent=null}}}),Class(UI,"Notification").inherits(Widget)({elementClass:"alert",html:'        <div class="">          <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>          <span></span>        </div>    ',prototype:{autocloseTimeout:null,closeButtonContent:"",init:function(e){Widget.prototype.init.call(this,e),this.$body=$(document.body),this.$message=this.element.find("span"),this.closeBtn=this.element.find(".close"),this.closeButtonContent&&this.closeBtn.html(this.closeButtonContent)},bindEvents:function(){this.closeBtn.on("click",function(){this.close()}.bind(this))},alert:function(e){return this.update(e,"alert-danger"),this},warning:function(e){return this.update(e,"alert-warning"),this},info:function(e){return this.update(e,"alert-info"),this},success:function(e){return this.update(e,"alert-success"),this},update:function(e,t){return this.$body.addClass("with_flash"),this.$message.html(e),this.element[0].className="",this.element.addClass(t+" "+this.constructor.elementClass),this.bindEvents(),this},autoclose:function(e){var t=this;this.autocloseTimeout&&clearTimeout(this.autocloseTimeout),this.autocloseTimeout=window.setTimeout(function(){t.close()},e)},close:function(){this.$body.removeClass("with_flash"),this.closeBtn.off("click"),this.element.detach(),this.dispatch(this.name+":close")}}}),Module("PostMessageSupport")({prototype:{exposedCommands:{"show-subscribe-mailing-modal":{handler:function(){this.appNavBar.showSubscribeMailingModal()}},"show-signup-modal":{handler:function(){this.appNavBar.ssoModal.activate()}},"show-pricing-modal":{handler:function(){this.showPricingModal()}}},origins:["placeit","wishpondpages"],postMessageBindings:function(){var e=this;window.addEventListener("message",function(t){e.validatorOrigin(t.origin)!==!1&&e.executeCommand(t)},!1)},executeCommand:function(e){var t=e.data.command;if("string"==typeof t){var i=this.exposedCommands[t];"undefined"!=typeof i&&i.handler.call(this)}},validatorOrigin:function(e){var t=!1;return this.origins.forEach(function(i){e.indexOf(i)>-1&&(t=!0)}),t}}}),Class(UI,"SimpleModal").inherits(Widget).includes(GenericDestroySupport)({_HEADER_CONTENT:"You can replace this content by calling setHeaderContent(yourHTMLContent)",_BODY_CONTENT:"You can replace this content by calling setContent(yourHTMLContent)",html:'        <div class="modal fade in" id="" tabindex="-1" role="dialog" aria-hidden="false" data-backdrop="static" data-keyboard="false">            <div class="modal-dialog">                <div class="modal-content">                    <div class="modal-body"></div>                </div>            </div>        </div>',headerTemplate:'<div class="modal-header"></div>',prototype:{dismissable:!1,hasHeader:!1,headerContent:"",headerClass:"",bodyClass:"",init:function(e){return Widget.prototype.init.call(this,e),this.headerContent=this.headerContent||this.constructor._HEADER_CONTENT,this.headerContentContainer=this.element.find(".modal-header"),this.bodyContent=this.bodyContent||this.constructor._BODY_CONTENT,this.bodyContentContainer=this.element.find(".modal-body"),this.hasHeader&&(this.setHeaderContent(this.headerContent),this.headerContentContainer.addClass(this.headerClass)),this.setContent(this.bodyContent),this.bodyContentContainer.addClass(this.bodyClass),this.closeBtn=this.element.find(".close"),this.element.attr("id",e.name||""),this.dismissable&&this.element.removeAttr("data-backdrop"),this._bindings(),this},_bindings:function(){return this.closeBtn.click(function(){this.deactivate()}.bind(this)),this},setHeaderContent:function(e){return this.headerContent=e||"",0===this.headerContentContainer.length&&(this.headerContentContainer=$(this.constructor.headerTemplate).insertBefore(this.bodyContentContainer)),this.headerContentContainer.html(this.headerContent),this},setContent:function(e){return this.bodyContent=e||"",this.bodyContentContainer.html(this.bodyContent),this},addCloseButton:function(){return this.element[0].insertAdjacentHTML("afterbegin",'<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">\xd7</span></button>'),this},activate:function(){return this.active=!0,Widget.prototype.activate.call(this),this.element.modal("show"),this},deactivate:function(){return this.active=!1,Widget.prototype.deactivate.call(this),this.element.modal("hide"),this},destroy:function(){this.genericDestroy()},getBodyContainer:function(){return this.bodyContentContainer}}}),Module("SubscriptionSupport")({prototype:{$body:$(document.body),modalSubscription:null,initializeSubscriptionSupport:function(){this.buildSubscriptionModal(),this.buildBillingOptionsModal(),this.buildUpdateBillingInfoModal(),this.buildFailedTransactionModal(),this.buildFailedTransactionModal(),this.instantiatePurchasesModal(),this.buildCTABlockSection()},subscriptionBindings:function(){this.bind("billing.update",function(){this.showPastDueModal()}.bind(this));var e=function(e){var t;t={type:"warning",content:'Please create an account to continue your purchase.<br /> Already have an account?                         <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_LOGIN+'\')" class="trigger_login_link" role="button">Log In</a>',contentForceLogIn:'Please log in to continue your purchase.<br /> Don\'t have an account?                         <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_SIGNUP+'\')" class="trigger_signup_link" role="button">Sign Up</a> today!'},this.appNavBar.ssoModal.activate(),this.appNavBar.ssoModal.showMessage(t),this.pricingModal&&this.pricingModal.deactivate()}.bind(this);this.subscriptionsPartial.bind("subscription.success",function(e){this.subscriptionSuccess(e)}.bind(this)).bind("subscription.failure",function(e){this.subscriptionFail(e)}.bind(this)).bind("subscribe:button:clicked",function(e){this.subscribeButtonClick(e)}).bind("show:purchaseModal",function(){this.purchasesModal.activate()}.bind(this)).bind("purchase.not_logged_in",e),this.ctaBlockSection&&this.ctaBlockSection.bind("subscribe:button:clicked",function(e){this.subscribeButtonClick(e)}).bind(this).bind("subscription.success",function(e){this.subscriptionSuccess(e),this.dispatch("subscription.success")}.bind(this)).bind("purchase.not_logged_in",e),this.pricingPageVariantB&&this.pricingPageVariantB.bind("subscription.success",function(e){this.subscriptionSuccess(e)}.bind(this)),Modals.Billing.bindBillingButtons(),this.dispatch("subscription.bindings:done")},subscriptionSuccess:function(e){var t=this.stage&&this.stage instanceof UI.SmartTemplate.StageCanvas;this.appNavBar.updateStatus(),this.footerController&&this.footerController.updatePricingButton(),this.showCelebrationModal(),t&&this.stage.setRemoveWatermarkFlag();var i=Helpers.App.getSubscription();if(i&&!i.is_paused){if(!this.ctaBlockSection)return;var n=this.ctaBlockSection.element.parents("#landing-pages");this.ctaBlockSection.destroy(),n.remove()}},subscriptionFail:function(e){var t=e.data&&e.data.message||"Your subscription could not be actived, please try again later";this.flash(t,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})},buildSubscriptionModal:function(){this.modalSubscription=new UI.SubscriptionsPartial({name:"subscriptionsPartial",isMobile:Helpers.App.isMobile(),type:"modal",mockupsStagesCount:window._pl_mockupsStagesCount}),this.appendChild(this.modalSubscription),this.subscriptionsPartial.element.on("show.bs.modal",function(){if(Helpers.App.getSubscription()){var e=$('.plan-container[data-plan="'+Helpers.App.getSubscription().plan.recurly_uuid+'"]');e.addClass("disabled").trigger("click")}}.bind(this))},buildCTABlockSection:function(){var e=$("#cta-block-section"),t=Helpers.App.getSubscription();1===e.length&&t===!1?(this.ctaBlockSection=new UI.CTABlockSection({name:"ctaBlockSection",element:e}),this.appendChild(this.ctaBlockSection)):(t.is_annual===!1&&(this.ctaBlockSection=new UI.CTABlockSection({name:"ctaBlockSection",element:e}),this.appendChild(this.ctaBlockSection)),e.remove())},buildBillingOptionsModal:function(){var e='<button class="button primary retry-card">Try My Card Again</button>                <button class="button primary update-billing">Update Billing Information</button>',t='<p class="text-left modal-disclaimer">Your subscription will be canceled within 4 weeks from the first notice we\'ve emailed you if this issue is not resolved.</p>';Helpers.App.subscriptionIsActive()&&(e+=t),Modals.Billing.billingUpdateOptions=new UI.SimpleModal({name:"billingOptionsModal",hasHeader:!0,headerContent:'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                    <h4>Your Account is Past Due</h4>                    <p class="modal-subheading">Please choose from one of the options below</p>',bodyContent:e,bodyClass:"text-center"}).render(this.$body)},buildFailedTransactionModal:function(){Modals.Billing.failedTransactionModal=new UI.SimpleModal({name:"failedTransactionModal",hasHeader:!0,headerContent:'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                    <h4>Sorry we couldn\u2019t process your card!</h4>                    <p class="modal-subheading">Your card was declined.</p>',bodyContent:'<button class="button primary failed-transaction-accept">OK</button>',bodyClass:"text-center"}).render(this.$body)},buildUpdateBillingInfoModal:function(){Modals.Billing.updateBillingInfoModal=new UI.SimpleModal({name:"updateBillingInfoModal",hasHeader:!0,headerContent:'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                    <h4>You need to update your card!</h4>                    <p class="modal-subheading">You risk losing your downloads. Please update the information below.</p>',bodyContent:'<div id="billingInfoModal" class="form-group update-billing-info"></div>'}).render(this.$body)},showSubscriptionPlans:function(){return this.subscriptionsPartial.hideFooter(),this.showPricingModal(),this},showBulkPackages:function(){this.instantiatePricingModal().selectTabByName("ImageDownloadPacks").activate()},flashPastDue:function(){var e="Your account is past due! <a href='javascript:page.notification.close();Modals.Billing.handleFixCTA()'>Click here</a> to fix";this.flash(e,"warning",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})},showPastDueModal:function(){this.flashPastDue(),Modals.Billing.showUpdateBillingInfoModal()},hidePastDueModal:function(){Modals.Billing.hideUpdateBillingInfoModal()},handlePastDue:function(e){return Modals.Billing.unbindBillingInfoHide().showBillingUpdateOptionsModal(e).bindBillingInfoHide(e),this},showPricingModal:function(){var e=Helpers.App.getUserType();Helpers.GlobalEventTracker.pricingModalStillshots({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id,button_clicked:"pricing-button",user_type_name:e.name,user_type_id:e.id}),Helpers.App.isPricingPage()||Helpers.App.redirectToPricing()},instantiatePricingModal:function(){var e=this.isLogoPage(),t=Helpers.App.getCookie("experiment_id"),i=!1;return this.pricingModal?this.pricingModal:(t.includes("zwVyiMLpKS3HHf0h29:SW")&&Helpers.App.isMobile()===!0&&(i=!0),e?this.appendChild(new UI.SinglePurchasesModal({name:"pricingModal",reverseOrder:i,leftChild:new UI.LogoPurchaseModal,rightChild:new UI.SubscriptionsPartial({name:"subscriptionsPartialCompare",type:"modal",title:UI.SinglePurchasesModal.TEXT_SUBSCRIPTIONS_PARTIAL_TITLE,label:"Popular",mockupsStagesCount:window._pl_mockupsStagesCount})})):this.appendChild(new UI.TabbedModal({name:"pricingModal",page:e?"logo-page":null,headerTitle:e?"What Are You Looking For?":null,isMobile:Helpers.App.isMobile(),fade:!1,childs:[{widget:this.subscriptionsPartial,rerender:!0,descriptor:"Subscriptions are <b>60%+ cheaper</b> than buying one at a time!",label:"Subscription Plans",renderInTabList:!0,modalWidth:Helpers.App.isMobile()?"340px":"591px"}]}).bind(this)).render(this.$body,!0),this.bindingsPricingModal(),this.pricingModal)},bindingsPricingModal:function(){var e=this;this.pricingModal.bind("modal.shown",function(e){this.subscriptionsPartial.showAnimate(),$("body").addClass("pricing-modal-open")}),this.pricingModal.bind("modal.hidden",function(e){this.subscriptionsPartial.hide(),$("body").removeClass("pricing-modal-open")}),this.pricingModal.bind("activate",function(t){var i=Helpers.App.getUserType();Helpers.App.isLoggedIn()||$.cookie("pl_open_pricing_unlogged",!0,{path:"/"}),Helpers.GlobalEventTracker.pricingModalStillshots({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id,button_clicked:e._getSourceClickLocation(),user_type_name:i.name,user_type_id:i.id})}),this.subscriptionsPartial.bind("deactivate",function(e){this.pricingModal.deactivate()}.bind(this));var t=function(e){var t;t={type:"warning",content:'Please create an account to continue your purchase.<br /> Already have an account?                         <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_LOGIN+'\')" class="trigger_login_link" role="button">Log In</a>',contentForceLogIn:'Please log in to continue your purchase.<br /> Don\'t have an account?                         <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_SIGNUP+'\')" class="trigger_signup_link" role="button">Sign Up</a> today!'},this.appNavBar.ssoModal.activate(),this.appNavBar.ssoModal.showMessage(t),this.pricingModal&&this.pricingModal.deactivate()}.bind(this);this.pricingModal.bind("subscription.success",function(e){this.appNavBar.updateUserTypeBanner(),this.subscriptionSuccess(e),this.dispatch("subscription.success")}.bind(this)).bind("subscription.failure",function(e){this.subscriptionFail(e)}.bind(this)),this.pricingModal.bind("purchase.not_logged_in",t)},_getSourceClickLocation:function(){var e="other",t="-pricing-button",i=this.pricingModal._activatedBy;return i?(i.classList.forEach(function(i){i.match(t)&&(e=i.replace(t,""))}),e):e},instantiatePurchasesModal:function(){var e=Utils.bindFn(this);if(void 0===this.purchasesModal){var t=this,i=Helpers.App.getCookie("experiment_id"),n=!1;i.includes("zwVyiMLpKS3HHf0h29:SW")&&Helpers.App.isMobile()===!0&&(n=!0),this.purchasesModal=this._createSinglePurchasesWidget({showPreview:!0,reverseOrder:n}).detach(),this.purchasesModal.bind("purchase.success",function(e,t){e.data&&e.data.target&&"subscriptionsPartialCompare"===e.data.target.name||(this.stage.setDownloaded(!0),$.cookie("pl_processing_tracker",!0,{expires:1,path:"/"}),this.appNavBar.updateStatus(null,!0),this.appNavBar.updateUserTypeBanner(),"string"==typeof t?(this.instantiateCouponGiftModal(),this.couponGiftModal.activate()):"boolean"==typeof t&&Helpers.App.isMobileDevice()===!1&&setTimeout(function(){this.flash('You earned a free download for a friend! <a href="javascript:Helpers.App.displayGift()">Click here to redeem!</a>',"info",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this),2e3))}.bind(this)).bind("purchase.failed",function(e){var i=e.data&&e.data.message||"Sorry the payment could not be processed, please try again.";return e.data&&e.data.errorType?(t.appNavBar.showTooltipError(e.data),t):422===e.data.status?(t.stage.dispatch("stage.error",{error:!0,errorType:"broken-stage",message:i}),t):402===e.data.status?(t.stage.updatePremiumFontsInfo(),page.stage.setPaidTheme(),t):void(e.data&&e.data.target&&"purchaseOverlay"===e.data.target.name||t.flash(i,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}}))}).bind("purchase.not_logged_in",function(){t.appNavBar.autoModal("purchase")}).bind("low_res_download.not_logged_in",e(this._handleLowResDownloadNotLoggedIn)),Utils.promisifyEventBuilder(this.purchasesModal)("subscription.success").then(function(){t.purchasesModal.downloadInmediatelyOrActivate(),P.delay(3e3).then(t.dispatch("subscription.success"))})}return this.purchasesModal},_handleLowResDownloadNotLoggedIn:function(){var e=this,t=function(){e.purchasesModal.activate()},i=function n(){e.appNavBar.unbind("signup.success",t).unbind("login.success",t),e.appNavBar.ssoModal.unbind("modal.hiden",n)};this.purchasesModal.deactivate(),this.appNavBar.ssoModal.activate().bind("modal.hiden",i),this.appNavBar.bind("signup.success",t).bind("login.success",t)},_purchaseOpenEventHandler:function(){/update/.test(window.location.search)&&this.billingInfo.destroy()},_purchaseClosedEventHandler:function(){if(/update/.test(window.location.search)){var e=window.recurly.Recurly;window.recurly=new e,window.recurly.Recurly=e,this._instantiateBillingInfo()}},_instantiateBillingInfo:function(){this.appendChild(new UI.BillingInfo({name:"billingInfo",accountRecord:window.account})),this.billingInfo.bind("update.success",function(){Helpers.App.checkPastDueStatus({success:function(){window.location.href="/account/?cardupdated=true"},applyInvoice:!1})}),that=this,this.billingInfo.bind("update.failed",function(e){that.flash(e.data,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}),this.billingInfo.render($("#billingInfo"))},_configureRecurly:function(){var e={currency:window.recurlyConfig.currency,publicKey:window.recurlyConfig.publicKey};recurly.configure(e)},bindPurchasesEvents:function(e){var t=this;e.bind("purchase.success",function(){$.cookie("pl_processing_tracker",!0,{expires:1,path:"/"}),t.appNavBar.updateStatus(null,!0),t.appNavBar.updateUserTypeBanner()}).bind("purchase.failed",function(e){var i=e.data&&e.data.message||"Sorry the download could not be processed, please try again.";return e.data&&e.data.errorType?void t.appNavBar.showTooltipError(e.data):void t.flash(i,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})})},showChangeSubscriptionPlanModal:function(e){var t=Helpers.App.getSubscription();t!==!1&&(this._instantiateChangeSubscriptionPlanModal(t),e?this.subscriptionChangePlanModal.showConfirmation():this.subscriptionChangePlanModal.show())},_instantiateChangeSubscriptionPlanModal:function(e){var t=this;t.subscriptionChangePlanModal||(t.appendChild(new UI.SubscriptionPlanChangeModal({name:"subscriptionChangePlanModal",userCurrentPlan:e.plan.recurly_uuid,isAnnualPlan:e.is_annual})).render(t.$body),t.subscriptionChangePlanModal.bind("select:plan",function(e){t.subscriptionChangePlanModal.setLoading(),t.changeSubscriptionPlan(e.data.selectedPlan)}))},changeSubscriptionPlan:function(e){var t=this;t.subscriptionChangePlanModal._switchSubscriptionPlan(e).then(function(){$.cookie("CHANGED_PLAN_COOKIE","1"),window.location.reload()})["catch"](function(){t.subscriptionChangePlanModal.close(),t.flash("Changing your Subscription Plan was not successful!","alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})})},showGoAnnualModal:function(){this._instantiateGoAnnualModal(),this.goAnnualModal.show()},_instantiateGoAnnualModal:function(){var e=this;e.goAnnualModal||(e.appendChild(new UI.GoAnnualModal({name:"goAnnualModal"})).render(e.$body),e.goAnnualModal.bind("buttonClick",function(){e.showChangeSubscriptionPlanModal(!0)}))},_checkChangePlanCookie:function(){if(null!==$.cookie("CHANGED_PLAN_COOKIE")){var e=Helpers.App.getSubscription();e.is_annual?this.showCelebrationModal():this.flash("Subscription Plan was successfully updated","success",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}}),$.removeCookie("CHANGED_PLAN_COOKIE")}},_instantiateCelebrationModal:function(){var e=this,t=Helpers.App.getSubscription();e.celebrationModal||(e.appendChild(new UI.CelebrationModal({name:"celebrationModal",isAnnual:t.is_annual})).render(e.$body),e.celebrationModal.bind("goAnnualClick",function(){e.showChangeSubscriptionPlanModal(!0)}))},showCelebrationModal:function(){Helpers.SubscriptionHelper.shouldDisableSwitchPlans()||(this._instantiateCelebrationModal(),this.celebrationModal.show())},showSubscriptionModal:function(){var e=Helpers.App.getSubscription();this.appNavBar.closeHamburgerMenu(),e&&e.can_upgrade_to_annual?this.showGoAnnualModal():this.showPricingModal()},_createSinglePurchasesWidget:function(e){var t=new SinglePurchasesModalStrategy(SinglePurchasesModalStrategy.SinglePurchase);return t.create(e)}}}),Module("PageSupport")({prototype:{_ifIosDevice:function(){var e=navigator.userAgent,t=/iPad|iPhone|iPod/.test(e),i=/OS 11_0|OS 11_1|OS 11_2/.test(e);return t&&i?!0:!1},_stylingOnInit:function(){Helpers.App.isMobile()&&this.$body.addClass("mobile"),Helpers.App.isMobileDevice()&&this.$body.addClass("is-mobile-device"),this._ifIosDevice()&&$("body").addClass("iosBugFixCaret"),$(".stage-info").css("visibility","visible"),$(".footer-wrapper").css("visibility","visible")},_checkUrlLength:function(){var e=location.href.length,t=2083,i=.8*t,n={};e>=i&&t>e&&(n={error:!0,message:"Warning: Maximum url length limit is almost reached ("+location.href.length+")",eventType:"url.threshold"}),e>=t&&(n={error:!0,message:"Alert: Maximum url length has been exceeded ("+location.href.length+")",eventType:"url.lengthExceeded"}),n.error&&Helpers.GlobalEventTracker.track(n.eventType,n)},notLoggedInHandler:function(e){var t;return console.log("notLoggedInHandler"),t={type:"warning",content:'Please create an account to continue your purchase.<br /> Already have an account?                     <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_LOGIN+'\')" class="trigger_login_link" role="button">Log In</a>',contentForceLogIn:'Please log in to continue your purchase.<br /> Don\'t have an account?                     <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_SIGNUP+'\')" class="trigger_signup_link" role="button">Sign Up</a> today!'},this.appNavBar.ssoModal.activate(),this.appNavBar.ssoModal.showMessage(t),this},flash:function(e,t,i){t=t||"info",t in this.notification?this.notification[t](e):this.notification.update(e,t),this.notification.render($("body"),!0),i&&i.autoclose&&i.autoclose.milliseconds&&this.notification.autoclose(i.autoclose.milliseconds),Helpers.App.isCustomExperience()?this.customExperience.checkOffsets():this.isHomepage()&&this.homePageController.checkOffsets()},getStageInfoFromURLParams:function(){var e,t,i,n,s,r,o;return e=window.location.search,t=/stages\/([a-z0-9_-]+)/i,i=window.location.href.match(t),n=null!==i&&"undefined"!=typeof i[1]?i[1]:window._stageSlug,s=/background=([a-z0-9_-]+)/i,r=e.match(s),o={valid:!1,id:null,backgroundId:null},window._stageData&&(o.valid=!0,o.id=window._stageData.stage_data.id),null!==o.id&&null!==r&&"undefined"!=typeof r[1]&&r[1].length>0&&(o.backgroundId=r[1]),o},isLogoPage:function(){return Helpers.App.isLogoPage()},isHomepage:function(){var e="home"===window.pageType.type||"category"===window.pageType.type||"search"===window.pageType.type||window.pageType.no_results,t=(this.getStageInfoFromURLParams().valid,this.isBookmarksPage()),i=this.isCustomExperience();return e===!0&&""===window._stageSlug&&window.isLandingPage===!1&&t===!1&&i===!1?!0:!1},isStagePage:function(){return"stage"===window.pageType.type&&window.pageType.no_results===!1},isCustomExperience:function(){return"custom_experiences"===window.pageType.type&&window.pageType.no_results===!1},isCustomPage:function(){return"custom_pages"===window.pageType.type},isTagPage:function(){return/^\/page.*/.test(window.location.pathname)},isCategoryPage:function i(){var e,t,i;return e=window.location.pathname,t=this.constructor.CATEGORY_NAME_EXPRESSION.test(e),i=!1,t===!0&&""===window.location.hash&&(i=!0),i},isBookmarksPage:function(){return $(".page-container.bookmarks").length>0},updateSeoMetas:function(){var e=Helpers.StageType.getStageInfo();return this.metaTitle.html(e.meta_title),this.metaDescription.attr("content",e.meta_desc),this}}}),Class(UI,"ThumbnailPreviewOverlay").inherits(Widget).includes(BubblingSupport)({html:'<div>            <div class="close-button">                <button type="button" class="close" data-dismiss="modal" aria-label="Close">                    <span aria-hidden="true">\xd7</span>                </button>            </div>            <div class="wrapper">                <div class="header">                    <h3 class="previews-title"></h3>                    <a class="button secondary previews-anchor">View All</a>                </div>                <div class="previews-container"></div>            </div>        </div>',elementClass:"thumbnail-overlay",prototype:{init:function(e){var t=this;Widget.prototype.init.call(this,e),this._previews=[],this.$previewsContainer=this.element.find(".previews-container"),this.$closeButton=this.element.find(".close-button"),this.$title=this.element.find(".previews-title"),this.$listAnchor=this.element.find(".previews-anchor"),this.$header=this.element.find(".header"),this._debouncedScrollHandler=Helpers.App.debounce(t._checkItemsInViewport.bind(t),100),this._boundHideHandler=this.hide.bind(this),this.$previewsContainer.bind("scroll",this._debouncedScrollHandler),this.$closeButton.bind("click",this._boundHideHandler),this.element.bind("click",this._boundHideHandler),this.$previewsContainer.bind("click",function(e){e.stopPropagation()}),this.hide()},setPreviews:function(e){this._renderPreviews(e.previews),e.title.length&&e.listAnchor.length?(this.$header.show(),this._setTitle(e.title),this._setListAnchor(e.listAnchor)):this.$header.hide(),this.show()},_setTitle:function(e){this.$title.text(e)},_setListAnchor:function(e){this.$listAnchor.attr("href",e)},hide:function(){this.children.forEach(function(e){e.disableBookmark()}),Widget.prototype.hide.call(this)},show:function(){Widget.prototype.show.call(this),this._checkItemsInViewport()},_renderPreviews:function(e){this.clearPreviewItems();var t=this;e.forEach(function(e,i){e.name="previewItem"+i,t.appendChild(new UI.PreviewOverlayItem(e)).render(t.$previewsContainer)}),t.bind("bookmarked",function(){Helpers.App.isLoggedIn()===!1&&t.hide()})},getPreviewItems:function(){return this.children},clearPreviewItems:function(){for(;this.children.length;)this.children.pop().destroy()},_checkItemsInViewport:function(){var e=this.$previewsContainer.get(0).scrollLeft,t=e+this.$previewsContainer.get(0).offsetWidth;this.children.forEach(function(i){if(i.isVideo===!0){var n=i.element.get(0),s=n.offsetLeft,r=n.offsetLeft+n.offsetWidth;t>=s&&r>=e?i.playVideo():i.pauseVideo()}})}}}),Class(UI,"StagesListItem").inherits(Widget).includes(BubblingSupport)({prototype:{isMobile:!1,hasVideo:!0,init:function(e){
Widget.prototype.init.call(this,e),this.videoLoadPromise=null,this.$video=this.element.find("video"),this.$image=this.element.find("img"),this.$container=this.element.find(".img-container"),this.isMobile===!1&&this.hasVideo===!0&&this._bindEvents()},_bindEvents:function(){this._mouseEnterHandler=this._onMouseEnter.bind(this),this._mouseLeaveHandler=this._onMouseLeave.bind(this),this.$container.mouseenter(this._mouseEnterHandler),this.$container.mouseleave(this._mouseLeaveHandler)},_onMouseEnter:function(){this.$video.attr("loop",!0),this.playVideoFlow()},_onMouseLeave:function(){this.videoLoadPromise&&(this.videoLoadPromise.cancel(),this.videoLoadPromise=null),this.$video.removeAttr("loop"),this.stopVideoFlow()},_isVideoReady:function(){return 4===this.$video.get(0).readyState},_loadVideo:function(){var e=this,t=P.cancelable(function(){return new Promise(function(t,i){e.$video.on("loadeddata",t),e.$video.on("error",i),e.$video.attr("src",e.$video.attr("data-src"))})});return t()},_showVideo:function(){var e=this;return new Promise(function(t){e.isMobile?e.$video.fadeIn(100,t):(e.$video.css({display:"block",visibility:"visible"}),t())})},_hideVideo:function(){var e=this;return new Promise(function(t){e.isMobile?e.$video.fadeOut(100,t):(e.$video.css("visibility","hidden"),t())})},_onEndedVideo:function(){this.dispatch("videoEnded")},_startPlayVideo:function(){return this.$video.get(0).play()},_playVideo:function(){var e=this;this._endedVideoHandler=this._onEndedVideo.bind(this),this._startPlayVideoHandler=this._startPlayVideo.bind(this),e.$video.off("loadeddata"),e.$video.off("error"),e.$video.off("ended"),e._showVideo().then(this._startPlayVideoHandler)["catch"](function(){window.devMode===!0&&console.log("PAUSE VIDEO ERROR")})["finally"](function(){e.$video.on("ended",e._endedVideoHandler)})},playVideoFlow:function(){var e=this;e._isVideoReady()===!0?e._playVideo():(e.videoLoadPromise=e._loadVideo(),e.videoLoadPromise.then(function(){e._playVideo()})["catch"](function(){window.devMode===!0&&console.log("Cancelled load video promise")}))},_stopVideo:function(){this.$video.get(0).pause(),this.$video.get(0).currentTime=0},stopVideoFlow:function(){this._stopVideoHandler=this._stopVideo.bind(this),this._hideVideo().then(this._stopVideoHandler)}}}),Class(UI,"StagesList").inherits(Widget).includes(BubblingSupport)({prototype:{isMobile:!1,hasVideo:!0,init:function(e){Widget.prototype.init.call(this,e);var t=this;this.element.children().each(function(e,i){t.appendChild(new UI.StagesListItem({element:$(i),isMobile:t.isMobile,hasVideo:t.hasVideo}))}),this.isMobile===!0&&this.hasVideo===!0&&(this.bindEvents(),this._startRandomPlay())},bindEvents:function(){var e=this;e.bind("videoEnded",function(t){t.data.target.stopVideoFlow(),e._startRandomPlay()})},_startRandomPlay:function(){var e=this.children[Math.floor(Math.random()*this.children.length)];e.playVideoFlow()}}}),Class(UI,"PreviewOverlayItem").inherits(Widget).includes(BubblingSupport,GenericDestroySupport,AlgoliaAnalyticsSupport)({elementClass:"preview-item",html:'<div>            <div class="preview-image"></div>            <div class="figcaption">            <p class="figure-title truncate"></p>            </div>            <a class="anchor button primary">Edit this Template</a>            <div class="actions">            </div>        </div>',progressBar:'<div class="progress-bar">                    <div class="progress-value"></div>                </div>',video:'<video loop autoplay muted playsinline allowfullscreen="false"/>',img:"<img />",assetLink:'<a href=""></a>',VALID_VIDEO_PROGRESSBAR:"15",prototype:{init:function(e){Widget.prototype.init.call(this,e),this.$previewImage=this.element.find(".preview-image"),this.$anchor=this.element.find(".anchor"),this.$actionsContainer=this.element.find(".actions"),this.$title=this.element.find(".figure-title"),this.element.attr("data-stage-id",this.stageId),this.title&&this.$title.html(this.title),void 0!==this.imageSrc&&this.imageSrc.length>0&&this._createImage(this.imageSrc),void 0!==this.videoSrc&&this.videoSrc.length>0&&this._createVideo(this.videoSrc),this.$actions&&this.$actionsContainer.append(this.$actions),this._setAnchor(this.anchor),this._createBookmark(this.isBookmarked),this._setAlgoliaAnalyticsBindings()},_createVideo:function(e){this.video=$(this.constructor.video),this.video.attr("src",e),this.video.attr("type","video/mp4"),this.imageAnchor?(this.assetLinked=$(this.constructor.assetLink),this.assetLinked.attr("href",this.imageAnchor),this.$previewImage.append(this.assetLinked),this.assetLinked.append(this.video)):this.$previewImage.append(this.video),this.imageType===this.constructor.VALID_VIDEO_PROGRESSBAR&&(this.$progressBar=$(this.constructor.progressBar),this.$progressValue=this.$progressBar.find(".progress-value"),this.$previewImage.append(this.$progressBar),this._boundTimeUpdateHandler=this._timeUpdateHandler.bind(this),this.video.bind("timeupdate",this._boundTimeUpdateHandler))},_timeUpdateHandler:function(){var e=this.video.get(0),t=Math.floor(100/e.duration*e.currentTime);this.$progressValue.css("width",t+"%")},_createImage:function(e){var t=$(this.constructor.img);t.attr("src",e),this.imageAnchor?(this.assetLinked=$(this.constructor.assetLink),this.assetLinked.attr("href",this.imageAnchor),this.$previewImage.append(this.assetLinked),this.assetLinked.append(t)):this.$previewImage.append(t)},_createBookmark:function(e){var t=this;this.element.addClass("bookmarkable"),this.element.attr("data-bookmarked",e),this.bookmark.length>0?(this._bookmarkContext=this.bookmark.context,this.element.append(this.bookmark),this.bookmark.bind("click",function(){t.dispatch("bookmarked")})):(this.appendChild(new UI.Bookmark({name:"bookmark",element:this.element})),this.bookmark.bind("notLoggedIn",function(){t.dispatch("bookmarked")}))},_setAnchor:function(e){this.$anchor.attr("href",e)},playVideo:function(){this.video.get(0).play()},pauseVideo:function(){this.video.get(0).pause()},cleanUpVideo:function(){if(Helpers.App.isMobile()!==!1&&0!==this.video.length){var e=this.video;this.video=this.video.clone(!0,!0),this.video.load(),this.video.hide(),this.video.insertAfter(e),e.hide(),e[0].src="",e[0].load(),e.remove()}},destroy:function(){this.isVideo===!0&&this.cleanUpVideo(),this.genericDestroy()},disableBookmark:function(){this._bookmarkContext&&$(this._bookmarkContext).append(this.bookmark)}}}),Module("SkeletonCardSupport")({prototype:{bindSkeleton:function(e,t){e=e||this,t=t||"render",this.bind(t,function(){this.dispatch("contentReady",{originalDispatcher:e})})}}}),Module("SkeletonCardManagerSupport")({skeletonStrategy:{TextControl:"_hideLeftSideBarSkeleton",CustomGraphicControl:"_hideLeftSideBarSkeleton",AlternateValueControl:"_hideLeftSideBarSkeleton",MultiControl:"_hideRightSideBarSkeleton",SidebarAudioControl:"_hideRightSideBarSkeleton",ColorControl:"_hideRightSideBarSkeleton",VisibleControl:"_hideLeftSideBarSkeleton",StageCanvas:"_hideStageSkeleton",BlankCanvasStage:"_hideStageSkeleton",StageSmartVideoProduct:"_hideStageVideoSkeleton",VideoV5Stage:"_hideStageVideoSkeleton",SavedConfigurations:"_hideCarouselSkeleton",SavedDraftsContainer:"_hideCarouselSkeleton",Carousel:"_hideCarouselSkeleton",ListContainer:"_hideCarouselSkeleton",StageGrid:"_hideGridSkeleton",VideoSlides:"_hideSlidesSkeleton",Tags:"_hideTagsSkeleton",TextControlGroup:"_hideLeftSideBarSkeleton",SiblingControl:"_hideRightSideBarSkeleton"},TIME_TO_HIDE_ALL_SKELETONS:1e4,TIME_TO_HIDE_SKELETONS_IN_VIDEO:1500,prototype:{_timer:null,_timeoutToClearSkeletons:null,bindSkeletonManager:function(){this.$stageSkeleton=$(".stage-skeleton"),this.$pageApplication=$("#page-application"),this.$stageObjectImage=$(".stage-object-image"),this.$stageObject=$(".stage-object"),this.$tabbedSkeleton=$(".skeleton-cards.tabbed-skeleton"),this.$mobileControlsContainer=$(".stage-mobile-controls-container"),this._buildTimer(0),this.bind("contentReady",function(e,t){this._hideSkeletonStrategy(t)}),$(window).on("load",this._clearSkeletons.bind(this,!0)),this.bind("videoSlide.onSelectedSlideChange",this._changeSlideHandler.bind(this))},_clearSkeletons:function(e){var t=this;clearTimeout(t._timeoutToClearSkeletons),t._timeoutToClearSkeletons=setTimeout(function(){(t.leftSideBar||t.rightSideBar)&&(t._hideLeftSideBarSkeleton(),t._hideRightSideBarSkeleton()),e===!0&&$(".skeleton-cards").hide()},SkeletonCardManagerSupport.TIME_TO_HIDE_ALL_SKELETONS)},_changeSlideHandler:function(){this._showVideoSkeletons(),this._cancelTimer(),this._buildTimer(SkeletonCardManagerSupport.TIME_TO_HIDE_SKELETONS_IN_VIDEO),this._timer.then(this._clearSkeletons(!1))},_buildTimer:function(e){this._timer=P.cancelable(function(){return P.delay(e)})()},_cancelTimer:function(){null!==this._timer&&(this._timer.cancel(),this._timer=null)},_rejection:function(e){return"Cancelation Error"===e.message?void console.warn("Cancelation Error"):e},_hideSkeletonStrategy:function(e){var t,i;if(!e.originalDispatcher||!e.originalDispatcher.constructor)throw"A Neon widget object must be passed as originalDispatcher";if(t=e.originalDispatcher.constructor.className,i=SkeletonCardManagerSupport.skeletonStrategy[t],void 0===i)throw t+" has not behavior defined";this[i](e)},_hideLeftSideBarSkeleton:function(){var e=this;this._timer.then(function(){Helpers.App.isMobile()===!1?e._hideLeftSideBarSkeletonAndShowSidebarItems():e._hideTabbedContainerSkeleton()})["catch"](this._rejection)},_hideLeftSideBarSkeletonAndShowSidebarItems:function(){this.leftSideBar.getElement().find(".skeleton-cards").hide(),this.leftSideBar.getElement().removeClass("not-show")},_hideRightSideBarSkeleton:function(){var e=this;this._timer.then(function(){Helpers.App.isMobile()===!1?e._hideRightSideBarSkeletonAndShowSidebarItems():e._hideTabbedContainerSkeleton()})["catch"](this._rejection)},_hideRightSideBarSkeletonAndShowSidebarItems:function(){this.rightSideBar.getElement().find(".skeleton-cards").hide(),this.rightSideBar.getElement().removeClass("not-show")},_hideStageSkeleton:function(e){this.$stageSkeleton.hide(),e.originalDispatcher.showStageImageVisible(),$("form#page-application").attr("style","visibility:visible")},_hideStageVideoSkeleton:function(e){var t=this;this._timer.then(function(){t.$stageSkeleton.hide(),$("main#main-content-wrapper").removeAttr("style"),e.originalDispatcher.slideFetchFailed!==!0&&t._showStageVideo(),e.originalDispatcher.dispatch("video-skeleton:hidden")})["catch"](this._rejection)},_showStageVideo:function(){this.$stageObjectImage.css("display","flex"),this.$stageObjectImage.css("visibility","visible"),this.$pageApplication.css("visibility","visible"),this.$stageObject.css("visibility","visible").removeClass("hide")},_hideGridSkeleton:function(e){var t=$(e.originalDispatcher.element).attr("data-grid-name");if(void 0!==t){$("."+t+"-skeleton").hide();var i=$(e.originalDispatcher.element);i.hasClass("is-hidden")?(i.removeClass("is-hidden"),e.originalDispatcher.setPosition()):i.css("visibility","visible")}},_hideCarouselSkeleton:function(e){var t=$(e.originalDispatcher.element).attr("data-carousel-name");if(void 0!==t){$("."+t+"-skeleton").hide();var i=$(e.originalDispatcher.element);i.hasClass("is-hidden")&&(i.removeClass("is-hidden"),e.originalDispatcher.setPosition&&e.originalDispatcher.setPosition()),i.css("visibility","visible")}},_hideTagsSkeleton:function(){$(".tags-skeleton").hide()},_hideTabbedContainerSkeleton:function(){this.$tabbedSkeleton.hide(),this.$mobileControlsContainer.css("visibility","visible")},_hideSlidesSkeleton:function(){$(".videos-slides-skeleton").hide(),$(".video-slides-container").css("visibility","visible")},_showVideoSkeletons:function(){this.$stageSkeleton.show(),this._hideStageVideo(),this._showTabbedContainerSkeleton()},_hideStageVideo:function(){this.$stageObjectImage.css("display","none"),this.$pageApplication.css("visibility","hidden"),this.$stageObjectImage.css("visibility","hidden"),this.$stageObject.css("visibility","hidden").addClass("hide")},_showTabbedContainerSkeleton:function(){Helpers.App.isMobile()===!0&&(this.$tabbedSkeleton.show(),this.$mobileControlsContainer.css("visibility","hidden"))}}}),Module("SkeletonCardBuilder")({skeletonBuildStrategy:{leftSidebarSkeleton:"_buildLeftSideBarSkeleton",rightSidebarSkeleton:"_buildRightSideBarSkeleton"},buildSkeleton:function(e){var t=SkeletonCardBuilder.skeletonBuildStrategy[e];if(void 0===t)throw e+" has not behavior defined";return SkeletonCardBuilder[t]()},_buildLeftSideBarSkeleton:function(){for(var e='<div class="skeleton-cards">                                 <div class="label-skeleton"></div>                                <div class="sidebar-skeleton-textcontrols"> ',t=0;9>t;t++)e+='<div class="sidebar-skeleton-textcontrols-item"></div> ';e+='</div> <div class="video-sidebar-skeleton-textcontrols"> ';for(var t=0;3>t;t++)e+='<div class="sidebar-skeleton-textcontrols-item"></div> ';return e+='</div>                         <div class="textbox-skeleton m"></div>                         </div>  ',$(e)[0]},_buildRightSideBarSkeleton:function(){for(var e='<div class="skeleton-cards">                             <div class="label-skeleton"></div>                            <div class="textbox-skeleton l"></div>                            <div class="label-skeleton"></div>                            <div class="multicontrol-skeleton"> ',t=0;6>t;t++)e+=' <div class="multicontrol-skeleton-item"></div> ';e+='</div><div class="label-skeleton"></div>                           <div class="textbox-skeleton l"></div>                           <div class="multicontrol-skeleton"> ';for(var t=0;6>t;t++)e+=' <div class="multicontrol-skeleton-item"></div> ';return e+="</div></div> ",$(e)[0]}}),Class("PageController").includes(CustomEventSupport,NodeSupport,PostMessageSupport,SubscriptionSupport,PageSupport,BubblingSupport,SkeletonCardManagerSupport,SaleSupport)({CATEGORY_NAME_EXPRESSION:/c\/([a-z0-9_-]+)?/i,NOTIFICATION_AUTODISMISS_TIME:3e3,HALLOWEEN_ANIMATION_LOCAL_STORAGE_KEY:"halloween_animation_shown",modalSubscription:null,prototype:{faqContentRendered:!1,videoFAQContentRendered:!1,isHomepageView:!1,sidebarsLoaded:!1,navbarContext:{},savedConfigurationRequest:null,contentFilters:{},breakpoints:{desktop:1024,mobile:604,"new":900},commonComponents:["buildNavbar","buildSearchBar","buildNotifications","initializeSubscriptionSupport","initializeUserIpLocation","checkRequestedModal","_checkUrlLength","_stylingOnInit"],pageStrategy:{home:["initCommonComponents","performNextLoginActionFromRedirect","buildFooter","loadHomepageView","authenticationPurchasesBindings","openSsoModalOnRedirect","initPreviewMode"],stage:["initCommonComponents","buildFooter","loadSavedConfiguration","loadStageView"],bookmarks:["initCommonComponents","buildFooter","loadBookmarksView"],custom:["initCommonComponents","performNextLoginActionFromRedirect","buildFooter","loadCustomView","initPreviewMode"],account:["initCommonComponents","loadAccountView"],cancel:["initCommonComponents","loadCancelAccountView"],purchases:["initCommonComponents","buildFooter","loadPurchasesView"],emailListUnsubscribe:["initCommonComponents","loadEmailListUnsubscribeView"],"default":["initCommonComponents","performNextLoginActionFromRedirect"],about:["initCommonComponents","performNextLoginActionFromRedirect","loadAboutView"],ApiGridView:["initCommonComponents","initApiStrategyMethods","loadGridApiView"],ApiLoginView:["initCommonComponents","initApiStrategyMethods","loadLoginView","addLoginViewBindings"],ApiSubscriptionView:["initCommonComponents","initApiStrategyMethods","loadSubscriptionView"],ApiStageView:["initCommonComponents","initApiStrategyMethods","loadStageApiView"],ApiPurchasesModal:["initCommonComponents","initApiStrategyMethods","loadPurchasesModalApiView"],my_folders:["initCommonComponents","buildFooter","loadMyFoldersView"],my_placeit:["initCommonComponents","buildFooter","loadMyPlaceitView"],user_brand_page:["initCommonComponents","loadBrandView"],saved_drafts:["initCommonComponents","buildFooter","loadSavedDraftsView"],switchSubscription:["initCommonComponents","loadSwitchSubscriptionView"]},initApiStrategyMethods:function(){this.loadGridApiView=UI.Iframe.Strategy.loadGridView,this.loadLoginView=UI.Iframe.Strategy.loadLoginView,this.addLoginViewBindings=UI.Iframe.Strategy.addLoginViewBindings,this.loadSubscriptionView=UI.Iframe.Strategy.loadSubscriptionView,this.loadStageApiView=UI.Iframe.Strategy.loadStageView,this.loadPurchasesModalApiView=UI.Iframe.Strategy.loadPurchasesModalView},init:function(e){var t=this;this.isDevMode()===!0&&(window.devMode=!0),this.$body=$(document.body),this.$pageWrapper=$("#container"),this.$pageContainer=$(".page-container"),this.$application=$("#page-application"),this.$uservoiceFeedbackSection=$(".uservoice-feedback"),this.$userVoiceButton=this.$uservoiceFeedbackSection.find("a"),this.contentFilters={f_types:Helpers.App.getUrlParam("f_types",location.href),f_devices:Helpers.App.getUrlParam("f_devices",location.href),f_gender:Helpers.App.getUrlParam("f_gender",location.href),f_age:Helpers.App.getUrlParam("f_age",location.href),f_ethnicity:Helpers.App.getUrlParam("f_ethnicity",location.href),f_tags:Helpers.App.getUrlParam("f_tags",location.href)},t.appendChild(new UI.ThumbnailPreviewOverlay({name:"thumbnailPreviewOverlay"})).render($("body")),t.bind("thumbnailPreview",function(e){t.thumbnailPreviewOverlay.setPreviews(e.data)}),Helpers.App.isBrandkitEnabled()&&Service.SessionState&&this._initSessionStateService(),t._getPageStrategy(e.strategy).forEach(function(e){console.log(e),t._getMethodByName(e).bind(t)()}),this.subscriptionBindings(),this.postMessageBindings(),this.globalBindings(),this.loadHolidayCouponCookie(),Helpers.CouponHelper.load();var i,n;Helpers.App.isLoggedIn()&&(i=Helpers.UserSegment.getNoSegmentCookie(),n=Helpers.UserSegment.getUserSegmentCookie(),null===i&&null===n&&Helpers.UserSegment.request()),this.showShortcutError(),this._checkChangePlanCookie(),this.activateMarketingCampaign(),this._bindSurveyUserEvents(),this.checkExternalSsoAuthFallback(),this._showMaintenanceCopy()},_showMaintenanceCopy:function(){var e=$.cookie("experiment_id"),t="Our platform will be under maintenance this next Sunday April 2nd, 2023 at 1:00 AM Central Standard Time (UTC -5).";e.includes("Ss3rRc1dIEDyHiKR27:mx")!==!1&&this.flash(t,"info",{autoclose:{milliseconds:5e3}})},_getPageStrategy:function(e){if(void 0===this.pageStrategy[e])throw"page type "+e+" is not supported";return this.pageStrategy[e]},_getMethodByName:function(e){if("function"!=typeof this[e])throw e+" is not function";return this[e]},initCommonComponents:function(){var e=this;e.commonComponents.forEach(function(t){console.log("  - "+t),e._getMethodByName(t).bind(e)()})},initializeUserIpLocation:function(){this.userLocation=new UserIpLocation({name:"userLocation",endpoint:"https://pro.ip-api.com/json/",key:window.ipApiConfig.apiKey})},buildNavbar:function(){var e;this.appNavBar||(e=$(".navbar-container"),this.navbarContext={isLogged:Helpers.App.isLoggedIn(),hasCredits:Registry.Credits.getTotal()||Helpers.App.getSubscription(),hasBookmarks:Helpers.App.getBookmarksCount()>0,isStage:this.isStagePage(),isAdmin:Helpers.App.isAdmin(),pageName:Helpers.App.pageName()},this.appendChild(new UI.Navigation.NavBar({name:"appNavBar",element:e,context:this.navbarContext})),this._myPlaceitButtonExperimentHandler())},buildSearchBar:function(){var e=new UI.GlobalSearch.SearchController({searchService:new UI.GlobalSearch.SearchService({algoliaConfig:window.algoliaConfig}),categoriesData:window.navBar.menu}),t=new UI.GlobalSearch.SearchContainer({name:"searchContainer",element:$(".global-search-container"),searchTerm:e.getSearchTermFromUrl(),searchPlaceholder:"Search Mockups, Logos, Design Templates",categoriesData:e.getCategoriesData()});this.appNavBar.bind("menu-open",function(){t.closeAllDropdowns(),e.toggleAutocompleteDropdown(!1)}),this.appNavBar.bind("menu-close",function(){e.toggleAutocompleteDropdown(!0)}),this.appNavBar.bind("accountInfo-open",function(){e.toggleAutocompleteDropdown(!1)}),this.appNavBar.bind("accountInfo-close",function(){setTimeout(function(){e.toggleAutocompleteDropdown(!0)},300)}),e.setSearchContainer(t),this.appendChild(t),this.searchController=e},buildNotifications:function(){this.notification=new UI.Notification({})},buildFooter:function(){this.footerElement=$("#footer-header"),this.appendChild(new UI.FooterController({name:"footerController"}))},postLoadStrategyHome:function(){this.homepageBindings(),this.$pageContainer.addClass("homepage"),this.loadFromUrlTitlesEnabled(),this.loadFromUrlFiltersEnabled()},loadHomepageView:function(){this.homepageElement=$("#page-homepage"),this.appendChild(new UI.Homepage({element:this.homepageElement,body:this.$pageContainer,footer:this.footerElement,name:"homePageController",type:"devices",isTagPage:this.isTagPage(),isCategoryPage:this.isCategoryPage(),breakpoints:this.breakpoints,filtersOff:this.loadFromUrlFiltersEnabled().filters})),this.homePageController.checkOffsets(),this.postLoadStrategyHome()},loadCustomView:function(){this.homepageElement=$("#page-homepage"),this.isCustomExperience()&&this.$pageContainer.addClass("is_custom-experience"),Helpers.App.isCustomExperience()&&(this.appendChild(new UI.CustomExperience.Page({element:this.homepageElement,body:this.$pageContainer,footer:this.footerElement,name:"customExperience",type:"devices",isTagPage:this.isTagPage(),isCategoryPage:this.isCategoryPage(),breakpoints:this.breakpoints,filtersOff:this.loadFromUrlFiltersEnabled().filters})),this.customExperience.checkOffsets(),this.bindPurchasesEvents(this.customExperience),this._customExperienceBindings()),(Helpers.App.isCustomPage()===!0||Helpers.App.isPricingPage()===!0)&&(this._setPricesInCustomPage(),Helpers.App.isPricingPage()&&this.initPricingPage()),this.postLoadStrategyHome()},initPricingPage:function(){var e=new UI.PricingPageVariantCD({ctaBlockSection:this.ctaBlockSection,appNavBar:this.appNavBar});this.appendChild(e),this.ctaBlockSection&&this.ctaBlockSection.element.hide(),this.bind("subscription.bindings:done",e.checkRequestedStartNow.bind(e))},initPreviewMode:function(){var e=UI.PreviewMode&&UI.PreviewMode.Controller;if(e&&e.shouldPreviewModeBeAvailable()){var t=[];t="custom_experiences"===window.pageType.type?this.customExperience.grid.thumbnails:this.homePageController.grid.children;new UI.PreviewMode.Controller({gridItems:t,gridType:window.pageType.type})}},loadBookmarksView:function(){this.gridContainer=$(".filter-grid-wrapper"),this.bookmarkPage=FolderPageFactory.build("bookmark",{name:"bookmarkPage",element:this.gridContainer,trackAlgoliaAnalytics:!0})},loadStageView:function(){function e(e){return e.replace(/(\_\w)/g,function(e){return e[1].toUpperCase()}).replace(/^\w/,function(e){return e.toUpperCase()})}var t=this,i=function(e){t.performNextLoginActionFromRedirect()};this.stageWrapper=$(".stage-object"),this.metaTitle=$("title"),this.metaDescription=$("meta[name=description]"),this.navbarContext.isStage=!0,this.$taxInformation=$("p.tax-title"),this.euCountries=Helpers.App.getEUCountries();var n=$("#previewImage"),s=window.previewImageSrc;switch(n.length>0&&(s=n[0].src),window._stageData.stage_data.image_type){case 13:this._buildSmartTemplate(s,i);break;case 15:this.appendChild(new UI.StageSmartVideoProduct({name:"stage",element:$(".stage-object-image"),pageContainer:this.$pageContainer,isCategoryPage:this.isCategoryPage(),breakpoints:this.breakpoints,CATEGORY_NAME_EXPRESSION:this.constructor.CATEGORY_NAME_EXPRESSION,savedConfigurationData:this.savedConfigurationData}));var r=function u(){console.log("stage.infoReady"),t.stage.unbind("stage.infoReady",u),t.performNextLoginActionFromRedirect()};this.stage.bind("stage.infoReady",r);break;case 17:var o={name:"stage",element:$(".stage-object-image"),pageContainer:this.$pageContainer,isCategoryPage:this.isCategoryPage(),breakpoints:this.breakpoints,source:s,CATEGORY_NAME_EXPRESSION:this.constructor.CATEGORY_NAME_EXPRESSION,purchasesModal:this.purchasesModal,navBar:this.appNavBar,onDesignPlanReady:i},a=Helpers.StageType.getStageData().tool_name,l=e(a),c=l+"Page";this.appendChild(new UI.Tool[c](o));break;case 18:this.appendChild(new UI.VideoV5Stage({name:"stage",element:$(".stage-object-image"),isMobilePhone:Helpers.App.isMobile(),record:JSON.parse(window.videoProductUiJson),structureJson:JSON.parse(window.videoProductStructureJson),hasAudio:window.multiSceneHasAudio,audioRecord:window.multiSceneAudio,previewVideoUrl:window.previewVideoUrl,onDesignPlanReady:i}));break;default:return this.appendChild(new UI.UnsupportedMobileBrowserModal({name:"unsupportedMobileBrowserModal"})),this.unsupportedMobileBrowserModal.activate()}this.instantiatePurchasesModal(),window.devmode&&this.$body.addClass("devmode"),this.stageBindings()},_buildSmartTemplate:function(e,t){var i,n=[],s=window._stageData.stage_data;s&&Array.isArray(s.group_tags)===!0&&(n=s.group_tags),window.apiPage===!0&&(window.backupParent=window.parent);var r={name:"stage",element:$(".stage-object-image"),pageContainer:this.$pageContainer,isCategoryPage:this.isCategoryPage(),breakpoints:this.breakpoints,source:e,groupTags:n,CATEGORY_NAME_EXPRESSION:this.constructor.CATEGORY_NAME_EXPRESSION,onDesignPlanReady:t};Helpers.App.isRefactorEnabled()&&(r.onShowLogin=Utils.bindFn(this)(this._showLoginModal)),i=Helpers.StageType.isBlankCanvasStage()?this._buildBlankCanvasStage(r):this._buildStageCanvas(r),this.appendChild(i)},_buildBlankCanvasStage:function(e){return new UI.SmartTemplate.BlankCanvasStage(e)},_buildStageCanvas:function(e){return new UI.SmartTemplate.StageCanvas(e)},initInnerPages:function(){var e;/upgrade/.test(window.location.search)?(e="Your subscription has been updated",this.notification.success(e).render($(".page-container"),!0)):/cardupdated/.test(window.location.search)?(e="Your card has been updated!",this.notification.success(e).render($(".page-container"),!0)):/show_plans/.test(window.location.search)&&this.instantiatePricingModal().activate(),/update/.test(window.location.search)&&this._instantiateBillingInfo(),this.subscriptionsPartial.bind("purchase.open",this._purchaseOpenEventHandler.bind(this)),this.subscriptionsPartial.bind("purchase.closed",this._purchaseClosedEventHandler.bind(this))},loadAccountView:function(){var e=this;this.initInnerPages.bind(this)(),this.appendChild(new UI.Account({name:"account",element:$(".page-container")})),e.account.bind("changePlanClick",function(){e.showChangeSubscriptionPlanModal()}),e.bind("subscription.success",function(){location.reload()})},loadCancelAccountView:function(){this.initInnerPages.bind(this)(),this.appendChild(new UI.CancelAccount({name:"cancelAccount",element:$(".page-cancel-subscription")}))},loadSwitchSubscriptionView:function(){this.initInnerPages.bind(this)(),this.appendChild(new UI.SwitchSubscription({name:"switchSubscription",element:$(".page-switch-subscription")}))},loadPurchasesView:function(){this.initInnerPages.bind(this)(),this.downloads=FolderPageFactory.build("download",{name:"downloads",element:$(".filter-grid-wrapper")})},loadSavedDraftsView:function(){this.initInnerPages.bind(this)(),this.gridContainer=$(".filter-grid-wrapper"),this.savedDrafts=FolderPageFactory.build("draft",{name:"savedDrafts",element:this.gridContainer})},loadMyPlaceitView:function(){this.initInnerPages.bind(this)(),this.myPlaceit=new UI.MyPlaceitPageController({element:$("#container")}),this.dispatch("myBrands.ready")},loadBrandView:function(){this.initInnerPages.bind(this)(),this.appendChild(new UI.BrandPage({name:"brandPage",element:$("#brand-page"),brandData:window.currentBrandData})),this._bindBrandPageEvents()},_bindBrandPageEvents:function(){var e=this,t={autoclose:{milliseconds:this.constructor.NOTIFICATION_AUTODISMISS_TIME}};this.brandPage.bind("error",function(i,n){e.flash(n.message,"alert",t)}).bind("warning",function(i,n){e.flash(n.message,"warning",t)})},loadMyFoldersView:function(){this.initInnerPages.bind(this)(),this.appendChild(new UI.MyFoldersPage({name:"myFoldersPage",element:$("#container")}))},loadEmailListUnsubscribeView:function(){this.initInnerPages.bind(this)(),this.appendChild(new UI.EmailListUnsubscribe({name:"emailListUnsubscribe"}))},loadAboutView:function(){!function(e,t,i){var n,s=e.getElementsByTagName(t)[0],r=/^http:/.test(e.location)?"http":"https";e.getElementById(i)||(n=e.createElement(t),n.id=i,n.src=r+"://platform.twitter.com/widgets.js",s.parentNode.insertBefore(n,s))}(document,"script","twitter-wjs")},loadFromUrlFiltersEnabled:function(){var e,t=this,i={filters:!1};t.isCustomExperience&&t.isCustomExperience()&&(e=t.customExperience),t.isHomepage&&t.isHomepage()&&(e=t.homePageController);var n=Helpers.App.getUrlParam("filters",location.href,!1),s=n&&"off"===n.toLowerCase()||window.experience&&window.experience.filtersOff;return this.isCustomExperience()&&"undefined"!=typeof customExperienceFlag&&(s=!0),e&&(s||(e.filters&&e.filters.show(),e.grid.element.removeClass("no-filters"),$(".footer-wrapper").removeClass("no-filters"),$(".pagination").removeClass("no-filters")),s===!0&&(e.filters&&e.filters.hide(),e.grid.element.addClass("no-filters"),$(".footer-wrapper").addClass("no-filters"),$(".pagination").addClass("no-filters"),i.filters=!0)),s===!0&&(i.filters=!0),i},loadFromUrlTitlesEnabled:function(){var e=Helpers.App.getUrlParam("titles",location.href,!1),t=e&&"off"===e.toLowerCase()||window.experience&&window.experience.titlesOff;t||($(".grid-item .figcaption").show(),$(".slick-track .figcaption").show()),t===!0&&($(".grid-item .figcaption").hide(),$(".slick-track .figcaption").hide())},globalBindings:function(){var e=this,t=this._handleClickEvent.bind(this);window.isPastDue&&this.flashPastDue(),e.$userVoiceButton.on("click",function(e){Helpers.GlobalEventTracker.track("UserVoiceButtonClicked")}),e.appNavBar.bind("signup.success",function(){null!==window.savedDraftId&&e.loadStageView(),e.flash(UI.SsoSignupModal.TEXT_CREATE_ACCOUNT_SUCCESS,"success",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}}),Helpers.GlobalEventTracker.userSignup(),document.cookie="userStatus=User; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/",document.cookie="subscriptionType=Null; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/",e.stage&&e.stage.stageActionsManager.dispatch("form.success"),Helpers.App.getNextLoginAction()&&e.appNavBar.dispatch(Helpers.App.getNextLoginAction()),window.showDiscountInCTABlock&&window.showDiscountInCTABlock(),e.footerController&&e.footerController.hideFreeAccountButton(),Helpers.App.clearNextLoginAction(),Helpers.App.isForYouExperimentActive()&&location.reload()}).bind("login.success",function(){null!==window.savedDraftId&&(e.stage.getDraft(window.savedDraftId,!0),window.saveDraftReload=!0),e.stage&&e.stage.stageActionsManager.dispatch("form.success"),Helpers.App.getAccountInfo(),Helpers.App.getSubscription()!==!1?(document.cookie="userStatus=Subscriber; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/",Helpers.App.getSubscription().is_annual===!0?document.cookie="subscriptionType=Annual; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/":document.cookie="subscriptionType=Monthly; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"):(document.cookie="userStatus=User; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/",document.cookie="subscriptionType=Null; expires=Fri, 01 Dec 1970 23:59:59 GMT; path=/"),e.footerController&&(e.footerController.updatePricingButton(),e.footerController.hideFreeAccountButton()),e.campaignHeaderstrip&&e.campaignHeaderstrip.updateSubscriptionStatus();var t=Helpers.App.getSubscription();if(t&&!t.is_paused){if(!page.ctaBlockSection)return;var i=page.ctaBlockSection.element.parents("#landing-pages");e.ctaBlockSection.destroy(),i.remove()}Helpers.App.getNextLoginAction()&&e.appNavBar.dispatch(Helpers.App.getNextLoginAction()),window.showDiscountInCTABlock&&window.showDiscountInCTABlock(),Helpers.App.clearNextLoginAction(),e._myPlaceitButtonExperimentHandler(),Helpers.App.isForYouExperimentActive()&&location.reload()}).bind("sso.modal.shown",function(){Helpers.App.setNextLoginAction(null),"download"===Helpers.App.getSubscribeFromModal()?Helpers.App.setNextLoginAction("activate-purchase"):"compare"===Helpers.App.getSubscribeFromModal()?Helpers.App.setNextLoginAction("activate-purchase-subscription"):"modal"===Helpers.App.getSubscribeFromModal()?Helpers.App.setNextLoginAction("activate-pricing"):"cta-block"===Helpers.App.getSubscribeFromModal()?Helpers.App.setNextLoginAction("activate-pricing-from-cta"):Helpers.App.setNextLoginAction(null),Helpers.App.setSubscribeFromModal(null)}),e.appNavBar.bind("activate-pricing",function(){var t=Helpers.App.getSubscription();(!t||t&&t.is_paused)&&(page.isLogoPage()?e.pricingModal&&e.pricingModal.rightChild._handlePlanSubscribe():e.pricingModal&&e.pricingModal.subscriptionsPartial._handlePlanSubscribe());
}),e.appNavBar.bind("activate-pricing-from-cta",function(){var t=Helpers.App.getSubscription();(!t||t&&t.is_paused)&&e.ctaBlockSection&&e.ctaBlockSection._handlePlanSubscribe()}),e.appNavBar.bind("activate-pricing-coupon",function(){e.pricingModal&&e.pricingModal.activate()}),e.appNavBar.bind("activate-purchase",function(){var t=Helpers.App.getNextLoginAction();!t||t&&"activate-purchase"!==t||e.purchasesModal.resumePurchase()}),e.appNavBar.bind("activate-purchase-subscription",function(){var t=Helpers.App.getNextLoginAction();!t||t&&"activate-purchase-subscription"!==t||e.purchasesModal.resumePurchase()}),e.appNavBar.bind("not-logged",function(){e.notLoggedInHandler()}),e._bindSsoModalEvents(),e.bind("user-has-bookmarks",function(t){e.navbarContext.hasBookmarks=t.data,e.appNavBar.updateStatus(e.navbarContext)}),Helpers.CouponHelper.bind("coupon.validated",function(){window.isCouponShowed!==!0&&(window.isCouponShowed=!0,Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SUBSCRIPTION)&&Helpers.CouponHelper.getSource()===Helpers.CouponHelper.SOURCE_URL?window.page&&window.page.showPricingModal():Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)&&Helpers.CouponHelper.getSource()===Helpers.CouponHelper.SOURCE_URL?Helpers.SinglePurchaseHelper.showDiscountModal():Helpers.CouponHelper.isValid()===!1&&Helpers.CouponHelper.getSource()===Helpers.CouponHelper.SOURCE_URL&&window.page&&window.page.showPricingModal())}),Helpers.CouponHelper.bind("coupon.error.newUser",function(){this.flash("This offer is for new users only.","info",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this)),this.bind("logout",function(){$.removeCookie("categorySuggestionOverlayShown",{path:"/"})}.bind(this)),this.bind("click",t),e._setupBreakpointListener()},_bindSsoModalEvents:function(){var e=this,t=Helpers.App.getUser().id===!1;if(e.appNavBar.ssoModal.bind("modal.hidden",function(){t&&Helpers.App.clearNextLoginAction()}),Boolean(Service)!==!1&&Boolean(Service.MultiplePurchase)!==!1){var i=Service.MultiplePurchase.getInstance();i&&e.appNavBar.ssoModal.bind("modal.hidden",function(){t&&i.deleteAfterLoginCookie.bind(this)})}},_handleClickEvent:function(e){var t,i,n=this,s=e.data.originalDispatcher;void 0!==s&&(t={pricingButton:function(){if(Helpers.App.isNewPricingCopyEnabled()===!0&&Helpers.App.isMobile()===!1&&Helpers.App.getSubscription()===!1){if(Helpers.App.isPricingPage())return;Helpers.App.redirectToPricing()}else n.showSubscriptionModal()},userTypeBanner:function(){n.showSubscriptionModal()},freeAccountButton:function(){n.appNavBar.showSignupModal()}},i=t[s.name],void 0!==i&&i())},instantiateNotLoggedInModal:function(){void 0===this.appNavBar.ssoModal&&(this.appNavBar.instantiateNotLoggedInModal(),this.appNavBar.ssoModal.bind("show.login",function(){"none"!=this.appNavBar.$burgerBtn.css("display")&&this.appNavBar.$burgerBtn.click(),this.appNavBar.$loginButton.click()}.bind(this)))},instantiateFaqModal:function(){void 0===this.faqModal&&this.appendChild(new UI.RemoteContentModal({name:"faqModal",title:"Frequently Asked Questions",remoteContentURL:"/get_faq_content"}))},instantiateVideoFaqModal:function(){void 0===this.videoFaqModal&&this.appendChild(new UI.RemoteContentModal({name:"videoFaqModal",title:"Frequently Asked Questions",remoteContentURL:"/get_video_faq_content"}))},instantiateInteractiveDemoModal:function(){void 0===this.interactiveDemoModal&&this.appendChild(new UI.RemoteContentModal({name:"interactiveDemoModal",title:"Frequently Asked Questions",remoteContentURL:"/get_interactive_faq_content"}))},instantiateRemoteUrlModal:function(){if(void 0===this.remoteUrlModal){this.appendChild(new UI.RemoteUrlModal({name:"remoteUrlModal",mainText:"Grab Screenshot from URL"}));var e="Grab Screenshot from URL";this.remoteUrlModal.updateTitle(e),this.remoteUrlModal.bind("grab.remoteURL",function(e){this.notification.close(),this.clearUserSource(),this.stage.refreshProductshotData(),this.stage.loadFromUrl(e.data)}.bind(this)),UI.RemoteUrlModal.bind("url.invalid",function(e){this.flash(e.data,"alert",{autoclose:{milliseconds:1e4}})}.bind(this))}},bookmarksBindings:function(){var e=this;e.grid.bind("thumbnailPreview",function(t){e.thumbnailPreviewOverlay.setPreviews(t.data)})},homepageBindings:function(){var e=this;e.homePageController&&(e.bind("subscription.success",function(){e.homePageController.updateHeroBanner()}),e.appNavBar.bind("login.success",function(){e.homePageController.updateHeroBanner()}),e.homePageController.bind("heroBanner.cta.click",function(){e.showSubscriptionModal()})),e.appNavBar.bind("openAdVideo",function(t){e.instantiateVideoAdModal(t.data),e.newAdVideo.activate()}),e.bind("filters:filtering",function(e){location.href=this.requestNewPage({mode:"filter",key:e.data.key,value:e.data.value,heading:Helpers.App.getUrlParam("h",location.href)})}.bind(this)),e.bind("filters:none",function(e){location.href=this.requestNewPage({mode:"filters-reset"})}.bind(this)),e.bind("filters:click",function(t){var i=e.requestNewPage({mode:"filter",key:t.data.key,value:t.data.value,heading:Helpers.App.getUrlParam("h",location.href)});t.data.$anchor.attr("href",i)}),e.bind("paginator:change",function(e){var t={mode:"page",value:e.data.pageNumber,heading:Helpers.App.getUrlParam("h",location.href)},i=Helpers.App.getUrlParam("sortby",location.href);i&&(t.key=i),location.href=this.requestNewPage(t)}.bind(this))},requestNewPage:function(e){var t,i,n,s,r,o,a,l;t="/",n=window._pl_category.toLowerCase(),i=window._pl_custom_experience_full_url||location.href;var c=this;if("digital"!==n&&0==window._pl_is_homepage&&(-1!=n.indexOf(" ")&&(n=n.split(" ").join("-")),t+="c/"+n+"/"),(Helpers.App.isCustomExperience()||Helpers.App.isCustomPage()||1==window._pl_is_homepage)&&(t="/"),l=Helpers.StageType.pageType(),null===l.category&&l.no_results&&(t="/"),["newest","best-selling","mixed","free"].indexOf(e.key)>=0){var u=t+"?sortby="+e.key,d=Helpers.App.getUrlParam("titles",i),h=Helpers.App.getUrlParam("filters",i);"page"!==e.mode||isNaN(parseInt(e.value))||(u+="&page="+e.value),d&&(u+="&titles="+encodeURIComponent(d)),h&&(u+="&filters="+encodeURIComponent(h));var p={};p.search=Helpers.App.getUrlParam("search",i),p.page=null,p.f_types=Helpers.App.getUrlParam("f_types",i),p.f_devices=Helpers.App.getUrlParam("f_devices",i),p.f_tags=Helpers.App.getUrlParam("f_tags",i),p.f_models=Helpers.App.getUrlParam("f_models",i),p.f_gender=Helpers.App.getUrlParam("f_gender",i),p.f_age=Helpers.App.getUrlParam("f_age",i),p.f_ethnicity=Helpers.App.getUrlParam("f_ethnicity",i),p.h=Helpers.App.getUrlParam("h",i),p.titles=Helpers.App.getUrlParam("titles",i),p.filters=Helpers.App.getUrlParam("filters",i);var f="";return(p.search||p.page||p.f_types||p.f_devices||p.f_tags||p.f_models||p.h||p.f_gender||p.f_age||p.f_ethnicity)&&(f="&"+Object.keys(p).filter(function(e){return"undefined"!=typeof p[e]&&null!==p[e]&&""!==p[e]}).map(function(e){return e+"="+encodeURIComponent(p[e])}).join("&")),u+f}var p={};switch(p.search=Helpers.App.getUrlParam("search",i),p.page=null,p.f_types=Helpers.App.getUrlParam("f_types",i),p.f_devices=Helpers.App.getUrlParam("f_devices",i),p.f_tags=Helpers.App.getUrlParam("f_tags",i),p.f_models=Helpers.App.getUrlParam("f_models",i),p.f_gender=Helpers.App.getUrlParam("f_gender",i),p.f_age=Helpers.App.getUrlParam("f_age",i),p.f_ethnicity=Helpers.App.getUrlParam("f_ethnicity",i),p.h=Helpers.App.getUrlParam("h",i),p.titles=Helpers.App.getUrlParam("titles",i),p.filters=Helpers.App.getUrlParam("filters",i),p.sortby=Helpers.App.getUrlParam("sortby",location.href),p.industry=Helpers.App.getUrlParam("industry",location.href),p.industryId=Helpers.App.getUrlParam("industryId",location.href),p.t=Helpers.App.getUrlParam("t",location.href),p.graph_id=Helpers.App.getUrlParam("graph_id",location.href),p.picker_0=Helpers.App.getUrlParam("picker_0",location.href),p.picker_1=Helpers.App.getUrlParam("picker_1",location.href),p.multiAssetsControl=Helpers.App.getUrlParam("multiAssetsControl",location.href),p.searchAssetsControl=Helpers.App.getUrlParam("searchAssetsControl",location.href),e.mode){case"page":p.page=e.value;break;case"filter":if(p[e.key]){var m,g;m=p[e.key].split(","),g=m.indexOf(e.value),g>-1?m.splice(g,1):m.push(e.value),p[e.key]=m.join()}else p[e.key]=e.value;("f_devices"===e.key||"f_gender"===e.key||"f_age"===e.key&&"f_ethnicity"===e.key)&&(tagClass=c._getClassNameByOptionsKey(e.key),s=this.homePageController.filterBar.find(tagClass).map(function(e,t){return t.querySelectorAll(".item-name")[0].innerHTML.trim()}).toArray(),s=s.concat(this.homePageController.element.find(".filters-top-bar").find(tagClass).map(function(e,t){return t.querySelectorAll(".item-name")[0].innerHTML.trim()}).toArray()),r=p[e.key].split(","),o=[],r.forEach(function(e){-1!==s.indexOf(e)&&o.push(e)}),p[e.key]=o.join());break;case"filters-reset":delete p.f_types,delete p.f_devices,delete p.f_tags,delete p.f_models,delete p.f_age,delete p.f_ethnicity,delete p.f_gender,a=!0}var f="?";return e.heading?p.h=e.heading:delete p.h,(p.search||p.page||p.f_types||p.f_devices||p.f_tags||p.f_models||p.h||p.sortby||p.f_gender||p.f_age||p.f_ethnicity)&&(f+=Object.keys(p).filter(function(e){return"undefined"!=typeof p[e]&&null!==p[e]&&""!==p[e]}).map(function(e){return e+"="+encodeURIComponent(p[e])}).join("&")),t+f},_getClassNameByOptionsKey:function(e){switch(e){case"f_devices":return".device-tag";case"f_gender":return".gender-tag";case"f_age":return".age-tag";case"f_ethnicity":return".ethnicity-tag";default:return".device-tag"}},_setupBreakpointListener:function(){var e,t,i=Helpers.App.getUrlParam("b"),n=i||Helpers.App.breakpoint;e=Helpers.App.getClientWidth()<=Helpers.App.breakpoint,t=function(e,t,i){var n;return function(){var s=this,r=arguments,o=function(){n=null,i||e.apply(s,r)},a=i&&!n;clearTimeout(n),n=setTimeout(o,t),a&&e.apply(s,r)}};var s=function(){var t=Helpers.App.getClientWidth();n>=t&&e===!1&&location.reload(),t>n&&e===!0&&location.reload()};window.addEventListener("resize",t(s,250))},stageBindings:function(){var e=this,t=this.showSubscriptionModal.bind(this);e.stage.bind("user-has-bookmarks",function(t){e.navbarContext.hasBookmarks=t.data,e.appNavBar.updateStatus(e.navbarContext)}),this.bind("coupon.update",function(e){this.flash(e.data,"info",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this)),this.appNavBar.bind("login.success",function(){e.stage.colorpickerSharedColors.setRecentlyUsedColors(),e.stage._initAutoSaveDraftManager()}),this.stage.bind("stageImage.ready",function(){this.handleParamActions(),this.updateSeoMetas()}.bind(this)).bind("success.processing",function(){var t="Couldn't process image, please try again";e.notification.element.hasClass("alert-danger")&&e.notification.$message.text().indexOf(t)>=0&&e.notification.autoclose(100)}).bind("url.invalid",function(t,i){e.flash(i,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}).bind("url.success",function(){var t="There was an error with the provided url";e.notification.element.hasClass("alert-danger")&&e.notification.$message.text().indexOf(t)>=0&&e.notification.autoclose(0)}).bind("flash.close",function(){this.notification.close()}.bind(this)).bind("video.upload.error",function(e){var t=""+e.data;this.flash(t,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this)).bind("upload.input.change",function(e){var t=e.data;t.length&&this.flash(t,"info",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this)).bind("download.overlay.activate",function(){window.isPastDue?this.handlePastDue(function(){var e=this;window.isPastDue===!0?e.purchasesModal.downloadInmediatelyOrActivate.bind(e.purchasesModal)():Helpers.SubscriptionHelper._refreshSubscription(function(t){e.purchasesModal.downloadInmediatelyOrActivate.bind(e.purchasesModal)()})}.bind(this)):this.purchasesModal.downloadInmediatelyOrActivate()}.bind(this)).bind("stage.error",function(e,t){t=t||{},t.stage_type=Helpers.StageType._types[window._stageData.stage_data.image_type],t.stage_id=_stageData.stage_data.id,t.stage_slug=_stageData.stage_data.slug,t.errorType&&-1!=["pinger","processing","st-jobs"].indexOf(t.errorType)&&Helpers.GlobalEventTracker.stageError(t),t.errorType&&-1!=["broken-stage"].indexOf(t.errorType)&&Helpers.GlobalEventTracker.stageErrorByEventType("stage.wrongID",t),t.slideFetchFailed&&this._removeUserVoiceSection();var i=""+t.message;""!==i&&this.flash(i,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this)).bind("error.processing",function(e,t){t=t||{},t.stage_type=Helpers.StageType._types[window._stageData.stage_data.image_type],t.stage_id=_stageData.stage_data.id,t.stage_slug=_stageData.stage_data.slug,Helpers.GlobalEventTracker.stageError(t);var i=""+e.data.message;this.flash(i,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this)).bind("stage.warn",function(e){var t=""+e.data.message;this.flash(t,"warning",{autoclose:{milliseconds:1e3*e.data.seconds}})}.bind(this)).bind("notification.reset",function(){e.notification.close()}).bind("stage.infoReady",function(t){if(this.constructor===Helpers.StageType.getSmartTemplateClass()){var i={dimensions:this.record.original.size.high,stage_type_name:"smart_template",dpi:this.record.original.size.high.resolution};e.purchasesModal.setResolutionData(i)}if(this.constructor===UI.StageSmartVideoProduct||this.constructor===UI.VideoV5Stage){var n=this.record.original&&this.record.original.size?this.record.original.size:void 0,i={dimensions:n,stage_type_name:"video_product"};e.purchasesModal.setResolutionData(i)}}).bind("resolutionChange",function(t){if(this.constructor===Helpers.StageType.getSmartTemplateClass()){var i={dimensions:t.data.dimensions,stage_type_name:"smart_template",dpi:t.data.dpi};e.purchasesModal.setResolutionData(i)}}).bind("stage.updated",function(e){this.purchasesModal.setPreview(e.data)}.bind(this)).bind("saveDraft.success",function(t){var i=t.data.message;this.flash(i,"success",{autoclose:{milliseconds:1e3*t.data.seconds}}),$("#link-to-saved-drafts").one("click",function(t){t.preventDefault(),e.stage.goToDraftCarousel()})}.bind(this)).bind("saveDraft.error",function(e){var t=e.data.errorMessage;this.flash(t,"alert",{autoclose:{milliseconds:1e3*e.data.seconds}})}.bind(this)).bind("savedDraft.invalidAccount",function(e){console.log("invalid account for the draft");var t=e.data.errorMessage;this.flash(t,"alert",{autoclose:{milliseconds:1e3*e.data.seconds}}),setTimeout(function(){window.location.href=window.location.href.replace(window.location.search,"")},1e3*e.data.seconds)}.bind(this)).bind("removeDraft.error",function(e){console.log("removeDraft.error");var t=e.data.errorMessage;this.flash(t,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this)).bind("savedDraft.notLogged",function(){return null!==window.savedDraftId?(console.log("SavedDraft login access"),this.instantiateNotLoggedInModal(),void this.flash('Please <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.activate()" class="trigger_login_link" role="button">login</a> to load your saved draft',"warning",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME+3e3}})):void 0}.bind(this)).bind("missingAudioTrack",function(e){var t=e.data.message,i=e.data.timeout;this.flash(t,"alert",{autoclose:{milliseconds:i}})}.bind(this)).bind("thumbnailPreview",function(t){e.thumbnailPreviewOverlay.setPreviews(t.data)}).bind("pricingButton.click",t),this.stage&&this._bindRecommendationSectionEvents()},checkRequestedModal:function(){var e=this,t=new Helpers.URL(window.location.href,window.location.origin);return e._shouldShowHalloweenAnimation()?this._initHalloweenGhost():e._isSurveyAvailable()===!0?this._initSurveyNotification():t.hasHash("#license")?((new UI.FriendlyLicenseModal).activate(),!1):t.hasHash("#pricing")?(this.showPricingModal(),!1):e.shouldShowCampaignModal()?!1:void(t.hasHash("#signup")&&this._showLoginModal())},_isSurveyAvailable:function(){return Helpers.App.isLoggedIn()&&Helpers.App.getSubscription()&&this._hasSurveyCookie()===!1&&window.apiPage!==!0&&window.isSurveyFlagEnabled===!0},_initSurveyNotification:function(){this.surveyNotification&&this.surveyNotification.destroy();var e=Helpers.App.getUser(),t=new UI.SurveyNotification({name:"surveyNotification",userId:e.id});this.appendChild(t).render($("body")),this._bindSurveyNotification(this.surveyNotification)},_bindSurveyUserEvents:function(){window.apiPage!==!0&&(this.appNavBar.bind("login.success",Utils.bindFn(this)(this._showSurveyNotification)),this.bind("subscription.success",Utils.bindFn(this)(this._showSurveyNotification)))},_showSurveyNotification:function(){this._isSurveyAvailable()!==!1&&this._initSurveyNotification()},_bindSurveyNotification:function(e){e.bind("close",this._setSurveyCookie)},_hasSurveyCookie:function(){return""!==Helpers.App.getCookie("surveyNotification")},_setSurveyCookie:function(){Helpers.App.setCookie("surveyNotification",1,360)},handleParamActions:function(){return Helpers.StageType.getStageType().indexOf("still")>=0&&this.applyUserSource(),this},applyUserSource:function(){var e=Helpers.App.getUrlParam("user_source"),t=!!e;t&&this.stage.loadFromUrl(e)},clearUserSource:function(){Helpers.App.getUrlParam("user_source")&&window.history.replaceState({},Helpers.StageType.getStageSlug(),Helpers.App.removeParam("user_source",window.location.href))},showLicenseModal:function(){return $(".modal").modal("hide"),(new UI.LicenseModal).activate(),this},_handleStageSwitch:function(){return this},instantiateCouponGiftModal:function(){void 0===this.couponGiftModal&&this.appendChild(new UI.CouponGiftModal({name:"couponGiftModal"}))},forceSignUp:function(){var e;e={type:"warning",content:'Please create an account to continue editing.<br /> Already have an account?                     <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_LOGIN+'\')" class="trigger_login_link" role="button">Log In</a>',contentForceLogIn:'Please log in to continue editing.<br /> Don\'t have an account?                     <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_SIGNUP+'\')" class="trigger_signup_link" role="button">Sign Up</a> today!'},this.appNavBar.ssoModal.disableClose(),this.appNavBar.ssoModal.activate(),this.appNavBar.ssoModal.showMessage(e)},instanceCouponRedeemModal:function(){void 0===this.couponRedeemModal&&(this.appendChild(new UI.CouponRedeemModal({name:"couponRedeemModal"})),this.couponRedeemModal.bind("couponRedeemModal:pickStage",function(){this.homePageController.showCouponText(),this.couponRedeemModal.unbind("couponRedeemModal:pickStage")}.bind(this)))},loadSavedConfiguration:function(){var e;e=this,window.isSavedConfiguration&&window.savedConfigurationUiJsonUrl?e.savedConfigurationData=new Promise(function(e,t){$.ajax({method:"GET",url:window.savedConfigurationUiJsonUrl,dataType:"json"}).done(function(t){e(t)}).fail(function(e){t(e)})}):e.savedConfigurationData=new Promise(function(e,t){e({collection:[]})})},showShortcutInstructionsModal:function(e){var t=$(e.target).data("download"),i=Helpers.App.isDownloadIphoneFlowAvailable()&&Helpers.App.isMobile();return i?(page.notification.close(),void Helpers.App.shortcutDownloadModal(window.location.origin+t,this.stage.getFullVideoSrc())):void window.open(t)},goToRedirectUrl:function(){var e,t;t=function(e){return e&&e.match(/^\/[^\/\\]/)},this.isRedirectToInParams()!==!1&&(e=Helpers.App.getAllURLParams().redirect_to,t(e)?location.href=e:(Helpers.GlobalEventTracker.track("url:preventRedirect",{url:e}),location.href="/"))},isRedirectToInParams:function(){return"redirect_to"in Helpers.App.getAllURLParams()},authenticationPurchasesBindings:function(){var e=this;Helpers.App.isLoggedIn()||this.isRedirectToInParams()===!1||this.appNavBar.bind("signup.success",function(){e.goToRedirectUrl()}).bind("login.success",function(){e.goToRedirectUrl()})},openSsoModalOnRedirect:function(){Helpers.App.isLoggedIn()||this.isRedirectToInParams()===!1||this.appNavBar.instantiateNotLoggedInModal()},showShortcutError:function(){var e=Helpers.App.getUrlParam("videoDownloadURL"),t=Helpers.App.getUrlParam("videoPreviewURL");e&&t&&Helpers.App.shortcutDownloadModal(decodeURIComponent(e),decodeURIComponent(t))},isDevMode:function(){return"true"===Helpers.App.getUrlParam("devMode")},_customExperienceBindings:function(){var e;e=this,e.customExperience.bind("thumbnailPreview",function(t){e.thumbnailPreviewOverlay.setPreviews(t.data)})},_setPricesInCustomPage:function(){var e=this,t=Helpers.Price.monthlyPlan(),i=Helpers.Price.annualPlan();t.price.then(function(t){var i=Helpers.Price.format(t),n=e.$pageContainer.find(".monthly-plan-price");n.text(i)}),i.price.then(function(t){var i=Helpers.Price.format(t),n=e.$pageContainer.find(".annual-plan-price");n.text(i)})},_removeUserVoiceSection:function(){this.$uservoiceFeedbackSection.remove()},checkExternalSsoAuthFallback:function(){var e=this;return Helpers.App.isExternalSsoFallbackUrl("google")===!0?(this._onGoogleAuthFallback(),void this.dispatch("login.form.success")):void ExternalSsosSupport.STANDARD_SSO_PROVIDERS.forEach(function(t){Helpers.App.isExternalSsoFallbackUrl(t)===!0&&(e._onExternalSsoAuthFallback(t),e.dispatch("login.form.success"))})},_onGoogleAuthFallback:function(){var e=Service.Sso.getInstance(),t=Helpers.App.getUser(),i=Helpers.App.getUrlParam("googleFallback");t.authenticated_by="google";var n=e.isValidSignup(t);this._sendGoogleAuthenticationFallbackEvents(),this._sendGoogleAuthenticationEvents(n,t,i),ExternalSsosSupport.removePageStateCookie()},_onExternalSsoAuthFallback:function(e){this._sendExternalSsoAuthenticationEvents(e),ExternalSsosSupport.removePageStateCookie()},_sendExternalSsoAuthenticationEvents:function(e){var t=Service.Sso.getInstance(),i=e+"Fallback",n=Helpers.App.getUrlParam(i),s=Helpers.App.getUser();s.authenticated_by=e,t.isValidSignup(s)&&Helpers.GlobalEventTracker.userSignup(),Helpers.GlobalEventTracker.userLogin(s),Helpers.GlobalEventTracker.externalSsoSigninSuccess({userData:s,source:n,provider:e}),Helpers.App.deleteURLParam(i)},_sendGoogleAuthenticationFallbackEvents:function(){Helpers.GlobalEventTracker.googleFinishFallback(),Helpers.App.deleteURLParam("googleFallback")},_sendGoogleAuthenticationEvents:function(e,t,i){var n={userData:t,source:i,isGoogleFallbackEnabled:!0};Helpers.GlobalEventTracker.googleSigninSuccess(n),e===!0&&Helpers.GlobalEventTracker.userSignup(),Helpers.GlobalEventTracker.userLogin(t)},directDownload:function(){return this.purchasesModal.skipModalAndDownloadImmediately(),this},showPaymentModal:function(){return this.ctaBlockSection?(this.ctaBlockSection.subscribeButtonClick(),this):(this.subscriptionsPartial.subscribeButtonClick(),this)},_bindDirectDownload:function(){if(this.stage){var e=Utils.bindFn(this);this.stage.bind("stage.infoReady",e(this.directDownload))}},performNextLoginActionFromRedirect:function(){var e=Helpers.App.getNextLoginAction();null!==e&&("activate-purchase"===e&&Service.MultiplePurchase.getInstance().canDoMultiplePurchases()?document.addEventListener("stageReady",function(){this.directDownload()}.bind(this)):"activate-purchase"===e&&this.directDownload(),(e.includes("activate-pricing")===!0||"activate-purchase-subscription"===e)&&Helpers.App.isSubscriptionValid()===!1&&this.showPaymentModal(),Helpers.App.clearNextLoginAction())},_showLoginModal:function(){this.appNavBar.ssoModal.activate()},_bindRecommendationSectionEvents:function(){if(this.stage.hasRecommendedTemplates()!==!1){var e=this;e.appNavBar.bind("login.success",function(){e.stage.updateRecommendedTemplatesBookmarks()}),e.appNavBar.bind("signup.success",function(){e.stage.updateRecommendedTemplatesBookmarks()}),Helpers.App.isMobile()!==!1&&(e.bind("recommendationModal.show",function(){e.stage.showRecommendationDownloadModal()}),e.bind("sideMenu.open",function(){e.stage.hideRecommendationSection()}),e.bind("sideMenu.close",function(){e.stage.reopenRecommendationSection()}))}},_myPlaceitButtonExperimentHandler:function(){if(Helpers.App.isLoggedIn()!==!1){var e=this._getMyPlaceitButtonElement();this._bindMyPlaceitButtonEvents(e)}},_getMyPlaceitButtonElement:function(){var e=this.appNavBar.getElement().find(".account-box > :not(.mobile) .my-placeit a");return Helpers.App.isMobile()&&(e=this.appNavBar.getElement().find(".account-box .mobile .my-placeit a")),e},_myPlaceitButtonClickHandler:function(e){e.preventDefault(),Helpers.GlobalEventTracker.track("menu:myPlaceit",{URI:window.location.href}),window.location.href=window._pl_host+"/my_placeit"},_bindMyPlaceitButtonEvents:function(e){e.bind("click",Utils.bindFn(this)(this._myPlaceitButtonClickHandler))},_initHalloweenGhost:function(){var e=new HalloweenGhost;e.activate(),Helpers.App.setCookie(PageController.HALLOWEEN_ANIMATION_LOCAL_STORAGE_KEY,!0)},_shouldShowHalloweenAnimation:function(){var e=Helpers.App.getCookie(PageController.HALLOWEEN_ANIMATION_LOCAL_STORAGE_KEY),t=window.pageType;return window.is_halloween?Boolean(e)?!1:t.is_stage===!0?!1:"Account Pages"===t.page_type?!1:!0:!1},_loginCallbackBuilder:function(e){var t=this,i=function(){e(),t.appNavBar.unbind("login.success",i)};this.appNavBar.bind("login.success",i)},_initSessionStateService:function(){var e=Utils.bindFn(this);Service.SessionState.getInstance({showLogin:e(this._showLoginModal),loginCallbackBuilder:e(this._loginCallbackBuilder)})}}}),Class(UI,"MyDriveDownloadsItem").inherits(Widget).includes(BubblingSupport)({html:'<li>                <img class="my-drive-downloads-thumbnail" src=""/>                <a href="#" class="my-drive-downloads-link"><span class="blue-arrow"></span></a>                <a href="#" title="Change your image size" class="btn btn-default my-drive-downloads-crop" target="_blank"><span class="glyphicon-crop"></span></a>                <div class="my-drive-downloads-processing-wrapper">                   <p class="my-drive__processing-text"> Processing your </p>                   <div class="my-drive__processing-line">                    <div class="my-drive__processing-progress"> </div>                  </div>                </div>                 <div class = "my-drive__processing-hint" >We\'ll email you when it\'s ready!  </div>             </li>',PERCENTAGE_QUEUE:30,TRESHOLD_FOR_UPDATING:100,IMAGE_CROPPER_URL:"/image-cropper?asset_id=${productshotId}",prototype:{image:null,el:null,id:null,stage_slug:null,stage_category:null,stage_id:null,hsh:null,res:null,url:null,thumb:null,processing:null,process_id:null,image_type_id:null,slug:null,timePollStarted:null,_tempThumbs:{image:"/assets/dummy-thumb-image.svg",video:"/assets/dummy-thumb-video.svg"},_categoryText:{mockups:"mockup",design_templates:"design",video_cropper:"video",video_to_gif_converter:"gif",free_image_resizer_cropper:"image",videos:"video",logos:"logo"},init:function(e){Widget.prototype.init.call(this,e),this.el=this.element[0],this.$img=$(this.el.querySelector(".my-drive-downloads-thumbnail")),this.$link=$(this.el.querySelector(".my-drive-downloads-link")),this.$cropLink=this.element.find(".my-drive-downloads-crop"),this.$processing=$(this.el.querySelector(".my-drive-downloads-processing-wrapper")),this.$hint=$(this.el.querySelector(".my-drive__processing-hint")),this.$progressLine=$(this.$processing.find(".my-drive__processing-progress")),this.$progressBar=$(this.$processing.find(".my-drive__processing-line")),this.$processText=$(this.$processing.find(".my-drive__processing-text")),this._setThumb(),this.processing===!1?this._setLink():(this._shouldShowEmailHint()?this.$hint.show():this.$hint.hide(),this._setProgress(this.percentage)),this.$link.on("click",this._linkHandler.bind(this)),this._canShowImageCrop(e)===!0&&(this._updateCropLink(e.id),this._showCropLink()),this.$cropLink.bind("click",Utils.bindFn(this)(this._cropLinkClickHandler))},update:function(e){(e.processing!==!1||this.processing!==!1)&&(e.processing===!0&&(this.queue=e.queue,this._setProgress(e.percentage)),e.processing===!1&&this.processing===!0&&(this.processing=!1,this.thumb=e.thumb,this._setImageProgress(100),this.constructor.dispatch("processed",this),this.url=e.url,this._setLink(),this._setThumb(),this._addHighlight(),this.$hint.hide(),this.isVideo()===!0&&this.constructor.dispatch("videothumb:updated",{videoProductId:e.id,videoThumb:e.thumbVideo})),this._canShowImageCrop(e)===!0&&(this._updateCropLink(e.id),this._showCropLink()))},updateFailed:function(){this.show(),this.$processText.text("Sorry, we couldn\u2019t process your request."),$(this.el).addClass("processing-error"),this.$progressBar.hide(),this.$hint.hide(),this.constructor.dispatch("processed",this)},_setThumb:function(){this.processing===!0?this.$img.attr("src",this._tempThumbs[this.assetType]):this.$img.attr("src",this.thumb)},isVideo:function(){return"video"===this.assetType},_setProgress:function(e){this.$processing.show(),this.$link.hide(),this.isVideo()===!0?this._setVideoProgress():this._setImageProgress(e)},_setImageProgress:function(e){this.$progressLine.show(),this.$processText.text("Processing your "+this.getCategoryText()+"..."),e>this.percentage&&this.$progressLine.width(e+"%")},_getSecondsSinceProcessingStarted:function(){return((new Date).getTime()-this.timePollStarted.getTime())/1e3},_setVideoProgress:function(){switch(this.queue){case 0:this.$processText.text("Processing your "+this.getCategoryText()+"..."),this.$progressBar.show(),this.timePollStarted||(this.timePollStarted=new Date);var e=this._getSecondsSinceProcessingStarted(),t=e*((100-this.constructor.PERCENTAGE_QUEUE)/10)/(this.constructor.TRESHOLD_FOR_UPDATING/10)+this.constructor.PERCENTAGE_QUEUE;100>t&&this.$progressLine.width(t+"%");break;case-1:this.$progressLine.width("100%");break;default:this.$processText.text("Please wait on pending video processing"),this.$progressBar.hide()}},_setLink:function(){this.$link.show(),this.$processing.hide(),this.$hint.hide();var e="Click here to download";Helpers.App.isMobileDevice()===!0&&(e="Tap here to download"),this.isAlreadyDownloaded()===!0&&(e="Download Again");var t='<span class="blue-arrow"></span>';if(this.$link.html(e+t),this.isVideo()===!0){var i="download_video_v4";"video-to-gif-converter"===this.stage_slug?i="download_gif":this._isVideoV5()===!0&&(i="download_video_v5");var n="/stages/"+this.process_id+"/"+i+"?comp=false";this.$link.attr("href","#"),this.$link.on("click",function(e){return page.showShortcutInstructionsModal(e),!1}),this.$link.attr("data-download",n)}else this.$link.attr("href","/stages/"+this.hsh+"/download?res=normal"),this.$link.attr("download","image.png")},_addItemAsDownloaded:function(){var e,t=Helpers.App.getUser().id;try{e=JSON.parse(sessionStorage.getItem(t))}catch(i){console.log(i)}(null===e||void 0===e)&&(e=new Array),e.push(this.id),e.length>20&&e.shift(),sessionStorage.setItem(t,JSON.stringify(e))},isAlreadyDownloaded:function(){var e=Helpers.App.getUser().id,t=new Array;try{t=JSON.parse(sessionStorage.getItem(e))||t}catch(i){console.log(i)}for(var n=0;n<t.length;n++)if(t[n]===this.id)return!0;return!1},getCategoryText:function(){return 17===this.image_type_id?this._categoryText[this.stage_slug.split("-").join("_")]:this._categoryText[this.stage_category.split("-").join("_")]},_linkHandler:function(){this._addItemAsDownloaded(),this._removeHighlight(),this._setLink(),this.constructor.dispatch("downloaded",this),Helpers.GlobalEventTracker.track("Download:itemDownloaded",this._getEventData())},_getEventData:function(){return{category:this._getCategoryName(),slug:this.stage_slug,stage_id:this.stage_id.toString(),thumb:this.thumb,stage_type:Helpers.StageType._types[this.image_type_id]}},_getCategoryName:function(){var e,t,i;for(i=0;i<window._pl_categories.length;i++)if(e=window._pl_categories[i].name,t=e.replace(/\s/g,"-").toLowerCase(),t===this.stage_category)return e},_addHighlight:function(){this.el.classList.add("highlight")},_removeHighlight:function(){this.el.classList.remove("highlight")},_isVideoV5:function(){return 18===this.image_type_id},_canShowImageCrop:function(e){var t="image"===e.assetType,i="mockups"===e.stage_category||"design-templates"===e.stage_category;return e.processing===!1&&t===!0&&i===!0},_updateCropLink:function(e){var t=this.constructor.IMAGE_CROPPER_URL.replace("${productshotId}",e);this.$cropLink.attr("href",t)},_showCropLink:function(){this.element.addClass("crop-action")},_cropLinkClickHandler:function(){Helpers.GlobalEventTracker.downloadCrop("download",this._getEventData())},destroy:function(){return this.el=null,this.id=null,this.hsh=null,this.res=null,this.url=null,
this.thumb=null,this.processing=null,this.process_id=null,this.image_type_id=null,Widget.prototype.destroy.call(this)},_shouldShowEmailHint:function(){var e=Helpers.App.getUser();return e&&e.downloadEmailNotifications}}}),Class(UI,"MyDriveDownloadsTooltip").inherits(Widget)({MOBILE_MAX_WIDTH:580,MAX_ITEMS_TO_SHOW:5,ERROR_TIME:6e3,ERROR__FADEOUT_TIME:2e3,elementClass:"my-drive__breakdown",html:'<div class=" animated bounceInDown2" role="tooltip">                 <div class="my-drive__breakdown-header">                     <div class="title"> <p>My Downloads</p> </div>                    <div class="close-icon">  </div>                 </div>                 <div class="my-drive__breakdown-body" >                        <div class="my-drive__error">                        <img class="my-drive-downloads-thumbnail" src="/assets/download-error-icon.svg"/>                        <div class="my-drive-downloads-processing-wrapper">                             <p class="my-drive__error-header">We are sorry!</p>                             <p class="my-drive__error-text">We couldn\'t process your request</p>                         </div>                         </div>                     <div class="my-drive__breakdown-section-wrapper">                        <div class="my-drive__empty">                            <img src="/assets/download-empty.svg"> </img>                            <span class="title"> No Downloads Yet </span>                             <span> Your latest downloads will be available here </span>                             <a href="/purchases" title="My Drive" class="my-drive__empty-link">Click here to see your downloads</a>                        </div>                         <ul class="my-drive__breakdown-list"></ul>                     </div>                </div>                 <div class="my-drive__breakdown-footer">                    <a href="/purchases" title="My Drive"> View All </a>                </div>            </div>',prototype:{_visible:!1,el:null,$close:null,list:null,$list:null,$empty:null,processingItems:null,failedItems:null,init:function(e){Widget.prototype.init.call(this,e),this.el=this.element[0],this.$close=$(this.el).find(".close-icon"),this.list=$(this.el).find(".my-drive__breakdown-list"),this.$list=$(this.list),this.$empty=$(this.el).find(".my-drive__empty"),this.$error=$(this.el).find(".my-drive__error"),this.$error.hide(),this.processingItems={},this.failedItems={},this._bindEvents(),this.updateForNoRecents()},_bindEvents:function(){var e=this;UI.MyDriveDownloadsItem.bind("processed",this._handleProcessed.bind(this)),UI.MyDriveDownloadsItem.bind("downloaded",this._handleDownloaded.bind(this)),this.$close.on("click",this.hide.bind(this)),window.addEventListener("resize",function(){this._calculatePosition()}.bind(this));var t=this;return document.addEventListener("click",function(e){t.element.is(":visible")&&t.element[0].contains(e.target)===!1&&t.hide()},!0),Helpers.DownloadProcess.bind("downloadStartUpdate",function(t){0!==t.data.items.length&&e._hideEmptyMsg()}),Helpers.DownloadProcess.bind("downloadItemNew",function(t){var i=t.data.item,n=t.data.index;e._createNewItem(i,n)}),Helpers.DownloadProcess.bind("downloadItemUpdate",function(t){var i=t.data.item,n=t.data.index;e._updateItem(i,n)}),Helpers.DownloadProcess.bind("downloadItemError",function(t){e._updateFailedProcessing(t.data.item)}),Helpers.DownloadProcess.bind("downloadEndUpdate",function(t){e._cleanDeletedItems(t.data.items)}),this},_createNewItem:function(e,t){this.appendChild(new UI.MyDriveDownloadsItem(e)),this[e.name].render(this.$list),this._updateItemIndex(this[e.name],t)},_updateItem:function(e,t){this[e.name]&&(this[e.name].update(e),this._updateItemIndex(this[e.name],t))},_updateItemIndex:function(e,t){e&&(t>=UI.MyDriveDownloadsTooltip.MAX_ITEMS_TO_SHOW?e.hide():e.show(),$(e.element).css("order",t))},_hideEmptyMsg:function(){this.$empty.hide(),$(this.el).find(".my-drive__breakdown-header .title").show(),$(this.el).find(".my-drive__breakdown-footer a").show()},showError:function(e){this.$error.show(),this.$empty.hide();var t=$(this.el).find(".my-drive__breakdown-header .title"),i=$(this.el).find(".my-drive__breakdown-footer a");t.hide(),i.hide(),this.show(),this._setErrorText(e.errorType);var n=this;setTimeout(function(){n._hideError()},UI.MyDriveDownloadsTooltip.ERROR_TIME)},_cleanDeletedItems:function(e){var t=this.children,i=t.length;t.forEach(function(t){var i=e.find(function(e){return e.id===t.id}),n=void 0===i;n&&t.processing?this._updateFailedProcessing(t):n&&!this.failedItems[t.name]&&(this[t.name].hide(),this[t.name].destroy(),delete this[t.name])},this),0===this.children.length&&i>0&&this.updateForNoRecents()},_setErrorText:function(e){var t=this.$error.find(".my-drive__error-header"),i=this.$error.find(".my-drive__error-text");"too_many_request"===e?(t.html("You are downloading too fast"),i.html("Please slow down and try again")):(t.html("We are sorry!"),i.html("Sorry we couldn't process your request"))},_updateFailedProcessing:function(e){var t=e.name;this[t]&&(this.failedItems[t]=!0,this[t].updateFailed(),$(this[t].element).css("order",0),this._hideEmptyMsg())},updateForNoRecents:function(){this.element.addClass("no-recents"),this.$empty.show(),Helpers.App.isMobile()===!0&&$(".my-drive__empty-link").html("Tap here to see your downloads"),$(this.el).find(".my-drive__breakdown-header .title").hide(),$(this.el).find(".my-drive__breakdown-footer a").hide()},updateForEmpty:function(){this.element.removeClass("no-recents"),this.$empty.css("display","flex"),$(this.el).find(".my-drive__breakdown-header .title").hide(),$(this.el).find(".my-drive__breakdown-footer a").hide()},toggle:function(){return this.element.is(":visible")?this.hide():this.show(),this},_canShow:function(){return!$("body").hasClass("modal-open")},show:function(){this._canShow()?(this._calculatePosition(),$(this.el).show()):$(document).one("hidden.bs.modal",this.show.bind(this))},_isTargetInViewPort:function(){if(void 0===this.target||0===this.target.length)return!1;var e=this.target.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},destroy:function(){return this._visible=null,this.el=null,this.$close=null,this.list=null,this.$list=null,Widget.prototype.destroy.call(this)},_handleDownloaded:function(){this.dispatch("all.downloaded"),sessionStorage.setItem("pendingDownloads",!1),sessionStorage.setItem("hasDownloaded",!0)},_handleProcessed:function(){this.show(),sessionStorage.setItem("pendingDownloads",!0),sessionStorage.setItem("hasDownloaded",!0)},hide:function(){this.dispatch("hidden"),Widget.prototype.hide.call(this),this._hideError(),Object.keys(this.failedItems).forEach(function(e){void 0!==this[e]&&(this[e].destroy(),delete this[e]),delete this.failedItems[e]},this)},_hideError:function(){this.$error.fadeOut(UI.MyDriveDownloadsTooltip.ERROR__FADEOUT_TIME),this.$list.is(":empty")&&(Widget.prototype.hide.call(this),this.$empty.show())},_calculatePosition:function(){var e=document.documentElement.clientWidth;e<UI.MyDriveDownloadsTooltip.MOBILE_MAX_WIDTH?(this.target=this.targets.length>1?this.targets[1]:this.target,this._isTargetInViewPort()===!1&&this.element.addClass("no-target")):this.element.removeClass("no-target")}}}),Class(UI,"MyDriveDownloads").inherits(Widget).includes(BubblingSupport)({prototype:{el:null,link:null,icon:null,_timer:null,_processingClassnames:{PROCESSING:"processing",PROCESSED:"processed",ALL_DOWNLOADED:"all-downloaded",PENDING_DOWNLOAD:"pending",HAS_DOWNLOADED:"has-downloaded"},_processingFeedbackReferences:[],Tooltip:null,init:function(e){Widget.prototype.init.call(this,e),this.element.length&&this._cacheReferences(),this._processingFeedbackReferences.push(this.el),window.apiPage===!1&&this._bindEvents()},_bindEvents:function(){var e=Utils.bindFn(this);return UI.MyDriveDownloadsItem.bind("processed",e(this._processedUIState)),this.Tooltip.bind("all.downloaded",e(this._allDownloadedUIState)),this.Tooltip.bind("all.downloaded",e(this._activateRecommendationModalExperiment)),this.Tooltip.bind("hidden",e(this._pendingDownloadUIState)),Helpers.DownloadProcess.bind("downloadNoRecent",e(function(){this.Tooltip.updateForNoRecents()})),Helpers.DownloadProcess.bind("downloadEmpty",e(function(){this.Tooltip.updateForEmpty()})),Helpers.DownloadProcess.bind("downloadStartUpdate",e(function(){this._updateUI()})),this},_cacheReferences:function(){return this.el=this.element[0],this.link=this.element.find(".my-drive__link"),this.icon=this.el.querySelector(".my-drive__processing-icon-wrapper"),this.Tooltip&&(this.Tooltip.element.remove(),this.removeChild(this.Tooltip),this.Tooltip=null),this.appendChild(new UI.MyDriveDownloadsTooltip({name:"Tooltip",targets:this._processingFeedbackReferences})),this.Tooltip.render($("body")),this.link.off("click").on("click",this._linkClickHandler.bind(this)),this},restart:function(){return this.element=$(".past-downloads-item-holder"),this._cacheReferences(),this.update(),this},_linkClickHandler:function(e){return e.preventDefault(),$(document.body).removeClass("open-sidemenu"),this.Tooltip.element.is(":visible")||this.update(),this.Tooltip.toggle(),sessionStorage.setItem("pendingDownloads",!1),this._pendingDownloadUIState(),this},getProcessingItems:function(){return Helpers.DownloadProcess.getProcessingDownloads()},getProcessedItems:function(){return Helpers.DownloadProcess.getSuccessDownloads()},cloneProcessingFeedbackTo:function(e,t){var i=this;if(!e)return i;var n=e.querySelector(".my-drive__processing-mobile-feedback");null!==n&&n.remove();var s=document.createElement("div");return s.appendChild(i.icon.cloneNode(!0)),t&&(s.className=t),e.appendChild(s),i._processingFeedbackReferences.push(s),s.addEventListener("click",this._linkClickHandler.bind(this)),i._updateMobileUi(),i},_updateUI:function(){var e=this.getProcessingItems().length;return e?(this._processingUIState(),this._updateMobileUi(!0)):this._allProcessedUIState(),this},_processingUIState:function(){return this._addProcessingClassName(this._processingClassnames.PROCESSING),this},_processedUIState:function(){return this.dispatch("process",{queue:this.getProcessingItems()}),this._addProcessingClassName(this._processingClassnames.PROCESSED),this._addProcessingClassName("highlighted"),setTimeout(function(){this._removeProcessingClassName("highlighted")}.bind(this),3e3),this},_allProcessedUIState:function(){var e=this;return $.cookie("pl_processing_tracker")&&$.removeCookie("pl_processing_tracker"),e.el.classList.contains(e._processingClassnames.PROCESSING)!==!1||e.el.classList.contains(e._processingClassnames.PROCESSED)!==!1?(e._removeProcessingClassName(e._processingClassnames.PROCESSING),this):void 0},_allDownloadedUIState:function(){var e=this;return e._removeProcessingClassName(e._processingClassnames.PROCESSED),e._addProcessingClassName(e._processingClassnames.ALL_DOWNLOADED),this},_pendingDownloadUIState:function(){var e=this;return"true"===sessionStorage.getItem("pendingDownloads")?e._addProcessingClassName(e._processingClassnames.PENDING_DOWNLOAD):e._removeProcessingClassName(e._processingClassnames.PENDING_DOWNLOAD),this},_addProcessingClassName:function(e){var t=this;return e?(t._processingFeedbackReferences.forEach(function(t){t.classList.add(e)}),t):t},_removeProcessingClassName:function(e){var t=this;return e?(t._processingFeedbackReferences.forEach(function(t){t.classList.remove(e)}),t):t},_requestError:function(e){if(!e.message||"Cancelation error"!==e.message){var t=e.message||e.responseText||"The request fail with status: "+e.status+" statusText: "+e.statusText+" readyState: "+e.readyState;throw new Error("Processing polling error: "+t)}},update:function(e,t){var i=Helpers.App.getUser().id,n=Utils.bindFn(this);return i?(t&&Utils.promisifyEventBuilder(Helpers.DownloadProcess)("downloadEndUpdate").then(n(this._showTootltip)),Helpers.DownloadProcess.pollProcessing()["catch"](this._requestError),this):this},_showTootltip:function(){this.Tooltip.show()},showError:function(e){this.Tooltip.showError(e)},getItems:function(){return Helpers.DownloadProcess.getAllDownloads()},getProcessedItemByKey:function(e,t){var i;return this.getProcessedItems().some(function(n){return n[e]===t?i=n:void 0}),i},hideTooltip:function(){this.Tooltip.hide()},_updateMobileUi:function(e){var t=this;Helpers.App.isMobile()&&(sessionStorage.getItem("hasDownloaded")||e)&&t._addProcessingClassName(t._processingClassnames.HAS_DOWNLOADED)},_activateRecommendationModalExperiment:function(){this.dispatch("recommendationModal.show")}}}),Class(UI,"UserForm").inherits(Widget).includes(BubblingSupport)({html:'        <form action="#" method="post" data-remote="true" data-type="json">            <div class="alert alert-danger">              <p></p>            </div>        </form>    ',prototype:{init:function(e){Widget.prototype.init.call(this,e),this.$alert=this.element.find(".alert").hide(),this.signUpEmail=this.element.find("#user_email"),this.signUpPassword=this.element.find("#user_password"),this.loginEmail=this.element.find("#email"),this.loginPassword=this.element.find("#password"),this.isAndroid=/Android/.test(navigator.appVersion),this.bindings()},loginSuccess:function(e,t){var i=this;if(Helpers.App.isMobileDevice()&&document.activeElement.blur(),this.isAndroid&&$(".navbar.navbar-default.navbar-fixed-top").css("top","0px"),page.isHomepage&&page.isHomepage()===!0&&"undefined"!=typeof page.stage&&(page.stage.stageActionsManager.$bookmarkButton.unbind("click"),page.stage.stageActionsManager.$bookmarkButton.on("click",function(){var e=Helpers.App.getUrlParam("draftId")||null;$.ajax({dataType:"json",data:{draftId:e},url:"/bookmarks/"+Helpers.StageType.getStageID(),type:page.stage.stageActionsManager.$bookmarkButton.hasClass("favorite")?"DELETE":"POST",success:function(){page.stage.stageActionsManager.toggleFavorite()},error:function(e){console.log(e)}})}),$.get("/bookmarks/stage_is_bookmarked/"+Helpers.StageType.getStageID(),function(e){e.stage_is_bookmarked?(page.stage.stageActionsManager.$bookmarkButton.addClass("favorite"),page.stage.stageActionsManager.$bookmarkSign.addClass("glyphicon-heart"),page.stage.stageActionsManager.$bookmarkSign.removeClass("glyphicon-heart-empty"),Helpers.App.isMobileDevice()||page.stage.stageActionsManager.bookPopup.attr("data-content",'<div class="bookmark-tooltip-content">Remove from bookmarks</div>').data("bs.popover").setContent()):(page.stage.stageActionsManager.$bookmarkButton.removeClass("favorite"),page.stage.stageActionsManager.$bookmarkSign.removeClass("glyphicon-heart"),page.stage.stageActionsManager.$bookmarkSign.addClass("glyphicon-heart-empty"),Helpers.App.isMobileDevice()||page.stage.stageActionsManager.bookPopup.attr("data-content",'<div class="bookmark-tooltip-content">Bookmark</div>').data("bs.popover").setContent())}),Helpers.StageType.getStageInfo().is_slave?page.stage.stageActionsManager.$bookmarkButton.hide():page.stage.stageActionsManager.$bookmarkButton.show()),window.apiPage||$.get("/bookmarks/count",function(e){Helpers.App.setBookmarksCount(e.count),window._pl_numberOfBookmarks=e.count,i.dispatch("bookmarks.retrieved",e)}),Helpers.App.setUser(t),Helpers.App.setAdmin(t.is_admin),t.coupon&&Helpers.CouponHelper.load(t.coupon.coupon_code),Helpers.App._getPurchases(function(e){this.dispatch("form.success",{authenticated_by:t.authenticated_by})}.bind(this)),t.is_migration_to_placeit)Helpers.GlobalEventTracker.ssoTrack("user:signup:accountMigrated",t),Helpers.App.sendEnvatoSignUp({trackingCode:19603,customerId:t.id,envatoId:t.envato_id});else{Helpers.GlobalEventTracker.userLogin(t);var n=$.cookie("pl_open_pricing_unlogged");if("true"===n){var s=Helpers.App.getUserType();Helpers.GlobalEventTracker.pricingModalStillshots({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id,fired_on_login:!0,user_type_name:s.name,user_type_id:s.id}),$.removeCookie("pl_open_pricing_unlogged",{path:"/"})}}window.placeitGift&&"sign-up-form"==e.className?(Helpers.GlobalEventTracker.giftSignup({gift_hash:window.placeitGiftHash}),this._applyGiftToUser()):window.placeitGift&&"sign-up-form"!=e.className&&(window.location.href="/?status=2"),Helpers.UserSegment.removeCookies(),Helpers.UserSegment.request(),UI.Navigation.NavBar.dispatch("user:login")},bindings:function(){this.isAndroid&&(this.signUpEmail.bind("focus",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","-170px")}),this.signUpEmail.bind("blur",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","0px")}),this.signUpPassword.bind("focus",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","-170px")}),this.signUpPassword.bind("blur",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","0px")}),this.loginEmail.bind("focus",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","-120px")}),this.loginEmail.bind("blur",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","0px")}),this.loginPassword.bind("focus",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","-120px")}),this.loginPassword.bind("blur",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","0px")}))},showErrors:function(e){var t=Object.keys(e)[0],i=e[t];Array.isArray(i)&&(i=t+" "+e[t][0]),this.element.find(".has-error").removeClass("has-error"),this.element.find("."+t+"-field").addClass("has-error"),this.$alert.show().find("p").text(i)},_getCurrentUser:function(e){$.ajax({url:"/current_user",type:"get",dataType:"json",context:this,success:function(t){e(t)}})},_applyGiftToUser:function(){$.ajax({url:"/users/add_single_credit",type:"post",dataType:"json",data:{gift_id:window.placeitGiftHash},context:this,success:function(e){window.location.href="/?status=1"}})}}}),Module("RequiredFieldsPopovers")({POPOVERS_CONFIG:{placement:"top",trigger:"manual",html:!0},POPOVER_ICON:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 15 15"><path d="M7.5 0C3.363 0 0 3.363 0 7.5 0 11.637 3.363 15 7.5 15c4.137 0 7.5-3.363 7.5-7.5C15 3.363 11.637 0 7.5 0zm-.836 3.758c0-.457.379-.836.836-.836.457 0 .836.379.836.836V7.94a.842.842 0 01-.836.836.842.842 0 01-.836-.836zM7.5 12.03a1.09 1.09 0 110-2.18 1.09 1.09 0 010 2.18zm0 0" fill="#fdb81e" /></svg>',POPOVER_MESSAGES:{checkbox:"Please select this box if you want to proceed.",password:"Please fill out this field.",text:"Please fill out this field.",recaptcha:"Please select the reCAPTCHA checkbox."},prototype:{_activePopover:null,_setPopovers:function(e){var t=this;this._configureRequiredFieldsPopovers(e.$requiredFields),this._configureRecaptchaPopover(e.$recaptcha);var i=function(i){$(i.target).is(e.$submitButton)||t._hidePopover()};this.element.click(i)},_configureRequiredFieldsPopovers:function(e){if(e){var t=this;e.each(function(){var e=$(this);type=e.attr("type"),e.popover(t._getPopoverConfiguration(type))});var i=function(e){e.preventDefault(),t._activePopover||(t._activePopover=$(e.target).popover("show"))};e.on("invalid",i)}},_configureRecaptchaPopover:function(e){if(e){var t=this;e.popover(this._getPopoverConfiguration("recaptcha")),e.on("show.bs.popover",function(){t._activePopover=e})}},_getPopoverConfiguration:function(e){var t=this.constructor.POPOVER_MESSAGES[e];return $.extend({},this.constructor.POPOVERS_CONFIG,{content:this.constructor.POPOVER_ICON+t,container:this.element})},_hidePopover:function(){this._activePopover&&(this._activePopover.popover("hide"),this._activePopover=null)}}}),window.Service={},Class(Service,"Sso")({TEXT_GOOGLE_GENERIC_FAIL:"Opps! Something went wrong, please try again.",TEXT_GOOGLE_POPUP_BLOCKED:"To continue, you'll need to enable pop-up windows for this site.",TEXT_TOKEN_ERROR:"Invalid token",VERIFY_SIGNIN_TOKEN_URL:"/sso/verify_signin_token",VALID_SECONDS_TO_SIGNUP:30,_instance:null,getInstance:function(){return null===Service.Sso._instance&&(Service.Sso._instance=new Service.Sso),Service.Sso._instance},prototype:{initGoogleSso:function(){return new Promise(function(e,t){envatoSso.initGoogle({onSuccess:e,onFailure:t,onError:t})})},authenticationWithGoogle:function(){return new Promise(function(e,t){var i=function(e){t({error:e,message:Service.Sso.TEXT_GOOGLE_GENERIC_FAIL})},n=function(e){t({error:e,message:Service.Sso.TEXT_GOOGLE_POPUP_BLOCKED,needs_redirect:!0})};envatoSso.signInWithGoogle({onSuccess:e,onFailure:i,onError:i,onPopupBlocked:n,onPopupClosed:t,onSignupNotAllowed:i,onConnectNotAllowed:i,onAccountDisabled:i,onSignupFailure:i})})},_prepareAuthenticationTokenConfigRequest:function(e){var t=!1,i=!1;"signup"===e.source&&(t=!0),e.isGoogleToken&&(i=!0);var n={url:Service.Sso.VERIFY_SIGNIN_TOKEN_URL,type:"POST",data:{token:e.token,is_signup:t,is_google_token:i},beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},dataType:"json"};return Helpers.RequestConfig.prepareConfig(n)},ssoErrorHandler:function(e){return Promise.reject({error:e,message:Service.Sso.TEXT_GOOGLE_GENERIC_FAIL})},getUserData:function(e){return e.data&&e.data.user?e.data.user:Promise.reject(e)},verifyAuthenticationToken:function(e){if(!e.token)return this.ssoErrorHandler(Service.Sso.TEXT_TOKEN_ERROR);var t=this._prepareAuthenticationTokenConfigRequest(e);return P.ajax(t).then(this.getUserData)["catch"](this.ssoErrorHandler)},isValidUserData:function(e){return null===e||"object"!=typeof e?!1:!0},prepareUserData:function(e){return this.isValidUserData(e)===!1?{}:{id:e.id,envato_id:e.envato_id,envato_uuid:e.envato_uuid,username:e.username,placeitPromotionNotifications:e.placeitPromotionNotifications,productUpdateNotifications:e.productUpdateNotifications,status:e.status,coupon:e.coupon,is_migration_to_placeit:e.is_migration_to_placeit,email:e.email,feedbackRequestNotifications:e.feedbackRequestNotifications,downloadEmailNotifications:e.downloadEmailNotifications,unsubscribe_code:e.unsubscribe_code,tracker_id:e.tracker_id,is_admin:e.is_admin,created_at:e.created_at,authenticated_by:e.authenticated_by}},_hasUserCreationData:function(e){var t=Service.Sso.getInstance();return t.isValidUserData(e)===!1?!1:e.created_at&&e.authenticated_by?!0:!1},isValidSignup:function(e){var t=Service.Sso.getInstance();if(t._hasUserCreationData(e)===!1)return!1;var i=e.created_at,n=e.authenticated_by;if(ExternalSsosSupport.EXTERNAL_SSO_PROVIDERS.includes(n)===!1)return!0;var s=new Date,r=new Date(i);return r.setSeconds(r.getSeconds()+Service.Sso.VALID_SECONDS_TO_SIGNUP),s.getTime()>r.getTime()?!1:!0},postSignupUpdate:function(e){var t={placeit_promotion_notifications:e,download_email_notifications:!0,product_update_notifications:!0,feedback_request_notifications:!0};Helpers.App.updateEmailNotifications(t)},validatePostSignupUpdate:function(e,t){var i=Service.Sso.getInstance();i.isValidSignup(e)!==!1&&i.postSignupUpdate(t)}}}),Class("PromotionService")({applyPromoToSubscription:function(e){return PromotionService._reactivateSubscription().then(PromotionService._applyCouponToSubscription(e))},switchToSubscription:function(e,t){return PromotionService._reactivateSubscription().then(PromotionService._switchSubscription(e,t))},_applyCouponToSubscription:function(e){return function(){return PromotionService._ajax({url:"/subscriptions/redeeem_coupon/"+e,method:"POST"})}},_switchSubscription:function(e,t){return function(){return PromotionService._ajax({url:"/switch_subscription_plan",method:"POST",data:{plan_recurly_uuid:e,coupon_code:t},dataType:"json",encode:!0})}},_reactivateSubscription:function(){return PromotionService._isChurned()?PromotionService._ajax({url:"/subscriptions/promotion_reactivate_subscription",method:"POST"}):Promise.resolve()},_ajax:function(e){return P.ajax(e)},_isChurned:function(){return window._isChurnedUser}}),Class(Service,"MultiplePurchase").includes(CustomEventSupport,BubblingSupport)({_instance:null,EMPTY_THUMBNAIL_PLACEHOLDER:"iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAAC4jAAAuIwF4pT92AAAZzElEQVR4Xu1dCbhT1bX+1z7JCSCKKCoyiMAdGLSCtcU61GoRbOtr1afWWrVOxVKtr/bJcBNoU5VBacUO1rbOYp1rbVVwFq1jpQgocJNcZLiAiIBcLqA3OWet9+2T6SS5yc31Bk1ec76P7xOy9zlrr3+vtde4JVSfiuQAVSTVVaJRBa5CN0EVuCpwFcqBCiW7KnFV4CqUAxVKdlXiqsBVKAcqlOyqxFWBq1AOVCjZVYmrAlehHKhQsqsSVwWuQjlQoWRXJa4KXIVyoELJrkpcFbgK5UCFkl2VuCpwFcqBCiW7KnFV4CqUAxVKdlXiqsBVKAcqlOyqxFWBq1AOVCjZpZE4f+gcsDIcHlj2a5hTvwZEkuJJvt8bGo8FqUFgStNhkAWxd0CwE9hrBWb13wbkeZchzfDWvoIgcUH+Tw8dAZsGGKCDhbAP2/I+lGyG8BLMGpb5fveLpkXGgaVPij7ij9C09Gk8fLad8T33+vQPXsQgahss3grl3YSZgzZlrKEEm6UkwJE/vAKAT9MjbE9Et2HPuZlJ/vBTAGqgqXf9rvzhgAA/ABAH3XnIArgFglZStJhh/w3eYW8k3+d+FxHuY2/tLxHUc9p/DH/oAgZ9GyKHEtEAAL0EWA/IJoJ6i0UehK/2rfbAJ3/4JQgGpOq9RbbKTnU8flfb5v6am6b4EjRwshVQmwnYyCIL4JM3EKzbWioASwKc8od3A+iuaWbbPgXdhz2bDRwBJwNQ7t81cIAEAfIQ5DWAbAH2BtAfQB8A+u/Pm8rzP23XDg5rKdZMSr4LwAw2a4P5gDP84XMFMhOgQwCxAWokwS4h9IFgCAgkhPmC7hMwY8DGDKYGQ31UlNYC6EGgVwXyFQiIDaMe1w1pco/NoqkZSGgAkUOcb4AWEcmD7N1wE4In5t1knRHEsgFOg6CAl4Skp4AGkuAMAY7XYANyBZsb/6QXXTRwDaHjlVK3g6UGhN0gPETCTwHUCsKBzHQhEb4af7+azGbz3Aym+iNnK8g8vZnAPBmEG0HkBdTVbDb/xj02gybBX6DkZRKwCB0D4AKQ1ii0lsATbbPu6Q5VexEIlhVwbunRKk5AtwIwIbiPfbGLEBwZLRY4FQjdA6FztRomwUJbcAlm165OSorHv3I8w/MoID0EWCUkJ2BGXUrqyB9+goBvAAgZRBfbzE+BqJcQ/Vt24Fi3usxL0+TIAPLIb0mraoghkCfFtM7Q6ygCm4JDyhY4+EOXK9Bc56gH3cGDan6EyyjWCeCWgekwraoAXMnmhlsyJOonER/tLYtJMFyPUcA4y6x93pGGSav7Kq+1ApDeENzP8snlRL7nCTRKn18eZY6KXjuoMWmAFaLJMzU8lpU8CZAJyFbmbrWYPeij/1/ACT0LsroZ8Axk8GUEdaQ+mwjqAjuy+GFtzRUNnD+8GcAB+c5dx4bIPC9/yuaGmx1w/Y1nK6h5jrSz/IS7bfyjiva7GUKXxNWe+NncOCe5EQrS1BA5QJGsA9DNoQUYjRm1SzOs7k+BYqkkriCT3AtjUcfBN/R1vbPdxokIFmqbFEQ9iOhQiBykjRMCPW+TcRlmDF6n1dweA06pK9nT7Eilagg9CFL/rdWbY0yRVpfqBCH6swZTgDellU5IqsuCNE1d1lupbhtTwFn8JfR4YDGCwcIuTAdglgQ4CkReJcHRgChinGuvWvKQ29chf/hNAh0FiMVmj6EI9t+gQXADByBhjTFrA4IgOwRqmSJ50HL5akUDFwgvBeNwrQaJ+Tx7Vf0DeJjS/teERV46YJ9nSOIGilLq65Zn6ELsXtZPeXosAnAgIATIXdo7TbgqFwLwANjlgeeY6IzB73Ro6QZWHaXEfiXhLrWyKUMQrN/yKYQsY0pJgFP+8J+gD3+tRohu4g9bJuPPR8WcL02LDFUsryfU1ntsekciOPgT/VMGcElrjCkGwQ4CWiyipZhVs6WA6Z3XHaBA+BESOk1LDYAHGNbPMHN42hGetvJritVdcVcBW9ikIxGs2YBA03lK5DZHTRZ6hALsq7lBuyKFNpMKRGZB5GoNOIEW2a04LtsP/DQglgQ4oyF0vhA5ixUgpIQm20ATIHsrwvcBTEwQfps9qObH2sjIAa4Dnyzlnmf7cfpchJZS1+Ore9Voi3xTCH8BsA+AFoDmMvECxKQFXjqAhKYl/UEC3WOb0R9qa0/5w/cDdFYccLoHwAYQnCgQAUNF5ExtqQrRQtmBUzQIOcAp/AVR6qU8MgZEkyDSD5BdEJnOvvd/XwpfriTAYXJjP/KoRwn0Ja0uHYcT0iSQXkTqKxDZF8AHiuRMy1v3WtKPyVKVBZ3p9oBLnYtZW1Z2qm9qhip/+LfJTQOizSLyFgm2C0lfAp2Y8BFDSuQSy1f/OmKrByqx/glAR1g2M+MYtwvhC66qi0V5KSDa0GjxQB0XnTF0OQUiC5KbQNNEwAaB7E9ExwHoqddOwALbVFMQHPphKaInpQFOb8FA5L9Y5AICxgA4OHEW6G26hYTeEZLH2LvhD+7d1lXg8qkY/rh7D8wd+DGCkQEqKhOI6OuizX5g3/i5pc861sx8BZDH7Uj9/fr8MxpCPxTgZu1oE2iBbUZPy/a5yB9+hwQjHTdDMIl9G26iaH/t8zmRIRdNGqAPiHi9EM33xOiF6OyaFV21JlMb+NPo13xzzOmRkRbzsRB9btDBjnogek9BFrsNjOR8j7/xRCZ1EkBKiSxM+VEFiDL84QtFxz3JFZjOGs8ftgRTZ6zeQdMi45jpcIAHgdATQpsgdrPXxgtt19c7oTT9CsPf9A0hPkbTQyz/tpuW/D07oBwPo2GE/j4B/7LDbz9h1I46P5cm+YCENymiNTFv3aJSREvcyyyZxGXw7iExsKL5IKBtJ4K1O0q5Obr0rimresFj9YR34welOGe6REsXJ+8Z4LpIVHV6xxzoOnA6p+ZEjDKturyqodjxVy89EN4eOkPQC8T7AtQbSrYjZmyHKS2wvds6zHMV+60k6dnjhZsxa9jajHOpvXcm5yvDhvBuiLEb4vkQsw/ZXgpDpD0Yuwyc8jdOEaivQxx/CXqRHnivjpl3L8uJDjRERpDCr8Gc8pEU5D57dP1dONvlHE9fdbiy+ByQDBGgNyD7QWh/EG2DyDYi2u74XjrP1bRkQU5iM7FS5Q//UQhDweJsLCJax2bssnxBXvKH5kPieUX9iNAsdKt9ITNFlTkmg6mKLLDsJtAuQD5gUm8CdiPMB97taqQkG7wuA+cJhI5jofmI59HiD9Hv+cOWn7kNBP3Pyh++AcBVKYsTWMNij8fMYZHUrvavOFnBeylIToE4PljeJ5HnmpdtrabIyPT5tDP2srTSuHwOsDuvqN/RXm4xe0xh+iQE0Lse8twQ8w4uqYHSZeDigIQeBOKxvcRC1rMyTsK1Q5pSgASaBirhFwAMjfuyDsK/ZLPmulQitCHybSKZRIDOY2WqXyckJgfrpGsWs7YTcJU9qnZehtTmBpH3FHDpxCmhFwS94i5H+hHCEyZ5rk4mgwuBXexvJQHOO3XlF21lLACoT5po+hmb63+Xst4C4R8pgXaIvXE9hPdYYuMxe8Qq5xxoaDyWSOnc1SjtxCcWoIPMLwtkGYlaLgYPIqZ6gYx3S7iIrDEIl1pm3Yv5Mu/xT+4BiXMnTon0WdyfRA4R0HdcG1l/Pje1VCxK7YwrCXCO1DWE/wjg0njaQ8NHbwh3PxWzBmyF/72DCPajBDnaJUnT2Ky93pG2h8RQSyI61HSGa7E6IHy3ErrH2m/vRZjUdxeC4jHbmuos4ksB+nGyziX+PTwhbfucg1/13fUZq8rMiE9weU/TNgfFbLmXBEck8oF60zwqZux7pUiiOrqqC6BnTDWnLB9pGd4FiXCRfm+bYj7N6lb/DKKRC5TIn+Opf+erEfZ6xyF46Nq4tDk5q+XJ/Fl8CL1qs3UeZg+Lj3E//hUHEzzzCEiErZwfW1nky5hZF8qT4NwzEpcnxqr8oZsBmuA6z9ex6a1PBti7yveSAedInT8yG5D/dRF7Bw+q/RGtbXqaICekpE14CvvevzGlRqevGa3sqM4gpCw6kFzGR9Tdnn1uJRdsBCLnS1YUn4TOspve/lvSyswK/n52wAVXd1PR2J3pYLWzFdex6SlP4HzTIkOjjPkkUptQERsNwRm2wnMQJ9iqn0a2jfG4fog+1OOhpmmRbwvLw+5UCsP6ImYMfztvbG9aeLiy8TbIBTYoyGbNjKSx85kDN3Vtb8juATDUaAV1HSA6WO0IBwEP22bsvLJTlUlJUA2RqSC5JmWEEN0KkYvSQWe6ir3rM1IbKhC6AkI3puY4KX5PX8wcojPrmWoy+aFgZB8VlQ+SmWXnnBM8Ir7Y95PM+SyAS2QDnney91D7C8khEDmMQPXJ883JDghd4dYGZaUqHWICof4kNJ8knn0GoNP2Olug/3sFk4xzV1MlVOzlgCQKg+JLYqEDMav2w7wLDG7uqaItmwFx6jkTz8Ps2tXUEHqSiE5JquhOW5WWjEWPTEu1M36cQxPROxCZx+y7rRRFQsmFlvSMS0td40SQ+o1bguK/0RVsrnfqI92AGNPCpwrjrxmq0pBRuKZuWV5VGVxVp9K5scTrKcDeeFY6viFCdwOkE7lxSxd4S1oppxLZmRzc2ENFd21xb4T2Cns6AxyRPAVRd9rmXk8g2E8XDZfs2SPAoWHl/kSe11xnnSa4mWGNySgfSC7DHx6lgDfcxgmJXGg31d2bUSfiXra7Eivx76TkdDu09PGkcaICoV9C4E877bKWTXNYu5ZdvMTiXZfqjbLQgGypzwZOV2ALaA1E1zljbLxWJWGtE93Oh9RMTGb8S4ZaKd2BbKI6db5od0DJuxBn0c7j+GW7Yz/A3JHbchY8Z9NeanvrnRC4/b6drDxHIVGqrucY/tClIvhDyg0B7fYgNiY6Y/jyHEkORM5SIvempZ7Ws+mpzQa5HYmbwTHrbviUpWx1JQhXuM7zzYpwvuWpyeilKAWAe0biOhtuCr7oUdH+dwP4rqsBpBXAdCbrMcwY7pTmxVXa6n1h8emK7TkA9k/pfKKn7H33PtNx1BNPvBiV/pFxDhJdw97oHARH7kwx0L/mYEJUR21OTwYACHjWNmtPRZAyqo7bBS7Rv+BrWFkXJeOvqQx5XD3/U1hdjFlDV5Uq++0cOqVAv713dEri9GEYiBxt6x2faMaIix3WgeQZgvGqTfye7pxRwAghOoNYhrmstp0EOTunLt8BJHY/QRI9CA4jQwTcwkKrQbwLonorwtcAnOtULqd2AibyEbW3ZvuRhYDTU1Ug8mOI3JR5vvMMNuvzNqd8GgzKBjhHtTWELxKiWYCkzwlnVdQsYN0hcwjFO3mcquD0QzfzlparsrMR+nePPzKegfszQBHZJESbAN2Dh/1J4N4Eeju/zWJ9q73zuCPgEAz1oSj9lQBdKJSMuTYryEXZsdRPA1h6X3VldoG5nZW45KtUIHwlCcYKoAPJBWsbSeQFUepfbKlb3A59NlnK3zSJwN9Kd//kJ5yAf4DkLju89B/t5fk6BC61WeShRGlgXHkIForEfohZI0qiMve0xNVrRyau9WSNtNL4YopBvdMjo20blxA5dYx9of8QHQSQ9ts+IMImEaxXNu62uhfRkeows/FEhtJVaCMlfjbq7Lr2AbcD8hGBtglksQG6NWbel5sETmBNDaEQkXKH5ublNFeKkPI33Q/wGF13lN4mfBebdek0VheEZo8Bp6uxAMnIndnmxruKLtKZtLyv1+MdxEr6iaAf9B+iTUTYSGxvtHy0FsH69ztVGhBYMcgQ32EQ+0ABHwDD6OFk1EFbyaatFna/idlf0Nn19qM1jqWauS5iWmNlZck1Ht5A41EsxhcAzsgrdooHhTRaF0CvTv0cObDHJO5zXNN/xKdLA1zD8hFgM/0uZW3KuM0g0DQQVlYB6+whzQX9ms7OaW+8xD7CDcO0P1jcE1xuIuY7CLbdFx7PQNgWg4wWcGx1TrVX8o3tfbejr3W09o7ml8qPUw2he9zpFbatazB7RLrcemrj95WiRL91nCpWnhsyalLcxAZC/ZXINHd9CYu8htH19+TLz6mG8B9AEk/UJh4WeRxNy57MVwWWGjhn017Ytn2UUsYYCNeLUD8oDIZAZ+G3k0iEyHjFjlov5VwFMmXFV5VS54LIdXNEfs4z8ACySiyKwClnSEkkTgVCrRBK5tvA4CMwo97pHdNfzOoRSNpnGbmzDMoaIhMVSXaQOn9TyKQVtcrrWRb373SZX7xoSUjmi9c6vWAOrKHxWKWM40XkJAK+7NRxtvuQLlZ6lhXNg6fm5VRtiwbO8DyTkQQugER7lWMVApxYWpIEiAjajsfMwzNzbrrhsM8+ryQaIXX7VNIyzQucmto4HYp+npDQVa7oy06GWZe3cHbqykOJ1C1E9JUMwAhbILLRaevQ0hd3HfQmb1KsfmJ1G/pMAeDSVV/tIMJsTci+B6ZCgIMOXQ2Od4riTHvVkscyVJl/xZEKntfiO1hWQ+jQRGirfeCCQUVt31tCSDTqC+4E4axEe5O+cSSnQ9Zh1NVL91K+Hn4IT06pZMHHRHhZFD1NIuvAEFEYQCInCpx2sV/w6NrbMtR1lsTpnB8J7iPS96rkPjZbC0vhhH/mqtJZWCIcJMDjYnrPdkfglT8yE5BJWtLcY/NeRjM5PFwZ6RIGgrqIwRMTEqsE8qyY1qk56jIQ+Y4S/B4QHUKLlxcI7ibYf7J8w950l/mZ/sYvWMo4gz/ZPQe/OiIVxHZgaQe4QkW3n0a62pvz+QAXjw3qGxF2GQbGxoz73nJKtCet7kue2HPktDFBRzKWE5zmQO3EtitxWTm3FlbGl5RtTwDhp46aFXzMBo/EdfVrMlqSA+FHSeL3jyQYs8xj0LnRa/L0sDVEDshua/7PAk6wVCmExcmlwYDQTbw10TPuD5+rgDt1jJKAxxno7yqQzQXuxubutGX3IhJy7ioh0Et2K8YbPeVkoXRGnYQvze5PUP7wegD6/Epu3jm8ZUcgFaguZOa7zflsiRNZQ0R3QHJVJfvqUtn5rkreZy5xjnnNdIUoucPpGRe8J6LG63wVBSIPE+IN9wS6REhmQRzJ1HTmAheIHK0bItMWXaKkHav2U1H7DYAOjWtAeVFa1TfccdKcTLbIBHt03R2p86shNFUhft9XNpN5UF2qjz1bVRYCJNUp21XUSubHddIdYIu+Qh65PXmrD4guZ1ueUkq39qIvBKsZ9nmKjBddZnYOcCoQngNJqETgE2VjfDLorBpC+kaF8xKV1W0ekVFRV7FsLnCFazLdvM4AoBPuQOUDBz5JEY2D4OqEa/BsvLCGZscTkDKXBX9TpG9USNVNZgIXv/jlNQiSZXAhEG5ifcmaDSjiEwG6MFkSDyB9c1Dct0zd+OcYJsBF7saR7LRUJ4BrhjgbMOcCGvbFLi6rusrOOuDaCfWans02yzMQx0dqEWA1gXQ0fbdhmGNjltVNkTydH7jGU5RSf0/m7HTjh+NguB5KuB2OM66vLvz4w5Mx95iP9d9VILIOki5Y1ZuGt7b8PHnGZfSai5yTdGH03EIS55QAWjwBJnIvWrs26wLWLqjMz+OMi/edfXHYc7Qk8mDyTEuugQTz7Z10BnrExmRFJDIkTvkjNwPirs3viA0xw6AxsWtqlji3AQUij5AgeYGNzuMs8Rjq0phx79vZTYjZ0tchcAV68DoistjfPz/gug971mhrOlUos/ScWJ1jr1r8CIYcdmxe4CYt76u83pch+vaFlPHwQCK2mFo7kewnUONSJr/QL9hXM1PXXRoNodPEqf2UgcmzXiCPeUhdH/PW/KtQu9Z/PHD4ZF0vUtE3XPWX6drLKSuPzwvc9MjZytaXgCZKGwTLGXImDMm4ctdrqwNtwkupa4eBJWJ6T0Rw8HZc1dxddd89BaDJydttHZVKTu/DC6SMHbbIbn1ekuKfk1CyH6KwqizgDjhqFupV+Gr+2dXrMz5XiYvfoOdESr4L6Og6P8pbWqc450yutZZSlcofmQfI91KlfCIN7Nv4q5zs+lkPGap2lI4d9k00XLICj7XM+pccxjlZCDUTwEnuCIp22qGoVUR0lETcZyWA9Wx60/WWnbAqE6qgqBuUOlKZnztw5rTwcJt1kJeVYfOb0e4PLnfOmHzAxVb3V2K/7FZxbGEErq9NXfzpXrQKRLQKPTMdIZG5qc2hRbYhNMxSGKtbtCSzMiubd/piuNdF+O/se//W1CapbOAiv3OnNZhxE2bWrEzf2BO6QESXZ8ev1WCx7kK34Rm3GeTsMCfP5bk4mR0gkYX2kXV3ehY3Hs9QF7nzX4XMbKMhpC9j+y4kmS+TMEPdkhG+mrDI6+mz91dZ6BQQ7UfQd49Jb5BqA6NFSFogtNaAPB/LvjE9i84OJSWxjnx5xY7mp4y4YgcWHBdsOhDRj9PS22ba+LXrqvapKw+FJysD3pFpnG9OQ+OgTr1rcuPeYPTJqMS0e+7I+f8Z6AVe1dwd3l29TY9nPybejxhtCvZHbbHoduyIfdRe3Sbao7Mjpna09o7mlypyUsR3qkNKzIGSnHElpqn6uiI4UAWuCCaV45AqcOWIShE0VYErgknlOKQKXDmiUgRNVeCKYFI5DqkCV46oFEFTFbgimFSOQ6rAlSMqRdBUBa4IJpXjkCpw5YhKETRVgSuCSeU4pApcOaJSBE1V4IpgUjkOqQJXjqgUQVMVuCKYVI5DqsCVIypF0FQFrggmleOQKnDliEoRNFWBK4JJ5TikClw5olIETVXgimBSOQ6pAleOqBRBUxW4IphUjkOqwJUjKkXQ9H88ez1BRcqLNwAAAABJRU5ErkJggg==",
DELAYED_TIMEOUT:6e4,CURRENT_DEFAULT_TEMPLATE_ADDED:1,GET_PRICE_API_URL:"/purchases/price_multiples_purchases",RELATED_TEMPLATES_JOB_API_URI:"https://smart-templates.us/api/v4/related_templates_jobs",IMAGE_TYPE:13,_promises:[],getInstance:function(){return null===Service.MultiplePurchase._instance&&(Service.MultiplePurchase._instance=new Service.MultiplePurchase),Service.MultiplePurchase._instance},prototype:{_processingStarted:!1,_allThumbnailsProcessed:!1,_stagesData:[],_selectedStages:[],_prices:null,getPrice:function(e){var t=this,i=$.md5(JSON.stringify(t._prices)),n=$.md5(JSON.stringify(e));if(i===n)return Promise.resolve(t._prices);var s={url:t.constructor.GET_PRICE_API_URL,type:"post",data:JSON.stringify(e),contentType:"application/json",dataType:"json"};return P.ajax(s)},setPrices:function(e){this._prices=e},getAllSelectedIds:function(){return page.stage.merchPreviewController.getAllSelected().map(function(e){return Number(e.id)}).filter(function(e){return 0!==e})},add:function(e,t){return Boolean(t)===!1?(this._stagesData.push(e),this):(this._stagesData.unshift(e),this)},update:function(e,t){this._stagesData=this._stagesData.map(function(i){return Number(i.id)===Number(e)&&((Boolean(t.price)||0===t.price)&&(i.price=t.price),Boolean(t.preview)&&(i.preview=t.preview),Boolean(t.designPlan)&&(i.designPlan=t.designPlan),void 0!==t.processed&&(i.processed=t.processed),void 0!==t.selected&&(i.selected=t.selected)),i})},getByIndex:function(e){return 0>e||e>this.count()-1?void 0:this._stagesData[e]},getAll:function(){return this._stagesData},getIds:function(){return this._stagesData.map(function(e){return e.id})},getSelectedIds:function(){return this.getSelectedDataObjects().map(function(e){return Number(e.id)})},getSelectedTotalPrice:function(){var e=null;return this.getSelectedDataObjects().forEach(function(t){e+=t.price}),e},selectAll:function(){var e=this;e.getAll().forEach(function(t){e.update(t.id,{selected:!0})})},count:function(){return this._stagesData.length},countSelected:function(){return this.getSelectedDataObjects().length},removeAll:function(){this._stagesData=[]},_fixNumberFormat:function(e,t){var i=Number(e);return i.toFixed(t)},getSelectedDataObjects:function(){return this._stagesData.filter(function(e){return e.selected===!0})},addCurrentStage:function(){var e=this,t=e._prepareCurrentStageData();e.add(t,!0),e.getPreviouslySelectedIdsLength()>0&&Helpers.StageType.isVideo()===!1&&e._updateCurrentStageData()},_prepareCurrentStageData:function(){var e="image";return{selected:!0,processed:!0,canProcess:!0,preview:window.page.stage.record.previewImage||this.constructor.EMPTY_THUMBNAIL_PLACEHOLDER,type:e,id:Number(Helpers.StageType.getStageID()),price:0,name:Helpers.StageType.getStageInfo().name,category:Helpers.StageType.getCategoryName(),designPlan:JSON.stringify(Helpers.StageType.getDesignPlan())}},_updateCurrentStageData:function(){var e=this;Helpers.StageType.getPreviewImage().then(function(t){e.update(Helpers.StageType.getStageID(),{preview:t,designPlan:JSON.stringify(Helpers.StageType.getDesignPlan())})})},areAllThumbnailsProcessed:function(){return this.getSelectedDataObjects().length===this.constructor.CURRENT_DEFAULT_TEMPLATE_ADDED?!0:this._allThumbnailsProcessed},isProcessingStarted:function(){return this._processingStarted},setProcessingStarted:function(){this._processingStarted=!0},clean:function(){this.removeAll()},allStagesDataProcessed:function(){var e=!0;return this._stagesData.forEach(function(t){t.processed===!1&&(e=!1)}),e},prepareData:function(e){var t=this,i=t.getPreviouslySelectedIds(),n=Boolean(t.getPreviouslySelectedIdsLength())===!1&&t.count()>1&&t.allStagesDataProcessed(),s=0===e.length&&0===t.getPreviouslySelectedIdsLength();if(s||n)return t._allThumbnailsProcessed=!0,t.dispatch("thumbnails.processed"),t;t.clean(),t.addCurrentStage();var r=t.getPreviouslySelectedIdsLength()>0,o=i.includes(Number(Helpers.StageType.getStageID()))===!1;return r&&o&&t.clean(),r&&(e=i),t._addSelectedStages(e),t._prepareMerchPreviewProcessingPromise(e),t._updateSelectedMerchPreviewPrices(e),t},_addSelectedStages:function(e){var t=this,i=Service.Merch.getInstance().getItems().filter(function(t){return e.includes(Number(t.id))});i.forEach(function(e){e.price=0,e.selected=!0,e.processed=!1,e.canProcess=!0,Boolean(e.designPlan)===!1&&(e.designPlan="{}",e.canProcess=!1),e.designPlan=JSON.stringify(e.designPlan),Boolean(e.designPlan)&&(e.designPlan=e.designPlan.replaceAll("s3.amazonaws.com/output_images/","s3-accelerate.amazonaws.com/output_images/")),e.preview=e.preview.replace("data:image/png;base64,",""),t.add(e)})},_prepareMerchPreviewProcessingPromise:function(e){var t=this,i=Service.Merch.getInstance(),n=Number(Helpers.StageType.getStageID());e=e.filter(function(e){return e+""!==String(n)}).map(String),t._promises=i.updateItemsTaskBuilder(e),t._promises.forEach(t._setPromise.bind(t))},_setPromise:function(e){var t=this;e.then(function(e){e.preview=e.preview.replace("data:image/png;base64,",""),e.designPlan=JSON.stringify(e.designPlan),Boolean(e.designPlan)&&(e.designPlan=e.designPlan.replaceAll("s3.amazonaws.com/output_images/","s3-accelerate.amazonaws.com/output_images/")),t.update(e.id,{preview:e.preview,designPlan:e.designPlan,processed:!0}),t.dispatch("thumbnails.processing",{stage:e})})},_updateSelectedMerchPreviewPrices:function(e){var t=this,i={stages_id:e};this.getPrice(i).then(Utils.bindFn(t)(t._getPriceHandler.bind(t,e)))},_getPriceHandler:function(e,t){var i=this;i.setPrices(t);var n=0,s=Number(e[0])===Number(Helpers.StageType.getStageID());if(s){n=1;var r=t.prices[0]/100;i.update(Helpers.StageType.getStageID(),{price:r})}var o=Service.Merch.getInstance().getItems().filter(function(t){return e.includes(Number(t.id))});o.forEach(function(e,s){i.update(e.id,{price:t.prices[s+n]/100})}),i.dispatch("price.changed",t),i._dispatchAllThumbnailsProcessedEvent()},_dispatchAllThumbnailsProcessedEvent:function(){var e=this;Promise.all(e._promises).then(function(){e._allThumbnailsProcessed=!0,e.dispatch("thumbnails.processed")})},getPreviouslySelectedIds:function(){return Helpers.App.getCookie("multiplePurchasesSelectedIds").split(",").map(function(e){return Number(e.trim())}).filter(function(e){return 0!==e})},getPreviouslySelectedIdsLength:function(){return this.getPreviouslySelectedIds().length},isMultiplePurchase:function(){return window.page&&window.page.stage&&window.page.stage.merchPreviewController?Boolean(page.stage.merchPreviewController.getAllSelected().length):!1},canDoMultiplePurchases:function(){return Helpers.App.isMerchPreviewEnabled()&&Helpers.StageType.isLogo()&&page.stage&&page.stage.merchPreviewController&&this.isMultiplePurchase()&&page.stage.$body.find(".merch-preview-container").length>0},deleteAfterLoginCookie:function(){Boolean(Helpers.App.getCookie("multiplePurchasesSelectedIds"))!==!1&&Helpers.App.deleteCookie("multiplePurchasesSelectedIds")},_saveSelectedStagesInCookie:function(){var e=this;if(e.canDoMultiplePurchases()&&Boolean(e.getSelectedIds())===!0){var t=e.getSelectedIds();return void Helpers.App.setCookie("multiplePurchasesSelectedIds",t,1)}Helpers.App.setCookie("multiplePurchasesSelectedIds",Helpers.StageType.getStageID(),1)},isPreviousSelectedIdEqualTocurrentId:function(){var e=this.getPreviouslySelectedIds(),t=Helpers.StageType.getCategoryName();return e.length===this.constructor.CURRENT_DEFAULT_TEMPLATE_ADDED&&"logos"===t.toLowerCase()&&Number(Helpers.StageType.getStageID())===e[0]},getCustomStageInfo:function(e){var t=0===e.price?!0:!1;return{id:String(e.stageId),custom_price:e.price,image_type:this.constructor.IMAGE_TYPE,is_free:t}},getDesignPlan:function(e){var t=this,i=t._getDesignPlanRequestConfig(e);return Promise.race([P.ajax(i),P.timeout(t.constructor.DELAYED_TIMEOUT)])},_getDesignPlanRequestConfig:function(e){var t=this,i=t.getPristineMerchPreviewStageData(e),n=i[0].smartTemplateId,s={preset_id:null,source_ui_json:Helpers.StageType.getDesignPlan(),target_id:n};return _config={method:"POST",url:t.constructor.RELATED_TEMPLATES_JOB_API_URI,dataType:"json",contentType:"application/json",data:JSON.stringify(s)}},getPristineMerchPreviewStageData:function(e){return Service.Merch.getInstance().getItems().filter(function(t){return Number(t.id)===e})}}}),Module("GoogleSsoSupport")({TEXT_GOOGLE_POPUP_OPEN:"To continue, you'll need to sign in using the pop-up window.",TEXT_GOOGLE_PROCESSING:'        <div class="google-processing-container">            <span class="spinner"></span>            <p>Just a second, we\'re processing your request.</p>        </div>    ',TEXT_GOOGLE_ACCOUNT:"Your email address is associated with your Google account. Log In with Google.",TEXT_DEFAULT_GOOGLE:"Your account is connected to Google. Please sign in with Google",TEXT_GOOGLE_AUTH_SUCCESS:"All done!",GOOGLE_SIGNIN_FALLBACK_PAGE:{production:"https://account.envato.com/google/authenticate?to=placeit",staging:"https://sso.envato-staging.com/google/authenticate?to=placeit"},prototype:{_isGoogleFallbackEnabled:!0,_googleFallbackFlowFnReference:null,bindGoogleButtonClick:function(){var e=Utils.bindFn(this);this._googleFallbackFlowFnReference=e(this.googleSigninWithFallbackFlow),this.bind("googleButton.click",this._googleFallbackFlowFnReference)},_dispatchMessage:function(e){var t=this._getMessageEventName();this.dispatch(t,{type:e.messageType,content:e.messageContent})},_dispatchGooglePopupOpenMessage:function(){this._dispatchMessage({messageType:"info",messageContent:this.constructor.TEXT_GOOGLE_POPUP_OPEN})},_dispatchGoogleProcessingMessage:function(){this._dispatchMessage({messageType:"info",messageContent:this.constructor.TEXT_GOOGLE_PROCESSING})},_dispatchGoogleAccountExistsMessage:function(){this._dispatchMessage({messageType:"error",messageContent:this.constructor.TEXT_GOOGLE_ACCOUNT})},_dispatchGoogleAuthSuccessMessage:function(){this._dispatchMessage({messageType:"success",messageContent:this.constructor.TEXT_GOOGLE_AUTH_SUCCESS})},_dispatchGoogleAuthErrorMessage:function(e){this._dispatchMessage({messageType:"error",messageContent:e})},_hasGoogleSsoResponse:function(e){return e.includes(this.constructor.TEXT_DEFAULT_GOOGLE)},_validateGoogleSignupEventTracker:function(e){var t=Service.Sso.getInstance();t.isValidSignup(e)!==!1&&Helpers.GlobalEventTracker.userSignup()},_sendGoogleButtonClickEventTracker:function(){Helpers.GlobalEventTracker.googleButtonClick(this.source,this._isGoogleFallbackEnabled)},_sendGoogleSigninSuccessEventTracker:function(e){var t={userData:e,source:this.source,isGoogleFallbackEnabled:this._isGoogleFallbackEnabled};Helpers.GlobalEventTracker.googleSigninSuccess(t)},_sendGoogleSigninErrorEventTracker:function(e){var t={error:e,source:this.source,isGoogleFallbackEnabled:this._isGoogleFallbackEnabled};Helpers.GlobalEventTracker.googleSigninError(t)},_sendGoogleStartFallbackEventTracker:function(){Helpers.GlobalEventTracker.googleStartFallback(this.source)},_getMessageEventName:function(){return this.source+".message"},_processGoogleToken:function(e){var t=Service.Sso.getInstance(),i={token:e.token,source:this.source,isGoogleToken:!0};return t.verifyAuthenticationToken(i)},_getCleanUserData:function(e){var t=Service.Sso.getInstance();return t.prepareUserData(e)},googleSignin:function(){var e=Service.Sso.getInstance();return e.authenticationWithGoogle()},_processGoogleAuthError:function(e){e&&(e.error&&this._sendGoogleSigninErrorEventTracker(e.error),e.message&&this._dispatchGoogleAuthErrorMessage(e.message))},_getGoogleSigninFallbackDomain:function(){return this.constructor.GOOGLE_SIGNIN_FALLBACK_PAGE[window.environment]},_getGoogleSigninFallbackPage:function(){return ExternalSsosSupport.storePageStateCookie("google",this.source),this._getGoogleSigninFallbackDomain()},googleSigninWithFallbackFlow:function(){this._sendGoogleButtonClickEventTracker(),this._sendGoogleStartFallbackEventTracker(),window.location.href=this._getGoogleSigninFallbackPage()},changeGoogleSigninFlow:function(e){this.unbind("googleButton.click",this._googleFallbackFlowFnReference),this._googleFallbackFlowFnReference=e,this.bind("googleButton.click",e)}}}),Module("ExternalSsosSupport").includes(GoogleSsoSupport)({EXTERNAL_SSO_PROVIDERS:["google","facebook","apple"],STANDARD_SSO_PROVIDERS:["facebook","apple"],PROVIDER_SSO_URL:{facebook:window.sso_hostname+"/facebook/authenticate?to=placeit",apple:window.sso_hostname+"/apple/authenticate?to=placeit"},PAGE_STATE_COOKIE_NAME:"pageState",storePageStateCookie:function(e,t){var i=Helpers.App.getUrlWithSsoProviderFallbackParam(e,t),n=this._getCurrentDomain();$.cookie("pageState",i,{domain:n,path:"/",expires:1})},removePageStateCookie:function(){var e=this._getCurrentDomain();$.removeCookie("pageState",{domain:e,path:"/"})},_getCurrentDomain:function(){var e=location.hostname.split("."),t=e.slice(0).slice(-(4===e.length?3:2)).join(".");return t},prototype:{initExternalSsosContainer:function(e){this.source=e.source;var t=new UI.ExternalSsosContainer({name:"externalSsosContainer",lineText:e.lineText,providers:this.constructor.EXTERNAL_SSO_PROVIDERS});this.appendChild(t),t.render(e.target,!0),this._bindSsosButtonsEvents()},_bindSsosButtonsEvents:function(){var e=this;this.constructor.STANDARD_SSO_PROVIDERS.forEach(function(t){e.bind(t+"Button.click",function(){e._handleSsoProviderButtonClick(t)})}),this.bindGoogleButtonClick()},_handleSsoProviderButtonClick:function(e){this.constructor.storePageStateCookie(e,this.source),this._sendExternalSsoButtonClickEventTracker(e),window.location.href=this.constructor.PROVIDER_SSO_URL[e]},_sendExternalSsoButtonClickEventTracker:function(e){Helpers.GlobalEventTracker.track(e+"sso:button:click",{label:this.source})}}}),Class(UI,"ExternalSsosContainer").inherits(Widget).includes(BubblingSupport)({html:'        <div class="external-ssos-container">             <div class="button-container"></div>             <div class="divider">                 <div class="line left"></div>                 <span class="text"></span>                 <div class="line right"></div>             </div>         </div>    ',buttonTemplate:'        <button type="button">             <span class="image-container"><img class="icon"></span>             <span class="text"></span>         </button>     ',prototype:{init:function(e){Widget.prototype.init.call(this,e);var t=Utils.bindFn(this);this.buttonsContainer=this.element.find(".button-container"),this.providers.forEach(t(this._appendButton)),this._setLineText(),this._bindEvents()},_appendButton:function(e){var t=this._getButtonName(e),i=this._createButton(e);this.buttonsContainer.append(i),this.appendChild(new UI.ButtonWidget({name:t,element:i}))},_createButton:function(e){var t=e+"-button",i="/assets/icons/"+e+"-icon.svg",n=$(this.constructor.buttonTemplate).addClass(t);return n.find(".text").text("Continue with "+Helpers.App.capitalizeFirstLetter(e)),n.find("img").attr("src",i),n},_getButtonName:function(e){return e+"SsoButton"},_setLineText:function(){var e=this.element.find(".divider .text");e.html(this.lineText)},_forEachProviderButton:function(e){var t=this;this.providers.forEach(function(i){var n=t._getButtonName(i),s=t[n];e(s,i)})},_bindEvents:function(){var e=this;this._forEachProviderButton(function(t,i){t.bind("click",function(){e.dispatch(i+"Button.click")})})},enableButtons:function(){this._forEachProviderButton(function(e){e.enable()})},disableButtons:function(){this._forEachProviderButton(function(e){e.disable()})}}}),Class("ApiAuthenticationSupport")({handleApiLoginSuccess:function(){window.opener&&window.opener.postMessage({status:"success"},window.opener.location.href)}}),Class(UI,"SsoLoginModal").inherits(Widget).includes(RequiredFieldsPopovers,Translator,ExternalSsosSupport)({html:'<div id="sso_login_modal"><div class="header hidden" id="confirm_placeit_password_header"><h4>Confirm your Placeit account!</h4><p class="text-center">Please enter <span class="warning">your Placeit password </span> to update your account and allow you to login with your Envato username from now on</p></div><div class="header" id="envato_account_header" hidden><h4>Envato account found!</h4><p class="text-center">Please enter <span class="warning">your Envato password (not Placeit)</span> for the user below so we can migrate your Placeit account to be accessible via your Envato information</p></div><div class="header" id="updating_account_header" hidden><h4>Updating Your Account</h4><p class="text-center" style="font-size: 14px; font-family: \'SourceSansPro-Light\'; ">We\u2019ve changed our Terms & Conditions and our Privacy Policy. We\u2019re also upgrading your account so you login with your Placeit account into Envato properties. Please click the checkboxes below and click Accept to continue.</p></div><div class="header hidden" id="login_continue_header"><h4>Please Log In to Continue</h4></div><div class="content"><form id="login_form"><div class="fields_container"><div class="floating-label-input email" id="email_field_container"><input autocomplete="off" class="form-control" id="login_user_email" required="required" size="30" type="text" /><label class="placeholder">Email or Envato username!</label></div><div class="floating-label-input password" id="password_field_container"><input autocomplete="off" class="form-control" id="login_user_password" required="required" type="password" /><label class="placeholder">Password</label><div id="password_secret_eye" class="secret-eye eye-on"></div></div><div class="floating-label-input email hidden" id="associated_email_field_container"><input autocomplete="off" class="form-control" id="associated_email" size="30" type="text" readonly/><label class="placeholder">Email on Placeit</label></div><div class="floating-label-input password hidden" id="placeit_password_field_container"><input autocomplete="off" class="form-control" id="user_placeit_password" type="password" /><label class="placeholder">Placeit Password</label><div id="placeit_password_secret_eye" class="secret-eye eye-on"></div></div><div class="floating-label-input tfa hidden" id="tfa-container"><input autocomplete="off" class="form-control" id="two_factor_code" name="two_factor_code" size="30" type="password" disabled /><label class="placeholder">TFA Code</label></div><div class="floating-label-input hidden" id="signin_verification-container"><input autocomplete="off" class="form-control" id="signin_verification" name="signin_verification" size="30" type="password"/><label class="placeholder">Verification code (check your email!)</label></div><div class="row"><div id="recaptcha_container" class="g-recaptcha col-xs-12" hidden></div></div><div id="privacy_policy_container" class="" hidden><p class="help-block text-left"><input type="checkbox" id="privacy_policy_alert"> <span class="agree" style="cursor: pointer">I agree to the</span></input> <a href="https://envato.com/privacy/" target="_blank" role="button"> Privacy Policy </a><br/><input type="checkbox" id="terms_conditions_alert"> <span class="terms_condition" style="cursor: pointer">I agree to the</span></input> <a href="https://blog.placeit.net/terms-of-use/" target="_blank" role="button"> Terms & Conditions </a></p></div><div id="migrate_account_hide"><div class="form-group text-right password-reset"><p class="help-block info-text"><a class="forgot" href="/password_resets/new" target="_blank">Forgot your password?</a></p></div><div class="row" id="login_btn_container"><div class="col-xs-12"><button class="button primary" name="commit" type="submit" value="Log in">Log In</button></div></div><div class="row"><div class="col-xs-12"><p class="help-block text-center">Don\'t have an account? <a href="#" class="trigger_signup_link" role="button">Sign up</a></p></div></div></div><div id="continue_btn" class="row" hidden><br/><div class="col-xs-12"><button class="button primary" name="commit" type="submit" value="Accept">Accept</button></div></div><div id="logged_in_notice" class="hidden"><div class="col-xs-12"><input id="logged_in_ok" class="button primary" name="commit" type="submit" value="Login as " /></div></div><div class="envato-notice text-center"><span class="placeit-envato-logo-black"></span></div></div></form></div></div>',TEXT_LOGIN_FAIL:"Failed to Login",TEXT_ENABLE_ADMIN_MFA:"Admin users must have MFA enabled, please enable MFA for authentication and try again",TEXT_INVALID_PLACEIT_CREDENTIALS:"Invalid password, please make sure you're entering your Placeit password",TEXT_AUTOLOGIN_CTA:"Login as {{username}}",TEXT_MIGRATE_ENVATO_ACCOUNT_SUCCESS:"Your account has been migrated! You can login using your Envato password in the future",TEXT_LOGIN_ERROR:"We could not complete the login request. Please try again later",TEXT_INVALID_CREDENTIALS:"Invalid email or password. You can also use the email address from your Envato account to login!",TEXT_ENVATO_PASSWORD:"Envato Account Password",TEXT_INVALID_TFA:"TFA Code invalid, please check it and try again",TEXT_VERIFICATION_REQUIRED:"This seems an unusual login attempt. We have sent you a verification code by email. Please copy it and paste it in the Verification code field below.",TEXT_WRONG_PASSWORD:'Wrong password! Make sure you\'re entering <strong>your Envato password</strong>, not your Placeit password. <a href="https://account.envato.com/reset_password" target="_blank">You can reset your Envato password here.</a>',LOGIN_URL:"/login",VERIFY_SIGNIN_TOKEN_URL:"/sso/verify_signin_token",MIGRATE_USER_URL:"/sso/migrate_user",EXTERNAL_SSO_LINE_TEXT:"OR Log in with Envato",prototype:{isAutoSignin:!1,init:function(e){if(Widget.prototype.init.call(this,e),this.userEmailInput=this.element.find("#login_user_email"),this.userEmailContainer=this.element.find("#email_field_container"),this.userPasswordContainer=this.element.find("#password_field_container"),this.userPasswordInput=this.element.find("#login_user_password"),this.userPasswordLabel=this.element.find("#password_field_container label"),this.associatedEmailContainer=this.element.find("#associated_email_field_container"),this.associatedEmailInput=this.element.find("#associated_email"),this.userPlaceitPasswordContainer=this.element.find("#placeit_password_field_container"),this.userPlaceitPasswordInput=this.element.find("#user_placeit_password"),this.twoFactorCodeContainer=this.element.find("#tfa-container"),this.twoFactorCodeInput=this.element.find("#two_factor_code"),this.signinVerificationContainer=this.element.find("#signin_verification-container"),this.signinVerificationInput=this.element.find("#signin_verification"),this.closeBtn=this.element.find("button.close"),this.loginHeader=this.element.find("#login_header"),this.envatoAccountHeader=this.element.find("#envato_account_header"),this.updatingAccountHeader=this.element.find("#updating_account_header"),this.confirmPlaceitPasswordHeader=this.element.find("#confirm_placeit_password_header"),this.fieldsContainer=this.element.find(".fields_container"),this.form=this.element.find("#login_form"),this.signupLink=this.element.find(".trigger_signup_link"),this.envatoLogo=this.element.find(".envato-hover"),this.envatoPages=this.element.find(".envato-pages"),this.secretEye=this.element.find("#password_secret_eye"),this.placeitPasswordSecretEye=this.element.find("#placeit_password_secret_eye"),this.loginMessage=this.element.find("#login_message"),this.agree=this.element.find(".agree"),this.terms=this.element.find(".terms_condition"),this.migrateAccountHide=this.element.find("#migrate_account_hide"),this.privacyPolicyContainer=this.element.find("#privacy_policy_container"),this.privacyPolicyInput=this.element.find("#privacy_policy_alert"),this.termsConditionsInput=this.element.find("#terms_conditions_alert"),this.recaptchaContainer=this.element.find("#recaptcha_container"),this.hasRecaptcha=!1,this.loginBtn=this.element.find("#login_btn_container button"),this.continueBtn=this.element.find("#continue_btn"),this.continueSubmitBtn=this.element.find("#continue_btn button"),this.loggedInOkBtn=this.element.find("#logged_in_ok"),this.emailFieldContainer=this.element.find("#email_field_container"),this.passwordFieldContainer=this.element.find("#password_field_container"),this.migrationSectionContainer=this.element.find("#migrate_account_hide"),this.usernameField=this.element.find("#username"),this.loggedInNotice=this.element.find("#logged_in_notice"),this.envatoAccountFound=!1,this.recapchaRetry=null,this.recaptchaRendered=!1,this.recaptchaId=null,this._timeouts=[],this._contentForm=this.element.find(".content"),this.$continueHeader=this.element.find("#login_continue_header"),this.appendChild(new this.userFormClass({name:"userForm",element:this.form})),this._setPopovers({$requiredFields:this.userEmailInput.add(this.userPasswordInput).add(this.twoFactorCodeInput).add(this.signinVerificationInput),$recaptcha:this.recaptchaContainer,$submitButton:this.loginBtn}),this._bindEvents(),"undefined"==typeof envatoSso)throw"SSO: Cannot instantiate sso-js client";this.userEmailInput.attr("value",this.userEmailInput.val()),this.userPasswordInput.attr("value",this.userEmailInput.val()),this._saveInitialState(),this.initExternalSsosContainer({lineText:this.constructor.EXTERNAL_SSO_LINE_TEXT,target:this._contentForm,source:"login"})},login:function(){console.log("Performing auto-sign in check..."),this._checkAutoSignIn()},_checkAutoSignIn:function(){var e=this;this.dispatch("login.autosignin"),e._autoSignin(function(t,i){t?(console.log(t.message),e.loginMessage.removeClass("hidden"),e.migrationSectionContainer.removeClass("hidden"),e.loggedInNotice.addClass("hidden"),Helpers.GlobalEventTracker.ssoTrack("login.fullModalOpened",{error:!1,user:e.userEmailInput?e.userEmailInput.val().trim():"",message:"login modal full opened, not auto sign-in. ",response:t})):(e.isAutoSignin=!0,e._verifyToken(i,"autosignin",e._handleVerifyTokenResponse.bind(e)))})},_autoSignin:function(e){var t=this,i={to:"placeit"},n=function(t){console.log("Auto-login successful"),e(null,t)},s=function(){e({message:"Not signed in"})},r=function(i,n){e({message:"Auto Login Error: "+i}),t.die("_autoSignin",i,n)};envatoSso.autoSignIn({data:i,onSuccess:n,onFailure:s,onError:r})},_verifyToken:function(e,t,i){var n=this,s={token:e};"migrate"===t&&(s.is_migration=!0),""!=this.userPlaceitPasswordInput.val()&&(s.placeit_password=this.userPlaceitPasswordInput.val());var r={url:UI.SsoLoginModal.VERIFY_SIGNIN_TOKEN_URL,type:"post",data:s,beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},dataType:"json"},o=Helpers.RequestConfig.prepareConfig(r);$.ajax(o).then(this._cleanUserProperty).then(function(e){if("migrate"===t){var s="sso.migrationSuccess";Helpers.GlobalEventTracker.ssoTrack(s,{error:!1,user:n.userEmailInput?n.userEmailInput.val().trim():"",response:e,message:"Migration finished and verified."})}if("signin"===t&&n.envatoAccountFound){var s="ssoAccountFound.migrationSuccess";Helpers.GlobalEventTracker.ssoTrack(s,{error:!1,user:n.userEmailInput?n.userEmailInput.val().trim():"",response:e,message:"Migration finished and verified."})}return"signInVerification"===t&&Helpers.GlobalEventTracker.ssoTrack("sso.signInVerificationSuccess",{error:!1,user:n.userEmailInput?n.userEmailInput.val().trim():"",response:e,message:"Sign in verification success"}),"autosignin"===t&&Helpers.GlobalEventTracker.ssoServerTrack("autoLogin.success",{error:!1,user:n.userEmailInput?n.userEmailInput.val().trim():"",message:"Auto Sign-in verification success",response:e}),i(null,e),e}).fail(function(e){"autosignin"===t&&Helpers.GlobalEventTracker.ssoTrack("autoLogin.error",{error:!1,user:n.userEmailInput?n.userEmailInput.val().trim():"",response:e,message:"Auto Sign-in verification success"}),i(e)})},_cleanUserProperty:function(e){if(e.data&&e.data.user){var t=e.data.user,i={id:t.id,envato_id:t.envato_id,envato_uuid:t.envato_uuid,username:t.username,placeitPromotionNotifications:t.placeitPromotionNotifications,productUpdateNotifications:t.productUpdateNotifications,status:t.status,coupon:t.coupon,is_migration_to_placeit:t.is_migration_to_placeit,email:t.email,feedbackRequestNotifications:t.feedbackRequestNotifications,downloadEmailNotifications:t.downloadEmailNotifications,unsubscribe_code:t.unsubscribe_code,tracker_id:t.tracker_id,is_admin:t.is_admin,authenticated_by:t.authenticated_by};e.data.user=i}return e},_handleVerifyTokenResponse:function(e,t){var i;if(this.loginBtn.prop("disabled",!1),this.loginBtn.removeClass("loading"),e){if(403===e.status)return void this._handleUnusualActivityError(e);this.showErrors([this.constructor.TEXT_LOGIN_FAIL]),this.die("_handleVerifyTokenResponse",e.responseText)}if(t.needs_mfa)return console.log("Admin needs MFA enabled"),void this.showErrors([this.constructor.TEXT_ENABLE_ADMIN_MFA]);if(t.requires_placeit_credentials)return console.log("Account confirmation required"),t.invalid_placeit_credentials?(Helpers.GlobalEventTracker.ssoTrack("placeitAccountFound.submittedWithError",{error:!0,user:this.associatedEmailInput?this.associatedEmailInput.val():"",message:"Invalid password, please make sure you're entering your Placeit password",response:t}),this.showErrors([this.constructor.TEXT_INVALID_PLACEIT_CREDENTIALS])):this.dispatch("login.message",null),this.loginHeader.addClass("hidden"),this.confirmPlaceitPasswordHeader.removeClass("hidden"),this.userEmailContainer.addClass("hidden"),this.userEmailInput.removeAttr("required"),this.associatedEmailContainer.removeClass("hidden"),this.userPasswordContainer.addClass("hidden"),this.userPasswordInput.removeAttr("required"),this.userPlaceitPasswordContainer.removeClass("hidden"),this._toggleTFAField(!1),this.signinVerificationContainer.addClass("hidden"),this.recaptchaContainer.addClass("hidden"),this.userPlaceitPasswordInput.attr("required",""),this.associatedEmailInput.val(t.associated_account),this.userPlaceitPasswordInput.focus(),this.isAutoSignin=!1,this.element.unbind("submit"),this.element.bind("submit",this._submitForm.bind(this)),this.hideSsosContainer(),void Helpers.GlobalEventTracker.ssoTrack("placeitAccountFound.modalOpened",{error:!1,user:this.associatedEmailInput?this.associatedEmailInput.val():"",message:"Confirm placeit account modal opened.",response:t});var n=t.data.user.authenticated_by;if(console.log("Login successful"),this.userForm.loginSuccess(this.form[0],t.data.user),this.isAutoSignin)Helpers.GlobalEventTracker.ssoTrack("autoLogin.modalOpened",{error:!1,user:this.userEmailInput?this.userEmailInput.val().trim():"",message:"Auto sign-in modal opened",label:n}),i=this.constructor.TEXT_AUTOLOGIN_CTA,i=i.replace("{{username}}",t.data.user.username),this.loggedInOkBtn.val(i),this.loginMessage.addClass("hidden"),this.emailFieldContainer.addClass("hidden"),this.passwordFieldContainer.addClass("hidden"),this.migrationSectionContainer.addClass("hidden"),this._toggleTFAField(!1),this.loggedInNotice.removeClass("hidden"),this.dispatch("login.autosignin.enabled");else{var s="email"===this.loginMode?"login.submittedWithEmail":"login.submittedWithUsername";Helpers.GlobalEventTracker.ssoTrack(s,{error:!1,user:this.userEmailInput?this.userEmailInput.val().trim():"",message:"Log-in successfully submitted.",response:t,label:n}),this.deactivate()}if(!Helpers.App.getTrackerId()){var r=t.data.user.tracker_id;Helpers.App.setTrackerId(r),window.placeitTrackerId=Helpers.App.getTrackerId()}this.envatoAccountFound&&page.flash(this.constructor.TEXT_MIGRATE_ENVATO_ACCOUNT_SUCCESS,"success")},_handleLoggedInOk:function(e){e.preventDefault(),this.deactivate()},_submitForm:function(e){e.preventDefault();var t=this;if(t.hasRecaptcha&&("undefined"==typeof grecaptcha||null===this.recaptchaId||!grecaptcha.getResponse(this.recaptchaId)))return Helpers.GlobalEventTracker.ssoTrack("login.submittedWithError",{error:!0,user:t.userEmailInput?t.userEmailInput.val().trim():"",message:"Please click the reCAPTCHA checkbox"}),void t.recaptchaContainer.popover("show");var i=this.userEmailInput.val().trim(),n=$(this.userPasswordInput).val(),s=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.loginBtn.prop("disabled",!0),this.loginBtn.addClass("loading"),i.match(s)?(this.loginMode="email",this._localSignin(i,n,this._handleLocalSigninResponse.bind(this))):(this.loginMode="username",this._ssoSignin(i,this._handleSsoSigninResponse.bind(this)))},_handleLocalSigninResponse:function(e,t){if(this.loginBtn.prop("disabled",!1),this.loginBtn.removeClass("loading"),e&&(this.showErrors([this.constructor.TEXT_LOGIN_ERROR]),this.die("_handleLocalSigninResponse",e)),t.redirect_signin_request_so_sso)this._ssoSignin(t.sso_username,this._handleSsoSigninResponse.bind(this));else if(t.invalid_credentials){Helpers.GlobalEventTracker.ssoTrack("login.invalidCreds",{
user:this.userEmailInput?this.userEmailInput.val().trim():"",error:!0,message:"Invalid email or password. You can also use the email address from your Envato account to login!"});var i=[this.constructor.TEXT_INVALID_CREDENTIALS];this.showErrors(i)}else if(t.too_many_attempts){var i=[t.error];this.showErrors(i)}else t.requires_sso_credentials?($(this.userEmailInput).val(t.sso_username),$(this.userPasswordInput).val(""),$(this.userPasswordInput).focus(),$(this.userEmailInput).attr("readonly",""),$(this.userEmailInput).addClass("readonly"),this.hideSsosContainer(),this._updateHeader("envato_account_header"),this.dispatch("login.message",null),this.userPasswordLabel.html(this.constructor.TEXT_ENVATO_PASSWORD),this.envatoAccountFound=!0,Helpers.GlobalEventTracker.ssoTrack("ssoAccountFound.modalOpened",{error:!1,user:this.userEmailInput?this.userEmailInput.val().trim():"",response:t,message:"Envato account found, modal opened."})):t.requires_sso_signup?(this.dispatch("login.message",null),this._createSsoAccount()):t.authenticated&&(console.log("Login successful"),this.userForm.loginSuccess(this.form[0],t.user),this.deactivate())},_updateHeader:function(e){var t=e;this.element.find(".header").attr("hidden",""),$("#"+t).removeAttr("hidden")},_createSsoAccount:function(){var e=this;Helpers.GlobalEventTracker.ssoTrack("ssoUpdatingAccount.modalOpened",{error:!1,user:e.userEmailInput?e.userEmailInput.val().trim():"",message:"Updating your account modal opened."}),this.migrateAccountHide.attr("hidden",""),this.privacyPolicyContainer.removeAttr("hidden"),this.privacyPolicyInput.attr("required",""),this.termsConditionsInput.attr("required",""),this.userEmailInput.attr("readonly",""),this.userEmailInput.addClass("readonly"),this.userPasswordInput.attr("readonly",""),this.userPasswordInput.addClass("readonly"),this.continueBtn.removeAttr("hidden"),this.userEmailContainer.attr("hidden",""),this.userPasswordContainer.attr("hidden",""),this.updatingAccountHeader.removeAttr("hidden"),this.loginHeader.attr("hidden",""),this.hideSsosContainer(),this.element.unbind("submit"),this.element.bind("submit",function(t){t.preventDefault(),e.migrateUser(),e.continueSubmitBtn.prop("disabled",!0),e.continueSubmitBtn.addClass("loading")})},migrateUser:function(e){var t=this,i=$(this.userEmailInput).val(),n=$(this.userPasswordInput).val(),s=this.element.find(":checkbox:checked").length>0,r={username:e||i.split("@")[0].replace(/\./g,"_").replace(/\+/g,"_"),email:i,password:n,first_name:"First Name",last_name:"Last Name",privacy_policy:s,suppress_confirmation_email:!0},o=function(e){t._verifyToken(e.token,"migrate",t._handleVerifyTokenResponse.bind(t)),t.continueSubmitBtn.prop("disabled",!0),t.continueSubmitBtn.removeClass("loading")},a=function(n,s){t.continueSubmitBtn.prop("disabled",!1),t.continueSubmitBtn.removeClass("loading");var o=t.envatoAccountFound?"ssoAccountFound.migrationError":"sso.migrationError";Helpers.GlobalEventTracker.ssoTrack(o,{error:!0,user:e,email:i,response:r,message:"Migration finished with error. SSO Error on migrate_user"}),t.die("migrateUser "+r.username,n,s)},l=this.envatoAccountFound?"ssoAccountFound.migrationStarted":"sso.migrationStarted";Helpers.GlobalEventTracker.ssoTrack(l,{error:!1,user:e,email:i,message:"Migration started. Getting account ready"});var c={url:UI.SsoLoginModal.MIGRATE_USER_URL,type:"POST",data:r,dataType:"json",beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))}},u=Helpers.RequestConfig.prepareConfig(c);$.ajax(u).done(function(e){o(e)}).fail(function(e){a(e.responseText)})},_localSignin:function(e,t,i){var n={url:UI.SsoLoginModal.LOGIN_URL,type:"POST",data:{email:e,password:t},dataType:"json",beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))}},s=Helpers.RequestConfig.prepareConfig(n);$.ajax(s).done(function(e){i(null,e)}).fail(function(e){i(e.responseText)})},_renderRecaptcha:function(){var e=this,t=function(t){e._hidePopover()};if(this.recaptchaContainer.removeAttr("hidden"),this.element.find(".g-recaptcha").attr("data-sitekey",this.recaptchaKey),null!==this.recaptchaId)return void(this.recaptchaRendered=!0);if("undefined"!=typeof grecaptcha&&grecaptcha.render&&!this.recaptchaRendered){this.recaptchaId=grecaptcha.render(this.recaptchaContainer[0],{callback:t}),this.recaptchaRendered=!0;var i=setInterval(function(){var e=$('iframe[title="recaptcha challenge"]');if(0!==e.length){clearInterval(i);var t=e.parent().parent();t.addClass("recaptcha-container")}},1e3)}else clearTimeout(this.recapchaRetry),this.recapchaRetry=setTimeout(this._renderRecaptcha.bind(this),333)},_ssoSignin:function(e,t){this.loginBtn.prop("disabled",!0),this.loginBtn.addClass("loading");var i=this,n=$(this.userPasswordInput).val(),s=$(this.twoFactorCodeInput).val(),r={username:e,password:n,to:"placeit"};s&&(r.authentication_code=s),this.hasRecaptcha&&(r.recaptcha_version=2,r.recaptcha_response=grecaptcha.getResponse(this.recaptchaId),r.recaptcha_site_key=i.recaptchaKey);var o=function(e){s&&Helpers.GlobalEventTracker.ssoTrack("login.submittedTFASuccess",{error:!1,user:i.userEmailInput?i.userEmailInput.val().trim():"",message:"Login with TFA code success"}),t(null,e)},a=function(e){t({loginFailed:!0,content:e})},l=function(t,n){if(i.showErrors([i.constructor.TEXT_LOGIN_ERROR]),i.loginBtn.prop("disabled",!1),i.loginBtn.removeClass("loading"),i.envatoAccountFound){var s=i.envatoAccountFound?"ssoAccountFound.migrationError":"sso.migrationError";Helpers.GlobalEventTracker.ssoTrack(s,{error:!0,user:i.userEmailInput?i.userEmailInput.val().trim():"",message:"Envato account migration error. "+t})}i.die("_ssoSignin "+e,t,n)},c=function(){i.dispatch("login.message",null),i._renderRecaptcha(),i.hasRecaptcha=!0,i.loginBtn.prop("disabled",!1),i.loginBtn.removeClass("loading")},u=function(e){return e.indexOf("Looks like these are not your correct details. Please try again.")>=0?void a(e):(i.dispatch("login.message",{type:"error",content:"Captcha invalid, try again"}),t("Captcha Invalid"),void(null!==i.recaptchaId&&grecaptcha.reset(i.recaptchaId)))},d=function(){Helpers.GlobalEventTracker.ssoTrack("login.tfaShowed",{error:!1,user:i.userEmailInput?i.userEmailInput.val().trim():"",message:"TFA shown"}),i._toggleTFAField(!0),i.twoFactorCodeInput.attr("required","required"),i.loginBtn.prop("disabled",!1),i.loginBtn.removeClass("loading")},h=function(){Helpers.GlobalEventTracker.ssoTrack("login.submittedTFAError",{error:!0,user:i.userEmailInput?i.userEmailInput.val().trim():"",message:"TFA Code Invalid "+e}),i.showErrors([i.constructor.TEXT_INVALID_TFA]),i.loginBtn.prop("disabled",!1),i.loginBtn.removeClass("loading")},p=function(e){i.showErrors([i.constructor.TEXT_VERIFICATION_REQUIRED]),i.signinVerificationContainer.removeClass("hidden"),i.signinVerificationInput.attr("required",!0),i.loginBtn.prop("disabled",!1),i.loginBtn.removeClass("loading"),Helpers.GlobalEventTracker.ssoTrack("sso.signInVerificationRequested",{error:!1,user:i.userEmailInput?i.userEmailInput.val().trim():"",message:"SSO server requested signin verification"}),i.element.unbind("submit"),i.element.bind("submit",function(t){t.preventDefault(),i._ssoSigninWithVerification(e,i._handleSsoSigninWithVerification.bind(i)),i.continueSubmitBtn.prop("disabled",!0),i.continueSubmitBtn.addClass("loading")})},f=function(){t({forcedPasswordResetRequired:!0})};if(this.envatoAccountFound){var m=this.envatoAccountFound?"ssoAccountFound.migrationStarted":"sso.migrationStarted";Helpers.GlobalEventTracker.ssoTrack(m,{error:!1,user:i.userEmailInput?i.userEmailInput.val().trim():"",message:"Envato account migration started: "+e})}envatoSso.signIn({data:r,onSuccess:o,onFailure:a,onError:l,onCaptchaRequired:c,onCaptchaInvalid:u,onTwoFactorRequired:d,onTwoFactorInvalid:h,onSignInVerification:p,onForcedPasswordReset:f})},_toggleTFAField:function(e){this.twoFactorCodeContainer.toggleClass("hidden",!e),this.twoFactorCodeInput.attr("disabled",!e)},_handleSsoSigninResponse:function(e,t){if(e){if(console.log("Error at ssoSignin: "+JSON.stringify(e)),e.loginFailed&&this.envatoAccountFound)Helpers.GlobalEventTracker.ssoTrack("ssoAccountFound.submittedWithError",{error:!0,user:this.userEmailInput?this.userEmailInput.val().trim():"",response:e,message:"Wrong password!"}),this.showErrors([this.constructor.TEXT_WRONG_PASSWORD]);else if(e.loginFailed){var i="envato";this._hasGoogleSsoResponse(e.content)===!0?(this._dispatchGoogleAccountExistsMessage("login.message"),i="google"):this.showErrors([this.constructor.TEXT_INVALID_CREDENTIALS]),Helpers.GlobalEventTracker.ssoTrack("login.invalidCreds",{user:this.userEmailInput?this.userEmailInput.val().trim():"",error:!0,message:"Invalid email or password. You can also use the email address from your Envato account to login!",label:i})}else e.twoFactorInvalid?this.showErrors([this.constructor.TEXT_INVALID_TFA]):e.forcedPasswordResetRequired&&(Helpers.GlobalEventTracker.ssoTrack("login.forcedPasswordResetRequired",{error:!0,user:loginForm.userEmailInput?loginForm.userEmailInput.val().trim():"",message:"Forced Password Reset Required"}),this.dispatch("accountUnusualActivity"));return this.loginBtn.prop("disabled",!1),void this.loginBtn.removeClass("loading")}this._verifyToken(t,"signin",this._handleVerifyTokenResponse.bind(this))},_ssoSigninWithVerification:function(e,t){var i=this,n={passcode:this.signinVerificationInput.val(),token:e,to:"placeit"},s=function(e){t(null,e)},r=function(e){t({failure:!0,message:e})},o=function(e){t({error:!0,message:e})};this.loginBtn.prop("disabled",!0),this.loginBtn.addClass("loading"),Helpers.GlobalEventTracker.ssoTrack("sso.signInVerificationStarted",{error:!1,user:i.userEmailInput?i.userEmailInput.val().trim():"",message:"Sign in verification started"}),envatoSso.signInVerification({data:n,onSuccess:s,onFailure:r,onError:o})},_handleSsoSigninWithVerification:function(e,t){var i=this,n=!1;return e?(e.failure?(i.showErrors([e.message]),i.loginBtn.prop("disabled",!1),i.loginBtn.removeClass("loading")):e.error&&(i.showErrors([i.constructor.TEXT_LOGIN_ERROR]),i.loginBtn.prop("disabled",!1),i.loginBtn.removeClass("loading"),n=!0),Helpers.GlobalEventTracker.ssoTrack("sso.signInVerificationError",{error:!0,user:i.userEmailInput?i.userEmailInput.val().trim():"",message:"Sign in verification error"}),void(""!==n&&i.die("ssoSigninWithVerification",e.message,e))):void this._verifyToken(t,"signInVerification",this._handleVerifyTokenResponse.bind(this))},_bindEvents:function(){return this.element.bind("submit",this._submitForm.bind(this)),this.signupLink.bind("click",function(e){e.preventDefault(),this.dispatch("signup.show")}.bind(this)),this.envatoLogo.bind("mouseenter",function(e){this.envatoLogo.removeClass("envato-logo-gray").addClass("envato-logo"),this.envatoPages.show()}.bind(this)),this.envatoLogo.bind("mouseleave",function(e){this.envatoLogo.removeClass("envato-logo").addClass("envato-logo-gray"),this.envatoPages.hide()}.bind(this)),this.secretEye.bind("click",function(e){this.secretEye.hasClass("eye-on")?(this.secretEye.removeClass("eye-on").addClass("eye-off"),this.userPasswordInput.attr("type","text")):(this.secretEye.removeClass("eye-off").addClass("eye-on"),this.userPasswordInput.attr("type","password"))}.bind(this)),this.placeitPasswordSecretEye.bind("click",function(e){this.placeitPasswordSecretEye.hasClass("eye-on")?(this.placeitPasswordSecretEye.removeClass("eye-on").addClass("eye-off"),this.userPlaceitPasswordInput.attr("type","text")):(this.placeitPasswordSecretEye.removeClass("eye-off").addClass("eye-on"),this.userPlaceitPasswordInput.attr("type","password"))}.bind(this)),this.agree.on("click",function(e){var t=this.element.find("#privacy_policy_alert");setTimeout(function(){t.prop("checked",!t.is(":checked"))},0)}.bind(this)),this.terms.on("click",function(e){var t=this.element.find("#terms_conditions_alert");setTimeout(function(){t.prop("checked",!t.is(":checked"))},0)}.bind(this)),this.loggedInOkBtn.bind("click",this._handleLoggedInOk.bind(this)),this.userEmailInput.bind("keyup blur",function(){this.setAttribute("value",this.value)}),this.userPasswordInput.bind("keyup blur",function(){this.setAttribute("value",this.value)}),this},_cancel:function(e){e.preventDefault()},_saveInitialState:function(){var e=function(e,t){for(var i=Object(e),n=1;n<arguments.length;n++){var s=arguments[n];if(null!=s)for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])}return i},t=this;this.initialState=e({},this),Object.keys(t).forEach(function(e){t[e]instanceof jQuery&&(t.initialState[e+"_hiddenCls"]=t[e].hasClass("hidden"),["hidden","readonly","required"].forEach(function(i){t.initialState[e+"_"+i+"Attr"]=t[e].attr(i)}))})},_reset:function(){var e=["recaptchaId"],t=this;Object.keys(t.initialState).forEach(function(i){t[i]instanceof jQuery?(t.initialState[i+"_hiddenCls"]?t[i].addClass("hidden"):t[i].removeClass("hiddenCls"),["hidden","readonly","required"].forEach(function(e){var n=t.initialState[i+"_"+e+"Attr"];"undefined"!=typeof n&&n!==!1?t[i].attr(e,e):t[i].removeAttr(e)})):e.includes(i)||(t[i]=t.initialState[i])}),this._toggleTFAField(!1),$(this.userEmailInput).val(""),$(this.userPasswordInput).val(""),$(this.twoFactorCodeInput).val(""),$(this.privacyPolicyInput).prop("checked",!1),$(this.termsConditionsInput).prop("checked",!1),this.element.unbind("submit"),this.element.bind("submit",this._submitForm.bind(this))},destroy:function(){this.userForm=null,this.fieldsContainer=null,this.userEmailInput=null,this.haveAnAccountLink=null,this._timeouts.forEach(function(e){clearTimeout(e)}),Widget.prototype.destroy.call(this)},activate:function(){return Widget.prototype.activate.call(this),this._timeouts.push(setTimeout(function(){var e=this.userEmailInput.val().trim();e.length<1?this.userEmailInput.focus():this.userPasswordInput.focus()}.bind(this),300)),this.dispatch("login.message",null),this},deactivate:function(e){return Widget.prototype.deactivate.call(this),this.isAutoSignin&&Helpers.GlobalEventTracker.ssoTrack("autoLogin.modalClosed",{user:this.userEmailInput?this.userEmailInput.val().trim():"",error:!1,message:"Auto sign-in modal closed"}),clearTimeout(this.recapchaRetry),this._reset(),this.dispatch("login.deactivate"),this},showErrors:function(e){var t=Object.keys(e)[0],i=e[t];return Array.isArray(i)&&(i=t+" "+e[t][0]),this.dispatch("login.message",{type:"error",content:i}),this},showMessages:function(e){return this.dispatch("login.message",{type:"success",content:e}),this},die:function(e,t,i){var n=t||(i?JSON.stringify(i):"");throw new Error("SSO Error on SsoLoginModal: "+e+": "+n)},showContinueHeader:function(){this.$continueHeader.removeClass("hidden")},hideContinueHeader:function(){this.$continueHeader.addClass("hidden")},setEmail:function(e){$(this.userEmailInput).val(e),this.userEmailInput.attr("value",e)},_handleUnusualActivityError:function(e){this.dispatch("accountUnusualActivity"),this._signOut(),e.responseJSON.recently_flagged===!0&&Helpers.GlobalEventTracker.ssoTrack("login.unusualActivity",{error:!0,user:this.userEmailInput?this.userEmailInput.val().trim():"",envato_id:e.responseJSON.envato_id})},_signOut:function(){var e=function(){console.log("Logged out from Envato SSO successful")},t=function(e){console.log("Failed to logout at SSO: "+e)},i=function(e){throw"SSO Error signing out from SSO: "+e};window.envatoSso.signOut({onSuccess:e,onFailure:t,onError:i})},hideSsosContainer:function(){this.externalSsosContainer.hide()},googleLogin:function(){var e=Utils.bindFn(this),t=this;t.disableModal(),t._sendGoogleButtonClickEventTracker(),t._dispatchGooglePopupOpenMessage(),t.googleSignin().then(function(e){return t._dispatchGoogleProcessingMessage(),t._processGoogleToken(e)}).then(e(t._getCleanUserData)).then(e(t._handleGoogleLoginSuccess))["catch"](e(t._handleGoogleLoginError))["finally"](e(t.enableModal))},disableSubmit:function(){this.loginBtn.prop("disabled",!0)},enableSubmit:function(){this.loginBtn.prop("disabled",!1)},enableModal:function(){this.dispatch("ssoModal.enableModal")},disableModal:function(){this.dispatch("ssoModal.disableModal")},deactivateModal:function(){this.dispatch("ssoModal.deactivate")},hideModalMessage:function(){this.dispatch("ssoModal.hideMessage")},loginSuccess:function(e){this.userForm.loginSuccess(this.form[0],e)},_updateTrackerId:function(e){Helpers.App.getTrackerId()&&(Helpers.App.setTrackerId(e),window.placeitTrackerId=Helpers.App.getTrackerId())},_handleGoogleLoginSuccess:function(e){this.loginSuccess(e),this._dispatchGoogleAuthSuccessMessage(),this._sendGoogleSigninSuccessEventTracker(e),this._validateGoogleSignupEventTracker(e),this._updateTrackerId(e.tracker_id),this.deactivateModal()},_handleGoogleLoginError:function(e){this.hideModalMessage(),this._processGoogleAuthError(e)},enableGooglePopup:function(){var e=Utils.bindFn(this);this._isGoogleFallbackEnabled=!1,this.changeGoogleSigninFlow(e(this.googleLogin))},enableSsosButtons:function(){this.externalSsosContainer.enableButtons()},disableSsosButtons:function(){this.externalSsosContainer.disableButtons()}}}),Class(UI,"SsoSignupModal").inherits(Widget).includes(RequiredFieldsPopovers,Translator,ExternalSsosSupport)({html:'<div id="sso_signup_modal"><div class="header hidden" id="signup_continue_header"><h4>Please Sign Up to Continue</h4></div><div class="content"><form id="signup_form" class="sign-up-form"><div class="fields_container"><div class="floating-label-input email"><input autocomplete="off" class="form-control" id="signup_user_email" required="required" size="30" type="text" /><label class="placeholder">Email</label></div><div id="email_exists_warning" class="help-block text-left warning hidden">This email address is already in use. <a class="trigger_login_link" href="#">Log in</a></div><div id="email_error_warning" class="help-block text-left warning hidden"></div><div class="floating-label-input password"><input autocomplete="off" class="form-control" id="signup_user_password" required="required" type="password" /><label class="placeholder">Password</label><div class="secret-eye eye-on"></div></div><div class="meter meter-init"><b class="meter-1"></b><b class="meter-2"></b><b class="meter-3"></b><b class="meter-4"></b></div><div id="bad_password_warning" class="help-block text-left">Try using at least 7 characters, one number and one symbol</div><div class=""><p class="help-block checkboxes text-left"><span id="promotion-notifications" style="cursor: pointer;"> <input type="checkbox"> <span class="promotion-notifications">Receive exclusive offers, freebies, and inspiration right to your inbox.</span></input></span></p></div><div class="" id="signup_btn_container"><button id="submit_button" class="button primary" name="commit" type="submit" value="Sign Up">Sign Up</button></div><div class=""><p class="help-block text-center new-policy">Envato collects and uses personal data in accordance with our <a class="strong block-link" target="_blank" href="https://envato.com/privacy/">Privacy Policy</a>. By creating an account, you agree to our <a class="strong block-link" target="_blank" href="https://placeit.net/terms-of-use">Terms and Conditions</a>. </p><p class="help-block text-center">Already have an account? <a href="#" class="trigger_login_link" role="button">Log in</a></p></div><div class="envato-notice text-center"><span class="placeit-envato-logo-black"></span></div></div></form></div></div>',TEXT_GIFT_CREATE_ACCOUNT:"Please create an account to apply the free download",TEXT_PASSWORD_CONTEXTUAL_HELP:"Try using at least 7 characters, one number and one symbol",TEXT_VALIDATE_SIGNUP_ERROR:"We could not complete your request. Please try again later",TEXT_CREATE_ACCOUNT_SUCCESS:"Your account was created!",TEXT_CREATE_ACCOUNT_ERROR:"We're sorry, we could not create your account. Please try again later",TEXT_VERIFY_TOKEN_SUCCESS:"All done!",TEXT_VERIFY_TOKEN_ERROR:"Your account was created but we could not log you in. Please try again later",TEXT_PASSWORD_STRENGTH_GOOD:"Good Password!",TEXT_PASSWORD_STRENGTH_GREAT:"Great Password!",TEXT_PASSWORD_STRENGTH_WEAK:"Try a longer password with numbers and symbols!",VERIFY_SIGNIN_TOKEN_URL:"/sso/verify_signin_token",VALIDATE_SIGNUP_URL:"/sso/validate_signup",EXTERNAL_SSO_LINE_TEXT:"OR Create an Account",prototype:{$optinNewsletter:null,CONTINENT_CODE:"EU",placeitPromotionNotifications:!1,isAutoSignin:!1,init:function(e){Widget.prototype.init.call(this,e);if(this.userEmailInput=this.element.find("#signup_user_email"),this.userPasswordInput=this.element.find("#signup_user_password"),this.alert=this.element.find("#error_box"),this.messages=this.element.find("#message_box"),this.form=this.element.find("#signup_form"),this.haveAnAccountLink=this.element.find(".trigger_login_link"),this.envatoLogo=this.element.find(".envato-hover"),this.envatoPages=this.element.find(".envato-pages"),this.secretEye=this.element.find(".secret-eye"),this.$optinNewsletter=this.element.find("#promotion-notifications"),this.titleElement=this.element.find("#title"),this.subtitleElement=this.element.find("#subtitle"),this.emailExistsWarning=this.element.find("#email_exists_warning"),this.badPasswordWarning=this.element.find("#bad_password_warning"),this.submitButton=this.element.find("#submit_button"),this.recapchaRetry=null,this.preventEscapeClose=!1,this._timeouts=[],this.$continueHeader=this.element.find("#signup_continue_header"),this.$meter=this.element.find(".meter"),this.$emailErrorWarning=this.element.find("#email_error_warning"),this._contentForm=this.element.find(".content"),this.title&&this.titleElement.html(this.title),this.subtitle&&this.subtitleElement.html(this.subtitle),this.appendChild(new this.userFormClass({name:"userForm",element:this.form})),this._setPopovers({$requiredFields:this.element.find("input").filter("[required]"),$submitButton:this.submitButton}),this._bindEvents(),this.userEmailInput.attr("value",this.userEmailInput.val()),this.userPasswordInput.attr("value",this.userEmailInput.val()),window.placeitGift){var t=this;setTimeout(function(){t.activate(),t.showMessages(t.constructor.TEXT_GIFT_CREATE_ACCOUNT)},500)}this.initExternalSsosContainer({lineText:this.constructor.EXTERNAL_SSO_LINE_TEXT,target:this._contentForm,source:"signup"})},activate:function(){return Widget.prototype.activate.call(this),this.userPasswordInput.val(""),this.getGeoLocation(),this._updateMeter("init"),this.badPasswordWarning.text(this.constructor.TEXT_PASSWORD_CONTEXTUAL_HELP).removeClass("success warning"),this.userPasswordInput.removeClass("warning"),this._timeouts.push(setTimeout(function(){this.userEmailInput.focus()}.bind(this),300)),this.dispatch("signup.message",null),this},_submitForm:function(e){var t=this;e.preventDefault();this.userEmailInput.val().trim();this.submitButton.prop("disabled",!0),this.submitButton.addClass("loading"),this._hideEmailExistsWarning(),this._checkEmailAvailability(t._handleValidateSignupResponse.bind(this))},_handleValidateSignupResponse:function(e,t){if(e)return this.submitButton.prop("disabled",!1),this.submitButton.removeClass("loading"),this.showErrors([this.constructor.TEXT_VALIDATE_SIGNUP_ERROR]),void this.die("_handleValidateSignupResponse",e.responseText);if(t.email_exists){if(Helpers.GlobalEventTracker.ssoTrack("signUp.submittedWithError",{error:!0,email:this.userEmailInput?this.userEmailInput.val().trim():"",message:"Email already taken, please use another one or Log in",label:t.authenticated_by}),this.submitButton.prop("disabled",!1),this.submitButton.removeClass("loading"),"google"!==t.authenticated_by)return void this._showEmailExistsWarning();this._dispatchGoogleAccountExistsMessage("signup.message")}else t.create_sso_account&&(this.alert.hide(),this._createSsoAccount())},usernameRetries:10,_createSsoAccount:function(e){var t=this,i=this.userEmailInput.val().trim(),n=this.userPasswordInput.val(),s={username:e||i.split("@")[0].replace(/\./g,"_").replace(/\+/g,"_"),email:i,password:n,first_name:"First_name",last_name:"Last_name",privacy_policy:!0,suppress_confirmation_email:!0},r=function(n){Helpers.GlobalEventTracker.ssoTrack("signUp.envatoCreationSuccess",{error:!1,user:e,email:i,message:"Envato account creation success",response:n,label:"envato"}),t._verifyToken(n,t._handleVerifyTokenResponse.bind(t))},o=function(n){if(n.username&&(n.username.indexOf("has already been taken")>=0||n.username.indexOf("is reserved because it used to belong to another user.")>=0)&&t.usernameRetries){var r=t._randomizeUsername(s.username);return t.usernameRetries--,void t._createSsoAccount(r)}var o=[];for(key in n)n[key].forEach(function(e){o.push(key+" "+e)});Helpers.GlobalEventTracker.ssoTrack("signUp.submittedWithError",{error:!0,user:e,email:i,message:"Email already taken",response:o,label:"envato"}),t.showErrors(o),t.submitButton.prop("disabled",!1),t.submitButton.removeClass("loading")},a=function(n,s){console.log("Could not Create account: "+n),Helpers.GlobalEventTracker.ssoTrack("signUp.envatoCreationError",{error:!0,user:e,email:i,message:"Envato account creation error",label:"envato"});var r=[t.constructor.TEXT_CREATE_ACCOUNT_ERROR];t.showErrors(r),t.submitButton.prop("disabled",!1),t.submitButton.removeClass("loading"),t.die("_createSsoAccount",n,s)};Helpers.GlobalEventTracker.ssoTrack("signUp.envatoCreationStarted",{error:!1,user:e,email:i,message:"Envato account: "+e+" creation started",label:"envato"}),envatoSso.signUp({data:s,onSuccess:r,onFailure:o,onError:a})},_randomizeUsername:function(e){var t=Math.round(9*Math.random());return e+t},_verifyToken:function(e,t){var i=this,n={url:UI.SsoSignupModal.VERIFY_SIGNIN_TOKEN_URL,type:"post",data:{token:e,is_signup:!0},beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},dataType:"json"},s=Helpers.RequestConfig.prepareConfig(n);$.ajax(s).done(function(e){t(null,e)}).fail(function(e){t({message:i.constructor.TEXT_VERIFY_TOKEN_ERROR,error:e.responseText},null)})},_handleVerifyTokenResponse:function(e,t){if(e){console.log("Failed to verify sso token");var i=["Error: "+e.message];return this.showErrors(i),void this.die("_verifyToken",e.error,e)}if(console.log("Login successful"),this.userForm.loginSuccess(this.form[0],t.data.user),this.postSignUpUpdate(),this.showMessages(this.constructor.TEXT_VERIFY_TOKEN_SUCCESS),!Helpers.App.getTrackerId()){var n=t.data.user.tracker_id;Helpers.App.setTrackerId(n),window.placeitTrackerId=Helpers.App.getTrackerId()}this._timeouts.push(setTimeout(function(){this.dispatch("login.success")}.bind(this),750))},_validatePassword:function(e){var t=this;if(this._checkEmptyPasswordInput())return void this._resetPasswordStyles();var i=function(e){var i="";e&&"acceptable"===e&&(i=t.constructor.TEXT_PASSWORD_STRENGTH_GOOD),!e||"good"!==e&&"great"!==e.toLowerCase()||(i=t.constructor.TEXT_PASSWORD_STRENGTH_GREAT),t.badPasswordWarning.html(i).removeClass("warning").addClass("success"),t.userPasswordInput.removeClass("warning"),t._updateMeter(e)},n=function(e){t.badPasswordWarning.html(t.constructor.TEXT_PASSWORD_STRENGTH_WEAK).removeClass("success").addClass("warning"),t.userPasswordInput.addClass("warning"),t._updateMeter(e)},s=function(e,i){t.badPasswordWarning.addClass("hidden"),t.die("_validatePassword",e,i)},r={username:"",password:t.userPasswordInput.val()};envatoSso.passwordValidation({data:r,onSuccess:i,onFailure:n,onError:s})},_updateMeter:function(e){var t="meter-"+e;this.$meter.hasClass(t)!==!0&&this.$meter.removeClass("meter-init meter-weak meter-acceptable meter-good meter-great").addClass(t)},_delayedFieldCheck:function(e){this.timer=setTimeout(this._validatePassword.bind(this),750)},_resetFieldCheck:function(e){clearTimeout(this.timer)},_checkEmptyPasswordInput:function(e){return this.userPasswordInput.val().length?void 0:!0},_resetPasswordStyles:function(e){var t=this;t.badPasswordWarning.html(t.constructor.TEXT_PASSWORD_CONTEXTUAL_HELP).removeClass("success").removeClass("warning"),t.userPasswordInput.removeClass("warning"),t.userPasswordInput.removeClass("success"),t.$meter.removeClass("meter-init meter-weak meter-acceptable meter-good meter-great").addClass("meter-init")},_bindEvents:function(){return this.element.bind("submit",this._submitForm.bind(this)),this.haveAnAccountLink.on("click",function(e){e.preventDefault(),this.dispatch("login.show")}.bind(this)),this.envatoLogo.bind("mouseenter",function(e){this.envatoLogo.removeClass("envato-logo-gray").addClass("envato-logo"),this.envatoPages.show()}.bind(this)),this.envatoLogo.bind("mouseleave",function(e){this.envatoLogo.removeClass("envato-logo").addClass("envato-logo-gray"),this.envatoPages.hide()}.bind(this)),this.secretEye.bind("click",function(e){this.secretEye.hasClass("eye-on")?(this.secretEye.removeClass("eye-on").addClass("eye-off"),this.userPasswordInput.attr("type","text")):(this.secretEye.removeClass("eye-off").addClass("eye-on"),this.userPasswordInput.attr("type","password"))}.bind(this)),this.userPasswordInput.bind("keyup",this._delayedFieldCheck.bind(this)),this.userPasswordInput.bind("blur",this._delayedFieldCheck.bind(this)),this.userPasswordInput.bind("keydown",this._resetFieldCheck.bind(this)),this.userEmailInput.bind("keyup",function(e){e.target.setAttribute("value",e.target.value),this._hideEmailExistsWarning()}.bind(this)),this.userEmailInput.bind("blur",function(e){e.target.setAttribute("value",e.target.value),this.dispatch("signup.emailAvailable",!0),this._validateEmailField()}.bind(this)),this.userPasswordInput.bind("keyup blur",function(e){this.setAttribute("value",this.value)}),this.$optinNewsletter.bind("click",function(){this.toggleOptinNewsletter()}.bind(this)),this},deactivate:function(e){return Widget.prototype.deactivate.call(this),this._hidePopover(),clearTimeout(this.recapchaRetry),this.dispatch("signup.deactivate"),this},destroy:function(){this.userForm=null,this.fieldsContainer=null,this.userEmailInput=null,this.haveAnAccountLink=null,this._timeouts.forEach(function(e){clearTimeout(e)}),Widget.prototype.destroy.call(this)},showErrors:function(e){var t=Object.keys(e)[0],i=e[t];return Array.isArray(i)&&(i=t+" "+e[t][0]),-1!==i.indexOf("email")?(this.userEmailInput.addClass("warning"),this.$emailErrorWarning.text(i).removeClass("hidden"),this):(this.dispatch("signup.message",{type:"error",content:i}),this)},showMessages:function(e){return this.dispatch("signup.message",{type:"success",content:e}),this},die:function(e,t,i){var n=t||(i?JSON.stringify(i):"");throw new Error("SSO Error on SsoSignupModal: "+e+": "+n)},toggleOptinNewsletter:function(){var e=this;e.setPromotionNotifications(!this.placeitPromotionNotifications)},setPromotionNotifications:function(e){var t=this.element.find("#promotion-notifications input");this.placeitPromotionNotifications=e,t.prop("checked",e)},getPromotionNotifications:function(){return this.placeitPromotionNotifications},getGeoLocation:function(){window.isEuropeanIp?this.setPromotionNotifications(!1):this.setPromotionNotifications(!0)},postSignUpUpdate:function(){var e={placeit_promotion_notifications:this.placeitPromotionNotifications,download_email_notifications:!0,product_update_notifications:!0,feedback_request_notifications:!0};Helpers.App.updateEmailNotifications(e)},showContinueHeader:function(){this.$continueHeader.removeClass("hidden")},hideContinueHeader:function(){this.$continueHeader.addClass("hidden")},_showEmailExistsWarning:function(){this.emailExistsWarning.removeClass("hidden")},_hideEmailExistsWarning:function(){this.emailExistsWarning.addClass("hidden")},_validateEmailField:function(){var e=this.userEmailInput.val().trim();return e.length<1?(this._hideEmailExistsWarning(),void this.dispatch("ssoModal.hideMessage")):void this._checkEmailAvailability(this._validateEmailFieldHandler.bind(this))},_validateEmailFieldHandler:function(e,t){if(!e&&t.email_exists){if("google"!==t.authenticated_by)return void this._showEmailExistsWarning();this._dispatchGoogleAccountExistsMessage("signup.message")}else this._hideEmailExistsWarning()},_checkEmailAvailability:function(e){var t=this,i=this.userEmailInput.val().trim();Helpers.GlobalEventTracker.ssoTrack("signup.emailValidationStarted",{error:!1,user:i,message:"Email validation started: "+i});var n={url:UI.SsoSignupModal.VALIDATE_SIGNUP_URL,type:"POST",data:{email:i},dataType:"json",beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))}},s=Helpers.RequestConfig.prepareConfig(n);t.hideModalMessage(),$.ajax(s).done(function(n){n.email_exists?t.dispatch("signup.emailAvailable",i):(Helpers.GlobalEventTracker.ssoTrack("signup.emailValidationSuccess",{error:!1,user:i,message:"Email validation success",response:n}),t.dispatch("signup.emailAvailable",!0)),
e&&e(null,n)}).fail(function(n){Helpers.GlobalEventTracker.ssoTrack("signup.emailValidationError",{error:!0,user:i,message:"Email validation error",response:n}),t.dispatch("signup.emailAvailable",!0),e&&e(n)})},enableAutoSignin:function(){this.isAutoSignin=!0},hideSsosContainer:function(){this.externalSsosContainer.hide()},googleSignup:function(){var e=Utils.bindFn(this),t=this;t.disableModal(),t._sendGoogleButtonClickEventTracker(),t._dispatchGooglePopupOpenMessage(),t.googleSignin().then(function(e){return t._dispatchGoogleProcessingMessage(),t._processGoogleToken(e)}).then(e(t._getCleanUserData)).then(e(t._handleGoogleSignupSuccess))["catch"](e(t._handleGoogleSignupError))["finally"](e(t.enableModal))},disableSubmit:function(){this.submitButton.prop("disabled",!0)},enableSubmit:function(){this.submitButton.prop("disabled",!1)},enableModal:function(){this.dispatch("ssoModal.enableModal")},disableModal:function(){this.dispatch("ssoModal.disableModal")},deactivateModal:function(){this.dispatch("ssoModal.deactivate")},hideModalMessage:function(){this.dispatch("ssoModal.hideMessage")},signupSuccess:function(e){this.userForm.loginSuccess(this.form[0],e)},_updateTrackerId:function(e){Helpers.App.setTrackerId(e),window.placeitTrackerId=Helpers.App.getTrackerId()},_handleGoogleSignupSuccess:function(e){this.signupSuccess(e),this._dispatchGoogleAuthSuccessMessage(),this._sendGoogleSigninSuccessEventTracker(e),this._validateGoogleSignupEventTracker(e),this._updateTrackerId(e.tracker_id),this._processPostSignupUpdate(e),this.deactivateModal()},_handleGoogleSignupError:function(e){this.hideModalMessage(),this._processGoogleAuthError(e)},_processPostSignupUpdate:function(e){var t=this.getPromotionNotifications(),i=Service.Sso.getInstance();i.validatePostSignupUpdate(e,t)},enableGooglePopup:function(){var e=Utils.bindFn(this);this._isGoogleFallbackEnabled=!1,this.changeGoogleSigninFlow(e(this.googleSignup))},enableSsosButtons:function(){this.externalSsosContainer.enableButtons()},disableSsosButtons:function(){this.externalSsosContainer.disableButtons()}}}),Class(UI,"TabbedModal").inherits(Widget)({elementClass:"tabbed-modal-widget",html:'        <div class="modal modal-tab-panel fade" id="{{id}}" tabindex="-1" role="dialog" aria-labelledby="{{id-label}}" aria-hidden="true">            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>            <div class="modal-dialog">                <div class="modal-content">                    <ul class="nav nav-tabs btn-group"></ul>                    <div class="tab-content"></div>                </div>            </div>        </div>    ',prototype:{_tabs:null,dialog:null,_tabList:null,tabContent:null,_paneList:[],closeDisabled:null,_timeouts:null,$close:null,_activatedBy:null,fade:!0,init:function(e){return Widget.prototype.init.call(this,e),this.name?(this.el=this.element[0],this.modal=$(this.el),this.closeDisabled=!1,this._timeouts=[],this.dialog=this.el.querySelector(".modal-dialog"),this._tabList=this.el.querySelector(".nav-tabs"),this.tabContent=this.el.querySelector(".tab-content"),this.$close=this.element.find(".close"),this.fade===!1&&this.modal.removeClass("fade"),this._tabs={},this.childs&&this.childs.forEach(function(e){this._addChild(e)}.bind(this)),this.el.setAttribute("id",this.name),this.el.setAttribute("aria-labelledby",this.name+"Label"),void this._bindEvents()):void console.error("name key is required")},_bindEvents:function(){return this.element.on("show.bs.modal",function(){this.dispatch("modal.show")}.bind(this)),this.element.on("shown.bs.modal",function(){this.dispatch("modal.shown")}.bind(this)),this.element.on("hide.bs.modal",function(){return this.closeDisabled===!0?!1:void this.dispatch("modal.hide")}.bind(this)),this.element.on("hidden.bs.modal",function(){this.dispatch("modal.hidden")}.bind(this)),this.element.find('a[data-toggle="tab"]').on("show.bs.tab",function(e){var t,i;t=$(e.target),i=this.getTab(t.data("name")),this._animateTab(t),this.dispatch("tab.show",i)}.bind(this)),this.element.find('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t,i;t=$(e.target),i=this.getTab(t.data("name")),this.dispatch("tab.shown",i)}.bind(this)),this},_addChild:function(e){var t,i,n;void 0===e.name&&(e.name=e.label.replace(/\s/g,"")),t=e.name+"_"+this.name,i='<li>                            <a class="flex-vc-hc" data-toggle="tab" href="#'+t+'" data-href="#'+t+'" data-name="'+e.name+'">                                '+e.label+"                            </a>                        </li>",n='<div class="tab-pane" id="'+t+'"></div>',this._tabs[t]={};for(var s in e)this._tabs[t][s]=e[s];this._tabs[t].tab=$(i),this._tabs[t].tabAnchor=this._tabs[t].tab.find("a"),this._tabs[t].pane=$(n),e.renderInTabList&&this._tabList.appendChild(this._tabs[t].tab[0]),this.tabContent.appendChild(this._tabs[t].pane[0]),this._renderTab(this._tabs[t])},activate:function(e){this._activatedBy=e,Widget.prototype.activate.call(this),this.element.modal("show")},deactivate:function(){return Widget.prototype.deactivate.call(this),this.element.modal("hide"),this},destroy:function(){this.dialog=null,this._tabList=null,this._paneList=null,this.tabContent=null,this._tabs=null,this.childs=null,this._timeouts.forEach(function(e){clearTimeout(e)}),Widget.prototype.destroy.call(this)},isShown:function(){return this.element.data("bs.modal").isShown},showMessage:function(e){var t;this.hideMessage(),"error"===e.type&&(e.type="danger"),t='<div class="alert alert-'+e.type+'">',t+=e.content,t+="</div>",$(this.dialog).prepend(t)},hideMessage:function(){$(this.dialog).find("> .alert").remove()},selectTabByName:function(e){var t=e+"_"+this.name;return Object.keys(this._tabs).indexOf(t)>=0&&(this._showTab(this._tabs[t]),this._tabs[t].tabAnchor.tab("show")),this},_showTab:function(e){e.tabAnchor.tab("show")},_animateTab:function(e){e.parent().addClass("animate"),this._timeouts.push(setTimeout(function(){e.parent().removeClass("animate")},1e3))},_renderTab:function(e){this._setModalWidth(e.modalWidth),e.widget.element.detach(),this.appendChild(e.widget),e.widget.render(e.pane)},_setModalWidth:function(e){return void 0!==e&&(!Helpers.App.isMobile()||$(window).width()>parseInt(e.split("p")[0]))?this.dialog.style.width=e:this.dialog.style.width="100%",this},getTab:function(e){var t;return t=e+"_"+this.name,this._tabs[t]?this._tabs[t]:null},disableClose:function(){this.closeDisabled=!0,this.$close.hide()},enableClose:function(e){this.closeDisabled=!1,e===!0&&this.$close.show()},disableTabs:function(){var e=this.element.find('a[data-toggle="tab"]');e.each(function(e,t){t.removeAttribute("href"),t.removeAttribute("data-toggle")})},enableTabs:function(){var e=this.element.find("a.flex-vc-hc");e.each(function(e,t){t.setAttribute("href",t.getAttribute("data-href")),t.setAttribute("data-toggle","tab")})},deactivateTabs:function(){$(this._tabList).find("li").removeClass("active")}}}),Class(UI,"SsoModal").inherits(Widget).includes(CustomEventSupport,BubblingSupport,GenericDestroySupport,Translator)({TAB_LOGIN:"loginTab",TAB_SIGNUP:"signupTab",TEXT_TAB_SIGNUP:"Sign Up",TEXT_TAB_LOGIN:"Log In",prototype:{tabbedModal:null,ssoLoginForm:null,tabNameToShow:null,init:function(e){Widget.prototype.init.call(this,e),this.ssoLoginForm=new UI.SsoLoginModal({userFormClass:UI.UserForm,recaptchaKey:window.recaptchaKey}),this.ssoSignupForm=new UI.SsoSignupModal({userFormClass:UI.UserForm}),this.tabbedModal=new UI.TabbedModal({name:"ssoModal",childs:[{name:UI.SsoModal.TAB_SIGNUP,label:this.constructor.TEXT_TAB_SIGNUP,renderInTabList:!0,modalWidth:"478px",widget:this.ssoSignupForm},{name:UI.SsoModal.TAB_LOGIN,label:this.constructor.TEXT_TAB_LOGIN,renderInTabList:!0,modalWidth:"478px",widget:this.ssoLoginForm}]}),this.appendChild(this.tabbedModal),this._bindEvents(),this.initGoogleSso()},_bindEvents:function(){var e=this;this.tabbedModal.bind("modal.shown",function(){this._modalShownHandler(),this.dispatch("modal.shown")}.bind(this)),this.tabbedModal.bind("modal.hidden",function(){this.tabbedModal.childs.forEach(function(e){e.widget.deactivate()}),this.dispatch("modal.hidden")}.bind(this)),this.tabbedModal.bind("modal.hide",function(){e.dispatch("modal.hide")}),this.tabbedModal.bind("tab.shown",function(e){this.tabbedModal.childs.forEach(function(t){t.name===e.data.name&&t.widget.activate()})}.bind(this)),this.ssoLoginForm.bind("login.message",function(e){e.data&&this.tabbedModal.showMessage(e.data)}.bind(this)),this.ssoLoginForm.bind("login.deactivate",function(e){this.deactivate()}.bind(this)),this.ssoLoginForm.bind("signup.show",function(e){this.tabbedModal.selectTabByName(UI.SsoModal.TAB_SIGNUP)}.bind(this)),this.ssoLoginForm.bind("form.success",function(e){this.dispatch("login.form.success")}.bind(this)),this.ssoLoginForm.bind("bookmarks.retrieved",function(e){this.dispatch("login.bookmarks.retrieved",e.data)}.bind(this)),this.ssoLoginForm.bind("login.autosignin",function(e){this.activate(UI.SsoModal.TAB_LOGIN)}.bind(this)),this.ssoSignupForm.bind("signup.message",function(e){e.data&&this.tabbedModal.showMessage(e.data)}.bind(this)),this.ssoSignupForm.bind("login.show",function(e){this.tabbedModal.selectTabByName(UI.SsoModal.TAB_LOGIN)}.bind(this)),this.ssoSignupForm.bind("form.success",function(e){return"google"===e.data.authenticated_by?void this.dispatch("login.form.success"):void this.dispatch("signup.form.success")}.bind(this)),this.ssoSignupForm.bind("show.login.no-close",function(e){this.dispatch("show.login.no-close")}.bind(this)),this.ssoSignupForm.bind("login.success",function(e){this.deactivate()}.bind(this)),this.ssoSignupForm.bind("signup.emailAvailable",function(e){var t="";e.data!==!0&&(t=e.data),this.ssoLoginForm.setEmail(t)}.bind(this)),this.ssoLoginForm.bind("accountUnusualActivity",function(){e.deactivate(),e._showUnusualActivityModal()}),this._bindModalToggleEvents(),this._bindMessageEvents(),this._bindAutoSigninEvents()},_bindModalToggleEvents:function(){var e=Utils.bindFn(this);this.ssoSignupForm.bind("ssoModal.disableModal",e(this.disableModal)),this.ssoSignupForm.bind("ssoModal.enableModal",e(this.enableModal)),this.ssoSignupForm.bind("ssoModal.deactivate",e(this.deactivate)),this.ssoLoginForm.bind("ssoModal.disableModal",e(this.disableModal)),this.ssoLoginForm.bind("ssoModal.enableModal",e(this.enableModal)),this.ssoLoginForm.bind("ssoModal.deactivate",e(this.deactivate))},_bindMessageEvents:function(){var e=Utils.bindFn(this);this.ssoSignupForm.bind("ssoModal.hideMessage",e(this.hideModalMessage)),this.ssoLoginForm.bind("ssoModal.hideMessage",e(this.hideModalMessage))},_bindAutoSigninEvents:function(){var e=Utils.bindFn(this);this.ssoLoginForm.bind("login.autosignin.enabled",e(this.enableAutoSignin)),this.ssoLoginForm.bind("login.autosignin.enabled",e(this.hideSsosContainer))},activate:function(e){return Widget.prototype.activate.call(this),this.tabNameToShow=UI.SsoModal.TAB_SIGNUP,this._shouldForceLogInTab()&&(this.tabNameToShow=UI.SsoModal.TAB_LOGIN),e?(this.tabNameToShow=e,this.ssoLoginForm.hideContinueHeader(),this.ssoSignupForm.hideContinueHeader()):(this.ssoLoginForm.showContinueHeader(),this.ssoSignupForm.showContinueHeader()),this.tabbedModal.hideMessage(),this.tabbedModal.activate(),e===UI.SsoModal.TAB_SIGNUP&&Helpers.GlobalEventTracker.track("signup.fullModalOpened"),this},deactivate:function(){return Widget.prototype.deactivate.call(this),this.tabbedModal.enableClose(!1),this.tabbedModal.deactivate(),this},destroy:function(){this.tabbedModal.destroy(),this.genericDestroy()},showMessage:function(e){e.contentForceLogIn&&this._shouldForceLogInTab()&&(e.content=e.contentForceLogIn),this.tabbedModal.showMessage(e)},showTab:function(e){this.tabbedModal.childs.forEach(function(t){t.name===e&&t.widget.activate()}),this.tabbedModal.selectTabByName(e)},login:function(){this.ssoLoginForm.login()},_modalShownHandler:function(){this.tabNameToShow&&(this.showTab(this.tabNameToShow),this.tabNameToShow=null)},disableClose:function(){this.tabbedModal.disableClose()},enableClose:function(){this.tabbedModal.enableClose(!0)},_shouldForceLogInTab:function(){return!(!window.placeitTrackerId&&!$.cookie("pl_tracker_id_v2"))},_showUnusualActivityModal:function(){var e=new UI.UnusualActivityModal({name:"unusualActivityModal",dismissable:!0});e.render($(document.body)).activate()},disableModal:function(){return this.disableClose(),this.tabbedModal.disableTabs(),this.ssoLoginForm.disableSubmit(),this.ssoLoginForm.disableSsosButtons(),this.ssoSignupForm.disableSubmit(),this.ssoSignupForm.disableSsosButtons(),this},enableModal:function(){return this.enableClose(),this.tabbedModal.enableTabs(),this.ssoLoginForm.enableSubmit(),this.ssoLoginForm.enableSsosButtons(),this.ssoSignupForm.enableSubmit(),this.ssoSignupForm.enableSsosButtons(),this},hideModalMessage:function(){return this.tabbedModal.hideMessage(),this},hideSsosContainer:function(){return this.ssoLoginForm.hideSsosContainer(),this.ssoSignupForm.hideSsosContainer(),this},enableAutoSignin:function(){return this.ssoSignupForm.enableAutoSignin(),this},enableGooglePopupFlow:function(){this.ssoSignupForm.enableGooglePopup(),this.ssoLoginForm.enableGooglePopup()},initGoogleSso:function(){var e=Service.Sso.getInstance();$(window).on("load",function(){e.initGoogleSso().then(function(){})["catch"](function(e){return Promise.resolve(e)})})}}}),Class(UI,"UnusualActivityModal").inherits(UI.SimpleModal).includes(Translator)({elementClass:"unusual-activity",TITLE:"We detected unusual activity in your account",BODY:"To protect your Placeit account, we signed you out from all devices. Check your registered email and follow the instructions to log back in.<br><br>If you didn't receive an email, be sure to check the Spam folder.",prototype:{init:function(e){UI.SimpleModal.prototype.init.call(this,e),this.setHeaderContent('<img src="/assets/warning.svg"/>').setContent('<h4 class="title">'+this.constructor.TITLE+'</h4><p class="body">'+this.constructor.BODY+"</p>").addCloseButton()}}}),UI.Navigation={},Class(UI.Navigation,"NavBar").inherits(Widget).includes(BubblingSupport,SaleSupport)({BLANK_CHAR:"&nbsp;",prototype:{myDriveDownloads:null,currentContext:{},resizeDebounce:null,desktopMenu:null,mobileMenu:null,init:function(e){Widget.prototype.init.call(this,e),this.$accountInfo=this.element.find(".account"),this.$adminContainer=this.element.find(".admin-container"),this.$mobileLoginButton=this.element.find("#mobileLoginLink"),this.$loginButton=this.element.find("#loginLink"),this.$signupDropdown=this.element.find(".signup-dropdown"),this.$mobileSignupButton=this.element.find("#mobileSignup"),this.$signupButton=this.element.find(".signup a"),this.$signupArea=this.element.find(".signup"),this.$bookmarksTab=this.element.find(".bookmarks-tab"),this.$searchContainer=this.element.find("#searchContainer"),this.$userMenuIn=this.element.find(".flex-container.in"),this.$userMenuOut=this.element.find(".flex-container.out"),this.$burgerMenu=this.element.find(".burger"),this.$burgerButton=this.element.find("#burger-button"),this.$foryouAccountButton=this.element.find("#for-you-account-button"),this.$closeButton=this.element.find("#close-button"),this.$pricing=this.element.find(".pricing"),this.$logout=this.element.find(".logout-button"),this.$navbarMain=this.element.parent(),this.isAboutPage=e.noPricing,this.isAndroid=/Android/.test(navigator.appVersion),this.$categories=this.element.find(".category"),this.$activeCategory=this.element.find(".category.active"),this.$accountBox=this.element.find(".account-box"),this.$accountLink=this.element.find(".account-box a"),this.$body=$(document.body),this.$extraPricing=this.element.find(".extra-pricing-link"),this.isAboutPage&&this.$pricing.hide(),this.appendChild(new UI.MyDriveDownloads({name:"myDriveDownloads",element:this.element.find(".past-downloads-item-holder")})),e.context.isLogged&&this.myDriveDownloads.cloneProcessingFeedbackTo(this.element[0],"my-drive__processing-mobile-feedback"),this.appendChild(new UI.SsoModal({name:"ssoModal"})),this.initMenu(),this.appendChild(new UI.PricingButton({name:"pricingButton",element:this.$pricing})),this.appendChild(new UI.EnvatoUsername({name:"envatoUsername",element:this.element.find(".username-container")})),this.appendChild(new UI.UserTypeBanner({name:"userTypeBanner",element:this.element.find(".user-type-banner")})),this.updateStatus(e.context),this.bindings(),envatoSso.configure({serverHost:window.sso_hostname})},initMenu:function(){var e=this;if(Helpers.App.isMobile()){if(e.mobileMenu)return;e.appendChild(new UI.Navigation.HamburgerMenu({name:"mobileMenu",burgerTarget:e.element,element:e.element.find(".hamburger-nav-menu")}))}else e.appendChild(new UI.Navigation.DesktopMenu({name:"desktopMenu",element:e.element.find("ul.categories-list")}))},bindings:function(){var e=this;$(document).bind("click",function(t){e.$loginButton.parent().removeClass("open"),e.$signupButton.parent().removeClass("open")}),this.bind("active",function(t){this.categoryList.hasDefaultElement!==!0&&(this.$navbarMain.addClass("height-fixed"),e.$navbarMain.addClass("has-active-item"))}),this.bind("inactive",function(t){this.categoryList.hasDefaultElement!==!0&&(this.$navbarMain.removeClass("height-fixed"),e.$navbarMain.removeClass("has-active-item"))}),this.$logout.bind("click",function(e){e.preventDefault(),Helpers.GlobalEventTracker.track("user:logout"),this.dispatch("logout"),Helpers.App.logout();try{UI.Grid.dispatch("user:logout"),UI.CustomExperience.Grid.dispatch("user:logout"),UI.SimilarStagesGrid.dispatch("user:logout"),UI.SmartTemplate.SavedConfigurations.dispatch("user:logout"),UI.RelatedTemplates.Controller.dispatch("user:logout"),Helpers.StageType.getSmartTemplateClass().dispatch("user:logout")}catch(t){}}.bind(this)),e.$burgerButton.on("click",function(){e.$body.addClass("open-sidemenu"),e.userTypeBanner.sendShownEvent(),e.dispatch("sideMenu.open")}),e.$foryouAccountButton.on("click",function(){e.$body.addClass("open-sidemenu"),e.userTypeBanner.sendShownEvent(),e.dispatch("sideMenu.open")}),e.$closeButton.on("click",function(){e.closeHamburgerMenu()}),e.$body.find("#backdrop-sidemenu").on("click",function(){e.closeHamburgerMenu()}),e.$accountLink.on("click",function(){e.closeHamburgerMenu()}),e.$loginButton.on("click",function(t){e.ssoModal.login()}),e.$mobileLoginButton.on("click",function(t){e.ssoModal.login()}),e.$signupButton.on("click",function(t){e.showSignupModal()}),e.$mobileSignupButton.on("click",function(t){e.ssoModal.activate(UI.SsoModal.TAB_SIGNUP)}),e.$extraPricing&&this._configureExtraPricingLink(),e.ssoModal.bind("signup.form.success",function(){var t=Helpers.App.getUser();e.currentContext.isLogged=!0,e.$accountInfo.find(".sso-username").html(t.username),e.updateStatus(),e.updateUserTypeBanner(),e.myDriveDownloads.restart(),e.myDriveDownloads.cloneProcessingFeedbackTo(e.element[0],"my-drive__processing-mobile-feedback"),e.dispatch("signup.success")}).bind("show.login",function(t){e.$loginButton.click()}).bind("show.login.no-close",function(){e.ssoModal.disableClose(),e.ssoModal.activate(UI.SsoModal.TAB_LOGIN)}),e.ssoModal.bind("login.form.success",function(t){var i=Helpers.App.getUser();e.currentContext.isLogged=!0,e.currentContext.isAdmin=Helpers.App.isAdmin(),e.$accountInfo.find(".sso-username").html(i.username),e.updateStatus(),e.updateUserTypeBanner(),Helpers.App.getSubscription()!==!1&&e.$pricing.addClass("has-subscription"),e.myDriveDownloads.restart(),e.myDriveDownloads.cloneProcessingFeedbackTo(e.element[0],"my-drive__processing-mobile-feedback"),console.log("navbar login success"),e.dispatch("login.success")}).bind("login.bookmarks.retrieved",function(t){e.currentContext.hasBookmarks=t.data.count>0,e.updateStatus()}).bind("modal.shown",function(){e.dispatch("sso.modal.shown")}),Helpers.App.isMobile()&&e.ssoModal.bind("modal.shown",function(){var t=e.$body.hasClass("open-sidemenu");t&&(e.wasSidemenuOpen=!0),e.$body.removeClass("open-sidemenu")}).bind("modal.hide",function(){var t=0!==Helpers.App.getUser().id;!t&&e.wasSidemenuOpen&&(e.wasSidemenuOpen=!1,e.$body.addClass("open-sidemenu"))}),e.avoidAndroidKeyboard(),Helpers.App.getSubscription()!==!1&&this.$pricing.addClass("has-subscription"),e.$accountInfo.mouseenter(function(){e.myDriveDownloads.hideTooltip(),e.userTypeBanner.sendShownEvent(),e.dispatch("accountInfo-open")}),e.$accountInfo.mouseleave(function(){e.dispatch("accountInfo-close")}),e.userTypeBanner.bind("updated",function(e){Helpers.App.setUserType(e.data.user_type)})},updateStatus:function(e,t){var i=this,n=Helpers.App.getSubscription(),s=Helpers.App.getUser();e?i.currentContext=e:e=i.currentContext,i.closeHamburgerMenu(),this.pricingButton.update(n),e.isLogged?(i.$userMenuOut.hide(),i.$userMenuIn.css("display","flex"),i.$burgerButton.addClass("logged-in"),i.$foryouAccountButton.addClass("logged-in"),i.$accountBox.addClass("logged-in"),e.hasBookmarks?i.$bookmarksTab.css("display",""):i.$bookmarksTab.hide(),e.isAdmin?i.$adminContainer.show():i.$adminContainer.hide(),(t||$.cookie("pl_processing_tracker"))&&i.myDriveDownloads.update(null,t),this.envatoUsername.update(s.username,n)):(i.$bookmarksTab.hide(),i.$burgerButton.removeClass("logged-in"),i.$foryouAccountButton.removeClass("logged-in")),i.$searchContainer.hide(),i.showSearchBar(e.pageName)},_configureExtraPricingLink:function(){var e=this;Helpers.App.isPricingPage()===!0?e.$extraPricing.hide():e.$extraPricing.on("click",function(e){var t=Helpers.App.getUserType();Helpers.GlobalEventTracker.pricingModalStillshots({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id,button_clicked:e.target,user_type_name:t.name,user_type_id:t.id})})},showSearchBar:function(e){var t=["stage","search","custom_experiences","custom_pages"],i=Helpers.StageType.pageType().header_type;t.indexOf(e)>-1&&("header-1"===i||"header-2"===i)&&this.$searchContainer.show()},autoModal:function(e){var t=this;if("subscription"==e||"pack"==e||"purchase"==e){var i=function(){switch(t.ssoModal.unbind("signup.form.success",i),t.ssoModal.unbind("login.form.success",i),e){case"subscription":Helpers.App.getSubscription()||t.dispatch("activate-pricing");break;case"pack":Helpers.App.getSubscription()||t.dispatch("activate-pricing-coupon");break;case"purchase":t.dispatch("activate-purchase")}};"purchase"==e&&t.dispatch("not-logged"),t.ssoModal.bind("signup.form.success",i),t.ssoModal.bind("login.form.success",i)}},avoidAndroidKeyboard:function(){var e=this;e.isAndroid&&Helpers.App.isMobile()&&e.$signupButton.on("click",function(t){e.$signupArea.toggleClass("floatUp")})},instantiateNotLoggedInModal:function(){var e=this;e.ssoModal.activate()},showSubscribeMailingModal:function(){if(Helpers.App.isLoggedIn()!==!1){var e=Helpers.App.getUser();e.placeitPromotionNotifications!==!0&&("undefined"==typeof this.subscribeMailingModal?(this.appendChild(new UI.SubscribeMailingModal({name:"subscribeMailingModal"})),this.subscribeMailingModal.activate()):this.subscribeMailingModal.activate())}},showTooltipError:function(e){this.myDriveDownloads.showError(e)},_sortList:function(e){Array.isArray(e.submenu)!==!1&&e.submenu.sort(function(e,t){return e.order-t.order})},_addAnchorLink:function(e){e.content=e.title,Array.isArray(e.submenu)!==!0&&(e.content=$("<a></a>").attr("title",e.anchor_title).attr("href",e.url).html(e.title))},_addSubheading:function(e){if(Array.isArray(e.submenu)!==!1&&"root"!==e.value){var t={title:e.anchor_title,url:e.url,slug:"0",anchor_title:e.anchor_title,order:"0",submenu:null,isHeading:!0};e.submenu.unshift(t)}},_treeWalker:function(e,t,i){var n=function s(e){i(e),Array.isArray(e[t])!==!1&&e[t].forEach(function(e){s(e)})};n(e)},_setupList:function(){var e=this,t={value:"root",submenu:e.record};e._treeWalker(t,"submenu",function(t){e._sortList(t),e._addSubheading(t),e._addAnchorLink(t),e._setActive(t)}),e.record=t},_setActive:function(e){var t=this,i=null,n=window.location.href;i=-1!==n.indexOf("page")||-1!==n.indexOf("sortby")?t.clearUrl(window.location):window.location.href,e.url&&i===window.location.origin+e.url&&(e.isActive=!0)},clearUrl:function(e){var t=e.search.replace(/^\?/,"").split("&").map(function(e){return e.split("=")}).filter(function(e){return"page"!==e[0]}).map(function(e){return e.join("=")}).join("&");return t=t.replace(/^\?/,"").split("&").map(function(e){return e.split("=")}).filter(function(e){return"sortby"!==e[0]}).map(function(e){return e.join("=")}).join("&"),t.length>0&&(t="?"+t),e.origin+e.pathname+t},showSignupModal:function(){this.ssoModal.activate(UI.SsoModal.TAB_SIGNUP)},updateUserTypeBanner:function(){this.userTypeBanner.update()},closeHamburgerMenu:function(){this.$body.removeClass("open-sidemenu"),this.dispatch("sideMenu.close")}}}),Class(UI.Navigation,"DesktopMenu").inherits(Widget).includes(BubblingSupport)({elementClass:"desktop-menu",OVERFLOW_CLASS:"fix-to-right",prototype:{init:function(e){var t=this;Widget.prototype.init.call(this,e),t._setBinds()},addBadge:function(e,t,i,n){if(e&&t){var s=this,r=i||"";"before"===n?$('a[href="'+t+'"]',s.element).before('<a href="'+t+'"><span class="pill '+r+'">'+e+"</span></a>"):$('a[href="'+t+'"]',s.element).after('<a href="'+t+'"><span class="pill '+r+'">'+e+"</span></a>")}},addAnimatedBadge:function(e,t,i,n){var s='<a href="'+e+'"><object class="'+t+'" data="'+i+'" type="image/svg+xml" style="z-index: -1; pointer-events: none;"></object></a>';"before"===n?$('a[href="'+e+'"]',this.element).before(s):$('a[href="'+e+'"]',this.element).after(s)},_checkOverflow:function(e){var t=this,i=e.currentTarget,n=$(e.currentTarget).find(".dropdown-menu"),s=$(window),r=i.offsetLeft,o=n.width(),a=s.width();r+o>a&&n.addClass(t.constructor.OVERFLOW_CLASS)},_onMouseLeave:function(e){this.dispatch("menu-close")},_onMouseOver:function(e){this.dispatch("menu-open"),this._checkOverflow(e)},_setBinds:function(){this.element.bind("mouseover",this._onMouseOver.bind(this)),this.element.bind("mouseleave",this._onMouseLeave.bind(this)),this.element.find(">li").bind("mouseover",this._checkOverflow.bind(this))}}}),Class(UI.Navigation,"HamburgerMenu").inherits(Widget).includes(BubblingSupport)({html:'<div>               <div class="close-button-container">                   <div class="close-button">                       <!--?xml version="1.0" encoding="UTF-8"?-->                       <svg width="15px" height="15px" viewBox="0 0 15 15" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">                           <defs></defs>                           <g id="Page-HambClose-black" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">                               <g id="HambClose-black" fill="#000000">                                   <rect id="Rectangle" transform="translate(7.424621, 7.424621) rotate(-315.000000) translate(-7.424621, -7.424621) " x="-2.0753788" y="6.4246212" width="19" height="2" rx="1"></rect>                                   <rect id="Rectangle" transform="translate(7.424621, 7.424621) scale(-1, 1) rotate(-315.000000) translate(-7.424621, -7.424621) " x="-2.0753788" y="6.4246212" width="19" height="2" rx="1"></rect>                               </g>                           </g>                       </svg>                   </div>                   <div class="separator"></div>               </div>           </div>',elementClass:"hamburger-nav-menu",BURGER_ICON:'<div class="nav-menu-burger-button" >                      <?xml version="1.0" encoding="UTF-8"?>                      <svg width="16px" height="14px" viewBox="0 0 16 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">                          <g id="Page-HambIcon" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">                              <g id="HambIcon" class="svg-burger-button" fill="#FFFFFF">                                  <rect id="Rectangle1" x="0" y="0" width="16" height="2" rx="1"></rect>                                  <rect id="Rectangle2" x="0" y="6" width="16" height="2" rx="1"></rect>                                  <rect id="Rectangle3" x="0" y="12" width="16" height="2" rx="1"></rect>                              </g>                          </g>                      </svg>                  </div>',LINK:"<li>               <a></a>           </li>",CLOSED_ICON:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="8" fill="none" viewBox="0 0 12 8">                    <path fill="#303030" d="M.264.305c-.364.385-.34 1.107 0 1.5l.632.731 2.74 3.172 1.717 1.987c.351.407.944.407 1.295 0l.633-.732 2.74-3.172 1.717-1.987c.363-.417.336-1.075 0-1.499-.333-.42-.957-.392-1.296 0l-.632.732-2.74 3.172c-.572.66-1.146 1.326-1.717 1.987h1.295l-.632-.732-2.74-3.172L1.559.305C1.199-.112.63-.084.264.305z"/>                </svg>',OPEN_ICON:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="8" fill="none" viewBox="0 0 12 8">                    <path fill="#303030" d="M11.736 7.695c.364-.385.34-1.107 0-1.5l-.632-.731-2.74-3.172L6.647.305c-.351-.407-.944-.407-1.295 0l-.633.732-2.74 3.172L.262 6.196c-.363.417-.336 1.075 0 1.499.333.42.957.392 1.296 0l.632-.732 2.74-3.172c.572-.66 1.146-1.326 1.717-1.987H5.352l.632.732 2.74 3.172 1.717 1.987c.36.417.929.389 1.295 0z"/>                </svg>',prototype:{hasBinded:!1,init:function(e){var t=this;Widget.prototype.init.call(this,e),this.isMobile=Helpers.App.isMobile(),t.$body=$(document.body),t.menuList=t.element.find("ul.hamburger-list"),t.closeButton=t.element.find(".close-button"),t.burgerButton=t.$body.find(".nav-menu-burger-button svg"),t._bindings()},addBadge:function(e,t,i){if(e&&t){var n=this,s=i||"";$('a[href="'+t+'"]',n.element).after('<a href="'+t+'"><span class="pill '+s+'">'+e+"</span></a>")}},close:function(){$(document.body).removeClass("open-hamburger-menu"),$(".submenu-open").toggleClass("submenu-open"),this.dispatch("sideMenu.close")},open:function(){$(document.body).addClass("open-hamburger-menu"),this.dispatch("sideMenu.open")},_bindings:function(){var e=this,t=Utils.bindFn(this);e.$body.find("#backdrop-sidemenu").on("click",t(e.close)),e.burgerButton.bind("click",e._onDemandBinds.bind(e)),e.burgerButton.bind("click",t(e.open)),e.closeButton.bind("click",t(e.close))},_onDemandBinds:function(){var e=this;e.hasBinded||(e.menuList.find("li.category-heading").bind("click",function(e){var t=$(e.currentTarget);t.toggleClass("submenu-open"),t.parent().toggleClass("submenu-open"),t.find("ul.children").addClass("hidden"),t.find(".active").toggleClass("active")}),e.menuList.find("ul.list.placeit-widget li.submenu").bind("click",e._listCollapseHandler).bind("click",e._openSubmenu),e.hasBinded=!0)},_openSubmenu:function(e){var t;e.currentTarget?(t=$(e.currentTarget),e.stopPropagation()):t=e.parents("ul.hamburger-list>li"),t.find(">.item.placeit-widget").toggleClass("active"),t.find("ul.children").toggleClass("hidden")},_listCollapseHandler:function(e){var t=$("div.active");t.parent().attr("id")!==$(e.currentTarget).attr("id")&&(t.next("ul.children").toggleClass("hidden"),t.toggleClass("active"),$(e.currentTarget).animate({scrollTop:0},"fast"))}}}),Class(UI,"SimpleSlider").inherits(Widget).includes(GenericDestroySupport)({html:"<div></div>",elementClass:"simple-slider-container",NEXT_ARROW:'<div class="simple-slider-arrow simple-slider-next">        <span class="angle-right-purple">        </span>    </div>',PREV_ARROW:'<div class="simple-slider-arrow simple-slider-prev">        <span class="angle-right-purple">        </span>    </div>',prototype:{isMobile:!1,slides:[],init:function(e){Widget.prototype.init.call(this,e);var t=this;this.element.html(this.content),this.element.append(this.constructor.PREV_ARROW),this.element.append(this.constructor.NEXT_ARROW),this.$carousel=this.element.find(".carousel"),this.$next=this.element.find(".simple-slider-next"),this.$prev=this.element.find(".simple-slider-prev"),this._boundDispatchEvent=this._dispatchEvent.bind(this),this._boundScrollHandler=this._scrollHandler.bind(this),this._boundNextSlide=this.nextSlide.bind(this),this._boundPrevSlide=this.prevSlide.bind(this),this.$carousel.addClass("simple-slider"),this.slides=[],this.$carousel.children().each(function(e){t.slides.push(this),this.setAttribute("slide-num",e)}),this.currentSlide=this.slides[0],this.currentSlideNum=0,this._bindEvents()},nextSlide:function(){var e=(this.currentSlideNum+1)%this.slides.length;this.goToSlide(e)},prevSlide:function(){var e=this.currentSlideNum-1;0>e&&(e=this.slides.length-1),this.goToSlide(e)},goToSlide:function(e,t){var i=this.slides[e];t=t?t:500,e!==this.currentSlideNum&&(this.currentSlide=i,this.currentSlideNum=e,this.$carousel.animate({scrollLeft:i.offsetLeft},t,this._boundDispatchEvent));
},_dispatchEvent:function(){this.dispatch("carousel.afterChange",{feature:parseInt(this.currentSlide.getAttribute("data-feature")),category:this.currentSlide.getAttribute("data-category")})},_scrollHandler:function(){var e=this;clearTimeout(this._debouncedScroll),this._debouncedScroll=setTimeout(function(){e._setCurrentSlide()},100)},_setCurrentSlide:function(){var e=this,t=this.$carousel.get(0).scrollLeft+this.$carousel.get(0).offsetWidth/2;this._pastPosition!==t&&this.$carousel.children().each(function(i){var n=this.offsetLeft,s=this.offsetLeft+this.offsetWidth;return t>=n&&s>=t?(e._pastPosition=n,e.goToSlide(i,100),!1):void 0})},_bindEvents:function(){this.$carousel.bind("scroll",this._boundScrollHandler),this.$next.bind("click",this._boundNextSlide),this.$prev.bind("click",this._boundPrevSlide)},destroy:function(){this._boundDispatchEvent=null,this._boundScrollHandler=null,this._boundNextSlide=null,this._boundPrevSlide=null,this.$carousel.stop(!0,!0),clearTimeout(this._debouncedScroll),this.genericDestroy()}}}),Module(Helpers,"SubscriptionHelper")({TEXT_TAX_MESSAGE_NOT_INCLUDED:"All prices in {{currency_label}}.",TEXT_TAX_MESSAGE_INCLUDED:"Plus {{amount}} for {{taxType}}. All Prices in {{currency_label}}",TEXT_TAX_MESSAGE_VAT_EXEMPT:"VAT Exempt. All Prices in {{currency_label}}.",CHURN_STATE_TEXT:"canceled",_refreshSubscription:function(e){$.ajax({url:"/subscriptions/show",type:"get",dataType:"json",success:function(t){Helpers.App.setSubscription(t),e(t)}})},isChurned:function(){var e=Helpers.App.getSubscription();return e?e.recurly_state===Helpers.SubscriptionHelper.CHURN_STATE_TEXT:!1},shouldDisableSwitchPlans:function(){var e=Helpers.App.getSubscription();if(!e)return!0;if(e.plan.disabled)return!0;if(Helpers.SubscriptionHelper.isChurned()===!0)return!0;if("in"===e.plan.country_code)return!0;var t=e.is_brazilian,i="BRL"===recurlyConfig.currency;return t!==i},prototype:{_applyCouponDiscount:function(e,t){return"percent"===e.type?t=t*(100-e.amount)/100:(t-=e.amount[window.recurlyConfig.currency],0>t&&(t=0)),Math.round(100*t)/100},_discountAppliesForPlanCode:function(e,t){var i=!1;return e&&(i=e.planCodes.length?!!(e.planCodes.indexOf(t)>-1):!0),i},_applyCustomPriceDiscount:function(e){var t;return t=20,price=e*(100-t)/100,price},_isSubscriptionValid:function(e){var t,i=!1;return e?(t=new Date(1e3*e.ends_at),"active"===e.recurly_state?i=!0:"canceled"===e.recurly_state&&t<new Date&&(i=!0),i):i},_subscriptionCanDownload:function(e,t){var i,n,s,r,o,a;return r=!1,n=Helpers.StageType.isFusionVideo(),e?(i=new Date(1e3*e.ends_at),s="active"===e.recurly_state||"canceled"===e.recurly_state&&i>new Date,o=e.remaining_downloads>0,a=e.video_purchases>0,1==s&&(n&&a||!n&&o||!n&&t)&&(r=!0),r):r},_priceWithSubscription:function(e,t,i){var n,s,r,o;return n=!1,r=Helpers.StageType.isFusionVideo(),s=Helpers.App.getSubscription(),o=Helpers.StageType.getCustomPrice(),s&&this._subscriptionCanDownload(s,i)?this._purchaseableWithSubscription(e,t,s,r)&&(n=this._purchaseableWithSubscription(e,t,s,r)):s&&this._isSubscriptionValid(s)&&o&&(n=this._applyCustomPriceDiscount(o)),n},_purchaseableWithSubscription:function(e,t,i){var n=Helpers.StageType.isFusionVideo();Helpers.StageType.isLogo(),Helpers.StageType.getCustomPrice();return i&&!i.is_paused?1==n?i.video_purchases>0&&i.plan.allowed_packages[e+":"+t]:"Comp"!=i.plan.name&&Helpers.Resolutions.isComp()===!1?i.remaining_downloads>0&&i.plan.allowed_packages[e+":"+t]:i.plan.allowed_packages[e+":"+t]:!1},getTaxMessage:function(e){var t=this,i={notIncluded:this.constructor.TEXT_TAX_MESSAGE_NOT_INCLUDED,included:this.constructor.TEXT_TAX_MESSAGE_INCLUDED,vatExempt:this.constructor.TEXT_TAX_MESSAGE_VAT_EXEMPT};return this._taxRequestInProgress&&this._taxRequestInProgress.cancel(),new Promise(function(n,s){taxCancelablePromise=P.cancelable(Helpers.Price.tax.bind(null,window._pl_country,e)),t._taxRequestInProgress=taxCancelablePromise(),t._taxRequestInProgress.then(function(e){var s,r;t._taxRequestInProgress=null,r="VAT",s=i.notIncluded,"AU"===window._pl_country&&(r="GST"),e.amount>0&&""!==window._pl_vat_number?s=i.vatExempt:e.amount>0&&(s=i.included,s=s.replace("{{amount}}",window.currencyHelper.getSymbol(recurlyConfig.currency)+e.amount.toFixed(2)),s=s.replace("{{taxType}}",r)),n(s)})["catch"](function(){t._taxRequestInProgress=null,s(i.notIncluded)})})},_getGetOrdinal:function(e){var t=["th","st","nd","rd"],i=e%100;return e+(t[(i-20)%10]||t[i]||t[0])},_refreshSubscription:function(e){this.constructor._refreshSubscription(e)},signRequestWithRecurly:function(e,t,i){var n,s;if(n=null,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SUBSCRIPTION)&&(n=Helpers.CouponHelper.getCode()),"undefined"==typeof e.recurly_uuid)return!1;s={plan_recurly_uuid:e.recurly_uuid},n&&this._discountAppliesForPlanCode(t,e.recurly_uuid)?s.coupon_code=n:delete s.coupon_code;var r={url:"/subscriptions/sign",type:"post",data:$.extend(!0,{},s),dataType:"json",success:function(e){i(e)}},o=Helpers.RequestConfig.prepareConfig(r);$.ajax(o)},_calculateAnnualSavePercent:function(e){var t=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),i=12,n=parseInt(t.amount_in_cents,10)/100,s=null,r=null;Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_ANNUAL)&&(r=Helpers.CouponHelper.getDuration().length,r||(r="forever"===Helpers.CouponHelper.getDuration().type?12:1),s=Helpers.CouponHelper.calculatePrice(n),i-=r);var o=n*i+s*r;if(0===o)return 100;var a=100*(o-e)/o;return a.toFixed(2)},_formatPrice:function(e){return e>0?(e=e.toFixed(2),e=e.replace(/\.?0+$/,""),e=window.currencyHelper.getSymbol(recurlyConfig.currency)+e):e="Free",e},_getPlanPrice:function(e,t){var i,n;return n={original:null,withDiscount:null},(i=Registry.Plans.get(e))?(n.original=parseInt(i.amount_in_cents,10)/100,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(e)&&(n.withDiscount=Helpers.CouponHelper.calculatePrice(n.original)),t===!0&&(n.original=this._formatPrice(n.original),null!==n.withDiscount&&(n.withDiscount=this._formatPrice(n.withDiscount))),n):void 0},_renderPlanButton:function(e){var t,i,n,s,r,o,a,l;if(t=this,i=Registry.Plans.get(e)){s=this["buttonWrapper_"+e],r=s.find(".original-price"),o=s.find(".final-price"),a=s.find(".discount"),l=s.find(".price-label");var c=function(i){var n;n=t._formatPrice(i),r.text(n),o.text(n),0===i&&l.hide(),e===Registry.Plans.PLAN_ANNUAL&&t._setAnnualSave(i)},u=function(i){var n,s;n=t._formatPrice(i),s=Helpers.CouponHelper.getDiscount(),r.show(),o.text(n),0===i&&l.hide(),null!==s&&a.text(" ("+s.label+" off)"),e===Registry.Plans.PLAN_ANNUAL&&t._setAnnualSave(i)};r.text(""),o.text(""),a.text(""),r.hide(),l.show(),n=Helpers.Price.plan(i),n.price.then(function(e){c(e),n.priceWithDiscount.then(function(t){e>t&&u(t)})}),window.isIndianIp&&e===Registry.Plans.PLAN_MONTHLY&&this._disablePlanButton(e,"This option is not available in your country or region at this time")}},_disablePlanButton:function(e,t){var i=Registry.Plans.get(e);if(i){var n=this["buttonWrapper_"+e];n.addClass("disabled"),t&&n.popover({html:!0,content:$('<div class="plan-disable-popover">'+t+"</div>"),container:n,trigger:"hover",placement:"top"})}},_setAnnualSave:function(e){var t,i;t=parseInt(this._calculateAnnualSavePercent(e)),i=this._formatPrice(e/12),this.$annualSave.text(t),this.$annualMonthlyAmount.text(i)},_canSwitchPlan:function(){var e;return e=this._getSwitchPlanAvailable(),e===!1?!1:!0},_getSwitchPlanAvailable:function(){var e,t;return e=Helpers.App.getSubscription(),e===!1?!1:(t=e.is_annual===!0?Registry.Plans.get(Registry.Plans.PLAN_ANNUAL):Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),t?t.amount_in_cents>=e.plan.amount_in_cents?!1:t:!1)},_switchSubscription:function(e,t,i,n){$.ajax({url:"/subscriptions/upgrade",type:"POST",data:{plan_recurly_uuid:e,coupon_code:t},dataType:"json",success:function(){Helpers.GlobalEventTracker.cancelSubscriptionSwitch("success",{new_plan:e}),"function"==typeof i&&i()},error:function(){Helpers.GlobalEventTracker.cancelSubscriptionSwitch("error",{new_plan:e}),"function"==typeof n&&n()}})},getAppliedCouponDiscountDetails:function(){return new Promise(function(e,t){$.ajax({url:"/get_coupon_discount_details"}).done(function(t){e(t)}).fail(function(){t()})})},_canChangeToAnnualWithDiscount:function(e){return window.is_cyberweek===!0&&e===Registry.Plans.PLAN_ANNUAL},_canChangeToAnnualWithDiscountHoliday:function(e){return window.is_holiday_coupon===!0&&e===Registry.Plans.PLAN_ANNUAL},_switchSubscriptionPlan:function(e){var t=null;return this._canChangeToAnnualWithDiscount(e)===!0&&(t="cyberweeksale"),this._canChangeToAnnualWithDiscountHoliday(e)===!0&&(t="holiday10"),new Promise(function(i,n){$.ajax({url:"/switch_subscription_plan",method:"POST",data:{plan_recurly_uuid:e,coupon_code:t}}).done(function(t){Helpers.GlobalEventTracker.cancelSubscriptionSwitch("success",{new_plan:e}),i(t)}).fail(function(){Helpers.GlobalEventTracker.cancelSubscriptionSwitch("error",{new_plan:e}),n()})})},_checkHelperPricePlanResults:function(e,t,i){var n;return e===Registry.Plans.PLAN_ANNUAL?n=Helpers.Price.annualPlan():e===Registry.Plans.PLAN_MONTHLY&&(n=Helpers.Price.monthlyPlan()),null===n?void Helpers.GlobalEventTracker.track("plan:unknown",{planCode:e}):void Promise.all([n.price,n.priceWithDiscount]).then(function(n){var s=n[0],r=n[1];(s!==t.original||r!==t.withDiscount&&null!==t.withDiscount)&&Helpers.GlobalEventTracker.planPriceMismatch({source:i,planCode:e,currentPrice:t.original,currentPriceWithDiscount:t.withDiscount,newPrice:s,newPriceWithDiscount:r})})},_useStoredBillingInfo:function(e){var t,i,n,s,r,o,a,l,c=this,u={};s="/subscriptions/quick_transaction",i=this.getEventTrackerName(),n=EventTracker.info({type:i,data:{}}),t=null,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(e.plan_recurly_uuid)&&(t=Helpers.CouponHelper.getCode()),window.is_cyberweek&&(t=e.plan_recurly_uuid==Registry.Plans.PLAN_ANNUAL?"cyberweeksale":"cyberweek10"),r={url:s,type:"post",data:{plan_recurly_uuid:e.plan_recurly_uuid,coupon_code:t,eventData:n},dataType:"json"};var d=function(){c.storedBillingInfoOverlay?(c.storedBillingInfoOverlay.deactivate(),c.storedBillingInfoOverlay.destroy()):c._setLoadingCardForm(c.$savedCardSubmitBtn,!1)};return o=PurchaseSupport.getRequestDataByUrl(s),a=(o&&o.isPollingEnabled)===!0,a===!0?(u={delay:o.pollingConfig.delay,times:o.pollingConfig.times,pingURL:o.pingURL},l=P.ajax(r).then(PurchaseSupport.buildPolling(u))):l=P.ajax(r),Helpers.App.getSubscription()?l.then(function(){d(),Helpers.CouponHelper.markAsUsed(),Helpers.App.replaceUrlParam("show_plans","").replaceUrlParam("upgrade","true"),window.location.reload()})["catch"](function(t){return d(),400===t.status?(alert(c.constructor.TEXT_INVALID_OR_CANCELED_SUBSCRIPTION),window.location.reload()):(alert(c.constructor.TEXT_ERROR_CHARGING_STORE_CARD),c._showPaymentForm(e)),t}):l.then(function(e){return d(),c._ajaxSuccessHandler(e),Helpers.CouponHelper.markAsUsed(),c.dispatch("purchase.success",e),e})["catch"](function(e){return alert(c.constructor.TEXT_ERROR_CHARGING_STORE_CARD),d(),e})}}}),Module(Helpers,"SinglePurchaseHelper").includes(CustomEventSupport)({discountModal:null,showDiscountModal:function(){this.discountModal||(this.discountModal=new UI.SinglePurchaseDiscountModal),this.discountModal.activate()},hideDiscountModal:function(){this.discountModal&&this.discountModal.deactivate()}}),Class(UI,"PurchaseOverlay").inherits(Widget).includes(Helpers.SubscriptionHelper,BubblingSupport,Translator,CurrencyLabelSetter)({html:'        <div class="modal purchase-overlay fade" id="purchaseOverlay" tabindex="-1" role="dialog" aria-labelledby="purchaseOverlayLabel" aria-hidden="true">          <button type="button" class="close m-close" data-dismiss="modal" aria-hidden="true">            <span aria-hidden="true">\xd7</span>          </button>          <div class="modal-dialog">            <div class="server_errors none"></div>            <div class="modal-content">              <div class="modal-body">                <div class="text-center modal-spinner" style="opacity:0.5;margin-top: 60px;">                  <img src="/assets/fade-spinner.gif">                </div>                <div class="form-container">                  <form class="recurly">                    <div class="subscription-info" style="display: none;"></div>                    <div class="payment_method multiple">                      <div class="payment_option saved_card_option selected">                        <input type="radio" name="payment_method">                        <label></label>                        <div class="card_logo"></div>                      </div>                      <div class="payment_option card_option">                        <input type="radio" name="payment_method" checked>                        <label></label>                        <div class="accepted_cards">                          <div class="card visa">Visa</div>                          <div class="card mastercard">MasterCard</div>                          <div class="card discover">Discover</div>                          <div class="card american_express">American Express</div>                        </div>                      </div>                      <div class="payment_option paypal_option">                        <input type="radio" name="payment_method">                        <label></label>                        <div class="logo"></div>                      </div>                    </div>                    <div class="saved-card-container">                      <span>Use saved card</span>                      <div class="saved-card-info">                        <div class="card"></div>                        <span>Ending with ****</span>                        <div class="card-last-four"></div>                      </div>                    </div>                    <div class="form-widget-container"></div>                    <div class="paypal" style="display: none;">                      <div class="paypal_message">                        You will be taken to PayPal to authorize a billing agreement.<br><br>Customers with an EU or Australian Paypal billing address will have additional VAT or GST charges.<br><br><strong>Please make sure pop-ups aren\'t blocked.</strong>                      </div>                    </div>                    <div class="footer">                      <button id="saved_card" type="submit" class="button primary">                        <span> Purchase </span>                      </button>                      <button id="credit_card" type="submit" class="button primary">                        <span> Purchase </span>                      </button>                      <button id="paypal" style="display: none;" type="button" class="button primary">                        <span> Pay with PayPal </span>                      </button>                    </div>                  </form>                </div>                <div class="information-container">                  <p class="information-title">                    Order Summary                    <span class="view-order-details">view order details</span>                    <span class="view-order-details opened">hide order details</span>                  </p>                  <div class="information-general-info">                    <p class="information-title"></p>                    <p class="information-title subtitle"></p>                  </div>                  <div class="subscriptionp-type-selector">                    <div class="plan-annual inline-label">                      <input type="radio" name="plan-annual">                      <label></label>                      <p>Annual (<span class="amount-price">$7.47</span>/mo<span class="disclaimer">*</span>) <span class="label">Save 50%</span></p>                    </div>                    <div class="plan-monthly inline-label">                      <input type="radio" name="plan-monthly">                      <label></label>                      <p>Monthly (<span class="amount-price">$14.95</span>/mo<span class="disclaimer">*</span>)</p>                    </div>                  </div>                  <div class="information-amount-info">                    <div class="amount price-section">                      <p class="amount-text"></p>                      <div class="amount-container">                        <p class="amount-price"></p>                        <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>                      </div>                    </div>                    <div class="amount discount-section">                      <p class="amount-text"></p>                      <div class="amount-container">                        <p class="amount-price"></p>                        <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>                      </div>                    </div>                    <hr>                    <div class="amount subtotal-section">                      <p class="amount-text">Subtotal</p>                      <p class="amount-price">0</p>                    </div>                    <div class="amount vat-section">                      <p class="amount-text"></p>                      <div class="amount-container">                        <p class="amount-price"></p>                        <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>                      </div>                    </div>                    <div class="amount total-section">                      <p class="amount-text total"></p>                      <div class="amount-container">                        <p class="amount-price"></p>                        <p class="disclaimer">(Billed Today)</p>                      </div>                    </div>                  </div>                  <div class="resume-info"></div>                  <div class="secure-info">                    <img src="/assets/icons/lock.svg">                    <div class="secure-info-disclaimer">                      <p class="secure-info-header">Secure Payments</p>                      <p>All transaction are processed</p>                      <p>by our secure technology.</p>                    </div>                  </div>                </div>              </div>            </div>          </div>        </div>    ',PURCHASE:{PRICE_LABEL:"Price",TOTAL_LABEL:"Total"},SUBSCRIPTION:{TITLE:"Unlimited Downloads Subscription",SUBTITLE:"Your subscription includes unlimited mockups, designs, logos, and video downloads.",PRICE_LABEL_ANNUALY:"Annual Subscription",PRICE_LABEL_MONTHLY:"Monthly Subscription",TOTAL_LABEL:"Total Per Month",TOTAL_ANNUAL_LABEL:"Total Per Year",TOTAL_WITH_MONTH:"(First{{period}} Month)",RESUME_RENEW_TEXT:"Unlimited subscription renews monthly in {{currency_label}}.",RESUME_RENEW_TEXT_ANNUAL:"Unlimited subscription renews yearly in {{currency_label}}.",RESUME_CANCEL_TEXT:"*You can cancel your subscription at any time and continue to have access until the end of your billing cycle and avoid further charges.",RESUME_DISCOUNT_TEXT:"Discount is valid for your first{{period}} month.",RESUME_DISCOUNT_TEXT_ANNUAL:"Discount is valid for your first{{period}} year.",RESUME_BILLING_TEXT:"You\u2019ll be billed {{amount}} starting {{date}}.",FORM_BUTTON_LABEL:"Subscribe",PAYPAL_BUTTON_LABEL:"Subscribe with PayPal",MINIMUM_TIME:"1 month minimum commitment if subscribers have downloaded any templates.",UNUSED_SUBSCRIPTION:"",UNUSED_SUBSCRIPTION_ANNUAL:"Unused portions of your subscription are refundable."},SUBSCRIPTION_VARIANT_INDIA:{SUBTITLE:"With this subscription you get unlimited mockup, design, logo and video downloads.",PRICE_LABEL_ANNUALY:"Annual Fee",RESUME_RENEW_TEXT_ANNUAL:"Your subscriptions will not auto renew, for further details, please contact your financial institution.",RESUME_CANCEL_TEXT:""},CURRENCY:"Prices in {{currency_label}}.",SUBSCRIPTION_TOTAL_DISCOUNT_LABEL:"Total First Month",DISCOUNT_LABEL:"Discount -{{discount}} off",VAT_LABEL:"VAT: {{vat}}%",RESUME_USD_TEXT:"All amounts are in {{currency_label}}.",TYPES:{PURCHASE:"purchase",SUBSCRIPTION:"subscription"},TEXT_SERVER_PAUSED_MESSAGE:' Please <a href="mailto:support@placeit.net">contact us</a> to unpause it',BILLING_VAT_TEXT:"({{totalAmount}} Subscription + {{vatAmount}} VAT)",BRAZIL_CURRENCY:"BRL",POLLING_TIMES:234,POLLING_DELAY:1e3,TEXT_SUBSCRIPTION_ACTIVATION_ERROR:"Your subscription could not be activated, Please try again later",TEXT_INVALID_OR_CANCELED_SUBSCRIPTION:"Invalid subscription or already canceled subscription",TEXT_ERROR_CHARGING_STORE_CARD:"There was an error charging your stored card. Please use another payment option.",prototype:{purchaseRecord:null,paymentType:null,purchaseRecordPlans:{monthly:null,annual:null},plans:{monthly:null,annual:null},$paymentOptions:null,$errorContainer:null,$paypalMessageContainer:null,$vatMessage:null,$formContainer:null,$paypalOption:null,$savedCardOption:null,$closeBtn:null,$creditCardSubmitBtn:null,$payPalSubmitBtn:null,$savedCardSubmitBtn:null,$informationTitle:null,$informationSubtitle:null,$discountSection:null,$discountTextLabel:null,$discountAmountLabel:null,$priceTextLabel:null,$priceAmountLabel:null,$subtotalSection:null,$vatSection:null,$vatTextLabel:null,$vatAmountLabel:null,$totalTextLabel:null,$totalAmountLabel:null,$resumeInfo:null,$viewOrderDetail:null,$informationContainer:null,$subscriptionType:null,$subscriptionMonthly:null,$subscriptionAnnual:null,$subscriptionAnnualSave:null,$savedCardContainer:null,storedBillingInfo:null,hideSavedCardOption:!1,init:function(e){$("[id='purchaseOverlay']").remove();var t=this;Widget.prototype.init.call(this,e),this.$subscriptionType=this.element.find(".subscriptionp-type-selector"),window.isIndianIp&&(this._updateTextConstantsForIndia(),this.$subscriptionType.hide()),this.currentCurrency=window.currencyHelper.getLabel(window.recurlyConfig.currency),this.currentCurrency===this.constructor.BRAZIL_CURRENCY&&this.element.find(".paypal_option").remove(),this.$paymentOptions=this.element.find(".payment_option"),this.$savedCardOption=this.getElement().find(".payment_option.saved_card_option"),this.$paypalOption=this.getElement().find(".payment_option.paypal_option"),this.$errorContainer=this.element.find(".server_errors"),this.$paypalMessageContainer=this.element.find(".paypal"),this.$vatMessage=this.element.find("#tax-message"),this.$savedCardContainer=t.getElement().find(".saved-card-container"),this.$formContainer=this.element.find(".form-widget-container"),this.billingForm=new UI.BillingForm({name:"billingForm",accountRecord:this.purchaseRecord,withTitles:!1}),this.$closeBtn=this.element.find("button.close"),this.$savedCardSubmitBtn=this.element.find(".footer > #saved_card"),this.$creditCardSubmitBtn=this.element.find(".footer > #credit_card"),this.$payPalSubmitBtn=this.element.find(".footer > #paypal"),this.$informationTitle=this.element.find(".information-general-info>.information-title"),this.$informationSubtitle=this.element.find(".information-general-info>.information-title.subtitle"),this.$discountSection=this.element.find(".discount-section"),this.$discountTextLabel=this.element.find(".discount-section>.amount-text"),this.$discountAmountLabel=this.element.find(".discount-section .amount-price"),this.$discountAmountLabelDisclaimer=this.element.find(".discount-section .disclaimer"),this.$priceTextLabel=this.element.find(".price-section>.amount-text"),this.$priceAmountLabel=this.element.find(".price-section .amount-price"),this.$priceAmountLabelDisclaimer=this.element.find(".price-section .disclaimer"),this.$subtotalSection=this.element.find(".subtotal-section"),this.$subtotalAmountLabel=this.element.find(".subtotal-section>.amount-price"),this.$vatSection=this.element.find(".vat-section"),this.$vatTextLabel=this.element.find(".vat-section>.amount-text"),this.$vatAmountLabel=this.element.find(".vat-section .amount-price"),this.$vatAmountLabelDisclaimer=this.element.find(".vat-section .disclaimer"),this.$totalTextLabel=this.element.find(".total-section .amount-text"),this.$totalAmountLabel=this.element.find(".total-section .amount-price"),this.$resumeInfo=this.element.find(".resume-info"),this.$subscriptionMonthly=this.$subscriptionType.find(".plan-monthly"),this.$subscriptionAnnual=this.$subscriptionType.find(".plan-annual"),this.$subscriptionAnnualSave=this.$subscriptionType.find(".plan-annual .annual-save"),this.storedBillingInfo=this.purchaseRecord.billing_info.lastFour||this.purchaseRecord.billing_info.paypalBillingAgreementId,this.$viewOrderDetail=this.element.find(".view-order-details"),this.$informationContainer=this.element.find(".information-container"),this.$paymentOptions=this.element.find(".payment_option"),t._modifyBillingInfoForm(),this.paymentType===this.constructor.TYPES.PURCHASE?this.$subscriptionType.addClass("hidden"):(Registry.Plans.get().forEach(function(e){switch(e.recurly_uuid){case Registry.Plans.PLAN_ANNUAL:t.plans.annual=e;break;case Registry.Plans.PLAN_MONTHLY:t.plans.monthly=e}}),this._updatePurchaseRecordPlan(this.purchaseRecord)),this.creditCardSubmitBtnText=null,this.vatAmount=0,this.appendChild(new UI.PayPalModal({name:"paypalModal"})),this._setBindings(),t.storedBillingInfo&&!t.hideSavedCardOption?(t.purchaseRecord.billing_info.paypalBillingAgreementId&&(t.$paymentOptions.find("> input").prop("checked",!1),t.$paypalOption.find("> input").prop("checked",!0),t._showPaypalOption()),t.$savedCardOption.css("display","flex"),t.$paymentOptions.find("> input").prop("checked",!1),t.$savedCardOption.find("> input").prop("checked",!0),t._updatedStoredCardInfo(),t._showSavedCardOption()):t._showCreditCardOption(),this.euCountries=Helpers.App.getEUCountries(),this.updateBillingInfo()},_configureRecurly:function(){var e={currency:window.recurlyConfig.currency,publicKey:window.recurlyConfig.publicKey};recurly.configure(e)},_setBindings:function(){var e=this;this.$closeBtn.one("click",e._closeEventHandler.bind(e)),e.element.bind("keyup",function(t){27===t.keyCode&&(e._closeEventHandler(t),e.element.unbind("keyup"))}),e.$paymentOptions.bind("click",function(t){e.$paymentOptions.removeClass("selected"),e.$paymentOptions.find("> input").prop("checked",!1);var i=$(this);i.addClass("selected"),i.find("> input").prop("checked",!0),i.hasClass("saved_card_option")?e._showSavedCardOption():i.hasClass("paypal_option")?(e._showPaypalOption(),Helpers.GlobalEventTracker.purchasePayPalSwitch()):e._showCreditCardOption()});var t="mousedown";return e.$creditCardSubmitBtn.on("click",function(e){e.preventDefault()}),e.$payPalSubmitBtn.on("click",function(e){e.preventDefault()}),e.$creditCardSubmitBtn.on("click",function(e){e.preventDefault()}),e.$payPalSubmitBtn.bind(t,e._paypalClickHandler.bind(e)),e.paypalModal.bind("paypal.success",function(t){var i=t.data;e.markFieldsAsValid(),e.hideServerErrors(),e.setParameters("token",i.id),e.submitTransaction().then(function(t){e._ajaxSuccessHandler(t),e._destroyOncePayPalHidden()})["catch"](function(t){e._ajaxErrorhandler(t),e._activateOncePayPalHidden()})}),e.paypalModal.bind("paypal.retry",function(t){e.hideServerErrors(),e._activateOncePayPalHidden()}),e.paypalModal.bind("paypal.reject",function(t){var i=t.data;e.displayServerErrors(i.message),e._activateOncePayPalHidden()}),e.$creditCardSubmitBtn.on(t,e._submitEventHandler.bind(e)),e.$savedCardSubmitBtn.on(t,function(t){if(t.preventDefault(),window.isPastDue)this.deactivate(),Modals.Billing.unbindBillingInfoHide().setupUpdateCardModal(Modals.Billing._billingUpdateSuccessCallback);else{if(e._setLoadingCardForm(this.$savedCardSubmitBtn,!0),this.paymentType===this.constructor.TYPES.PURCHASE)return void e.dispatch("use-stored-billing-info");e._useStoredBillingInfo(e.purchaseRecord)}}.bind(this)),e.billingForm.bind("country.change",function(t){e._updateVatInfo()}),e.billingForm.bind("vatNumber.change",function(t,i){e._updateVatInfo()}),e.$viewOrderDetail.bind("click",function(){e.$informationContainer.toggleClass("active")}),e.$subscriptionMonthly.bind("click",function(){null!==e.purchaseRecordPlans.monthly&&e.purchaseRecordPlans.monthly.ajaxParams?e._updatePurchaseRecordPlan(e.purchaseRecordPlans.monthly):e.signRequestWithRecurly(e.plans.monthly,e.discount,function(t){e._onChangePeriodCallback(Registry.Plans.PLAN_MONTHLY,t)}),Helpers.GlobalEventTracker.subscriptionPlanSelected({old:"annual","new":"monthly",place:"payment_form"})}),e.$subscriptionAnnual.bind("click",function(){null!==e.purchaseRecordPlans.annual&&e.purchaseRecordPlans.annual.ajaxParams?e._updatePurchaseRecordPlan(e.purchaseRecordPlans.annual):e.signRequestWithRecurly(e.plans.annual,e.discount,function(t){e._onChangePeriodCallback(Registry.Plans.PLAN_ANNUAL,t)}),Helpers.GlobalEventTracker.subscriptionPlanSelected({old:"monthly","new":"annual",place:"payment_form"})}),e},_updateVatInfo:function(){var e=this.billingForm.getSelectedCountry().toUpperCase(),t=this.billingForm.getVatNumber();this._isEUCountry(e)?(this.billingForm.showVatField(),this._updateTaxRate(e,t)):(this.vatAmount=0,this.vatRate=0,this.billingForm.hideVatField(),this.updateBillingInfo())},_isEUCountry:function(e){return-1!==this.euCountries.indexOf(e)},_onChangePeriodCallback:function(e,t){var i,n,s;switch(i=null,n="",e){case Registry.Plans.PLAN_ANNUAL:n="Subscription:success:Unlimited:Annual";break;case Registry.Plans.PLAN_MONTHLY:n="Subscription:success:Unlimited"}Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(e)&&(i=Helpers.CouponHelper.getCode()),s=EventTracker.info({type:n,data:{}});var r={ajaxUrl:"/subscriptions/{{token}}/transaction",ajaxParams:{plan_recurly_uuid:t.plan_recurly_uuid,coupon_code:i,eventData:s}};$.extend(!0,t,r),this._updatePurchaseRecordPlan(t)},_closeEventHandler:function(e){Helpers.GlobalEventTracker.purchaseCanceled(),this.element.bind("hidden.bs.modal",function(e){this.destroy()}.bind(this))},_showPaypalOption:function(){return this.hideServerErrors(),this.$creditCardSubmitBtn.hide(),this.$savedCardContainer.hide(),this.$savedCardSubmitBtn.hide(),this.$paypalMessageContainer.show(),this.$payPalSubmitBtn.show(),this.billingForm.hideFormFields(),this},_showCreditCardOption:function(){return this.hideServerErrors(),this.$paypalMessageContainer.hide(),this.$payPalSubmitBtn.hide(),this.$savedCardSubmitBtn.hide(),this.$savedCardContainer.hide(),this.$creditCardSubmitBtn.show(),this.$formContainer.css("display","block"),this.billingForm.showFormFields(),this},_showSavedCardOption:function(){return this.hideServerErrors(),this.$creditCardSubmitBtn.hide(),this.$paypalMessageContainer.hide(),this.$payPalSubmitBtn.hide(),this.billingForm.hideFormFields(),this.$savedCardContainer.show(),this.$savedCardSubmitBtn.show(),this},_submitEventHandler:function(e){e.preventDefault();var t=this;this._setLoadingCardForm(this.$creditCardSubmitBtn,!0),this.hideServerErrors(),this.billingForm.getToken().then(function(e){t.billingForm.getContactData();t.setParameters("token",e.id),t.submitTransaction().then(t._ajaxSuccessHandler.bind(t))["catch"](function(e){t._ajaxErrorhandler(e),t.billingForm.markInvalidBillingInfo(),t._setLoadingCardForm(t.$creditCardSubmitBtn,!1)})})["catch"](function(e){Helpers.GlobalEventTracker.purchaseInvalidFields(e),t._setLoadingCardForm(t.$creditCardSubmitBtn,!1)})},_setLoadingCardForm:function(e,t){var i={"pointer-events":"none"},n={"pointer-events":"auto"};t===!0?(this.creditCardSubmitBtnText=e.html(),e.html(""),e.addClass("no-text-btn light-spinner"),e.css(i),this.billingForm.disableForm(),this.$subscriptionAnnual.css(i),this.$subscriptionMonthly.css(i),this.$paymentOptions.css(i),this.element.find('[type="radio"]:checked + label').addClass("disabled")):t===!1&&(e.html(this.creditCardSubmitBtnText),e.removeClass("no-text-btn light-spinner"),e.css(n),this.billingForm.enableForm(),this.$subscriptionAnnual.css(n),this.$subscriptionMonthly.css(n),this.$paymentOptions.css(n),this.element.find('[type="radio"]:checked + label').removeClass("disabled"))},_paypalClickHandler:function(e){this.deactivate(),this.paypalModal.activate();var t={description:this.purchaseRecord.description};this.paypalModal.initPayment(t)},setParameters:function(e,t){var i,n,s,r=this.billingForm.getContactData();return i=r.firstName,n=r.lastName,s=r.email,i&&(this.purchaseRecord.ajaxParams.first_name=i),n&&(this.purchaseRecord.ajaxParams.last_name=n),s&&(this.purchaseRecord.ajaxParams.email=s),this.purchaseRecord.ajaxParams[e]=t,this},_disableModalClose:function(){return!1},submitTransaction:function(){var e,t;this.element.bind("hide.bs.modal",this._disableModalClose),e=this.purchaseRecord.ajaxUrl;var i={url:e,type:"post",
data:this.purchaseRecord.ajaxParams,dataType:"json"};i=Helpers.RequestConfig.prepareConfig(i);var n=PurchaseSupport.getRequestDataByUrl(e),s=(n&&n.isPollingEnabled)===!0;return s===!0?(t={delay:this.constructor.POLLING_DELAY,times:this.constructor.POLLING_TIMES,pingURL:n.pingURL},P.ajax(i).then(PurchaseSupport.buildPolling(t))):P.ajax(i)},validateFields:function(e){return this.markFieldsAsValid(),e.forEach(function(e){this.element.find("#recurly-"+e).parent().addClass("invalid")}.bind(this)),this},markFieldsAsValid:function(){return this.element.find(".invalid").removeClass("invalid"),this},displayServerErrors:function(e){var t=$('<div class="alert alert-danger alert-dismissible"></div>'),i=$('<span class="billing_error_message">'+e+'</span> <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>');return t.append(i),this.$errorContainer.append(t),this.$errorContainer.addClass("any"),this},displayServerWarnings:function(e,t){var i=$('<div class="alert alert-warning alert-dismissible"></div>'),n=$('<span class="billing_error_message">'+e+"</span>");return t&&n.append(this.constructor.TEXT_SERVER_PAUSED_MESSAGE),i.append(n),i.append('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),this.$errorContainer.append(i),this.$errorContainer.addClass("any"),this},hideServerErrors:function(){return this.$errorContainer.html(""),this.$errorContainer.removeClass("any"),this},_ajaxSuccessHandler:function(e){e.coupon&&(this.purchaseRecord.coupon=e.coupon),e.invoice_number&&(this.purchaseRecord.invoice_number=e.invoice_number),Helpers.CouponHelper.markAsUsed(),this.element.unbind("hide.bs.modal",this._disableModalClose),this.dispatch("purchase.success",this.purchaseRecord),this.element.unbind("hidden.bs.modal").bind("hidden.bs.modal",function(e){this.destroy()}.bind(this)),this.deactivate()},_ajaxErrorhandler:function(e){var t=e.responseJSON,i="",n=!1,s=!1;t&&(i=t.message,n=t.is_paused,s=t.can_be_used);var r={message:i,status:0};this.element.unbind("hide.bs.modal",this._disableModalClose),"timeout"===e.error&&(r.status=408,r.message="Your transaction couldn't be processed at this moment, try again later."),422===e.status&&t&&t.error&&(r.message=t.error,r.status=e.status),Helpers.GlobalEventTracker.purchaseCardDenied(r),this.dispatch("purchase.failed",r),s===!0?this.displayServerWarnings(r.message,n):this.displayServerErrors(r.message)},_destroyOncePayPalHidden:function(){this.paypalModal.bind("paypal.deactivate",function(e){this.destroy()}.bind(this)),this.paypalModal.deactivate()},_activateOncePayPalHidden:function(){var e=function t(e){this.activate(),this.paypalModal.unbind("paypal.deactivate",t)}.bind(this);this.paypalModal.bind("paypal.deactivate",e),this.paypalModal.deactivate()},initPurchaseForm:function(){return this._populateFields(),this},initSubscriptionForm:function(){this.element.find(".subscription-info").html('            <select data-recurly="plan">            <option value="'+this.purchaseRecord.plan_recurly_uuid+'" selected> </option>            </select>            <input id="recurly-coupon" data-recurly="coupon">            ');var e=this.element.find("#recurly-coupon");return e.val(this.purchaseRecord.coupon_code),this.$savedCardSubmitBtn.find("span").html(this.constructor.SUBSCRIPTION.FORM_BUTTON_LABEL),this.$creditCardSubmitBtn.find("span").html(this.constructor.SUBSCRIPTION.FORM_BUTTON_LABEL),this.$payPalSubmitBtn.find("span").html(this.constructor.SUBSCRIPTION.PAYPAL_BUTTON_LABEL),this},_populateFields:function(){return this},_updateTaxRate:function(e,t){var i,n,s;i=this,n=i.purchaseRecord.amount_in_cents/100,s=i.getDiscount(),s&&(n=Helpers.CouponHelper.calculatePrice(n)),Helpers.Price.tax(e,n,t).then(function(e){i.vatAmount=n*e.rate,i.vatRate=100*e.rate,i.updateBillingInfo()})},_updatePurchaseRecordPlan:function(e){var t='input[type="radio"]',i=null;this.$subscriptionType.find(t).removeProp("checked"),this.$subscriptionType.children().removeClass("checked"),this.isAnnualSubscription(e)?(i=this.$subscriptionAnnual,this.purchaseRecordPlans.annual=e):(i=this.$subscriptionMonthly,this.purchaseRecordPlans.monthly=e),i.addClass("checked"),i.find(t).prop("checked",!0),this.purchaseRecord=e,this.billingForm.triggerChangeCountry()},activate:function(e){return Widget.prototype.activate.call(this),this.element.modal("show"),this},deactivate:function(){return this.element.modal("hide"),Widget.prototype.deactivate.call(this),this},render:function(e,t){return this.dispatch("purchase.open"),Widget.prototype.render.call(this,e,t),this.billingForm.render(this.$formContainer),this},updateBillingInfo:function(){var e=this,t=Helpers.StageType.getStageData(),i=this.getDiscount(),n=Helpers.CouponHelper.getDuration(),s=window.currencyHelper.getSymbol(recurlyConfig.currency),r=e.getTotalPrice(i,e.vatAmount),o=e.setVat(e.vatAmount,r);switch(e.$resumeInfo.empty(),e.paymentType){case e.constructor.TYPES.SUBSCRIPTION:e.$informationTitle.text(e.constructor.SUBSCRIPTION.TITLE),e.$informationSubtitle.text(e.constructor.SUBSCRIPTION.SUBTITLE),e.isAnnualSubscription()===!0?e.$priceTextLabel.text(e.constructor.SUBSCRIPTION.PRICE_LABEL_ANNUALY):e.$priceTextLabel.text(e.constructor.SUBSCRIPTION.PRICE_LABEL_MONTHLY),e._setAnnualSubscriptionSave();break;case e.constructor.TYPES.PURCHASE:e.$informationTitle.text(t.meta_title),e.$informationSubtitle.text(""),e.$priceTextLabel.text(e.constructor.PURCHASE.PRICE_LABEL)}e.$priceAmountLabel.text(s+e._fixNumberFormat(e.purchaseRecord.amount_in_cents/100,2)),e.isAnnualSubscription()===!0&&0===o?(e.$priceAmountLabelDisclaimer.attr("style","display: inline-block;"),e.$priceAmountLabelDisclaimer.first().text("("+s+e._fixNumberFormat(r/12,2))):e.$priceAmountLabelDisclaimer.hide(),e.setDiscount(i,r,o),"subscription"===e.paymentType&&e._setPlanSelectorLabelDiscount(i),e.updateBillingResume(i,n,o,r)},updateBillingResume:function(e,t,i,n){var s=this,r=0;if(e)var o=Helpers.CouponHelper.calculatePrice(s.purchaseRecord.amount_in_cents/100);else var o=s.purchaseRecord.amount_in_cents/100;var a=2,l=new Date,c=new Date(l.setMonth(l.getMonth()+r)),u=$.datepicker.formatDate("M. dd, yy",c),d=s._getBillingVatText(i,o,a),h=currencyHelper.getSymbol(recurlyConfig.currency),p=s.constructor.SUBSCRIPTION.UNUSED_SUBSCRIPTION;if(e&&s.paymentType===s.constructor.TYPES.SUBSCRIPTION){var f="";t.length>1&&(f=" "+t.length),r="single_use"===t.type?s.purchaseRecord.plan_recurly_uuid===Registry.Plans.PLAN_ANNUAL?12:1:t.length,"forever"===t.type&&(o=Helpers.CouponHelper.calculatePrice(o)),o=s._fixNumberFormat(o+i,a);var m=s.constructor.SUBSCRIPTION.RESUME_DISCOUNT_TEXT;s.isAnnualSubscription()===!0&&(m=s.constructor.SUBSCRIPTION.RESUME_DISCOUNT_TEXT_ANNUAL),s.$resumeInfo.append("<p>"+m.replace("{{period}}"," "+f)+"</p>")}if(s.paymentType===s.constructor.TYPES.SUBSCRIPTION){s.$resumeInfo.append("<p>"+s.constructor.SUBSCRIPTION.RESUME_BILLING_TEXT.replace("{{amount}}",h+s._fixNumberFormat(n,2)+d).replace("{{date}}",u)+"</p>");var g=s.constructor.SUBSCRIPTION.RESUME_RENEW_TEXT;s.isAnnualSubscription()===!0&&(g=s.constructor.SUBSCRIPTION.RESUME_RENEW_TEXT_ANNUAL,p=s.constructor.SUBSCRIPTION.UNUSED_SUBSCRIPTION_ANNUAL),g=g.replaceAll("{{currency_label}}",currencyHelper.getLabel(recurlyConfig.currency)),s.$resumeInfo.append("<p>"+g+"</p><br />"),s.$resumeInfo.append('<p class="inline">'+s.constructor.SUBSCRIPTION.RESUME_CANCEL_TEXT+"</p>")}else s.$resumeInfo.append('<p class="inline">'+s.constructor.CURRENCY+"</p>")},_getBillingVatText:function(e,t,i){var n=this,s=currencyHelper.getSymbol(recurlyConfig.currency),r="";return e&&(r=n.constructor.BILLING_VAT_TEXT.replace("{{totalAmount}}",s+n._fixNumberFormat(t,i)).replace("{{vatAmount}}",s+n._fixNumberFormat(e,2))),r},setDiscount:function(e,t,i){var n=this,s=0,r=0,o=n.purchaseRecord.amount_in_cents/100,a=window.currencyHelper.getSymbol(recurlyConfig.currency);return 0===e?(n.$discountSection.css({display:"none"}),0):(n.$discountSection.css({display:"flex"}),s=o-Helpers.CouponHelper.calculatePrice(o),r=o-s,n.$discountTextLabel.text(n.constructor.DISCOUNT_LABEL.replace("{{discount}}",e.label)),n.$discountAmountLabel.text("-"+a+n._fixNumberFormat(s,2)),n.$subtotalAmountLabel.text(a+n._fixNumberFormat(r,2)),n.isAnnualSubscription()&&0===i?(n.$discountAmountLabelDisclaimer.attr("style","display: inline-block;"),n.$discountAmountLabelDisclaimer.first().text("("+a+n._fixNumberFormat(t/12,2)),n.$priceAmountLabelDisclaimer.hide()):n.$discountAmountLabelDisclaimer.hide(),s)},getDiscount:function(){var e=Helpers.CouponHelper.exists()===!1||Helpers.CouponHelper.isValid()===!1,t=this.paymentType===this.constructor.TYPES.SUBSCRIPTION&&Helpers.CouponHelper.applyToPlan(this.purchaseRecord.plan_recurly_uuid)===!1,i=this.paymentType===this.constructor.TYPES.PURCHASE&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)===!1;return e||t||i?0:Helpers.CouponHelper.getDiscount()},setVat:function(e,t){var i=this,n=window.currencyHelper.getSymbol(recurlyConfig.currency);return 0===e?(i.$subtotalSection.css({display:"none"}),i.$vatSection.css({display:"none"}),0):(i.getDiscount()&&i.isAnnualSubscription()===!1?i.$subtotalSection.css({display:"flex"}):i.$subtotalSection.css({display:"none"}),i.$vatSection.css({display:"flex"}),i.$vatTextLabel.text(i.constructor.VAT_LABEL.replace("{{vat}}",i.vatRate)),i.$vatAmountLabel.text("+"+n+i._fixNumberFormat(e,2)),i.isAnnualSubscription()===!0?(i.$priceAmountLabelDisclaimer.hide(),i.$discountAmountLabelDisclaimer.hide(),i.$vatAmountLabelDisclaimer.attr("style","display: inline-block;"),i.$vatAmountLabelDisclaimer.first().text("("+n+i._fixNumberFormat(t/12,2))):i.$vatAmountLabelDisclaimer.hide(),e)},_fixNumberFormat:function(e,t){var i=Number(e);return i.toFixed(t)},getTotalPrice:function(e,t){var i=this,n=this.constructor.PURCHASE.TOTAL_LABEL,s=i.purchaseRecord.amount_in_cents/100,r=Helpers.CouponHelper.getDuration(),o=0,a=window.currencyHelper.getSymbol(recurlyConfig.currency);return e&&e.amount&&(o=s-Helpers.CouponHelper.calculatePrice(s)),i.paymentType===i.constructor.TYPES.SUBSCRIPTION&&(n=i._getSubscriptionTotalLabel(),i.isAnnualSubscription()!==!0&&e&&("temporal"===r.type?n+=" "+i.constructor.SUBSCRIPTION.TOTAL_WITH_MONTH.replace("{{period}}"," "+r.length):n=i.constructor.SUBSCRIPTION_TOTAL_DISCOUNT_LABEL)),i.$totalTextLabel.text(n),s=s-o+t,i.$totalAmountLabel.text(a+i._fixNumberFormat(s,2)),s},_getSubscriptionTotalLabel:function(){var e=this,t=e.constructor.SUBSCRIPTION.TOTAL_LABEL;return e.isAnnualSubscription()===!0&&(t=e.constructor.SUBSCRIPTION.TOTAL_ANNUAL_LABEL),t},isAnnualSubscription:function(e){var t=this,i=e||t.purchaseRecord;return i.plan_recurly_uuid===Registry.Plans.PLAN_ANNUAL},_isMonthlyCoupon:function(){return Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_MONTHLY)},_isAnnualCoupon:function(){return Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_ANNUAL)},_setPlanSelectorLabelDiscount:function(){var e=this,t=window.currencyHelper.getSymbol(recurlyConfig.currency);null!==e.purchaseRecordPlans.annual&&e.purchaseRecordPlans.annual.ajaxParams||e.signRequestWithRecurly(e.plans.annual,e.discount,function(t){e._onChangePeriodCallback(Registry.Plans.PLAN_ANNUAL,t)}),null!==e.purchaseRecordPlans.monthly&&e.purchaseRecordPlans.monthly.ajaxParams||e.signRequestWithRecurly(e.plans.monthly,e.discount,function(t){e._onChangePeriodCallback(Registry.Plans.PLAN_MONTHLY,t),e._updatePurchaseRecordPlan(e.purchaseRecordPlans.annual)}),this._isAnnualCoupon()&&e.$subscriptionAnnual.find("p span.label").text("BEST VALUE"),annualTotal=this._getPlanPrice(Registry.Plans.get(Registry.Plans.PLAN_ANNUAL)),e.$subscriptionAnnual.find("p span.amount-price").text(t+e._fixNumberFormat(annualTotal/12,2)),monthlyTotal=this._getPlanPrice(Registry.Plans.get(Registry.Plans.PLAN_MONTHLY)),e.$subscriptionMonthly.find("p span.amount-price").text(t+e._fixNumberFormat(monthlyTotal,2))},_getPlanPrice:function(e){var t=e.amount_in_cents/100,i=t;return this._isMonthlyCoupon()&&!e.is_annual&&(i=Helpers.CouponHelper.calculatePrice(t)),this._isAnnualCoupon()&&e.is_annual&&(i=Helpers.CouponHelper.calculatePrice(t)),i},_modifyBillingInfoForm:function(){var e=this,t=e.element.find(".recurly .payment_method");e.billingForm.moveContactInfoAfter(t),Helpers.App.isMobile()&&e.$informationContainer.toggleClass("active")},destroy:function(){this.$paymentOptions=null,this.$errorContainer=null,this.$paypalMessageContainer=null,this.fieldsContainer=null,this.contactInfoContainer=null,this.firstNameElement=null,this.lastNameElement=null,this.emailElement=null,this.$closeBtn=null,this.$creditCardSubmitBtn=null,this.$payPalSubmitBtn=null,this.billingForm&&this.billingForm.destroy(),this.dispatch("purchase.closed"),Widget.prototype.destroy.call(this)},_setAnnualSubscriptionSave:function(){var e,t;e=this._getPlanPrice(Registry.Plans.PLAN_ANNUAL),e.withDiscount?t=this._calculateAnnualSavePercent(e.withDiscount):(t=this._calculateAnnualSavePercent(e.original),t=parseInt(t)),this.$subscriptionAnnualSave.text(t)},_updateTextConstantsForIndia:function(){this.constructor.SUBSCRIPTION=Object.assign(this.constructor.SUBSCRIPTION,this.constructor.SUBSCRIPTION_VARIANT_INDIA)},_updatedStoredCardInfo:function(){var e=this,t=e.purchaseRecord.billing_info.cardType.toLowerCase();e.$savedCardContainer.find(".card").addClass(t),e.$savedCardContainer.find(".card-last-four").text(e.storedBillingInfo)},getEventTrackerName:function(){var e;switch(e="Subscription:success:",this.period){case this.PERIOD_MONTHLY:e+="Unlimited";break;case this.PERIOD_ANNUAL:e+="Unlimited:Annual"}return e}}}),Class(UI,"MultiplePurchaseOverlay").inherits(UI.PurchaseOverlay)({html:'    <div class="modal purchase-overlay multiple fade" id="purchaseOverlay" tabindex="-1" role="dialog" aria-labelledby="purchaseOverlayLabel" aria-hidden="true">    <button type="button" class="close m-close" data-dismiss="modal" aria-hidden="true">    <span aria-hidden="true">\xd7</span>    </button>    <div class="modal-dialog">    <div class="server_errors none"></div>    <div class="modal-content">    <div class="modal-body">    <div class="text-center modal-spinner" style="opacity:0.5;margin-top: 60px;">    <img src="/assets/fade-spinner.gif">    </div>    <div class="form-container">    <form class="recurly">    <div class="subscription-info" style="display: none;"></div>    <div class="payment_method multiple">    <div class="payment_option saved_card_option selected">    <input type="radio" name="payment_method">    <label></label>    <div class="card_logo"></div>    </div>    <div class="payment_option card_option">    <input type="radio" name="payment_method" checked>    <label></label>    <div class="accepted_cards">    <div class="card visa">Visa</div>    <div class="card mastercard">MasterCard</div>    <div class="card discover">Discover</div>    <div class="card american_express">American Express</div>    </div>    </div>    <div class="payment_option paypal_option">    <input type="radio" name="payment_method">    <label></label>    <div class="logo"></div>    </div>    </div>    <div class="saved-card-container">    <span>Use saved card</span>    <div class="saved-card-info">    <div class="card"></div>    <span>Ending with ****</span>    <div class="card-last-four"></div>    </div>    </div>    <div class="form-widget-container"></div>    <div class="paypal" style="display: none;">    <div class="paypal_message">    You will be taken to PayPal to authorize a billing agreement.<br><br>Customers with an EU or Australian Paypal billing address will have additional VAT or GST charges.<br><br><strong>Please make sure pop-ups aren\'t blocked.</strong>    </div>    </div>    <div class="footer">    <button id="saved_card" type="submit" class="button primary">    <span> Purchase </span>    </button>    <button id="credit_card" type="submit" class="button primary">    <span> Purchase </span>    </button>    <button id="paypal" style="display: none;" type="button" class="button primary">    <span> Pay with PayPal </span>    </button>    </div>    </form>    </div>    <div class="information-container">    <p class="information-title">    Order Summary    <span class="view-order-details">view order details</span>    <span class="view-order-details opened">hide order details</span>    <span class="view-order-total-items"></span>    </p>    <div class="information-general-info">    <div class="thumbnails-list"></div>    <p class="information-title"></p>    <p class="information-title subtitle"></p>    </div>    <div class="subscriptionp-type-selector">    <div class="plan-annual inline-label">    <input type="radio" name="plan-annual">    <label></label>    <p>Annual (<span class="amount-price">$7.47</span>/mo<span class="disclaimer">*</span>) <span class="label">Save 50%</span></p>    </div>    <div class="plan-monthly inline-label">    <input type="radio" name="plan-monthly">    <label></label>    <p>Monthly (<span class="amount-price">$14.95</span>/mo<span class="disclaimer">*</span>)</p>    </div>    </div>    <div class="information-amount-info">    <div class="amount price-section">    <p class="amount-text"></p>    <div class="amount-container">    <p class="amount-price"></p>    <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>    </div>    </div>    <div class="amount discount-section">    <p class="amount-text"></p>    <div class="amount-container">    <p class="amount-price"></p>    <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>    </div>    </div>    <hr>    <div class="amount subtotal-section">    <p class="amount-text">Subtotal</p>    <p class="amount-price">0</p>    </div>    <div class="amount vat-section">    <p class="amount-text"></p>    <div class="amount-container">    <p class="amount-price"></p>    <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>    </div>    </div>    <div class="amount total-section">    <div class="amount-container">        <p class="amount-text total"></p>        <p class="disclaimer"></p>    </div>    <div class="amount-container">    <p class="amount-price"></p>    <p class="disclaimer">(Billed Today)</p>    </div>    </div>    </div>    <div class="resume-info"></div>    <div class="secure-info">    <img src="/assets/icons/lock.svg">    <div class="secure-info-disclaimer">    <p class="secure-info-header">Secure Payments</p>    <p>All transaction are processed</p>    <p>by our secure technology.</p>    </div>    </div>    </div>    </div>    </div>    </div>    </div>    ',PURCHASE:{PRICE_LABEL:"Price",TOTAL_LABEL:"Total",BILLED_INFO_LABEL:"You\u2019ll be billed {{total_amount}} in {{currency_label}}"},prototype:{$priceSection:null,$totalTextLabel:null,$totalItemsLabel:null,$thumbnailsList:null,$viewOrderTotalItems:null,_multiplePurchaseService:null,init:function(e){Widget.prototype.init.call(this,e),this._multiplePurchaseService=Service.MultiplePurchase.getInstance(),this.$priceSection=this.getElement().find(".price-section"),this.$totalItemsLabel=this.getElement().find(" .total-section > .amount-container:first-child .disclaimer"),this.$thumbnailsList=this.getElement().find(".information-general-info>.thumbnails-list"),this.$viewOrderTotalItems=this.getElement().find(".information-container .view-order-total-items"),this.$totalTextLabel=this.element.find(".total-section .amount-container>.amount-text.total"),UI.PurchaseOverlay.prototype.init.call(this,e),this.element.on("hidden.bs.modal",Utils.bindFn(this)(this._hiddeModalHandler))},_hiddeModalHandler:function(){this._multiplePurchaseService.deleteAfterLoginCookie()},getMultiPurchaseService:function(){return this._multiplePurchaseService},updateBillingInfo:function(){var e=this,t=(Helpers.StageType.getStageData(),this.getDiscount()),i=Helpers.CouponHelper.getDuration(),n=window.currencyHelper.getSymbol(recurlyConfig.currency),s=e.getTotalPrice(t,e.vatAmount),r=e.setVat(e.vatAmount,s);switch(e.$resumeInfo.empty(),e.paymentType){case e.constructor.TYPES.SUBSCRIPTION:e.$informationTitle.text(e.constructor.SUBSCRIPTION.TITLE),e.$informationSubtitle.text(e.constructor.SUBSCRIPTION.SUBTITLE),e.isAnnualSubscription()===!0?e.$priceTextLabel.text(e.constructor.SUBSCRIPTION.PRICE_LABEL_ANNUALY):e.$priceTextLabel.text(e.constructor.SUBSCRIPTION.PRICE_LABEL_MONTHLY),e._setAnnualSubscriptionSave();break;case e.constructor.TYPES.PURCHASE:e.$informationSubtitle.text(""),e.$priceTextLabel.text(e.constructor.PURCHASE.PRICE_LABEL);var o=" Item",a=null,l=e.getMultiPurchaseService().isMultiplePurchase()&&e.getMultiPurchaseService().countSelected()>1;a="1 "+o,e.$priceSection.hide(),e.$informationTitle.text(""),e.$thumbnailsList.html(""),l&&(o=" Items"),e.getMultiPurchaseService().isMultiplePurchase()&&(a=e.getMultiPurchaseService().countSelected()+o),e.$viewOrderTotalItems.html(a),e.$totalItemsLabel.html("("+a+")");var c=e.getMultiPurchaseService().getSelectedDataObjects();e.getMultiPurchaseService().isMultiplePurchase()===!1&&(c=[e.getMultiPurchaseService().getByIndex(0)]),_thumbnailsController=new Controller.SummaryThumbnails({currencySymbol:n,stagesList:c}),e.$thumbnailsList.append(_thumbnailsController.getThumbnailsListView()),e._hideSummaryThumbnailInVideo()}e.$priceAmountLabel.text(n+e._fixNumberFormat(e.purchaseRecord.amount_in_cents/100,2)),e.isAnnualSubscription()===!0&&0===r?(e.$priceAmountLabelDisclaimer.attr("style","display: inline-block;"),e.$priceAmountLabelDisclaimer.first().text("("+n+e._fixNumberFormat(s/12,2))):e.$priceAmountLabelDisclaimer.hide(),e.setDiscount(t,s,r),"subscription"===e.paymentType&&e._setPlanSelectorLabelDiscount(t),e.updateBillingResume(t,i,r,s)},updateBillingResume:function(e,t,i,n){var s=this,r=0;if(e)var o=Helpers.CouponHelper.calculatePrice(s.purchaseRecord.amount_in_cents/100);else var o=s.purchaseRecord.amount_in_cents/100;var a=2,l=new Date,c=new Date(l.setMonth(l.getMonth()+r)),u=$.datepicker.formatDate("M. dd, yy",c),d=s._getBillingVatText(i,o,a),h=currencyHelper.getSymbol(recurlyConfig.currency),p=s.constructor.SUBSCRIPTION.UNUSED_SUBSCRIPTION;if(e&&s.paymentType===s.constructor.TYPES.SUBSCRIPTION){var f="";t.length>1&&(f=" "+t.length),r="single_use"===t.type?s.purchaseRecord.plan_recurly_uuid===Registry.Plans.PLAN_ANNUAL?12:1:t.length,"forever"===t.type&&(o=Helpers.CouponHelper.calculatePrice(o)),o=s._fixNumberFormat(o+i,a);var m=s.constructor.SUBSCRIPTION.RESUME_DISCOUNT_TEXT;s.isAnnualSubscription()===!0&&(m=s.constructor.SUBSCRIPTION.RESUME_DISCOUNT_TEXT_ANNUAL),s.$resumeInfo.append("<p>"+m.replace("{{period}}"," "+f)+"</p>")}if(s.paymentType===s.constructor.TYPES.SUBSCRIPTION){s.$resumeInfo.append("<p>"+s.constructor.SUBSCRIPTION.RESUME_BILLING_TEXT.replace("{{amount}}",h+s._fixNumberFormat(n,2)+d).replace("{{date}}",u)+"</p>");var g=s.constructor.SUBSCRIPTION.RESUME_RENEW_TEXT;s.isAnnualSubscription()===!0&&(g=s.constructor.SUBSCRIPTION.RESUME_RENEW_TEXT_ANNUAL,p=s.constructor.SUBSCRIPTION.UNUSED_SUBSCRIPTION_ANNUAL),g=g.replaceAll("{{currency_label}}",currencyHelper.getLabel(recurlyConfig.currency)),s.$resumeInfo.append("<p>"+g+"</p><br />"),s.$resumeInfo.append('<p class="inline">'+s.constructor.SUBSCRIPTION.RESUME_CANCEL_TEXT+"</p>")}if(s.paymentType!==s.constructor.TYPES.SUBSCRIPTION){var v=s.constructor.PURCHASE.BILLED_INFO_LABEL.replace("{{total_amount}}",h+s._fixNumberFormat(o+i,2)).replace("{{currency_label}}",currencyHelper.getLabel(recurlyConfig.currency));s.$resumeInfo.append('<p class="billed-label">'+v+"</p><br/>")}},getTotalPrice:function(e,t){var i=this,n=this.constructor.PURCHASE.TOTAL_LABEL,s=i.purchaseRecord.amount_in_cents/100,r=Helpers.CouponHelper.getDuration(),o=0,a=window.currencyHelper.getSymbol(recurlyConfig.currency);return i.paymentType!==i.constructor.TYPES.SUBSCRIPTION&&i.getMultiPurchaseService().isMultiplePurchase()&&(s=i.getMultiPurchaseService().getSelectedTotalPrice()),e&&e.amount&&(o=s-Helpers.CouponHelper.calculatePrice(s)),i.paymentType===i.constructor.TYPES.SUBSCRIPTION&&(n=i._getSubscriptionTotalLabel(),i.isAnnualSubscription()!==!0&&e&&("temporal"===r.type?n+=" "+i.constructor.SUBSCRIPTION.TOTAL_WITH_MONTH.replace("{{period}}"," "+r.length):n=i.constructor.SUBSCRIPTION_TOTAL_DISCOUNT_LABEL)),i.$totalTextLabel.text(n),s=s-o+t,i.$totalAmountLabel.text(a+i._fixNumberFormat(s,2)),s},_hideSummaryThumbnailInVideo:function(){var e=this;Helpers.StageType&&Helpers.StageType.isVideo()&&(e.getElement().find(".summary-thumbnail > img").addClass("is-video"),e.getElement().find(".summary-thumbnail .data-container").addClass("is-video"))}}}),Class("WidgetFactory")({buildPurchaseOverlay:function(e){return new UI.PurchaseOverlay(e)},buildSinglePurchase:function(e){return new UI.SinglePurchasesModal(e)},buildSinglePurchaseVarB:function(e){return new UI.SinglePurchaseVarB(e)},buildPurchaseOverlayMultiple:function(e){return new UI.MultiplePurchaseOverlay(e)}}),Class("PurchaseWidgetStrategy")({PurchaseOverlay:"buildPurchaseOverlay",purchaseOverlayMultiple:"buildPurchaseOverlayMultiple",prototype:{init:function(e){return e!==PurchaseWidgetStrategy.PurchaseOverlay?void(this.strategyName=e):void(this.strategyName=this._getCheckoutExperimentVariant())},_getCheckoutExperimentVariant:function(){var e=PurchaseWidgetStrategy.PurchaseOverlay;return Helpers.App.isMerchPreviewEnabled()&&Helpers.StageType.isLogo()&&Boolean(Service.MultiplePurchase.getInstance())&&page.stage.$body.find(".merch-preview-container").length>0&&(e=PurchaseWidgetStrategy.purchaseOverlayMultiple),e},create:function(e){return new WidgetFactory[this.strategyName](e)}}}),Class("SinglePurchasesModalStrategy")({SinglePurchase:"buildSinglePurchase",SinglePurchaseVarB:"buildSinglePurchaseVarB",prototype:{init:function(e){return e!==SinglePurchasesModalStrategy.SinglePurchase?void(this.strategyName=e):void(this.strategyName=this._getExperimentVariant())},create:function(e){return new WidgetFactory[this.strategyName](e)},_getExperimentVariant:function(){var e=SinglePurchasesModalStrategy.SinglePurchase;return this._shouldShowVariantB()&&(e=SinglePurchasesModalStrategy.SinglePurchaseVarB),e},_shouldShowVariantB:function(){return stageCategory=Helpers.StageType.getCategoryName(),"Logos"===stageCategory&&window.logo_price_experiment?!0:!1}}}),Module(Helpers,"CouponHelper").includes(CustomEventSupport)({KEY:"pl_coupon",TYPE_SUBSCRIPTION:"subscription",TYPE_SINGLE_PURCHASE:"singlePurchase",DISCOUNT_TYPE_PERCENT:"percent",DISCOUNT_TYPE_AMOUNT:"dollars",SOURCE_URL:"url",SOURCE_COOKIE:"cookie",SOURCE_SET:"set",code:null,coupon:null,types:null,discount:null,duration:null,valid:null,source:null,load:function(e){var t,i;if(e||(e=!1),this.code=null,this.coupon=null,this.types=[],this.discount=null,this.duration=null,this.valid=null,this.source=null,t=Helpers.App.getUrlParam(this.KEY),$.cookie.json=!0,i=$.cookie(this.KEY),$.cookie.json=!1,t&&t.length){if(Helpers.App.getSubscription())return this.dispatch("coupon.error.newUser"),void this.remove();this.code=t,this.source=this.SOURCE_URL,this._validate()}else i?("string"==typeof i&&(i=JSON.parse(i)),i.coupon_code&&(this.code=i.coupon_code,this.source=this.SOURCE_COOKIE,this._validate())):e&&(this.code=e,this.source=this.SOURCE_SET,this._validate())},getCode:function(){return this.code},getCoupon:function(){return this.coupon},getTypes:function(){return this.types},getDiscount:function(){return this.discount},getDuration:function(){return this.duration},getSource:function(){return this.source},calculatePrice:function(e){return e=parseFloat(e),isNaN(e)||!this.discount?!1:(this.discount.type===this.DISCOUNT_TYPE_PERCENT?e=e*(100-this.discount.amount)/100:this.discount.type===this.DISCOUNT_TYPE_AMOUNT&&(e-=this.discount.amount),0>e&&(e=0),e=Math.floor(100*e)/100)},exists:function(){return this.coupon?!0:!1},isValid:function(){return this.valid},applyTo:function(e){return this.types&&this.types.length&&this.types.indexOf(e)>-1?!0:!1},applyToPlan:function(e){var t=this.getCoupon();if(null===t)return!1;if(t.applies_to_all_plans===!0)return!0;for(var i=0;i<t.plan_codes.length;i++)if(t.plan_codes[i]===e)return!0;return!1},_validate:function(){var e,t;this.code&&(t=Helpers.App.getSubscription(),(!t||t.is_paused)&&(e={success:this._validateSuccessHandler.bind(this),error:this._validateErrorHandler.bind(this)},$.ajax({url:"/coupons/"+this.code+"/sign",type:"POST",success:function(t){e.success(t)},error:function(t){e.error(t)}})))},_validateSuccessHandler:function(e){e.coupon&&"redeemable"===e.coupon.state?this._process(e.coupon):this._setInvalid(),this.dispatch("coupon.validated")},_validateErrorHandler:function(e){this._setInvalid(),this.dispatch("coupon.validated")},_process:function(e){var t;e&&(this.coupon=e,this.valid=!0,this._setTypes(),this._setDiscount(),this._setDuration(),$.cookie.json=!0,$.cookie(this.KEY,this.coupon,{path:"/"}),$.cookie.json=!1,t=Helpers.App.getUser(),Helpers.App.isLoggedIn()&&!t.coupon&&this.applyToUser())},_setTypes:function(){this.exists()&&(this.types=[],this.coupon.applies_to_all_plans?this.types.push(this.TYPE_SUBSCRIPTION):Object.keys(window.plans).forEach(function(e,t){-1===this.types.indexOf(this.TYPE_SUBSCRIPTION)&&this.coupon.plan_codes.indexOf(e)>-1&&this.types.push(this.TYPE_SUBSCRIPTION)}.bind(this)),this.coupon.applies_to_non_plan_charges&&this.types.push(this.TYPE_SINGLE_PURCHASE))},_setDiscount:function(){if(this.exists())if(this.discount={},this.discount.type=this.coupon.discount_type,this.discount.type===this.DISCOUNT_TYPE_PERCENT)this.discount.amount=this.coupon.discount_percent,this.discount.label=this.discount.amount+"%";else if(this.discount.type===this.DISCOUNT_TYPE_AMOUNT){var e=window.currencyHelper.getSymbol(recurlyConfig.currency);this.discount.amount=this.coupon.discount_in_cents[window.recurlyConfig.currency]/100,this.discount.label=e+this.discount.amount}else this.discount=null},_setDuration:function(){this.exists()&&(this.duration={},this.duration.type=this.coupon.duration,"temporal"===this.duration.type?this.duration.length=this.coupon.applies_for_months:this.duration.length=!1)},_setInvalid:function(){this.valid=!1,$.removeCookie(this.KEY,{path:"/"})},remove:function(){this.code=null,this.coupon=null,this.types=[],this.discount=null,this.duration=null,this.valid=null,this.source=null,$.removeCookie(this.KEY,{path:"/"}),this.dispatch("coupon.removed")},markAsUsed:function(){(this.duration&&"single_use"===this.duration.type||this.coupon&&"subscription"===this.coupon.redemption_resource)&&this.remove(),this.applyToUser()},refresh:function(){this.dispatch("coupon.refresh")},applyToUser:function(){this.getCode()&&$.ajax({type:"POST",url:"/coupons/"+this.getCode()+"/apply",success:function(){return!0},error:function(){return!1}})},prototype:{_isCouponRedeemable:function(e){return"redeemable"===e.state},_couponAppliesToAllPlans:function(e){return e.applies_to_all_plans},_whatPlansCouponAppliesFor:function(e){return e.plan_codes},_couponDiscountType:function(e){return e.discount_type},_couponDiscountAmount:function(e){var t;return t="percent"===e.discount_type?e.discount_percent:e.discount_in_cents},_applyCouponDiscount:function(e,t){return"percent"===e.type?t=t*(100-e.amount)/100:(t-=e.amount[window.recurlyConfig.currency],0>t&&(t=0)),Math.round(100*t)/100}}}),Class(Helpers,"DownloadProcess").includes(CustomEventSupport)({RETRY_DELAY:600,RETRY_TIMES:3,MAX_POLLING_TIMES:280,PING_INTERVAL:5e3,processingItems:[],processedItems:[],processingHashItems:{},pollPromise:null,pollProcessing:function(){var e=Helpers.DownloadProcess,t=Utils.bindFn(e);return null!==e.pollPromise&&(e.pollPromise.cancel(),e.pollPromise=null),e.pollPromise=e._pollingBuilder(t(e._startPollHighRes),t(e._checkPollStatus)),e.pollPromise},getAllDownloads:function(){var e=Helpers.DownloadProcess;return Array().concat(e.getSuccessDownloads(),e.getProcessingDownloads())},getSuccessDownloads:function(){return Helpers.DownloadProcess.processedItems},getProcessingDownloads:function(){return Helpers.DownloadProcess.processingItems},getProcessByStageId:function(e){return Helpers.DownloadProcess.getAllDownloads().filter(function(t){return t.stage_id===e})},_pollingBuilder:function(e,t){return Utils.createPollingBuilder(this.MAX_POLLING_TIMES,this.PING_INTERVAL)(e)(t)},_startPollHighRes:function(){var e=Helpers.DownloadProcess,t=Utils.bindFn(e);return e._retrayableProcessingRequest(e.RETRY_TIMES,e.RETRY_DELAY).then(Utils.tap(t(e._checkPollResults))).then(t(e._reverseList)).then(t(e._groupItems)).then(Utils.tap(t(e._setItems))).then(Utils.tap(t(e._processPollResults)))},_checkPollResults:function(e){var t=Helpers.DownloadProcess,i=0===e.items.length&&e.hasDownloads===!0,n=0===e.items.length&&e.hasDownloads===!1;i===!0?t.dispatch("downloadNoRecent"):n===!0&&t.dispatch("downloadEmpty");
},_reverseList:function(e){return e.items.reverse()},_groupItems:function(e){var t={};return t.processedItems=[],t.processingItems=[],t.items=e,e.forEach(function(e){e.error!==!0&&(e.processing===!0?t.processingItems.push(e):t.processedItems.push(e))}),t},_setItems:function(e){var t=Helpers.DownloadProcess;t.processedItems=e.processedItems,t.processingItems=e.processingItems},_processPollResults:function(e){var t=Helpers.DownloadProcess,i=e.items;t.dispatch("downloadStartUpdate",{items:i}),i.forEach(function(e,i){var n=t._getParsedItemData(e),s=n.error===!0,r=t.processingHashItems[n.name]!==!0;s===!0?t.dispatch("downloadItemError",{item:n,index:i}):r===!0?(t.processingHashItems[n.name]=!0,t.dispatch("downloadItemNew",{item:n,index:i})):t.dispatch("downloadItemUpdate",{item:n,index:i})}),t.dispatch("downloadEndUpdate",{items:i})},_checkPollStatus:function(){var e=Helpers.DownloadProcess.getProcessingDownloads();return 0===e.length},_getParsedItemData:function(e){return Object.assign({name:"item"+e.id,stage_category:e.category},e)},_requestProcessing:function(){var e=Helpers.RequestConfig.prepareConfig({url:"/api/v1/base/processing",cache:!1});return P.ajax(e)},_retrayableProcessingRequest:function(e,t){var i=Helpers.DownloadProcess,n=P.retryableDelayed(function(){return i._requestProcessing()},e,t);return n()}}),Class(UI,"SubscriptionsPartial").inherits(Widget).includes(Helpers.SubscriptionHelper,Helpers.CouponHelper,BubblingSupport,GenericDestroySupport,Translator,CurrencyLabelSetter)({elementClass:"subscriptions-partial-widget",html:'        <div>            <div class="subscriptions-wrapper">                <div class="label-wrapper">                    <div class="label-text"></div>                </div>                <div class="header">                    <div class="title"></div>                    <div class="subtitle"></div>                </div>                <div class="content-wrapper">                    <div class="categories"></div>                    <div class="carousel-wrapper"></div>                </div>                <div class="footer">                    <div class="period-wrapper">                        <div class="period-container plan-monthly">                            <div class="period-label">MONTHLY<strong class="percent-discount discount"></strong></div>                            <button class="period" data-period="monthly">                                <span class="price original-price"></span>                                <span class="price final-price"></span>                                <span class="price-label">/ Month</span>                            </button>                        </div>                        <div class="period-container plan-annual">                            <div class="period-label">ANNUAL<strong class="percent-discount discount"></strong></div>                            <button class="period" data-period="annual">                                <span class="price original-price"></span>                                <span class="price final-price">$99.95</span>                                <span class="price-label"> / Year</span>                                <small>Just <span class="annual-monthly-amount">$8.33</span> / Month, <strong class="annual-percent-discount">Save <span class="annual-save">58</span>%</strong></small>                            </button>                        </div>                    </div>                    <div class="subscription-cta-container minimal"></div>                </div>                <div id="cyberweek-banner">                    <img srcset="https://placeitmarketing.s3.amazonaws.com/public/cyberweek2022/pricingmodal/sale-mobile.svg 165w, https://placeitmarketing.s3.amazonaws.com/public/cyberweek2022/pricingmodal/sale.svg 200w" sizes="(max-width: 1024) 165px, 200px" >                    <div class="text-wrapper">                        <div class="annual-wrapper">                            <h3>33% Off</h3>                            <p>Annual</p>                            <p>subscription</p>                        </div>                        <div class="monthly-wrapper">                            <h3>10% Off</h3>                            <p>Monthly</p>                            <p>subscription</p>                        </div>                    </div>                </div>            </div>            <div class="disclaimer">                <div class="coupon-disclaimer"></div>                <span class="disclaimer-info-footer"><strong>*Cancel anytime.</strong> Unlimited subscription billed yearly in {{currency_label}}.</span>                <span style="font-size: 10px">1 month minimum commitment if subscribers have downloaded any templates.</span>            </div>        </div>',TEXT_TITLE:"Get the Unlimited Subscription!",TEXT_SUBTITLE:"Access to ALL Our Templates!",TEXT_SUBSCRIPTION_ACTIVATION_ERROR:"Your subscription could not be activated, Please try again later",TEXT_INVALID_OR_CANCELED_SUBSCRIPTION:"Invalid subscription or already canceled subscription",TEXT_ERROR_CHARGING_STORE_CARD:"There was an error charging your stored card. Please use another payment option.",TEXT_SUBSCRIPTION_SUCCESS:"Your subscription is now activated",TEXT_CATEGORIES:[{id:"mockups",title:"Mockups",subtitle:"Unlimited",features:[{type:"video",webm:"https://s3.amazonaws.com/placeit-images/storage/video-mockups-preview.webm",mp4:"https://s3.amazonaws.com/placeit-images/storage/video-mockups-preview.mp4",content:"Everything you'd get when you purchase one at a time but with <br /> <strong>unlimited access to Mockups, Designs, Logos, & Videos.</strong>",preview:!0},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/Mockup-Library-Pricing-Modal.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/Mockup-Library-Pricing-Modal.mp4",content:"The world's largest mockup library with {{mockupsStagesCount}}+ templates!"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-mockups-pixel-perfect.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-mockups-pixel-perfect.mp4",content:"Pixel-perfect mockups in seconds. Just add your image!"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-mockups-amazing-videos.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-mockups-amazing-videos.mp4",content:"Make amazing video mockups right from your browser"}]},{id:"designs",title:"Designs",subtitle:"Unlimited",features:[{type:"video",webm:"https://s3.amazonaws.com/placeit-images/storage/video-designs-preview.webm",mp4:"https://s3.amazonaws.com/placeit-images/storage/video-designs-preview.mp4",content:"Everything you'd get when you purchase one at a time but with <br /> <strong>unlimited access to Mockups, Designs, Logos, & Videos.</strong>",preview:!0},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-designs-creative-templates.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-designs-creative-templates.mp4",content:"Choose from over 5,700 beautiful design templates"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-designs-easy.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-designs-easy.mp4",content:"Easy to edit templates. Design like a pro!"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-designs-banner-ads.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-designs-banner-ads.mp4",content:"Download all size variations with one click!"}]},{id:"videos",title:"Videos",subtitle:"Unlimited",features:[{type:"video",webm:"https://s3.amazonaws.com/placeit-images/storage/video-videos-preview.webm",mp4:"https://s3.amazonaws.com/placeit-images/storage/video-videos-preview.mp4",content:"Everything you'd get when you purchase one at a time but with <br /> <strong>unlimited access to Mockups, Designs, Logos, & Videos.</strong>",preview:!0},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-stunning-templates.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-stunning-templates.mp4",content:"Hundreds of stunning video templates"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-easy-to-use.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-easy-to-use.mp4",content:"Making a video couldn't be easier!"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-massive-audio-library.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-massive-audio-library.mp4",content:"Choose from over 1000 free music tracks"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-predesigned-slides.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-predesigned-slides.mp4",content:"Make beautiful slideshow videos"}]},{id:"logos",title:"Logos",subtitle:"Unlimited",features:[{type:"video",webm:"https://s3.amazonaws.com/placeit-images/storage/video-logos-preview.webm",mp4:"https://s3.amazonaws.com/placeit-images/storage/video-logos-preview.mp4",content:"You get everything Unlimited with <strong>access to ALL our Templates!</strong>",preview:!0},{type:"video",webm:"https://placeit-images.s3.amazonaws.com/storage/Logo-templates.webm",mp4:"https://placeit-images.s3.amazonaws.com/storage/Logo-templates.mp4",content:"<div>Choose from over <strong>4,600+</strong> customizable logo templates.</div>"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-logos-easy.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-logos-easy.mp4",content:"Making a logo is as easy as filling out a form!"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-logos-pdf.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-logos-pdf.mp4",content:"Download your logo as a PDF!"}]}],MOCKUPS_FALLBACK_COUNT:31300,MONTHLY_CANCEL_FOOTER:"<strong>*Cancel anytime.</strong> Unlimited subscription billed monthly in {{currency_label}}.",ANNUAL_CANCEL_FOOTER:"<strong>*Cancel anytime.</strong> Unlimited subscription billed yearly in {{currency_label}}.",prototype:{_resizeHandler:null,_canplayHandler:null,couponCode:null,discount:null,plans:null,plansWrapperEl:null,subscriptionButton:null,footerElement:null,openPurchasesModal:null,_activePlan:null,isMobile:null,preview:null,COMPACT_BREAKPOINT:390,DEFAULT_CATEGORY:"mockups",PERIOD_MONTHLY:"monthly",PERIOD_ANNUAL:"annual",invalidCoupon:!1,carousel:null,currentCategory:null,currentFeature:null,previewCategory:null,carouselData:null,$title:null,$subtitle:null,$category:null,$categories:null,$contentWrapper:null,$couponDisclaimer:null,$price:null,$discount:null,$period:null,$periodPrice:null,$periodSave:null,$comparePrice:null,period:null,elementParent:null,_taxRequestInProgress:null,_scopedCouponValidatedHandler:null,_scopedCouponRemovedHandler:null,title:null,subtitle:null,label:null,categories:null,_singleCtaBlock:null,$cyberWeekBanner:null,init:function(e){var t,i;Widget.prototype.init.call(this,e),this.title=this.constructor.TEXT_TITLE,e.title&&(this.title=e.title),this.subtitle=this.constructor.TEXT_SUBTITLE,this.categories=this.constructor.TEXT_CATEGORIES,this._canplayHandler=[],t="",e.previewCategory&&(t=e.previewCategory,this.previewCategory=this.getCategoryID(e.previewCategory),this.element.addClass("category-"+this.previewCategory.toLowerCase())),this.$title=this.element.find(".title"),this.$subtitle=this.element.find(".subtitle"),this.$label=this.element.find(".label-wrapper .label-text"),this.$couponDisclaimer=this.element.find(".coupon-disclaimer"),this.plans=[],this.plansWrapperEl=this.element.find(".subscriptions-widget__plans-wrapper"),this.subscriptionButton=this.element.find(".s-btn"),this.couponValidatingTxt=this.element.find(".coupon-field-container .validating"),this.footerElement=this.element.find(".modal-footer"),this.openPurchasesModal=this.footerElement.find("#open-purchase-modal"),this.taxInformation=this.element.find(".plan-tax"),this.$carouselWrapper=this.element.find(".carousel-wrapper"),this.$categories=this.element.find(".categories"),this.$contentWrapper=this.element.find(".content-wrapper"),this.$price=this.element.find(".period-price"),this.$comparePrice=this.element.find(".price-compare"),this.$discount=this.element.find(".discount-wrapper .discount"),this.$period=this.element.find(".period-wrapper > .period-container > .period"),this.$periodPrice=this.element.find(".period-price"),this.$periodSave=this.element.find(".period-save"),this.$annualSave=this.element.find(".annual-save"),this.$annualPrice=this.element.find(".annual-price"),this.$annualMonthlyAmount=this.element.find(".annual-monthly-amount"),this.$cyberWeekBanner=this.getElement().find("#cyberweek-banner"),this.$disclaimerFooter=this.element.find(".disclaimer-info-footer"),this["buttonWrapper_"+Registry.Plans.PLAN_MONTHLY]=this.element.find(".period-container.plan-monthly"),this["buttonWrapper_"+Registry.Plans.PLAN_ANNUAL]=this.element.find(".period-container.plan-annual"),this.$title.html(this.title),this.$subtitle.html(this.subtitle),this.label&&(this.$label.html(this.label),this.$label.parent().addClass("show")),this.carouselData=[],i=0,this.categories.forEach(function(e){var t={};$.extend(!0,t,e),this.carouselData.push(t),this.carouselData[i].features=[],e.features.forEach(function(t){(t.preview!==!0||this.previewCategory==e.id)&&this.carouselData[i].features.push(t)}.bind(this)),i++}.bind(this)),this._renderPlanButtons(),window.is_cyberweek&&this.$cyberWeekBanner.addClass("show"),this.bind("render",function(){this.getElement().find(".period-wrapper").hide(),null===this._singleCtaBlock&&this._renderSingleSubscriptionCTA()}),this._renderCategories(),this._bindEvents()},_bindEvents:function(){var e;e=this,this.bind("purchase.success",this._handleSubscriptionSuccess.bind(this)),UI.SubscriptionsPlan.bind("plan:row:clicked",function(e){Helpers.App.getSubscription();this.plans.forEach(function(e){e.deselect()}),e.data.select(),this._setPlan(e.data.planInfo),this.dispatch("plan:row:clicked",e.data)}.bind(this)),this.openPurchasesModal.on("click",function(e){e.preventDefault(),this.parent.deactivate(function(){this.dispatch("show:purchaseModal")}.bind(this))}.bind(this)),this.$categories.find(".category").on("click",function(){e.carousel.goToSlide($(this).data("slide"))}),this.subscriptionButton.on("click",function(t){t.preventDefault(),Helpers.GlobalEventTracker.planCTAClicked({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id,plan_name:e._getPlan().name}),e.dispatch("subscribe:button:clicked")}),e._scopedCouponValidatedHandler=e._couponValidatedHandler.bind(this),Helpers.CouponHelper.bind("coupon.validated",e._scopedCouponValidatedHandler),e._scopedCouponRemovedHandler=e._couponRemovedHandler.bind(this),Helpers.CouponHelper.bind("coupon.removed",e._scopedCouponRemovedHandler),this.$period.on("click",function(t){var i=t.currentTarget;window.isIndianIp&&$(i).data("period")===e.PERIOD_MONTHLY||e.$period.attr("disabled")||(e.$period.attr("disabled",!0),$(i).data("period")===e.PERIOD_ANNUAL?e._activePlan=Registry.Plans.get(Registry.Plans.PLAN_ANNUAL):e._activePlan=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),Helpers.GlobalEventTracker.planCTAClicked({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id},$(i).data("period")),sessionStorage.setItem("plan",$(i).data("period")),e.period=$(i).data("period"),e.dispatch("subscribe:button:clicked"))})},render:function(e,t){return Widget.prototype.render.call(this,e,t),this.elementParent=this.element.parent(),this},_recalculateSize:function(){this.elementParent&&this.elementParent.width()<=this.COMPACT_BREAKPOINT?this.element.addClass("compact"):this.element.removeClass("compact")},instantiateStoredBillingInfoOverlay:function(){void 0===this.storedBillingInfoOverlay&&(this.appendChild(new UI.StoredBillingInfoOverlay({name:"storedBillingInfoOverlay"})),this.storedBillingInfoOverlay.bind("change-card",function(e){this._showPaymentForm(e.data.recurlyData)}.bind(this)).bind("use-stored-card",function(e){this._useStoredBillingInfo(e.data.recurlyData)}.bind(this)))},subscribeButtonClick:function(){Helpers.App.isLoggedIn()?this._handlePlanSubscribe():(this.parent.deactivate&&this.parent.deactivate(),Helpers.App.setSubscribeFromModal(this.type),this.dispatch("purchase.not_logged_in"))},hideFooter:function(){return this.footerElement.hide(),this},_setPlan:function(e){var t,i;t=this,t._activePlan=e,i=Helpers.Price.plan(e),i.price.then(function(e){t._updateTaxRate(e),i.priceWithDiscount.then(function(e){t._updateTaxRate(e)})})},_getPlan:function(){return this._activePlan||this.plans[0].planInfo},_updateTaxRate:function(e){var t=this;t._configureRecurly();var i=t.getTaxMessage(e);i.then(function(e){t.taxInformation.text(e)})["catch"](function(e){t.taxInformation.text(e)})},_configureRecurly:function(){var e={currency:window.recurlyConfig.currency,publicKey:window.recurlyConfig.publicKey};e.fields={all:{style:{fontSize:"16px",fontColor:"#555555",padding:"1px",placeholder:{color:"#55555 !important"}}},number:{selector:"#recurly-number",style:{placeholder:{content:""}}},cvv:{selector:"#recurly-cvv",style:{placeholder:{content:""}}},month:{selector:"#recurly-month",style:{placeholder:{content:""}}},year:{selector:"#recurly-year",style:{placeholder:{content:""}}},vat_number:{selector:"#recurly-vat-number",style:{placeholder:{content:""}}}},recurly.configure(e)},_sign:function(e,t){var i={url:"/subscriptions/sign",type:"post",data:$.extend(!0,{},e),dataType:"json",success:function(e){t(e)}},n=Helpers.RequestConfig.prepareConfig(i);$.ajax(n)},_showPaymentForm:function(e){var t,i,n;i=this.getEventTrackerName(),n=EventTracker.info({type:i,data:{}}),t=null,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(e.plan_recurly_uuid)&&(t=Helpers.CouponHelper.getCode());var s={ajaxUrl:"/subscriptions/{{token}}/transaction",ajaxParams:{plan_recurly_uuid:e.plan_recurly_uuid,coupon_code:t,eventData:n}};$.extend(!0,e,s),this.purchaseOverlay&&this.purchaseOverlay.destroy();var r={name:"purchaseOverlay",purchaseRecord:e,paymentType:"subscription",discount:this.discount};this.appendChild(this._createPurchaseOverlayWidget(r)),this.purchaseOverlay.bind("purchase.failed",function(e){if("purchaseOverlay"!==e.target.name){var t=this.constructor.TEXT_SUBSCRIPTION_ACTIVATION_ERROR;this.dispatch("subscription.failure",{message:t})}}.bind(this)),this.purchaseOverlay.initSubscriptionForm().render($("body")).activate(),setTimeout(function(){this.$period.attr("disabled",!1)}.bind(this))},_createPurchaseOverlayWidget:function(e){var t=new PurchaseWidgetStrategy(PurchaseWidgetStrategy.PurchaseOverlay);return console.log(this.constructor.className+" -> Creating the purchase overlay"),t.create(e)},_showStoredBillingInfo:function(e){this.instantiateStoredBillingInfoOverlay(),this.storedBillingInfoOverlay.refresh(e),this.storedBillingInfoOverlay.activate(),this.$period.attr("disabled",!1)},_handleSubscriptionSuccess:function(e){Helpers.App._getPurchases(function(t){var i;window.page.appNavBar.updateStatus();var n={};n.message=this.constructor.TEXT_SUBSCRIPTION_SUCCESS,this.dispatch("subscription.success",n),i=Helpers.App.getSubscriptionEventName(e.data.plan_recurly_uuid),Helpers.GlobalEventTracker.subscriptionSuccess({plan_name:Helpers.App.getSubscription().plan.name,plan_recurly_uuid:e.data.plan_recurly_uuid,amount_in_cents:Helpers.App.getSubscription().plan.amount_in_cents,user_id:Helpers.App.getUser().id,event:i,invoice_number:e.data.invoice_number})}.bind(this))},_handlePlanSubscribe:function(){var e,t=this;switch(sessionStorage.getItem("plan")){case this.PERIOD_MONTHLY:e=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY);break;case this.PERIOD_ANNUAL:e=Registry.Plans.get(Registry.Plans.PLAN_ANNUAL);break;default:this.setPeriod(this.PERIOD_MONTHLY,!0)}t.signRequestWithRecurly(e,t.discount,function(e){t.parent.deactivate&&t.parent.deactivate(),Helpers.GlobalEventTracker.recurlyFormAfterPlanSelected({plan_code:e.plan_code,amount_in_cents:e.amount_in_cents,description:e.description}),t._showPaymentForm(e)})},_renderCategories:function(){var e="",t=0;this.carouselData.forEach(function(i){e+='<div class="category" data-category="'+i.id+'" data-slide="'+t+'">',e+='<div class="title">'+i.title+"</div>",e+='<div class="subtitle">'+i.subtitle+"</div>",e+="</div>",t+=i.features.length}),this.$categories.html(e)},_renderFeatures:function(e){var t,i,n,s=this;this.carousel||(e||(e=0),this.currentFeature=e,t='<div class="carousel">',this.carouselData.forEach(function(e){e.features.forEach(function(r,o){switch(n=!1,i="feature carousel-item",r.preview===!0&&(i+=" preview"),r.highlight===!0&&(n=!0),t+='<div class="'+i+'" data-category="'+e.id+'" data-feature="'+o+'" data-type="'+r.type+'" data-highlight="'+n+'">',r.type){case"image":t+='<div class="feature-image"><img src="'+r.src+'" /></div>';break;case"video":t+='<div class="feature-video">',r.preview===!0&&(t+='<div class="preview-wrapper"></div>'),t+='<img class="video-loader" src="/assets/loaders/circular.gif" alt="Loading..." />',t+='<video data-status="waiting" data-mp4="'+r.mp4+'" data-webm="'+r.webm+'" class="not-loaded" autoplay="" controlslist="nodownload" loop="" muted="muted" playsinline>',t+="</video>",r.hasOwnProperty("videoOverlay")&&(t+='<img class="feature-video-overlay" src="'+r.videoOverlay+'" class="feature-overlay">'),t+="</div>"}r.hasOwnProperty("content")&&(r.content.includes("{{mockupsStagesCount}}")&&(r.content=s._setMockupsStagesCount(r.content)),t+='<div class="feature-content">'+r.content+"</div>"),t+="</div>"})}),t+="</div>",this.carousel=new UI.SimpleSlider({name:"carousel",content:t}).render(this.$carouselWrapper),this.carousel.bind("carousel.afterChange",function(e){var t=e.data;s.currentFeature=t.feature,s._selectCategory(t.category)}),this._loadVideo(),this.playCurrentVideo(),this._renderDots())},_setMockupsStagesCount:function(e){var t=this.mockupsStagesCount||this.constructor.MOCKUPS_FALLBACK_COUNT,i=100*Math.floor(t/100),n=i.toLocaleString();return e.replace("{{mockupsStagesCount}}",n)},_renderDots:function(){var e,t,i,n,s,r=this.currentCategory,o=this.currentFeature;s=this.element.find('.feature[data-category="'+r+'"]:not(.slick-cloned)'),this.element.find(".carousel-wrapper .carousel-dots").remove(),s.length&&(e='<ul class="carousel-dots">',s.each(function(){i=$(this).attr("slide-num"),n=$(this).data("feature"),t=!1,n===o&&(t=!0),e+='<li><button data-slide="'+i+'" class="'+(t?"active":"")+'">'+i+"</button></li>"}),e+="</ul>",this.element.find(".carousel-wrapper").append(e),this.element.find(".carousel-dots button").on("click",function(e){e.preventDefault(),this.carousel.goToSlide($(e.target).data("slide"))}.bind(this)))},_loadVideo:function(e){var t,i,n;if(t=e?this.element.find(".carousel .slick-slide[data-slick-index="+e+"] video"):this.element.find('.carousel .carousel-item video[data-status="waiting"]').eq(0),n=$("source",t),t.length)if(i=t.get(0),n.length)4!==i.readyState&&i.load(),this.playVideo(i);else if("waiting"===t.data("status")){t.append('<source src="'+t.data("webm")+'" type="video/webm">'),t.append('<source src="'+t.data("mp4")+'" type="video/mp4">'),t.attr("data-status","loading"),i=t.get(0);var s=function(e){$(e.target).attr("data-status","loaded"),$(e.target).siblings(".video-loader").remove(),$(e.target).removeClass("not-loaded"),this._loadVideo(),i.removeEventListener("canplay",s)}.bind(this);this._canplayHandler.push(s),i.addEventListener("canplay",s)}},show:function(e){var t,i;this.$period.attr("disabled",!1),i=this.PERIOD_MONTHLY,this.setPeriod(i,!0),this._renderFeatures(),t=this.getCategoryID(e),this._selectCategory(t),this.carousel.goToSlide(this.currentCategoryFirstSlide),this.setPreview(),this._recalculateSize(),this._resizeHandler=this._recalculateSize.bind(this),window.addEventListener("resize",this._resizeHandler),this.element.addClass("show")},hide:function(){this.element.removeAttr("style"),this.element.removeClass("show"),this._removeVideos(),this.carousel&&this.carousel.destroy(),this.carousel=null,window.removeEventListener("resize",this._resizeHandler)},_selectCategory:function(e){var t,i;t=0,i=0,this.currentCategory=e,this.$categories.find(".category").removeClass("active"),this.$categories.find('.category[data-category="'+e+'"]').addClass("active"),this.carouselData.forEach(function(n){n.id===e?t=i:i+=n.features.length}),this.currentCategoryFirstSlide=t,this._renderDots()},setPreview:function(e){var t,i,n,s;if(t=this.$contentWrapper.find(".preview-wrapper"),s=this,e)this.preview=e;else{if(!this.preview)return;e=this.preview}if(t.length){i=t.find("video"),i.length&&(t.removeClass("play"),t.find(".video-control-wrapper").removeClass("play"),i.get(0).load()),"image"===e.type?(t.find("img").remove(),n='<img src="'+e.source+'" />'):"video"===e.type&&(t.find("video").remove(),t.find(".video-control").remove(),n='<div class="video-control-wrapper"><div class="video-control"></div></div>',n+='<div class="video-wrapper"><video class="not-loaded" controlslist="nodownload" muted="muted" playsinline>',n+='<source src="'+e.source+'" type="video/mp4" muted playsinline>',n+="</video></div>"),this.element.addClass("preview-"+e.type),t.html(n);var r=t.find(".video-wrapper video"),o=t.find(".video-wrapper"),a=t.find(".video-control-wrapper");"video"===e.type&&(setTimeout(function(){r[0].load(),r.removeClass("not-loaded"),s.playVideo(r[0]),r[0].pause()},1),s._previewVideo=new UI.KeyframeVideoPresenter(r,e.keytime)),a.on("click",function(){s._previewVideo.isPlaying()||(s._previewVideo.play(),t.addClass("play"),a.addClass("play"))}),o.click(function(){s._previewVideo.isPlaying()&&(s._previewVideo.pause(),t.removeClass("play"),a.removeClass("play"))}),r.on("ended",function(){i.load(),t.removeClass("play"),a.removeClass("play")})}},getCategoryID:function(e){var t;switch(e||(e=window._pl_category),e){case"Mockup":case"Mockups":t="mockups";break;case"Design":case"Design Templates":t="designs";break;case"Logo":case"Logos":t="logos";break;case"Video":case"Videos":t="videos";break;default:t="mockups"}return t},playCurrentVideo:function(){var e=this.element.find(".feature.slick-active .feature-video video");e.length>0&&(e=e.get(0),4!==e.readyState&&e.load(),this.playVideo(e))},playVideo:function(e){var t=e.play();void 0!==t&&t.then(function(){})["catch"](function(){})},destroy:function(){window.removeEventListener("resize",this._resizeHandler),this._removeVideos(),Helpers.CouponHelper.unbind("coupon.validated",this._scopedCouponValidatedHandler),Helpers.CouponHelper.unbind("coupon.removed",this._scopedCouponRemovedHandler),this.genericDestroy()},setPeriod:function(e,t){var i,n;switch(this.period=e,this.$periodPrice.text(""),this.$periodSave.text(""),this.element.removeClass("period-monthly"),this.element.removeClass("period-annual"),this.element.find(".period-wrapper .period").removeClass("checked"),this.element.addClass("period-"+this.period),i=this.element.find('.period-wrapper .period[data-period="'+this.period+'"]'),i.length&&i.addClass("checked"),e){case this.PERIOD_MONTHLY:n=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),t||Helpers.GlobalEventTracker.subscriptionPlanSelected({old:this.PERIOD_ANNUAL,"new":this.PERIOD_MONTHLY,place:this.getPlaceNameFromType()});break;case this.PERIOD_ANNUAL:n=Registry.Plans.get(Registry.Plans.PLAN_ANNUAL),t||Helpers.GlobalEventTracker.subscriptionPlanSelected({old:this.PERIOD_MONTHLY,"new":this.PERIOD_ANNUAL,place:this.getPlaceNameFromType()});break;default:this.setPeriod(this.PERIOD_MONTHLY,!0)}n&&this._setPlan(n)},getPlaceNameFromType:function(){switch(this.type){case"modal":return"subscription_modal";case"compare":return"purchase_modal";default:return"account_page"}},getEventTrackerName:function(){var e;switch(e="Subscription:success:",this.period){case this.PERIOD_MONTHLY:e+="Unlimited";break;case this.PERIOD_ANNUAL:e+="Unlimited:Annual"}return e},activate:function(){return Widget.prototype.activate.call(this),this.show(),this},_removeVideos:function(){var e,t;this._canplayHandler.forEach(function(e){window.removeEventListener("canplay",e)}),this._canplayHandler=[],e=this.element.find("video"),e.each(function(e,i){i.remove(),t=i.getElementsByTagName("source");for(var n=0;n<t.length;n++)t[n].src="";i.load()}),e.remove()},showAnimate:function(){this.show(),this.element.css({opacity:0,position:"relative",top:"-"+this.element.innerHeight()+"px"}),this.element.animate({opacity:1,top:0})},_renderPlanButtons:function(){this._renderPlanButton(Registry.Plans.PLAN_MONTHLY),this._renderPlanButton(Registry.Plans.PLAN_ANNUAL)},_couponValidatedHandler:function(){var e,t;e=this,t=Helpers.App.getSubscriptionPeriod(),e.setPeriod(t,!0),e._renderPlanButtons()},_couponRemovedHandler:function(){this._renderPlanButtons()},setTitle:function(e){e?this.title=e:this.title=this.constructor.TEXT_TITLE,this.$title.html(this.title)},_renderSingleSubscriptionCTA:function(){window.apiPage!==!0&&(this._singleCtaBlock=new UI.SubscriptionCta.SubscriptionCtaBlockController({monthlyCta:this.getElement().find('[data-period="monthly"]'),annualCta:this.getElement().find('[data-period="annual"]'),container:this.getElement().find(".subscription-cta-container")}),this._singleCtaBlock.updateCtaText(UI.SubscriptionCta.SubscriptionCtaBlockController.CTA_TEXT_UNLIMITED),this._bindSubscriptionCTABlockEvents())},_bindSubscriptionCTABlockEvents:function(){var e=this;this._singleCtaBlock.bind("set:monthly:disclaimer",function(){e.$disclaimerFooter.html(UI.SubscriptionsPartial.MONTHLY_CANCEL_FOOTER)}),this._singleCtaBlock.bind("set:annual:disclaimer",function(){e.$disclaimerFooter.html(UI.SubscriptionsPartial.ANNUAL_CANCEL_FOOTER)})}}}),Class(UI,"SubscriptionsPlan").inherits(Widget)({elementClass:"plan-widget plan-widget__column pi__column",html:'        <div>            <div class="plan-widget__container">                <div class="plan-widget__option-container text-center">                    <input type="radio" name="subscriptions-plan-partial">                </div>                <p class="plan-widget__title pi__heading-title">                    <strong>{{name}}</strong>                </p>                <div class="pi__divider"></div>                <div class="plan-widget__price-container text-center">                    <p class="plan-widget__current-plan-info bree-oblique">Your current plan</p>                    <span class="plan-widget__price">                        <span class="money-symbol">$</span>                        <span class="amount">{{amount}}</span>/month                    </span>                </div>                <div class="pi__divider"></div>                <div class="plan-widget__description">                    <div class="plan-widget__current-plan-info pi__column-text">                        <p class="strong">Need more downloads?</p>                        <p>Upgrade now and unused downloads will be rolled over to the new plan.</p>                    </div>                    <div class="plan-widget__forbid-downgrade pi__column-text">                        <p class="strong">You can\'t downgrade yet...</p>                        <p id="cancellation_info">You can downgrade your subscription on {{cancellation_date}} since subscriptions require a 3 month minimum.</p>                    </div>                    <div class="plan-widget__description-text pi__column-text"></div>                    <div class="plan-widget__description-mobile-container">                        <button class="mobile-description-collapse btn btn-primary" type="button" data-toggle="collapse">                            See Features                        </button>                        <div class="plan-widget__description-text-mobile pi__column-text-mobile collapse"></div>                        <hr>                    </div>                </div>            </div>        </div>',prototype:{el:null,radio:null,nameEl:null,amountEl:null,descriptionEl:null,descriptionElMobile:null,descriptionMobileCollapseButton:null,cancellationInfo:null,licenseLink:null,planInfo:null,_disabled:null,_forbidden:!1,init:function(e){Widget.prototype.init.call(this,e),this._disabled=!1,this.el=this.element[0],this.radio=this.el.querySelector('input[type="radio"]'),this.nameEl=this.el.querySelector(".plan-widget__title strong"),this.amountEl=this.el.querySelector(".plan-widget__price .amount"),
this.descriptionEl=this.el.querySelector(".plan-widget__description-text"),this.descriptionElMobile=this.el.querySelector(".plan-widget__description-text-mobile"),this.descriptionMobileCollapseButton=this.el.querySelector(".mobile-description-collapse"),this.cancellationInfo=this.el.querySelector("#cancellation_info"),this.description=this.el.querySelector(".plan-widget__description"),this._updateInformation(),this._bindEvents()},_updateInformation:function(){var e,t,i,n,s;for(this.el.setAttribute("data-plan",this.planInfo.recurly_uuid),this.el.classList.add("subscription--plan_"+this.planInfo.name.replace(/\s/g,"_").toLowerCase()),this.radio.setAttribute("value",this.planInfo.id),this.radio.setAttribute("id","plan-"+this.planInfo.id),this.radio.setAttribute("data-name",this.planInfo.name),this.radio.setAttribute("data-price",this.planInfo.amount_in_cents),this.radio.setAttribute("data-plan",this.planInfo.recurly_uuid),this.descriptionElMobile.id="collapse-mobile-description-"+this.planInfo.id,this.descriptionMobileCollapseButton.setAttribute("data-target","#collapse-mobile-description-"+this.planInfo.id),this.nameEl.textContent=this.planInfo.name,this.amountEl.textContent=this.planInfo.amount_in_cents/100,e=document.createElement("div"),i=this.planInfo.description.split(/\n/),n=i.length,s=0;n>s;s++){var r=document.createElement("p");r.innerHTML=i[s],e.appendChild(r)}t=e.cloneNode(!0),this.descriptionEl.appendChild(e),this.licenseLink=this.descriptionEl.querySelectorAll(".js-open-license-modal"),this.popupableLink=$(this.descriptionEl.querySelector("a"));var o=this;this.popup=this.popupableLink.popover({content:o.popupableLink.attr("data-tooltip-text"),html:!0,selector:".bubble",trigger:"manual",placement:"bottom"}).bind("mouseenter",function(){o.popupableLink.popover("show")}).bind("mouseleave",function(){o.popupableLink.popover("hide")})},_bindEvents:function(){return $(this.radio).on("change",function(){this.constructor.dispatch("radio:changed",this)}.bind(this)),this.element.on("click",function(){this._forbidden===!1&&this.constructor.dispatch("plan:row:clicked",this)}.bind(this)),$(this.licenseLink).on("click",function(){var e=new UI.LicenseModal,t=this.getAttribute("data-license");return e.activateLicense(t).activate(),!1}),this},select:function(){return this._forbidden===!1&&(this.radio.checked=!0,this.el.classList.add("selected")),this},deselect:function(){return this.radio.checked=!1,this.el.classList.remove("selected"),this},isSelected:function(){return this.radio.checked},disable:function(){return this.el.classList.add("disabled"),this._disabled=!0,this},setAsForbidden:function(){var e=this.cancellationInfo.innerHTML,t=Helpers.App.getSubscription();return this.el.classList.add("forbidden"),this._forbidden=!0,this.radio.disabled=!0,this.cancellationInfo.innerHTML=e.replace("{{cancellation_date}}",t.cancellation_date),this},setPaused:function(){var e="<div class='pi__column-text'><p>If you'd like to upgrade or downgrade your account while it's paused, please email <a href='mailto:support@placeit.net'>support@placeit.net</a></p></div>";this.description.innerHTML=e,this.el.classList.add("forbidden"),this._forbidden=!0,this.radio.disabled=!0},isDisabled:function(){return this._disabled},destroy:function(){this.el=null,this.radio=null,this.nameEl=null,this.amountEl=null,this.descriptionEl=null,this.licenseLink=null,this.planInfo=null,this._disabled=null,Widget.prototype.destroy.call(this)}}}),Class("PerformanceTimeMonitor")({prototype:{domInteractive:null,domContentLoadedEventEnd:null,domComplete:null,loadEventEnd:null,firstPaint:null,firstContentPaint:null,supported:!0,init:function(){var e=null,t=null,i=null;window.performance&&window.performance.timing?(e=window.performance.timing,t=e.navigationStart,i=this._showPaintTimings(),this.domInteractive=this._round(e.domInteractive-t),this.domContentLoadedEventEnd=this._round(e.domContentLoadedEventEnd-t),this.domComplete=this._round(e.domComplete-t),this.loadEventEnd=this._round(e.loadEventEnd-t),i&&i.firstPaint&&(this.firstPaint=this._round(i.firstPaint)),i&&i.firstContentPaint&&(this.firstContentPaint=this._round(i.firstContentPaint))):(console.log("Performance timing isn't supported."),this.supported=!1)},_round:function(e){return"number"==typeof e?Math.round(e):e},_showPaintTimings:function(){var e={firstPaint:null,firstContentPaint:null},t=window.performance;if(t&&"function"==typeof t.getEntriesByName){var i=t.getEntriesByName("first-paint")[0];i&&i.startTime&&(e.firstPaint=i.startTime);var n=t.getEntriesByName("first-contentful-paint")[0];return n&&n.startTime&&(e.firstContentPaint=n.startTime),e}return e}}}),Class("PerformanceLogger")({sendTimings:function(e){var t=[];t.push({name:"DOM Interactive",time:e.domInteractive}),t.push({name:"DOM Content Loaded Event End",time:e.domContentLoadedEventEnd}),t.push({name:"DOM Complete",time:e.domComplete}),t.push({name:"Load Event End",time:e.loadEventEnd}),t.push({name:"First Paint",time:e.firstPaint}),t.push({name:"First Content Paint",time:e.firstContentPaint}),t.forEach(function(e){this.sendEventToGoogleAnalytics({hitType:"timing",timingCategory:e.name,timingVar:"load",timingValue:e.time})}.bind(this))},sendEventToGoogleAnalytics:function(e){return"function"!=typeof window.ga?this:("number"!=typeof e.timingValue&&(e.timingValue=0),window.ga("send",{hitType:e.hitType,timingCategory:e.timingCategory,timingVar:e.timingVar,timingValue:e.timingValue}),this)}}),Class(UI,"LicenseModal").inherits(Widget)({html:'<div class="modal license-modal full-page-modal fade" id="license-modal" tabindex="-1" role="dialog" aria-labelledby="license-modal" aria-hidden="true">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>            </div>            <div class="modal-body">                <div class="row-wrapper">                    <div class="col-aggreaments">                        <!-- Tab panes -->                        <div class="tab-content">                            <div class="tab-pane active" id="standard">                                <div class="description-wrapper scroll">                                    <h3 class="sub-title">The Placeit License Agreement</h3>                                    <p>This Placeit License Agreement (\u2018License\u2019) contains the terms by which you obtain the rights to Content Templates produced through the technology available at <a href="https://placeit.net">placeit.net</a>.</p>                                    <p>By downloading or using any Content Templates, you agree that you have read and accept the terms of this License, either for yourself or on behalf of your employer or the entity that is identified as the member account holder. Please note that any capitalized terms not otherwise defined in this License, are defined in the <a href="https://blog.placeit.net/terms-of-use/"  target="_blank">Placeit Terms of Use</a>.</p>                                    <p class="pl30">We grant you an ongoing, non-exclusive, worldwide license to make use of Content Templates as described below.</p>                                    <h4>What can I do?</h4>                                    <ol>                                        <li>You can modify or manipulate the Content Template with the functionality provided on the Placeit Service, including to combine the Content Template with other works (including Your Content) to create what we refer to as the Customized Product. The <strong>Customized Product</strong> is subject to the terms of this license.</li>                                        <li>You can modify or manipulate the Customized Product and combine the Customized Product with other works, and by applying your skill and effort, create something that is larger in scope and different in nature than the Customized Product. We call this the <strong>\u2018End Product\u2019</strong>. The End Product is also subject to the terms of this license. Together or separately, we refer to Customized Products and End Products as <strong>\u2018Product(s)\u2019</strong>.</li>                                        <li><i>Examples of End Products: publications, signage, packaging, websites, games, apps, presentations, online videos, films, TV shows, advertisements, posters, t-shirts and other merchandise.</i></li>                                        <li>You are permitted to communicate Products to the public, broadcast, display, distribute and reproduce them in any and all media for all uses, subject to the terms and restrictions in this License.</li>                                        <li>You can create Products for a client, and this license is then transferred from you to your client. Your client will be bound by the terms of this License.</li>                                        <li>You can use Products for a commercial purpose, Sell the End Product, and make any number of copies of the Products.</li>                                        <li><i>When we say \u201cSell\u201d, we mean sell, sub-license or distribute for any type of fee or charge.</i></li>                                        <li>You can use the Customized Product for merchandising, which means an End Product where the primary value of the product lies in the Customized Product itself.</li>                                        <li>You can make any number of End Products based upon a single Customized Product.</li>                                        <li>You may use a Product as part of a stylized/design trademark (also known as a \u201cdesign mark\u201d), provided that you have added a standard character trademark (also known as a \u201cword mark\u201d) to it. However, we don\u2019t warrant that you will be able to obtain trademark protection in any country for any mark that you apply for on the basis of a Content Template (including as customized). This is because the Content Templates are made available to all of our users on a non-exclusive basis, and it\u2019s quite possible that more than one user could legitimately use a Content Template to make the same (or a very similar) logo!</li>                                    </ol>                                    <h4>What can\u2019t I do?</h4>                                    <ol>                                        <li>You can\u2019t re-distribute a Content Template as stock, in a tool or template, whether the Content Template is part of a Customized Product or not. You can\u2019t re-distribute or make available a Content Template or Customized Product as-is or with superficial modifications.</li>                                        <li><i>For example, you can\u2019t allow end users to customize and print their own merchandise using the Customized Product via an online service, or sell copies of the Customized Product as part of a stock item or template.</i></li>                                        <li>You can\u2019t make available the Content Template through an application or service to end users on an \u201con demand\u201d, stock or inventory, \u201cmade to order\u201d or \u201cbuild it yourself\u201d basis.</li>                                    </ol>                                    <h4>The small print. Other license terms</h4>                                    <ol>                                        <li>You can only use the Content Templates and Products for lawful purposes. You can only use the Content Template and Products in accordance with our <a href="https://themeforest.net/legal/acceptable_use_policy"  target="_blank">Acceptable Use Policy</a>.</li>                                        <li>If a Product contains an image of a person, even if the Content Template is model-released, you can\u2019t use it in a way that creates a fake identity, implies personal endorsement of a product by the person, or in a way that is defamatory, obscene or demeaning, or in connection with sensitive subjects.</li>                                        <li>We reserve all rights not expressly granted herein. This means that any use of the Content Template is to be in accordance with the provisions of this License. You retain ownership of material that you upload to the Placeit Service (such as photos, images or plain text words).</li>                                        <li><strong>Important Note:</strong> Certain components of the Content Template will be sourced from a third party and different license terms or other limitations may apply to such components, such as someone else\u2019s license or an open source or creative commons license. That other license will apply to that other component. This License will apply to the rest of the Content Template, or Product as applicable. The notices required by those licenses are available <a href="https://blog.placeit.net/font-notices/"  target="_blank">here</a>. The Placeit Service uses images, trademarks, brands and names of third party products that have not been cleared for use by you. Intellectual property rights in relation to those products (including registered trademarks) belong to their respective owners. We are not affiliated or associated with, or authorised or endorsed by, the owners of the products. It is your responsibility to evaluate whether your use of these Items requires the permission of those third parties and if so, to obtain that permission.</li>                                        <li>This License can be terminated if you breach it. If that happens, you must stop making copies of or distributing the Customized Product and End Product until you remove the Content Template components from it. This license can also be terminated only in relation to the Customized Products and End Products to which a breach relates (rather than all products).</li>                                    </ol>                                    <p>Please contact <a href="mailto:support@placeit.net">Support@placeit.net</a> for additional questions.</p>                                </div>                            </div>                        </div><!-- tab panes -->                    </div><!-- col-aggreaments -->                </div><!-- row-wrapper -->            </div><!-- modal-body -->        </div><!-- modal-content -->    </div><!-- modal-dialog --></div>',prototype:{$colA:null,$tabs:null,$innerLinks:null,init:function(e){Widget.prototype.init.call(this,e),this.$colA=this.element.find(".col-aggreaments"),this.$tabs=this.$colA.find(".nav-tabs"),this.$innerLinks=this.element.find('[data-target="#license-modal"]'),this._bindEvents()},_bindEvents:function(){return this.element.on("show.bs.modal",function(e){e.relatedTarget&&(e.relatedTarget.getAttribute("data-license")?this.activateLicense(e.relatedTarget.getAttribute("data-license")):this.activateLicense())}.bind(this)),this.element.on("hidden.bs.modal",function(e){this.element.data("modal",null),this.destroy()}.bind(this)),this.$innerLinks.on("click",function(e){var t=e.target.getAttribute("data-license");return t&&this.activateLicense(t),!1}.bind(this)),$('a[data-toggle="tab"]',this.$colA).on("click",function(e){this.activateLicense(e.target.className)}.bind(this)),this},_defaultState:function(){return this.$tabs.find('a[href="#default"]').tab("show"),this},activateLicense:function(e){return e?this.$tabs.find('a[href="#'+e+'"]').tab("show"):this._defaultState(),this},activate:function(){return Widget.prototype.activate.call(this),this.element.modal("show"),this},deactivate:function(){return Widget.prototype.deactivate.call(this),this.element.modal("hide"),this},destroy:function(){this.$tabs=null,this.$innerLinks=null,Widget.prototype.destroy.call(this)}}}),Class(UI,"FriendlyLicenseModal").inherits(Widget)({html:'        <div class="modal friendly-license-modal fade" id="friendly-license-modal" tabindex="-1" role="dialog" aria-labelledby="friendly-license-modal" aria-hidden="true">            <div class="modal-dialog">                <div class="modal-header">                    <button type="button" class="close -font-regular" data-dismiss="modal" aria-label="Close">                        <span aria-hidden="true">&times;</span>                    </button>                </div>                <div class="modal-content">                    <div class="modal-body">                        <p class="friendly-license-modal_intro-text">This human-readable summary of our license terms is provided for your convenience only. It is not a legally binding document and is not a substitute for the <a href="#license">Placeit license</a>.<br> Please ensure you read the real license carefully.</p>                        <h1 class="-font-black">You Can</h1>                        <div class="row">                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/for-your-final-design.svg" />                                </div>                                <p>You can use Placeit to <strong>add</strong>, alter and <strong>modify</strong> content to make a final design.</p>                            </div>                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/display-your-design.svg" />                                </div>                                <p>You can <strong>publish, broadcast, display</strong> and distribute the content you create with Placeit.</p>                            </div>                        </div>                        <div class="row">                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/sell-your-design.svg" />                                </div>                                <p>You\u2019re free to create content for a client and <strong>sell for a fee</strong>.</p>                            </div>                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/put-your-design-anywhere.svg" />                                </div>                                <p>You can <strong>put your final design on any kind of product</strong> and then sell those products.</p>                            </div>                        </div>                        <div class="row">                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/register-your-design.svg" />                                </div>                                <p>You can apply to register <strong>trademarks</strong> with the designs and logos you make.</p>                            </div>                        </div>                        <h1 class="-font-black">You Can\u2019t</h1>                        <div class="row">                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/dont-distribute-it.svg" />                                </div>                                <p>You can\u2019t take Placeit\u2019s content and distribute it as part of a design tool, stock images or templates.</p>                            </div>                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/dont-replicate-it.svg" />                                </div>                                <p>You can\u2019t take Placeit\u2019s content and use it to make your own version of Placeit.</p>                            </div>                        </div>                        <div class="row">                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/dont-fake-it.svg" />                                </div>                                <p>You can\u2019t use a final product that contains an image of a person or third party brands in a way that is derogatory or implies endorsement by them</p>                            </div>                        </div>                        <p class="fine-print">                            <a href="#license">Ok, but I still want to read the fine print</a>                        </p>                    </div>                </div>            </div>        </div>    ',prototype:{$licenseLinks:null,_onLicenseModalClick:null,_onHiddenModal:null,init:function(e){Widget.prototype.init.call(this,e),this.$licenseLinks=this.element.find('[href="#license"]'),this._onLicenseModalClick=this._onLicenseModalClick.bind(this),this._onHiddenModal=this.destroy.bind(this),this._bindEvents()},_bindEvents:function(){return this.$licenseLinks.on("click",this._onLicenseModalClick),this.element.on("hidden.bs.modal",this._onHiddenModal),this},_onLicenseModalClick:function(e){return e.preventDefault(),e.stopPropagation(),this.deactivate(),(new UI.LicenseModal).activate(),this},activate:function(){return Widget.prototype.activate.call(this),this.element.modal("show"),this},deactivate:function(){return Widget.prototype.deactivate.call(this),this.element.modal("hide"),this},destroy:function(){this.$licenseLinks.off("click",this._onLicenseModalClick),this.element.data("modal",null),this.$licenseLinks=null,this._onLicenseModalClick=null,this._onHiddenModal=null,Widget.prototype.destroy.call(this)}}}),Class(UI,"SubscribeMailingModal").inherits(Widget)({html:'    <div class="modal fade" id="subscribeMailingModal" tabindex="-1" role="dialog" aria-labelledby="subscribeMailingModal" aria-hidden="true">      <div class="modal-dialog modal-sm">        <div class="modal-content">          <div class="modal-header">            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>            <h4 class="main-title">Get Notified When We Add New Templates!</h4>            <div class="secondary-title">We\'ll send you an email once a month with our latest templates and discounts!</div>          </div>          <div class="modal-body text-center">            <button class="button primary main-actions confirm">Subscribe</button>            <button class="button link tertiary main-actions decline">No Thanks</button>            <div class="text-mute">You can also edit this setting in your account.</div>          </div>        </div>      </div>    </div>',prototype:{confirmBtn:null,declineBtn:null,init:function(e){Widget.prototype.init.call(this,e),this.confirmBtn=this.element.find(".confirm"),this.declineBtn=this.element.find(".decline"),this.bindEvents()},bindEvents:function(){this.confirmBtn.on("click",function(){var e={placeit_promotion_notifications:!0};Helpers.App.updateEmailNotifications(e),this.deactivate()}.bind(this)),this.declineBtn.on("click",this.deactivate.bind(this)),this.element.on("hidden.bs.modal",function(){this.deactivate().destroy()}.bind(this))},activate:function(){return Widget.prototype.activate.call(this),this.element.appendTo(document.body),this.element.modal("show"),this},deactivate:function(){return Widget.prototype.deactivate.call(this),this.element.detach(),this.element.modal("hide"),this},destroy:function(){this.confirmBtn=null,this.declineBtn=null,Widget.prototype.destroy.call(this)}}}),Class(UI,"StoredBillingInfoOverlay").inherits(Widget)({html:'        <div class="modal stored-card-overlay fade" tabindex="-1" role="dialog" aria-labelledby="storedBillingInfoOverlayLabel" aria-hidden="true">          <div class="modal-dialog">            <div class="modal-content">                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>              <div class="modal-header">                <h4>Payment</h4>              </div>              <div class="modal-body">                <div id="stored-card">                  <div class="form-group row card-info-title">                    <div class="col-xs-6">Credit Card</div>                    <div class="col-xs-6">Last Four Digits</div>                  </div>                  <div class="form-group row card-info">                    <div class="card-type col-xs-6"></div>                    <div class="card-last-four col-xs-6" data-hj-suppress></div>                  </div>                </div>                <div class="form-grop actions">                  <div class="actions-wrapper">                    <a href="#" class="button primary use-stored">Use this Card</a>                    <span class="cta-divider-text">or</span>                    <a href="#" class="change-card">Enter Another</a>                  </div>                  <div class="processing-message">                    Your transaction is being processed...                  </div>                </div>              </div>            </div>          </div>        </div>    ',prototype:{elementId:null,storedCardTypeElement:null,storedCardLastFourElement:null,useStoredBillingInfoElement:null,changeCardElement:null,actionsWrapperElement:null,processingMessageElement:null,recurlyData:null,init:function(e){Widget.prototype.init.call(this,e),this.elementId=Math.random().toString(36).substring(5),this.element[0].setAttribute("id","storedBillingInfoOverlay-"+this.elementId),this.storedCardContainer=this.element.find("#stored-card"),this.storedCardTypeElement=this.element.find(".card-type"),this.storedCardLastFourElement=this.element.find(".card-last-four"),this.useStoredBillingInfoElement=this.element.find(".use-stored"),this.changeCardElement=this.element.find(".change-card"),this.actionsWrapperElement=this.element.find(".actions-wrapper"),this.processingMessageElement=this.element.find(".processing-message"),this.closeBtn=this.element.find("button.close"),this._bindEvents()},_bindEvents:function(){return this.closeBtn.bind("click",this._closeEventHandler.bind(this)),this.element.bind("keyup",function(e){27===e.keyCode&&this._closeEventHandler(e)}.bind(this)),this.element.on("hidden.bs.modal",function(){this._processedUIState().detach(),this.destroy()}.bind(this)),this.changeCardElement.on("click",function(e){e.preventDefault(),this.deactivate(),this.dispatch("change-card",{recurlyData:this.recurlyData})}.bind(this)),this.useStoredBillingInfoElement.on("click",function(e){window.isPastDue?(this.deactivate(),Modals.Billing.unbindBillingInfoHide().setupUpdateCardModal(Modals.Billing._billingUpdateSuccessCallback)):(e.preventDefault(),this._processingUIState(),this.deactivate(),this.dispatch("use-stored-card",{recurlyData:this.recurlyData}))}.bind(this)),this},_closeEventHandler:function(e){Helpers.GlobalEventTracker.purchaseCanceled()},refresh:function(e){return this.recurlyData=e,e.billing_info.lastFour?(this.storedCardTypeElement.text(e.billing_info.cardType),this.storedCardLastFourElement.text(e.billing_info.lastFour)):e.billing_info.paypalBillingAgreementId&&(this.storedCardContainer.detach(),this.useStoredBillingInfoElement.html("Use PayPal"),this.changeCardElement.html("Enter Credit Card")),this},_processingUIState:function(){return this.actionsWrapperElement.hide(),this.processingMessageElement.show(),this},_processedUIState:function(){return this.actionsWrapperElement.show(),this.processingMessageElement.hide(),this},detach:function(){return this.element.detach(),this},activate:function(){this.element.modal("show"),Widget.prototype.activate.call(this)},deactivate:function(){this.element.modal("hide"),$(".modal-backdrop").remove(),Widget.prototype.deactivate.call(this)},destroy:function(){this.elementId=null,this.storedCardContainer=null,this.storedCardTypeElement=null,this.storedCardLastFourElement=null,this.useStoredBillingInfoElement=null,this.changeCardElement=null,this.actionsWrapperElement=null,this.processingMessageElement=null,this.recurlyData=null,this.closeBtn=null,Widget.prototype.destroy.call(this)}}}),Class(UI,"SinglePurchaseDiscountModal").inherits(Widget)({html:'        <div class="modal fade" id="singlePurchaseDiscountModal" tabindex="-1" role="dialog" aria-labelledby="singlePurchaseDiscountModal" aria-hidden="true">            <div class="modal-dialog modal-sm">                <div class="modal-content">                    <div class="modal-header">                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                        <h4 class="modal-title">Congratulations!</h4>                    </div>                    <div class="modal-body">                        <div class="description"></div>                        <button class="button primary btn-block" data-dismiss="modal">OK!</button>                        <div class="disclaimer">Coupon does not apply to subscription!</div>                    </div>                </div>            </div>        </div>',prototype:{description:"You will now get {{discount}} off of all one-time purchases!",$description:null,init:function(){Widget.prototype.init.call(this),this.$description=this.element.find(".description")},activate:function(){var e;return Widget.prototype.activate.call(this),$modal=$("#singlePurchaseDiscountModal"),$modal.length||(e=Helpers.CouponHelper.getDiscount(),this.$description.text(this.description.replace("{{discount}}",e.label)),this.element.appendTo(document.body)),this.element.modal("show"),this},deactivate:function(){return Widget.prototype.deactivate.call(this),this.element.detach(),this.element.modal("hide"),this}}}),Module(Helpers,"PurchasesModalHelper")({prototype:{$compPreviewImage:null,instantiateStoredBillingInfoOverlay:function(){void 0===this.storedBillingInfoOverlay&&(this.appendChild(new UI.StoredBillingInfoOverlay({name:"storedBillingInfoOverlay"})),this.storedBillingInfoOverlay.bind("change-card",this._showPaymentForm.bind(this)),this.storedBillingInfoOverlay.bind("use-stored-card",this._useStoredBillingInfo.bind(this)))},_showModalHandler:function(){var e=!1;e=Helpers.StageType.isVideo(),this.$modalTitle.text(e?this.VIDEO_TITLE_TEXT:this.IMAGE_TITLE_TEXT),this.tabsWidget.showTabs(),e?(this.tabsWidget.hideTabs().activateRegularTab(),this.resolutionsWidget.showOptions("video_product")):Helpers.StageType.isSmartTemplate()?(this.tabsWidget.hideTabs().activateRegularTab(),this.resolutionsWidget.showOptions("smart_template")):(Helpers.GlobalEventTracker.track("deprecated:method",{error:!1,module:"purchaseModalHelper._showModalHandler.elseStatement"}),this.resolutionsWidget.showOptions("normal")),this._updatePriceForPackage(),this._enableSubmitButtons()},show:function(){this.element.css({display:"block",opacity:0,visibility:"visible",position:"relative",top:"-"+this.element.innerHeight()+"px"}).animate({opacity:1,top:"0px"},400)},_showStoredBillingInfo:function(){this.instantiateStoredBillingInfoOverlay(),this.storedBillingInfoOverlay.refresh(this.signedData),this.storedBillingInfoOverlay.activate()},_showPaymentForm:function(){var e,t,i,n=encodeURI(window.location.href);if(e=this.signedData,Helpers.StageType.isFusionVideo())i=EventTracker.info({type:"Purchase:success:fusionvideo",data:{videoV5:null}}),t={ajaxUrl:"/purchases/{{token}}/video_v4_transaction",ajaxParams:{license_id:e.license_id,resolution_id:e.resolution_id,video_id:Helpers.StageType.getVideoProductUUID(),upload_to_youtube:Helpers.StageType.isYouTubeUpload(),eventData:i,stage_id:Helpers.StageType.getStageID()}};else if(Helpers.StageType.isVideoV5())i=EventTracker.info({type:"Purchase:success:fusionvideo",data:{videoV5:1}}),t={ajaxUrl:"/purchases/{{token}}/video_v5_transaction",ajaxParams:{license_id:e.license_id,resolution_id:e.resolution_id,stage_id:Helpers.StageType.getStageID(),designPlan:JSON.stringify(Helpers.StageType.getDesignPlan()),eventData:i,referrer:n}};else if(Helpers.StageType.isSmartTemplate()){var s="/purchases/{{token}}/smart_template_transaction",r=Helpers.StageType.getStageID(),o=JSON.parse(JSON.stringify(Helpers.StageType.getDesignPlan())),a="Purchase:success:image",l=Service.MultiplePurchase.getInstance();if(o.referrer=n,delete o.previewImage,l.isMultiplePurchase()){var c=[];s="/purchases/{{token}}/multi_purchase_transaction",
o=[],l.getSelectedDataObjects().forEach(function(e,t){c.push({type:e.type,stage_id:e.id}),o.push(JSON.parse(e.designPlan)),Boolean(o[t])&&delete o[t].previewImage}),r=JSON.stringify(c)}Helpers.App.getSubscription()&&(a="Purchase:success:image:withSubscription"),i=EventTracker.info({type:a,data:{videoV5:null}}),t={ajaxUrl:s,ajaxParams:{license_id:e.license_id,resolution_id:e.resolution_id,stage_id:r,designPlan:JSON.stringify(o),eventData:i}}}t.ajaxParams.coupon_code=null,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)&&(t.ajaxParams.coupon_code=Helpers.CouponHelper.getCode()),$.extend(!0,e,t);var u=!0,d=e.billing_info.lastFour||e.billing_info.paypalBillingAgreementId;d&&(u=!1),this.instantiatePurchaseOverlay(e,u).render($("body")).activate().initPurchaseForm()},hideFooter:function(){this.$modalFooter.hide()},showFooter:function(){this.$modalFooter.show()},_showTaxInfo:function(){this.$taxInformation.show()},_hideTaxInfo:function(){this.$taxInformation.hide()}}}),Module(Helpers,"PurchasesPostHelper")({prototype:{_purchaseProxyAjax:function(e){var t,i,n,s,r,o,a;return s=this,a=e.url,n=PurchaseSupport.getRequestDataByUrl(a),r=(n&&n.isPollingEnabled)===!0,i={url:a,data:e.data,type:"POST",dataType:"json"},r===!0?(o={delay:n.pollingConfig.delay,times:n.pollingConfig.times,pingURL:n.pingURL},t=P.ajax(i).then(PurchaseSupport.buildPolling(o))):t=P.ajax(i),t.then(function(t){return"function"==typeof e.callbackSuccess&&e.callbackSuccess.call(s,t),t})["catch"](function(t){return"function"==typeof e.callbackError&&e.callbackError.call(s,t),Promise.reject(t)})},_formSubmitHandler:function(e){var t,i;return e.preventDefault(),this._disableSubmitButtons(),t=this.resolutionsWidget.getSelected().data("allowed-licenses")[0],i="free"===t,Helpers.App.isLoggedIn()===!1&&i===!1?(Service.MultiplePurchase.getInstance()._saveSelectedStagesInCookie(),Helpers.App.setNextLoginAction("activate-purchase"),this._notLoggedInHandler()):this._normalPurchaseFlow()},_isAlreadyPurchased:function(){var e,t,i,n,s,r,o,a,l;return Helpers.GlobalEventTracker.track("deprecated:method",{error:!1,module:"purchaseModalPostHelper._isAlreadyPurchased."}),e=this.resolutionsWidget.getSelected().data("allowed-licenses")[0],t=Helpers.StageType.isFree()||"free"===e,i=Helpers.StageType.getProductshotInfo(),n=Helpers.App.getUrlParam("video_process_id"),o=!1,i&&(r=Helpers.StageType.getBackgroundID(),Helpers.GlobalEventTracker.track("deprecated:method",{error:!1,module:"purchaseModalPostHelper._isAlreadyPurchased.backgroundID."+r}),s={hsh:i.hsh,stage_id:parseInt(Helpers.StageType.getStageID(),10),res:Helpers.Resolutions.getActive().key,image_type_id:window._stageData.stage_data.image_type},r&&(s.background_id=parseInt(r,10)),a=page.stage.getDownloaded()===!0),l=page.appNavBar.myDriveDownloads.getItems(),o=a&&l.some(function(e){var t=!0;for(option in s)e[option]!==s[option]&&(t=!1);return t?!0:void 0}),Helpers.StageType.isIOSScreenshot()?!1:o},_normalPurchaseFlow:function(){var e=this;e._selectedIdBeforeLogin=null,this._disableSubmitButtons();var t=Service.MultiplePurchase.getInstance(),i=t.getPreviouslySelectedIds(),n=t.isPreviousSelectedIdEqualTocurrentId()===!1&&i.length===t.constructor.CURRENT_DEFAULT_TEMPLATE_ADDED&&Helpers.App.isMerchPreviewEnabled()&&Helpers.StageType.isLogo();return n?(e._selectedIdBeforeLogin=i[0],void e._preparePreviousSingleDownload(i[0])):void e._prepareDownloadCallback()},_preparePreviousSingleDownload:function(e){var t=this,i=Service.MultiplePurchase.getInstance();i.getDesignPlan(e).then(Utils.bindFn(t)(t._previouslySelectedDesignPlanHandler))["catch"](function(e){throw"timeout"===e.message&&page.flash("Oops! We're having difficulties processing your request at this time, try again later.","alert"),i.deleteAfterLoginCookie(),new Error("Slow internet connection: "+JSON.stringify(e.message))})},_previouslySelectedDesignPlanHandler:function(e){var t=this,i=Service.MultiplePurchase.getInstance(),n=t._selectedIdBeforeLogin;if(Boolean(e)!==!1){var s=t._getPreviouslySelectedDesignPlanData({previouslySelectedStageId:n,designPlan:e});i.getSelectedIds().includes(s.id)===!1&&i.add(s),i.getPrice({stages_id:[n]}).then(Utils.bindFn(t)(t._getPreviousSingleDownloadPriceHandler))}},_getPreviouslySelectedDesignPlanData:function(e){var t=Service.MultiplePurchase.getInstance(),i=t.getPristineMerchPreviewStageData(e.previouslySelectedStageId),n=i[0].name,s=i[0].category;return{selected:!0,processed:!0,canProcess:!0,preview:e.designPlan.previewImage.value.replace("data:image/png;base64,","")||t.constructor.EMPTY_THUMBNAIL_PLACEHOLDER,type:"image",id:e.previouslySelectedStageId,price:0,name:n,category:s,designPlan:JSON.stringify(e.designPlan)}},_getPreviousSingleDownloadPriceHandler:function(e){var t=this,i=Service.MultiplePurchase.getInstance(),n=t._selectedIdBeforeLogin;e.prices&&e.prices[0]&&(i.update(n,{price:e.prices[0]/100}),t._prepareDownloadCallback({stageId:n,price:e.prices[0]/100}))},_prepareDownloadCallback:function(e){var t,i,n,s,r,o,a,l,c=this;t=this.resolutionsWidget.getSelected(),i=t.val(),n=Registry.Licenses.getByKey(t.data("allowed-licenses")[0]),s=n.id,r=Helpers.Resolutions.getActive().key,o="free"===n.key,a=Helpers.App.getSubscription(),l=this._purchaseableWithSubscription(i,s,a);var u=Helpers.PremiumAssetsValidator.getStageInfo();e&&e.stageId&&(u=Service.MultiplePurchase.getInstance().getCustomStageInfo(e));var d=Helpers.Price.stage(u);d.price.then(function(e){d.priceWithDiscount.then(function(t){var n=c.isFullyFreeStage(l,e,t),r="_singDownload";l&&!Helpers.StageType.isCropperTool()&&(r="_subscriptionDownload"),n&&(Helpers.StageType.isTool()||Boolean(l)===!1)&&(r=Helpers.StageType.isFusionVideo()&&o?"_inBrowserDownload":"_freeStageDownload"),Boolean(l)===!1&&o&&(r="_inBrowserDownload"),c._downloadHandler(i,s,r)})})["catch"](function(e){throw new Error(e)})},_inBrowserDownload:function(e,t){this.deactivate(),this._enableSubmitButtons();var i={stage_id:Helpers.StageType.getStageID(),category:window._pl_category,stage_type:Helpers.StageType._types[window._stageData.stage_data.image_type]||"No Info",tags:Helpers.StageType.getStageTags()||"No Info",background:Helpers.StageType.getBackgroundOrColorID()||"No Info",thumb:window._stageData.stage_data.large_thumb||"No Info",slug:window._stageData.stage_data.slug||"No Info"};return Helpers.StageType.isFusionVideo()?void this._inBrowserDownloadVideo(i):(i.license_id=t,i.resolution_id=e,window.location.href="/stages/"+Helpers.StageType.getProductshotInfo().hsh+"/download",void(Helpers.StageType.getStageInfo().is_free===!0?Helpers.GlobalEventTracker.freeStageDownload(i):Helpers.GlobalEventTracker.freeDownload(i)))},_inBrowserDownloadVideo:function(e){var t=page.stage.getFullVideoSrc(),i=Helpers.App.isDownloadIphoneFlowAvailable()&&Helpers.App.isMobile();i?Helpers.App.shortcutDownloadModal(t,t):Helpers.App.isMobileDevice()?window.open(t,"_blank"):window.location.href=t,Helpers.Resolutions.getActive().key&&"small"===Helpers.Resolutions.getActive().key&&Helpers.GlobalEventTracker.freeVideoDownload(e)},_useStoredBillingInfo:function(){var e,t,i,n,s,r,o,a,l,c,u,d=Service.MultiplePurchase.getInstance();u=encodeURI(window.location.href),o=Helpers.StageType.isFusionVideo(),c=Helpers.StageType.isVideoV5(),t=this.signedData.license_id,i=this.signedData.resolution_id,n=Helpers.StageType.getStageID(),s=this.signedData.amount_in_cents,r={license_id:t,resolution_id:i,background_id:Helpers.StageType.getBackgroundID(),upload_to_youtube:o&&Helpers.StageType.isYouTubeUpload()},a=o||c?":fusionvideo":":image",l=Helpers.App.getSubscription()?a+":withSubscription":a;var h=EventTracker.info({type:"Purchase:success"+l,data:{videoV5:null}});if(Helpers.StageType.isFusionVideo())e="/purchases/quick_video_v4_transaction",r.video_id=Helpers.StageType.getVideoProductUUID(),r.eventData=h;else if(c)h.data.videoV5=1,e="/purchases/quick_video_v5_transaction",r.stage_id=n,r.designPlan=JSON.stringify(Helpers.StageType.getDesignPlan()),r.eventData=h,r.referrer=u;else if(Helpers.StageType.isSmartTemplate()){e="/purchases/quick_smart_template_transaction";var p=JSON.parse(JSON.stringify(Helpers.StageType.getDesignPlan()));p.referrer=u,delete p.previewImage;var f=n;if(d.isMultiplePurchase()){e="/purchases/{{token}}/multi_purchase_transaction";var m=[];p=[],d.getSelectedDataObjects().forEach(function(e,t){m.push({type:e.type,stage_id:e.id}),p.push(JSON.parse(e.designPlan)),Boolean(p[t])&&delete p[t].previewImage}),f=JSON.stringify(m)}r.stage_id=f,r.designPlan=JSON.stringify(p),r.eventData=h}else e="/purchases/quick_transaction",r.productshot_id=Helpers.StageType.getProductshotInfo().id;r.coupon_code=null,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)&&(r.coupon_code=Helpers.CouponHelper.getCode()),this._purchaseProxyAjax.call(this,{url:e,data:r,callbackSuccess:function(e){var r=null;Helpers.GlobalEventTracker.purchaseSuccess({amount_in_cents:s,license_id:t,resolution_id:i,stage_id:n,user_id:Helpers.App.getUser().id,invoice_number:e.invoice_number}),e.coupon&&(r=e.coupon),this._enableSubmitButtons(),Helpers.CouponHelper.markAsUsed(),this.dispatch("purchase.success",r)},callbackError:function(e){e.responseJSON=e.responseJSON||{};var t=e.message||e.responseJSON.message||e.responseJSON.error;this.deactivate(),this.purchaseOverlay&&this.purchaseOverlay.deactivate(),this._enableSubmitButtons(),this.dispatch("purchase.failed",{message:t,status:e.status,errorType:e.responseJSON.errorType})}})},_freeStageDownload:function(e,t){var i,n,s,r=encodeURI(window.location.href);if(s=Helpers.StageType.isFusionVideo(),n={is_comp:Helpers.Resolutions.isComp(),background_id:Helpers.StageType.getBackgroundID(),upload_to_youtube:s&&Helpers.StageType.isYouTubeUpload()},n.coupon_code=null,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)&&(n.coupon_code=Helpers.CouponHelper.getCode()),Helpers.StageType.isFusionVideo())i="/purchases/"+e+"/"+t+"/free_download_video_v4",n.video_id=Helpers.StageType.getVideoProductUUID();else if(Helpers.StageType.isVideoV5())n.stage_id=Helpers.StageType.getStageID(),n.designPlan=JSON.stringify(Helpers.StageType.getDesignPlan()),n.referrer=r,i="/purchases/"+e+"/"+t+"/free_download_video_v5";else if(Helpers.StageType.isSmartTemplate()){i="crop_video"===Helpers.StageType.getStageData().tool_name?"/purchases/"+e+"/"+t+"/free_download_video_trim_crop":Helpers.StageType.isToolName("video_to_gif")?"/purchases/"+e+"/"+t+"/free_download_video_to_gif":"/purchases/"+e+"/"+t+"/free_download_smart_template";var o=Helpers.StageType.getStageInfo().id,a=JSON.parse(JSON.stringify(Helpers.StageType.getDesignPlan()));a.referrer=r,delete a.previewImage;var l=Service.MultiplePurchase.getInstance();if(l.isMultiplePurchase()){var c=[];a=[],i="/purchases/"+e+"/"+t+"/multi_free_download",l.getSelectedDataObjects().forEach(function(e,t){c.push({type:e.type,stage_id:e.id}),a.push(JSON.parse(e.designPlan)),Boolean(a[t])&&delete a[t].previewImage}),o=JSON.stringify(c)}n.stage_id=o,n.designPlan=JSON.stringify(a)}this._purchaseProxyAjax.call(this,{url:i,data:n,callbackSuccess:function(){this.deactivate(),this.purchaseOverlay&&this.purchaseOverlay.deactivate(),this._enableSubmitButtons(),this.dispatch("purchase.success"),Helpers.StageType.isFusionVideo()&&Helpers.App.getUrlParam("linked_smart_template_id")&&Helpers.GlobalEventTracker.pipEvent("animated:pip:download");var i={stage_id:Helpers.StageType.getStageID(),resolution_id:e,license_id:t,category:window._pl_category,stage_type:Helpers.StageType._types[window._stageData.stage_data.image_type]||"No Info",tags:Helpers.StageType.getStageTags()||"No Info",background:Helpers.StageType.getBackgroundOrColorID()||"No Info",thumb:window._stageData.stage_data.large_thumb||"No Info",slug:window._stageData.stage_data.slug||"No Info"};Helpers.StageType.getStageInfo().is_free===!0?Helpers.GlobalEventTracker.freeStageDownload(i):Helpers.GlobalEventTracker.freeDownload(i)},callbackError:function(e){e.responseJSON=e.responseJSON||{};var t=e.message||e.responseJSON.message||e.responseJSON.error;this.deactivate(),this.purchaseOverlay&&this.purchaseOverlay.deactivate(),this._enableSubmitButtons(),this.dispatch("purchase.failed",{message:t,status:e.status,errorType:e.responseJSON.errorType})}})},_subscriptionDownload:function(e,t){var i,n=Helpers.StageType.isVideoV5(),s=encodeURI(window.location.href);if(Helpers.StageType.isFusionVideo()){var r={video_id:Helpers.StageType.getVideoProductUUID(),upload_to_youtube:Helpers.StageType.isYouTubeUpload()},o="/purchases/"+e+"/"+t+"/video_v4_subscription";i=":fusionvideo"}else if(n){var r={stage_id:Helpers.StageType.getStageID(),designPlan:JSON.stringify(Helpers.StageType.getDesignPlan()),referrer:s},o="/purchases/"+e+"/"+t+"/video_v5_subscription";i=":fusionvideo"}else if(Helpers.StageType.isSmartTemplate()){var r={},a=Helpers.StageType.getStageID(),o="/purchases/"+e+"/"+t+"/smart_template_subscription",l=JSON.parse(JSON.stringify(Helpers.StageType.getDesignPlan()));l.referrer=s,delete l.previewImage;var c=Service.MultiplePurchase.getInstance();if(c.isMultiplePurchase()){var u=[];l=[],o="/purchases/"+e+"/"+t+"/multi_download_with_subscription",c.getSelectedDataObjects().forEach(function(e,t){u.push({type:e.type,stage_id:e.id}),l.push(JSON.parse(e.designPlan)),Boolean(l[t])&&delete l[t].previewImage}),a=JSON.stringify(u)}r.stage_id=a,r.designPlan=JSON.stringify(l),i=":image"}var d=EventTracker.info({type:"Purchase:success"+i,data:{videoV5:n===!0?1:null}});r.eventData=d,this._purchaseProxyAjax.call(this,{url:o,data:r,callbackSuccess:function(i){var n=this;this.deactivate(),this._enableSubmitButtons(),Helpers.GlobalEventTracker.subscriptionDownload({stage_id:Helpers.StageType.getStageID(),license_id:t,resolution_id:e}),Helpers.StageType.isFusionVideo()&&Helpers.App.getUrlParam("linked_smart_template_id")&&Helpers.GlobalEventTracker.pipEvent("animated:pip:download"),Helpers.App._getPurchases(function(e){var t=i.message||i.responseJSON.message;n.dispatch("purchase.success",{message:t}),window.page.appNavBar.updateStatus()})},callbackError:function(e){e.responseJSON=e.responseJSON||{};var t=e.message||e.responseJSON.message||e.responseJSON.error;412===e.status&&(Helpers.App.setSubscription(!1),this.showFooter(),window.page.appNavBar.updateStatus()),this.deactivate(),this._enableSubmitButtons(),this.dispatch("purchase.failed",{message:t,errorType:e.responseJSON.errorType})}})},_singDownload:function(e,t){var i=this,n={stage_id:Helpers.StageType.getStageID(),is_comp:Helpers.Resolutions.isComp()};null!==Helpers.StageType.getProductshotInfo()&&(n.productshot_id=Helpers.StageType.getProductshotInfo().id),this._purchaseProxyAjax.call(this,{url:"/purchases/"+e+"/"+t+"/sign",data:n,callbackSuccess:function(e){this.deactivate(),this._enableSubmitButtons();var t=Service.MultiplePurchase.getInstance();t.isMultiplePurchase()&&(e.amount_in_cents=100*t.getSelectedTotalPrice()),this.signedData=e,this.unbind("use-stored-billing-info").bind("use-stored-billing-info",function(){i._useStoredBillingInfo(),i.purchaseOverlay&&i.purchaseOverlay.deactivate()}),this._showPaymentForm()},callbackError:function(e){e.responseJSON=e.responseJSON||{};var t=e.message||e.responseJSON.message||e.responseJSON.error;this.deactivate(),this._enableSubmitButtons(),this.dispatch("purchase.failed",{message:t,status:e.status,errorType:e.responseJSON.errorType})}})},_downloadHandler:function(e,t,i){var n=this,s={resolutionID:e,licenseID:t,callback:i};return n._isMultiplePurchase()?void n._downloadMultiplePurchaseHandler(s):void n._downloadSinglePurchaseHandler(s)},_isMultiplePurchase:function n(){var e=this,t=Service.MultiplePurchase.getInstance(),i=1;return n=t.canDoMultiplePurchases()&&(t.getPreviouslySelectedIdsLength()>i||Boolean(e._selectedIdBeforeLogin)===!1)},_downloadMultiplePurchaseHandler:function(e){var t=this,i=Service.MultiplePurchase.getInstance(),n=i.getSelectedIds();"_subscriptionDownload"===e.callback&&(n=i.getAllSelectedIds(),n.unshift(Number(Helpers.StageType.getStageID())),i.clean());var s=function(){i.deleteAfterLoginCookie(),t[e.callback](e.resolutionID,e.licenseID)};i.unbind("thumbnails.processed").bind("thumbnails.processed",s),i.prepareData(n)},_downloadSinglePurchaseHandler:function(e){var t=this,i=Service.MultiplePurchase.getInstance(),n=Helpers.StageType.getStageID(),s=i.getSelectedDataObjects();t._beforeLoginSelectedIdIsDiffThanCurrent(s)&&(n=s[0].id),i.getPrice({stages_id:[n]}).then(function(i){t._updatePriceSinglePurchaseHandler(e,i,n)})},_beforeLoginSelectedIdIsDiffThanCurrent:function(e){var t=Service.MultiplePurchase.getInstance(),i=Helpers.App.isMerchPreviewEnabled()&&Helpers.StageType.isLogo(),n=t.getPreviouslySelectedIdsLength()>0||Boolean(this._selectedIdBeforeLogin)===!0;return n&&i&&Boolean(e[0])&&e[0].id},_updatePriceSinglePurchaseHandler:function(e,t,i){var n=this,s=Service.MultiplePurchase.getInstance(),r=s.getPreviouslySelectedIdsLength()>0||Boolean(n._selectedIdBeforeLogin)===!0;r===!1&&(s.clean(),s.addCurrentStage()),t.prices&&t.prices[0]&&s.update(i,{price:t.prices[0]/100}),Helpers.App.getCookie("multiplePurchasesSelectedIds")&&Helpers.App.deleteCookie("multiplePurchasesSelectedIds"),n[e.callback](e.resolutionID,e.licenseID)},isFullyFreeStage:function(e,t,i){var n=Service.MultiplePurchase.getInstance(),s=n.isMultiplePurchase();return(0===t||0===i)&&s===!1||s===!0&&0===n.getSelectedTotalPrice()}}}),Class(UI,"Purchases").inherits(Widget).includes(Helpers.SubscriptionHelper,Helpers.PurchasesModalHelper,Helpers.PurchasesPostHelper,Helpers.CouponHelper,Translator,ThemeSupport,CurrencyLabelSetter)({html:'    <div class="purchases" id="downloadOverlay" tabindex="-1" >        <div id="subscription-paused" style="display:none">          <span class="info-close">               <span>\xd7</span>           </span>           <p class="pause-title ">Your Subscription Is Paused</p>          <p class="pause-note ">It will automatically be activated again on {{pause_date}}</p>          <p class="pause-note ">Need it before? Please <a href="mailto:support@placeit.net" target="_blank">contact support</a></p>        </div>        <div id="subscription-past-due" style="display:none">          <span class="info-close">               <span>\xd7</span>           </span>           <p class="pause-title ">Your Account is Past Due</p>          <p class="pause-note ">You won\u2019t be able to make free downloads until your payment method is up to date.           Click <a href="#" class="handle-fix-cta">here</a> to update</p>        </div>        <div class="purchases-content">          <div class="purchases-header">            <div class="purchase-header__discount-label">                 <span class="purchase-header__discount-amount">30% OFF</span>             </div>             <h5 class="purchase-header__title">1. Single <span class="purchases__category-name"></span> Purchase</h5>            <h2 class="purchase-header__subtitle">You Only Get This <span class="purchases__category-name"></span></h2>           </div>          <div class="purchases-body">            <div class="tab-content download-tabs__content">              <div class="tab-pane active" id="normalDownload">                <form class="form purchase-options-form" role="form" id="normalDownload">                  <div class="resolutions-container">                   <div class="row download-overlay__image-size resolution-options is_video_product">                    <div class="purchases__video-wrapper purchases__video-wrapper--paused">                         <div class="purchases__video-play-button"></div>                         <video muted playsinline></video>                     </div>                   </div>                  <div class="row download-overlay__image-size resolution-options is_smart_template">                  </div>                  <p class="purchase-body__content-description">                     <strong>{{res_watermarked}}</strong>, High Resolution {{res_title}} (<span class="res_dimensions"></span>).<br />Commercial Usage Ok!                   </p>                   </div>                   <div class="button-container">                    <button class="button button--not-subscribed primary long purchase-price" type="submit">                      <span class="price-description">Buy <span class="only-highlight-underline">ONLY</span> This <span class="purchases__category-name"></span> for                         <span class="purchase-header__price purchase-header__price--original"></span>                         <span class="purchase-header__price purchase-header__price--quantity"></span>                       </span>                      <span class="price-free">                      </span>                    </button>                  </div>                  <p class="purchases__low-res-download">Or <a>Get the <strong>FREE</strong> Watermarked Low Res Video</a></p>                   <div class="purchases__watermark-container"><div class="purchases__watermark-or-div">OR</div><p class="purchases__watermark-paragraph"><a class="purchases__watermark-link">Download with watermark for free</a></p></div>                 </form>              </div>              <div class="coupon-field-container"></div>            </div>          </div>        </div>        <div class="widget-outer">          <div class="disclaimer-wrapper">             All Prices in {{currency_label}}.          </div>        </div>      </div>',resItemTemplate:'    <div class="download-overlay__image-size-item">        <label>            <input data-allowed-licenses="{{allowed_licenses}}" data-key="{{res_key}}" id="{{radio_id}}" name="resolution" type="radio" value="{{res_id}}" />            <p class="overlay--radio-title">{{res_title}}</p>            <p class="overlay--radio-desc res_dimensions">{{res_dimensions}}</p><br>            <p class="overlay--radio-desc">{{res_watermarked}}</p>            <p class="overlay--radio-desc ios_screenshot__purchase_disclaimer" style="display:none;">When you upload your screenshots, Apple will give you the option to automatically resize them down for smaller screen sizes.</p>            <b class="resolution-license-link-placeholder"></b>        </label>    </div>',fillerColumn:'<div class="download-overlay__image-size-item"></div>',discountPlanText:"You got ${{amount}} off because of your {{planName}} subscription!",taxAmountText:"Plus {{amount}} for {{taxType}}. All Prices in {{currency_label}}",subscriptionPlanText:"Using your {{planName}} subscription downloads",packPlanText:"Using your Download Pack",TEXT_VAT_EXEMPT_MESSAGE:"VAT Exempt. All Prices in {{currency_label}}.",TEXT_FREE_DOWNLOAD_TITLE:"Free Download",TEXT_DOWNLOAD_NOW:"Download Now",TEXT_FREE_DOWNLOAD_CATEGORY_TITLE:'Free <span class="purchases__category-name"></span> Download',TEXT_PAID_DOWNLOAD_CATEGORY_TITLE:'1. Single <span class="purchases__category-name"></span> Purchase',TEXT_PAID_DOWNLOAD_CATEGORY_SUBTITLE:'You Only Get This <span class="purchases__category-name"></span>',TEXT_DOWNLOAD_CATEGORY_TITLE:"GET YOUR {{categoryName}}!",TEXT_DISCOUNT_LABEL:"{{discount}} OFF",TEXT_DISCLAIMER_DEFAULT:"All Prices in {{currency_label}}",prototype:{IMAGE_TITLE_TEXT:"Get Your Image!",VIDEO_TITLE_TEXT:"Get Your Video!",$modalTitle:null,$form:null,$price:null,$priceOriginal:null,$priceQuantity:null,$priceDescription:null,$taxRate:null,init:function(e){Widget.prototype.init.call(this,e),("undefined"==typeof this.categoryName||null===this.categoryName)&&(this.categoryName=""),this.modalBody=this.element.find(".purchases-body"),this.containerForm=this.element.find("#normalDownload"),this.fillerColumn='<div class="download-overlay__image-size-item"></div>',this.subscriptionPaused=this.element.find("#subscription-paused"),this.subscriptionPastDue=this.element.find("#subscription-past-due"),this.fixCTA=this.element.find(".handle-fix-cta"),this.containers={video_product:this.containerForm.find(".is_video_product"),smart_template:this.containerForm.find(".is_smart_template")},this._renderResolutionItems(),this.$closeBtn=this.element.find(".close"),this.$modalTitle=this.element.find(".purchases-header h4"),this.$form=this.element.find(".purchase-options-form"),this.$price=this.element.find(".purchase-price"),this.$priceOriginal=this.element.find(".purchase-header__price--original"),this.$priceQuantity=this.element.find(".purchase-header__price--quantity"),this.$priceDescription=this.$price.find(".price-description"),this.$priceFree=this.$price.find(".price-free"),this.$priceFree.text(this.constructor.TEXT_FREE_DOWNLOAD_TITLE),this.$priceFree.hide(),this.couponFieldContainerEl=this.element.find(".coupon-field-container"),this.appendChild(new UI.PurchasesModalTabs({name:"tabsWidget",element:this.element})),this.instantiateResolutionsWidget(),this.$openSubscriptionsLink=this.element.find("#open-subscriptions-modal"),this.$openPackagesLink=this.element.find("#open-packages-modal"),this.$modalFooter=this.element.find(".modal-footer"),this.$extraInformation=this.element.find(".button-container .plan-note"),this.$taxInformation=this.element.find(".disclaimer-wrapper"),this.$modalHeader=this.element.find(".purchases-header"),this.$couponLabel=this.$modalHeader.find(".purchase-header__discount-label"),this.$watermarkAnchor=this.element.find(".purchases__watermark-link"),this.$watermarkContainer=this.element.find(".purchases__watermark-container"),this.euCountries=Helpers.App.getEUCountries(),this.$video=this.element.find("video"),this._bindEvents()},instantiateCouponField:function(){var e=Helpers.CouponHelper.getDiscount(),t=this.constructor.TEXT_DISCOUNT_LABEL.replace("{{discount}}",e.label);this.element.find(".purchase-header__discount-label").addClass("active"),this.element.find(".purchase-header__discount-amount").text(t)},_renderResolutionItems:function(){return Array.isArray(window._pl_resolutions)===!1?this:(window._pl_resolutions.forEach(function(e,t){if(!e.is_smart_template&&!e.is_video_product&&!e.is_video)return this;var i,n=e.key,s=e.id,r="resolution-"+s,o=e.allowed_licenses,a="[",l="]",c=e.name,u=e.width,d=e.height,h=u+"x"+d+" px",p=e.watermarked,f="",m="";if(o.forEach(function(e){a+=1===a.length?'"'+e+'"':',"'+e+'"'}),a+=l,e.is_video_product?(f="video_product",m="3"):e.is_smart_template&&(f="smart_template",m="12",h=""),i=this.constructor.resItemTemplate.replace("{{col_size}}",m).replace("{{res_key}}",n).replace("{{radio_id}}",r).replace("{{res_id}}",s).replace("{{res_dimensions}}",h).replace("{{res_watermarked}}",p),$(i).appendTo(this.containers[f]).find("#"+r).data("allowed-licenses",o),e.is_video&&"small"===e.key){var g=$(i).clone();g.appendTo(this.containers.video_product).find("#"+r).data("allowed-licenses",o)}else if(this.categoryName){var v=Helpers.StageType.getStageData().image_type,y=15===v||18===v;"smart_template"!==f||y||this._setContentInfo(c,p),"video_product"===f&&y&&this._setContentInfo("",p)}}.bind(this)),this.containers.video_product.prepend(this.constructor.fillerColumn).append(this.constructor.fillerColumn),this)},_setContentInfo:function(e,t){var i=this.element.find(".purchase-body__content-description").html();i=i.replace("{{res_title}}",e).replace("{{res_watermarked}}",t),this.element.find(".purchase-body__content-description").html(i)},_bindEvents:function(){var e=this;this.$form.submit(function(){e.formSubmitted=!0}),this.$form.submit(function(t){if(t.preventDefault(),"undefined"!=typeof window._stageData&&Helpers.StageType.isCropperTool()&&(page.stage.record.cropParams=page.stage.cropParams,Helpers.StageType.setDesignPlan(page.stage.getCleanRecord(page.stage.record))),"undefined"!=typeof window._stageData&&Helpers.StageType.isToolName("video_to_gif")&&(page.stage.record.gifParams=page.stage.gifParams,Helpers.StageType.setDesignPlan(page.stage.getCleanRecord(page.stage.record))),Helpers.App.isLoggedIn()===!1&&Helpers.App.setSubscribeFromModal("download"),Helpers.StageType.isVideoV4()){var i=t.originalEvent;i&&e.containers.video_product.find('[data-key="normal_v"]').click()}else Helpers.StageType.isVideoV5()&&e.setHighResVideoV5();e._formSubmitHandler(t)}),this.element.find(".purchases__low-res-download a").click(function(t){return t.preventDefault(),Helpers.App.isLoggedIn()===!1?void e.dispatch("low_res_download.not_logged_in"):(e.setLowResVideo(),void e.$form.submit())}),e.$watermarkAnchor.on("click",function(t){Helpers.StageType.getPreviewImage().then(function(t){e.$watermarkAnchor.attr("href","data:image/png;base64,"+t),e.$watermarkAnchor.attr("download","image.png")})["catch"](function(e){throw new Error(e)})}),this.fixCTA.click(function(){this.deactivate(),Modals.Billing.handleFixCTA()}.bind(this)),this.subscriptionPaused.find(".info-close").click(function(t){e.subscriptionPaused.hide()}),this.subscriptionPastDue.find(".info-close").click(function(t){e.subscriptionPastDue.hide()});var t=e.element.find(".purchases__video-wrapper");return this.$video.click(function(){e._previewVideo.isPlaying()?(e._previewVideo.pause(),t.addClass("purchases__video-wrapper--paused")):(e._previewVideo.play(),t.removeClass("purchases__video-wrapper--paused"))}).bind("ended",function(){this.load(),t.addClass("purchases__video-wrapper--paused")}),Helpers.CouponHelper.bind("coupon.validated",this._updatePriceForPackage.bind(this)),Helpers.CouponHelper.bind("coupon.removed",this._updatePriceForPackage.bind(this)),this},_notLoggedInHandler:function(){return this.dispatch("purchase.not_logged_in"),this},_disableSubmitButtons:function(){this.$price[0].disabled=!0},_enableSubmitButtons:function(){return this.$price[0].disabled="",this},_updatePriceForPackage:function(){var e=this,t=window.currencyHelper.getSymbol(recurlyConfig.currency);try{var i=Helpers.Price.stage(Helpers.PremiumAssetsValidator.getStageInfo())}catch(n){return}return this._hideTaxInfo(),this.$priceQuantity.css("display","inline-block"),this.$priceOriginal.text(""),this.couponFieldContainerEl.hide(),i.price.then(function(n){if(0!==n){i.priceWithDiscount.then(function(i){if(n!==i){e.$priceOriginal.text(t+n),e.$priceOriginal.css("display","inline-block");var s=t+i;e.$priceQuantity.text(s),~e.euCountries.indexOf(window._pl_country)&&e._updateTaxRate(i)}});var s=t+n;e.$priceQuantity.text(s),e.$priceQuantity.show(),e._showTaxInfo(),~e.euCountries.indexOf(window._pl_country)&&e._updateTaxRate(n)}}),this},_checkHelperPriceResults:function(e,t){var i=Helpers.Price.stage(Helpers.StageType.getStageInfo());Promise.all([i.price,i.priceWithDiscount]).then(function(i){var n=i[0],s=i[1];(n!==e||s!==t)&&Helpers.GlobalEventTracker.stagePriceMismatch({priceFromPurchase:e,priceWithDiscountFromPurchase:t,priceFromHelper:n,priceWithDiscountFromHelper:s})})},_originalPrice:function(e,t){return window.packages[e+":"+t]},_getPrice:function(e,t,i){var n,s,r,o,a;return s=Helpers.Resolutions.getActive().key,a=window._stageData.stage_data.custom_price,r=Helpers.App.getSubscription(),o=Registry.UserBulkPackages.hasAny(),"normal"===s?n=this._priceWithSubscription(e,t,i):"normal_v"===s?n=this._priceWithSubscription(e,t,i):Helpers.GlobalEventTracker.deprecatedBlock({module:"Purchases::_getPrice",file:"purchases_modal.js",description:"normal and normal_v are not the only possible values for res_key (line 510)"}),r&&!r.is_paused&&n?n:a&&"normal"===s?a:window.packages[e+":"+t]},_updateTaxRate:function(e){var t=this;this._configureRecurly(),this._taxRequestInProgress&&this._taxRequestInProgress.cancel();var i=P.cancelable(Helpers.Price.tax.bind(null,window._pl_country,e));this._taxRequestInProgress=i(),this._taxRequestInProgress.then(function(e){t._taxRequestInProgress=null;var i="",n=window.currencyHelper.getSymbol(recurlyConfig.currency);0===e.amount||isNaN(e.amount)?i="":"undefined"!=typeof window._pl_vat_number&&""!=window._pl_vat_number?i=t.constructor.TEXT_VAT_EXEMPT_MESSAGE:("AU"===window._pl_country&&(taxType="GST"),i=t.constructor.taxAmountText.replace("{{amount}}",n+parseFloat(e.amount).toFixed(2)).replace("{{taxType}}",e.type)),t.$taxInformation.text(i)})["catch"](function(){t._taxRequestInProgress=null})},_configureRecurly:function(){var e={currency:window.recurlyConfig.currency,publicKey:window.recurlyConfig.publicKey};e.fields={all:{style:{fontSize:"16px",fontColor:"#555555",padding:"1px",placeholder:{color:"#55555 !important"}}},number:{selector:"#recurly-number",style:{placeholder:{content:""}}},cvv:{selector:"#recurly-cvv",style:{placeholder:{content:""}}},month:{selector:"#recurly-month",style:{placeholder:{content:""}}},year:{selector:"#recurly-year",style:{placeholder:{content:""}}},vat_number:{selector:"#recurly-vat-number",style:{placeholder:{content:""}}}},recurly.configure(e)},detach:function(){
return this.element.data("modal",null),this.element.detach(),this},_setModalToUnlimited:function(){var e=this.$modalHeader.find(".purchase-header__title"),t=this.$modalHeader.find(".purchase-header__subtitle"),i=this.constructor.TEXT_DOWNLOAD_CATEGORY_TITLE.replace("{{categoryName}}",this.categoryName);this.element.addClass("purchases--purple"),this.$modalHeader.addClass("purchases-header--purple"),e.text(i),e.css("textTransform","uppercase"),t.hide(),this.$price.addClass("button--subscribed"),this.$priceFree.show(),this.$priceDescription.hide()},_setModalToNewSubscription:function(){var e=this.$modalHeader.find(".purchase-header__title"),t=this.$modalHeader.find(".purchase-header__subtitle");e.text("Single Logo Purchase"),t.text("50% Off for Subscribers like You! \ud83d\ude09"),this.element.find(".only-highlight-underline").hide()},activate:function(){if(this.categoryName&&Helpers.StageType.isVideo()){this.setHighResVideo();var e=this.element.find(".purchases__video-wrapper");e.find("video")[0].load(),e.addClass("purchases__video-wrapper--paused")}this._enableSubmitButtons(),Widget.prototype.activate.call(this)},deactivate:function(e){Widget.prototype.deactivate.call(this),this.dispatch("deactivate",{callback:e})},instantiatePurchaseOverlay:function(e,t){var i=void 0!==this.purchaseOverlay;i&&this.purchaseOverlay.destroy();var n={name:"purchaseOverlay",purchaseRecord:e,paymentType:"purchase",hideSavedCardOption:t};return this.appendChild(this._createPurchaseOverlayWidget(n)),this.purchaseOverlay.bind("purchase.success",function(e){var t=null;e.data.coupon&&(t=e.data.coupon),Helpers.GlobalEventTracker.purchaseSuccess({amount_in_cents:e.data.amount_in_cents,license_id:e.data.license_id,resolution_id:e.data.resolution_id,stage_id:Helpers.StageType.getStageID(),user_id:Helpers.App.getUser().id,invoice_number:e.data.invoice_number}),Helpers.CouponHelper.markAsUsed(),this.dispatch("purchase.success",t)}.bind(this)).bind("purchase.failed",function(e){var t=e&&e.data?e.data.status:0,i=e&&e.data?e.data.message:"";422===t?this.dispatch("stage.error",{error:!0,errorType:"broken-stage",message:i}):"purchaseOverlay"!=e.target.name&&this.dispatch("purchase.failed",e.data)}.bind(this)),this.purchaseOverlay},_createPurchaseOverlayWidget:function(e){var t=new PurchaseWidgetStrategy(PurchaseWidgetStrategy.PurchaseOverlay);return console.log(this.constructor.className+" -> Creating the purchase overlay"),t.create(e)},instantiateResolutionsWidget:function(){this.appendChild(new UI.PurchaseResolutions({name:"resolutionsWidget",element:this.element.find(".purchase-options-form")})),this.bindingsResolutionsWidget()},bindingsResolutionsWidget:function(){this.resolutionsWidget.bind("resolution-selected",this._updatePriceForPackage.bind(this))},setPreview:function(e){var t=e.source;if(Helpers.StageType.isSmartTemplate())this.containers.smart_template.css("backgroundImage","url("+t+")");else{this.$video.attr("src",t);var i=this.$video.get(0);setTimeout(function(){i.load(),i.play(),i.pause()},1);var n=this.element.find(".purchases__video-wrapper");n.addClass("purchases__video-wrapper--paused"),this._previewVideo?this._previewVideo.setKeytime(e.keytime):this._previewVideo=new UI.KeyframeVideoPresenter(this.$video,e.keytime)}},setResolutionData:function(e){var t=e.dimensions.width+"x"+e.dimensions.height+"px";Helpers.StageType.isVideo()===!0&&(t=e.dimensions.high.width+"x"+e.dimensions.high.height+"px"),this.element.find(".res_dimensions").html(t)},directDownload:function(){this._showModalHandler(),Helpers.StageType.isFusionVideo()===!0&&this.setHighResVideo(),this.$form.submit()},setHighResVideo:function(){this.containers.video_product.find('[data-key="normal_v"]').click()},setHighResVideoV5:function(){this.setHighResVideo()},setLowResVideo:function(){this.containers.video_product.find('[data-key="small"]').click()},_showLowResDownloadLink:function(){Helpers.StageType.isVideoV4()&&this.element.find(".purchases__low-res-download").show()},_showWatermarkDownloadLink:function(){Helpers.App.isInWatermarkExperiment()&&this.$watermarkContainer.show()},_hideLowResDownloadLink:function(){Helpers.StageType.isVideoV4()&&this.element.find(".purchases__low-res-download").hide()},_hideWatermarkDownloadLink:function(){this.$watermarkContainer.hide()},setFreeTheme:function(){this._resetTheme(),this._setFreeDownloadModal()},_setFreeDownloadModal:function(){var e=this.$modalHeader.find(".purchase-header__title");e.html(this.constructor.TEXT_FREE_DOWNLOAD_CATEGORY_TITLE),this.$priceFree.show(),this.$priceDescription.hide(),this.categoryName&&this.element.find(".purchases__category-name").text(this.categoryName)},setPaidTheme:function(){this._resetTheme(),this._updatePriceForPackage(),this._showLowResDownloadLink(),this.$priceFree.hide(),this.$priceDescription.show(),this.categoryName&&this.element.find(".purchases__category-name").text(this.categoryName),this.$modalFooter.show(),Helpers.App.isInWatermarkExperiment()&&this._showWatermarkDownloadLink()},setAdminTheme:function(){this.setFreeTheme(),this._setModalToUnlimited(),this.element.find(".resolutions-container").addClass("resolutions-container--subscribed"),this.$price.removeClass("button--not-subscribed"),this.$modalHeader.addClass("purchase-header--admin")},setSubscribedTheme:function(){var e=this,t=void 0!==window._pl_paused_subscription,i=window.isPastDue!==!1,n=Helpers.App.getSubscription();if(this._resetTheme(),void 0!==n&&(t=n.is_paused),this.$modalHeader.addClass("purchase-header--subscribed"),t){var s=this.subscriptionPaused.html().replace("{{pause_date}}",window._pl_remove_date);this.subscriptionPaused.html(s),this.subscriptionPaused.show(),this.subscriptionPaused.find(".info-close").click(function(){e.subscriptionPaused.hide()});var r=Helpers.Price.stage(Helpers.PremiumAssetsValidator.getStageInfo());Promise.all([r.price,r.priceWithDiscount]).then(function(t){(0===t[0]||0===t[1])&&e._setFreeDownloadModal()})["catch"](function(e){throw new Error(e)})}else this.element.find(".resolutions-container").addClass("resolutions-container--subscribed"),this._setModalToUnlimited(),this.$price.removeClass("button--not-subscribed");i&&this.subscriptionPastDue.show()},_resetTheme:function(){this.subscriptionPaused.hide(),this.subscriptionPastDue.hide(),this.$modalFooter.hide(),this.$price.addClass("button--not-subscribed"),this.$priceFree.hide(),this.$priceDescription.show(),this.$modalHeader.removeClass("purchase-header--subscribed"),this.$modalHeader.removeClass("purchase-header--admin"),this._hideLowResDownloadLink(),this._hideWatermarkDownloadLink();var e=this.$modalHeader.find(".purchase-header__title"),t=this.$modalHeader.find(".purchase-header__subtitle"),i=this.constructor.TEXT_PAID_DOWNLOAD_CATEGORY_TITLE.replace("{{categoryName}}",this.categoryName);this.element.find(".disclaimer-wrapper").text(this.constructor.TEXT_DISCLAIMER_DEFAULT),this.element.removeClass("purchases--purple"),this.$modalHeader.removeClass("purchases-header--purple"),this.element.find(".resolutions-container").removeClass("resolutions-container--subscribed"),e.html(i),e.css("textTransform",""),t.show(),this.$price.removeClass("button--subscribed"),this.categoryName&&this.element.find(".purchases__category-name").text(this.categoryName)}}}),UI.StageDownload={},Class(UI.StageDownload,"Controller").includes(CurrencyLabelSetter)({SINGLE_TEMPLATE:{value:"single_purchase",label:"Buy 1 template ({ price })",title:"Only buy this template!",info:"You\u2019ll only get this template. no watermark, high resolution PNG, commercial usage OK!",ctaLabel:"Continue",active:!1,disclaimer:"All prices in { currency }."},MULTIPLE_TEMPLATE:{value:"single_purchase",label:"Loading...",title:"Only buy this template!",info:"You\u2019ll only get these templates.",ctaLabel:"Continue",active:!1,disclaimer:"All prices in { currency }."},SUBSCRIPTION_TEMPLATE:{value:"subscription",label:"Unlimited Subscription ({ price }/mo*)",title:"Unlimited Downloads",info:"You'll get your selected template, plus Unlimited Downloads.",ctaLabel:"Go Unlimited",active:!0,disclaimer:"            <span>                 <strong>*Cancel anytime.</strong> Unlimited subscription billed yearly in { currency }.             </span>             <span>                 1 month minimum commitment if subscribers have downloaded any templates.             </span>         "},ACTIVE_CURRENCY:"{{currency_label}}",ORIGINAL_PRICE_TEMPLATE:'<span class="original-price">{ price }</span>',prototype:{_multiplePurchaseService:null,_purchasesOptions:[],downloadModal:null,purchasesModalRef:null,subscriptionsRef:null,activePlan:"annual",init:function(e){var t=this;t._setCurrencyLabel(),t.preview=e.preview,Helpers.StageType.isStage()&&(t._multiplePurchaseService=Service.MultiplePurchase.getInstance()),this.purchasesModalRef=e.purchasesModalRef,this.subscriptionsRef=e.subscriptionsRef||null,t.downloadModal=new UI.StageDownload.Modal({_data:{purchasesOptions:[]},category:window._pl_category.toLowerCase().split(" ")[0],hasLowResOption:Helpers.StageType.isVideoV4()}),this._setBindings()},getMultiPurchaseService:function(){return this._multiplePurchaseService},activateModal:function(){var e=this;window.page.stage.merchPreviewController&&window.page.stage.merchPreviewController.unbind("item.change").bind("item.change",function(e){Helpers.App.deleteCookie("multiplePurchasesSelectedIds")}),e.downloadModal._initialPurchaseButtonText=null,this.prepareMultiPurchaseData(),this._generatePurchaseOptions().then(function(){e.downloadModal.updatePurchasesOptions(e._purchasesOptions),e.preview&&e.downloadModal.setPreview(e.preview),Helpers.StageType.isVideoV4()&&e.downloadModal.enableLowResOption()}),this.downloadModal.activate(),this.subscriptionsRef&&this.subscriptionsRef.$period.attr("disabled",!1)},prepareMultiPurchaseData:function(){var e=this,t=Service.MultiplePurchase.getInstance();if(t.canDoMultiplePurchases()!==!1){var i=t.getAllSelectedIds();t.clean(),i.unshift(Number(Helpers.StageType.getStageID())),t.bind("price.changed",Utils.bindFn(e)(e._priceChangedHandler));var n=t.prepareData(i);e._bindMultiPurchasesThumbnailsEvents(n)}},_bindMultiPurchasesThumbnailsEvents:function(e){var t=this,i=Utils.bindFn(t)(t._onThumbnailProcessedHandler),n=Utils.bindFn(t)(t._onThumbnailProcessingHandler);e.unbind("thumbnails.processed").bind("thumbnails.processed",i),e.unbind("thumbnails.processing").bind("thumbnails.processing",n)},_onThumbnailProcessingHandler:function(e){this.getDownloadModal().updateThumbnailSource(e.data.stage.id,"data:image/png;base64,"+e.data.stage.preview)},_onThumbnailProcessedHandler:function(){this.getDownloadModal().hideProcessingInSubmitButton(),this.getDownloadModal().enableSubmitButton()},_priceChangedHandler:function(e){var t=this,i=e.data,n=t._updatePurchaseButtonText(i);if("Free Download"!==n){var s=1;t.downloadModal._data.purchasesOptions[s].title=n}},isValidCoupon:function(){return Helpers.CouponHelper.exists()&&Helpers.CouponHelper.isValid()},isSubscriptionValidCoupon:function(){return this.isValidCoupon()&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SUBSCRIPTION)},isPurchaseValidCoupon:function(){return this.isValidCoupon()&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)},setSubscriptionsRef:function(e){this.subscriptionsRef=e},_generatePurchaseOptions:function(){var e=this,t=$.extend({},UI.StageDownload.Controller.SINGLE_TEMPLATE),i=$.extend({},UI.StageDownload.Controller.MULTIPLE_TEMPLATE),n=$.extend({},UI.StageDownload.Controller.SUBSCRIPTION_TEMPLATE),s=null,r=t;Helpers.StageType.isLogo()&&e.getMultiPurchaseService().isMultiplePurchase()?(r=i,r.disclaimer=i.disclaimer.replace("{ currency }",e.constructor.ACTIVE_CURRENCY),s=Promise.resolve()):s=this._updateSingleOptionPrice(t);var o=this._updateSubscriptionOptionPrice(n);return Promise.all([s,o]).then(function(){e._purchasesOptions=[n,r]})},_updateSingleOptionPrice:function(e){if(void 0===Helpers.PremiumAssetsValidator)return Promise.resolve();var t=this,i=Helpers.Price.stage(Helpers.PremiumAssetsValidator.getStageInfo());Promise.all([i.price,i.priceWithDiscount]).then(function(i){if(0===i[0])return e.label="Download this free template ONLY",e.title="Free Download",void(e.disclaimer="");t.getMultiPurchaseService().update(Number(Helpers.StageType.getStageID()),{price:i[0]});var n=t._formatPrice(i[0]),s=t._formatPrice(i[1]);i[0]===i[1]?s="":n=UI.StageDownload.Controller.ORIGINAL_PRICE_TEMPLATE.replace("{ price }",n),t._setIsDiscountActive(""!==s),""!==s&&(s=" "+s),e.label=e.label.replace("{ price }",n+s),e.disclaimer=e.disclaimer.replace("{ currency }",t.constructor.ACTIVE_CURRENCY)})},_shouldShowMonthlyPrice:function(){var e=Helpers.CouponHelper.isValid()||!1,t=e&&Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_MONTHLY),i=e&&Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_ANNUAL);return t&&!i},_updateSubscriptionOptionPrice:function(e){var t,i=this,n=this._shouldShowMonthlyPrice();t=n?Helpers.Price.monthlyPlan():Helpers.Price.annualPlan();Promise.all([t.price,t.priceWithDiscount]).then(function(t){var s=i._formatPrice(t[0]/(n?1:12)),r=i._formatPrice(t[1]/(n?1:12));t[0]===t[1]?r="":s=UI.StageDownload.Controller.ORIGINAL_PRICE_TEMPLATE.replace("{ price }",s),i._setIsDiscountActive(""!==r),e.label=e.label.replace("{ price }",s+" "+r),e.disclaimer=e.disclaimer.replace("{ currency }",i.constructor.ACTIVE_CURRENCY),n&&(e.label=e.label.replace("Unlimited Subscription","Monthly Subscription"),e.disclaimer=e.disclaimer.replace("yearly","monthly"))});this._monthlyPlanActive=n},updatePreview:function(e){if(e&&(this.preview=e,this.downloadModal.setPreview(e),e&&e.source&&Helpers.StageType.isLogo())){var t=e.source.replace("data:image/png;base64,","");this.getMultiPurchaseService().update(Number(Helpers.StageType.getStageID()),{preview:t,designPlan:JSON.stringify(Helpers.StageType.getDesignPlan())}),this.downloadModal.updateThumbnailSource(Helpers.StageType.getStageID(),e.source)}},_setBindings:function(){Helpers.CouponHelper.bind("coupon.validated",this._onCouponChange.bind(this)),Helpers.CouponHelper.bind("coupon.removed",this._onCouponChange.bind(this)),this.downloadModal.bind("change",this._onModalChange.bind(this)),this.downloadModal.bind("submit",this._onModalSubmit.bind(this)),this.downloadModal.bind("closed",this._onModalClose.bind(this)),this.downloadModal.bind("thumbnail.click",this._onThumbnailClickHandler.bind(this))},_onThumbnailClickHandler:function(e){var t=Number(e.data.index),i=this,n=null;if(!(0>t||t>i.getMultiPurchaseService().count()-1)&&(n=i.getMultiPurchaseService().getByIndex(t),Boolean(n)!==!1)){"add"===e.data.action&&i.getMultiPurchaseService().update(n.id,{selected:!0}),"remove"===e.data.action&&i.getMultiPurchaseService().update(n.id,{selected:!1});var s={stages_id:i.getMultiPurchaseService().getSelectedIds()};i.downloadModal.disableSubmitButton();var r=0===i.getMultiPurchaseService().getSelectedDataObjects().length;return r?(i.downloadModal.setTitle("Select a template"),void i.downloadModal.setPurchaseButtonText("Please select a template")):void i.getMultiPurchaseService().getPrice(s).then(function(e){var t=i._updatePurchaseButtonText(e);"Free Download"!==t&&i.downloadModal.setTitle(t),s.stages_id.forEach(function(t,n){i.getMultiPurchaseService().update(t,{price:e.prices[n]/100})})})}},_updatePurchaseButtonText:function(e){var t=this,i=t.getMultiPurchaseService().getSelectedDataObjects().length,n="Buy "+i+" template",s=1;if(i>s&&(n+="s"),0===i)return void t.downloadModal.disableSubmitButton();t.getMultiPurchaseService().areAllThumbnailsProcessed()&&0===t.downloadModal.$multipleThumbnailsList.find("li.loading").length&&t.downloadModal.enableSubmitButton();var r=" ("+t._formatPrice(e.total)+") ",o="",a=t.isValidCoupon();if(a&&t.isPurchaseValidCoupon()){r=' (<span class="original-price">'+t._formatPrice(e.total)+"</span> ";var l=Helpers.CouponHelper.calculatePrice(e.total);o=t._formatPrice(l)+")"}return t.downloadModal.setPurchaseButtonText(n+r+o),0===e.total&&(t.downloadModal.setTitle("Free Download"),t.downloadModal.setPurchaseButtonText("Download this free template(s) ONLY"),n="Free Download"),n},_onCouponChange:function(){this._generatePurchaseOptions().then(function(){this.downloadModal.updatePurchasesOptions(this._purchasesOptions),this.downloadModal.hideInfoPopover("subscription"),this._isDisccountActive&&this.downloadModal.showInfoPopover("Limited Time Discount","subscription")}.bind(this))},_onModalChange:function(e,t){var i=this.getMultiPurchaseService(),n=i.isMultiplePurchase()&&(i.areAllThumbnailsProcessed()===!1||this.downloadModal.$multipleThumbnailsList.find("li.loading").length>0);"single_purchase"===t.value?(this.downloadModal.enableSubmitButton(),n&&(this.downloadModal.disableSubmitButton(),this.downloadModal.showProcessingInSubmitButton()),this.getMultiPurchaseService().selectAll(),Boolean(this._isDisccountActive)===!1&&this.downloadModal.showInfoPopover("Best Value","subscription"),Boolean(this.downloadModal._initialPurchaseButtonText)===!1&&(this.downloadModal._initialPurchaseButtonText=this.downloadModal.getPurchaseButton().html())):(Boolean(this.downloadModal._initialPurchaseButtonText)&&this.downloadModal.setPurchaseButtonText(this.downloadModal._initialPurchaseButtonText),this.downloadModal.enableSubmitButton(),this.downloadModal.hideInfoPopover("subscription"))},_onModalSubmit:function(e,t){"subscription"===t.value&&this._executeSubscriptionFlow(),"single_purchase"===t.value&&this._executeSinglePurchaseFlow(t.lowResolution),this.downloadModal.deactivate()},_onModalClose:function(){Helpers.GlobalEventTracker.track("Purchase:UserCanceled",{stage_id:Helpers.StageType.getStageID()})},_executeSinglePurchaseFlow:function(e){var t=window._pl_category.toLowerCase().split(" ")[0];"video"!==t&&this.purchasesModalRef.resolutionsWidget.selectByID("#resolution-14"),e?this.purchasesModalRef.resolutionsWidget.selectByID("#resolution-9"):this.purchasesModalRef.resolutionsWidget.selectByID("#resolution-11"),this.purchasesModalRef.$form.submit()},_executeSubscriptionFlow:function(){var e=this.subscriptionsRef.getElement().find('[data-period="annual"]'),t=this.subscriptionsRef.getElement().find('[data-period="monthly"]');this._monthlyPlanActive?t.click():e.click()},_formatPrice:function(e){return e=e.toFixed(2),e=e.replace(/\.?0+$/,""),e=window.currencyHelper.getSymbol(recurlyConfig.currency)+e},_setIsDiscountActive:function(e){this._isDisccountActive=e},isModalAttached:function(){return this.downloadModal?$.contains(document,this.downloadModal.getElement()[0]):!1},getDownloadModal:function(){return this.downloadModal}}}),Class(UI.StageDownload,"Modal").inherits(UI.SimpleModal)({htmlTemplate:'     <div class="unique-purchase-overlay">       <div class="unique-purchase-overlay__wrapper">         <div class="unique-purchase-overlay__header">           <p class="unique-purchase-overlay__title">Unlimited Downloads</p>           <button type="button" class="unique-purchase-overlay__button-close" data-dismiss="modal" aria-hidden="true">               <img class="unique-purchase-overlay__icon" src="/assets/icons/close.svg">           </button>         </div>         <div class="unique-purchase-overlay__content">         <div class="unique-purchase-overlay__img-container multiple-purchases-container"><ul class="thumbnails-list"></ul></div>          <div class="unique-purchase-overlay__img-container">               <img src="/assets/new-stage-download-modal/mockups-left.svg" alt="" class="unique-purchase-overlay__img unique-purchase-overlay__img--left-side">               <img src="/assets/new-stage-download-modal/mockups-right.svg" alt="" class="unique-purchase-overlay__img unique-purchase-overlay__img--right-side">               <img id="stage-download-preview" src="/assets/placeholder-modal-preview.png" alt="" class="unique-purchase-overlay__img unique-purchase-overlay__img--preview">               <div class="unique-purchase-overlay__img unique-purchase-overlay__video--preview">                 <div class="video-play-button"></div>                 <video muted playsinline />               </div>               <div class="unique-purchase-overlay__img unique-purchase-overlay__img--cover"></div>           </div>           <p class="unique-purchase-overlay__img-text">You\u2019ll get your selected template, plus Unlimited Downloads.</p>         </div>         <form class="unique-purchase-overlay__footer">             <label class="unique-purchase-overlay__purchase-option active" for="subscription">                 <span class="unique-purchase-overlay__radio-button"><u></u></span>                 <p class="unique-purchase-overlay__label">Unlimited Subscription (<span class="unique-purchase-overlay__price">$7.47</span> /mo)</p>                 <input type="radio" name="purchase-option" id="subscription" value="subscription">             </label>             <label class="unique-purchase-overlay__purchase-option" for="single_purchase">                 <span class="unique-purchase-overlay__radio-button"><u></u></span>                 <p class="unique-purchase-overlay__label">Loading (<span class="unique-purchase-overlay__price">...</span>)</p>                 <input type="radio" name="purchase-option" id="single_purchase" value="single_purchase">             </label>             <button class="unique-purchase-overlay__submit" type="submit">                 Go Unlimited!             </button>             <button class="unique-purchase-overlay__low-res-link">               Get a free low res video with watermark             </button>         </form>       </div>       <div class="unique-purchase-overlay__disclaimer">         <span>             <strong>Cancel anytime*.</strong> All prices billed yearly in USD.         </span>         <span>             *1 month minimum commitment if subscribers have downloaded any templates.         </span>       </div>        </div>',PURCHASE_OPTION_TEMPLATE:'        <label class="unique-purchase-overlay__purchase-option" for="">             <span class="unique-purchase-overlay__radio-button"><u></u></span>             <p class="unique-purchase-overlay__label">               <span class="unique-purchase-overlay__option-label">Single Purchase</span>               (<span class="unique-purchase-overlay__price">$2.95</span>)             </p>             <input type="radio" name="purchase-option" id="" value="">         </label>     ',cssClass:"stage-download-modal",PREVIEW_BACKGROUNDS:{mockups:{left:"/assets/new-stage-download-modal/mockups-left.svg",right:"/assets/new-stage-download-modal/mockups-right.svg"},design:{left:"/assets/new-stage-download-modal/designs-left.svg",right:"/assets/new-stage-download-modal/designs-right.svg"},logos:{left:"/assets/new-stage-download-modal/logos-left.svg",right:"/assets/new-stage-download-modal/logos-right.svg"},videos:{left:"/assets/new-stage-download-modal/videos-left.svg",right:"/assets/new-stage-download-modal/videos-right.svg"}},MULTI_PURCHASE_THUMBNAIL_TEMPLATE:'<li data-index="{{index}}" data-id="{{stageId}}" class="{{thumbnailSizeClass}} selected"><img src="{{stagePreview}}" /></li>',CURRENT_ONE_DEFAULT_ADDED_STAGE:1,TWO_STAGES_ADDED:2,SUBMIT_BUTTON_CONTINUE:"Continue",SUBMIT_BUTTON_PROCESSING:"Processing selected templates",prototype:{$title:null,$info:null,$previewImg:null,$previewVideo:null,$form:null,$cta:null,_data:null,category:"mockups",_multiplePurchaseService:null,_thumbnails:[],init:function(e){UI.SimpleModal.prototype.init.call(this,e),Helpers.StageType.isStage()&&(this._multiplePurchaseService=Service.MultiplePurchase.getInstance()),this.getElement().addClass("stage-download-modal"),this.setContent($(UI.StageDownload.Modal.htmlTemplate)),this.addCloseButton(),this.element.removeAttr("data-keyboard");var t=this.getElement();this.$title=t.find(".unique-purchase-overlay__title"),this.$info=t.find(".unique-purchase-overlay__img-text"),this.$form=t.find("form"),this.$cta=t.find(".unique-purchase-overlay__submit"),this.$disclaimer=t.find(".unique-purchase-overlay__disclaimer"),this.$previewImg=t.find("#stage-download-preview"),this.$previewVideo=t.find(".unique-purchase-overlay__video--preview"),this.$previewBackgroundLeft=t.find(".unique-purchase-overlay__img--left-side"),this.$previewBackgroundRight=t.find(".unique-purchase-overlay__img--right-side"),this.$lowResLink=t.find(".unique-purchase-overlay__low-res-link"),this.$purchaseButton=t.find(".unique-purchase-overlay__purchase-option[for=single_purchase] .unique-purchase-overlay__label"),this.$singleImageContainer=t.find(".unique-purchase-overlay__img-container:not(.multiple-purchases-container)"),this.$multiplePurchaseContainer=t.find(".unique-purchase-overlay__img-container.multiple-purchases-container"),this.$multipleThumbnailsList=this.$multiplePurchaseContainer.find(".thumbnails-list"),this._setPreviewBackground(),this.hasLowResOption&&this.enableLowResOption(),this._data.preview&&this.setPreview(this._data.preview),this._data.purchasesOptions.length&&this.updatePurchasesOptions(this._data.purchasesOptions),this._setBindings()},getMultiPurchaseService:function(){return this._multiplePurchaseService},setTitle:function(e){this.$title.text(e)},setPurchaseButtonText:function(e){this.getElement().find(".unique-purchase-overlay__purchase-option[for=single_purchase] .unique-purchase-overlay__label").html(e)},getPurchaseButton:function(){return this.getElement().find(".unique-purchase-overlay__purchase-option[for=single_purchase] .unique-purchase-overlay__label")},getSubmitButton:function(){return this.$cta},_addClassToSubmitButton:function(e){this.getSubmitButton().addClass(e)},_removeClassFromSubmitButton:function(e){this.getSubmitButton().removeClass(e)},showProcessingInSubmitButton:function(){this._addClassToSubmitButton("ellipsing"),this._setSubmitButtonText(this.constructor.SUBMIT_BUTTON_PROCESSING)},hideProcessingInSubmitButton:function(){var e=this.$cta.hasClass("ellipsing")===!0;e!==!1&&(this._removeClassFromSubmitButton("ellipsing"),this._setSubmitButtonText(this.constructor.SUBMIT_BUTTON_CONTINUE))},_setSubmitButtonText:function(e){this.$cta.text(e)},disableSubmitButton:function(){this.$cta.attr("disabled","disabled")},enableSubmitButton:function(){this._removeClassFromSubmitButton("ellipsing"),this.$cta.removeAttr("disabled")},updatePurchasesOptions:function(e){var t=$.md5(JSON.stringify(this._data.purchasesOptions)),i=$.md5(JSON.stringify(e));t!==i&&(this.$form.find("label").remove(),this._data.purchasesOptions=e.map(function(e){return Object.assign({},e)}),this._createPurchasesOptions())},_createPurchasesOptions:function(){var e=null;this._data.purchasesOptions.forEach(function(t){t.active&&(e=t);var i=$(UI.StageDownload.Modal.PURCHASE_OPTION_TEMPLATE);i.attr("for",t.value);var n=i.find("input");n.attr("id",t.value),n.val(t.value),n.prop("checked",t.active),n[0].checked=t.active,n.attr("name","purchase-option");var s=i.find("p");s.html(t.label),i.insertBefore(this.$cta),t.active&&(this.$defaultOption=i)}.bind(this)),this._updateUIForOption(e.value)},_setBindings:function(){this.$lowResLink.on("click",this._onLowResLinkClick.bind(this)),this.$form.on("submit",this._onFormSubmit.bind(this)),this.$form.on("change",this._onChange.bind(this)),this.getElement().on("hide.bs.modal",this._onClose.bind(this))},_onFormSubmit:function(e){e.preventDefault();var t=new FormData(e.target);this.dispatch("submit",{value:t.get("purchase-option"),lowResolution:!1})},_onChange:function(e){this._updateUIForOption(e.target.value),this.dispatch("change",{value:e.target.value})},_updateUIForOption:function(e){this.$form.find("label").removeClass("active"),this.$form.find('label[for="'+e+'"]').addClass("active");var t=this._data.purchasesOptions.find(function(t){return t.value===e}.bind(this));if(Boolean(t)!==!1){if(this.$title.text(t.title),this.$info.text(t.info),this.$cta.text(t.ctaLabel),this.$disclaimer.html(t.disclaimer),"single_purchase"===e&&this.getMultiPurchaseService().isMultiplePurchase())return this.$singleImageContainer.removeClass("in"),this.$singleImageContainer.hide(),this.$multipleThumbnailsList.html(""),this._createThumbnails(),void this.$multiplePurchaseContainer.css("display","flex");this.$multiplePurchaseContainer.hide(),this.$singleImageContainer.css("display","flex"),this.$singleImageContainer.toggleClass("in","single_purchase"!=e),this.$singleImageContainer.toggleClass("out","single_purchase"==e),this.$singleImageContainer.toggleClass("single","single_purchase"==e)}},_onClose:function(e){this.$form&&this.$form[0].reset(),this.$defaultOption&&this.$defaultOption.click(),this.dispatch("closed")},_onLowResLinkClick:function(e){e.preventDefault(),this.dispatch("submit",{value:"single_purchase",lowResolution:!0})},setPreview:function(e){"image"===e.type?this._setPreviewImage(e.source):"video"===e.type&&this._setVideoPreview(e.source,e.keytime)},_setPreviewImage:function(e){this.$previewImg.show(),this.$previewImg.attr("src",e)},_setVideoPreview:function(e,t){var i=this;this.$previewVideo.show(),this.$previewVideo.find("video").attr("src",e);var n=this.$previewVideo.find("video")[0];setTimeout(function(){n.load(),n.play(),n.pause()},1),i.$previewVideo.addClass("paused"),this._previewVideo?this._previewVideo.setKeytime(t):this._previewVideo=new UI.KeyframeVideoPresenter(this.$previewVideo.find("video"),t),this.$previewVideo.click(function(){i._previewVideo.isPlaying()?(i._previewVideo.pause(),i.$previewVideo.addClass("paused")):(i._previewVideo.play(),i.$previewVideo.removeClass("paused"))}),this.$previewVideo.find("video").bind("ended",function(){this.load(),i.$previewVideo.addClass("paused")})},_setPreviewBackground:function(){var e=UI.StageDownload.Modal.PREVIEW_BACKGROUNDS[this.category];e||(e=UI.StageDownload.Modal.PREVIEW_BACKGROUNDS.mockups),this.$previewBackgroundLeft.attr("src",e.left),this.$previewBackgroundRight.attr("src",e.right)},showInfoPopover:function(e,t){var i=this.$form.find('label[for="'+t+'"]'),n=i.find(".unique-purchase-overlay__radio-button"),s='<div class="unique-purchase-overlay__info-popover__content">'+e+"</div>";n.popover({html:!0,content:s,container:n,trigger:"manual",placement:"top"}),n.popover("show")},hideInfoPopover:function(e){var t=this.$form.find('label[for="'+e+'"]'),i=t.find(".unique-purchase-overlay__radio-button");i.popover("hide"),i.popover("destroy")},enableLowResOption:function(){this.$lowResLink.addClass("show")},_thumbnailClickHandler:function(e){var t=this,i=e.target.getElement(),n=i.attr("data-index");return i.hasClass("selected")?(i.removeClass("selected"),void t.dispatch("thumbnail.click",{action:"remove",index:n})):(i.addClass("selected"),void t.dispatch("thumbnail.click",{action:"add",index:n}))},_onShow:function(){Boolean(this.$defaultOption)&&this.$defaultOption.click()},_createThumbnails:function(){var e=this;e._prepareMultiPurchaseThumbnailsLayout(),e.getMultiPurchaseService().getAll().forEach(Utils.bindFn(e)(e._buildMultiPurchaseThumbnail))},_buildMultiPurchaseThumbnail:function(e,t){var i=this,n="",s=e.preview,r=Service.Merch.getInstance(),o=i._getThumbnailsDisplayClass();/^((http|https):\/\/)/.test(s)===!1&&(s="data:image/png;base64,"+e.preview),r.hasLastChanges(e.id)===!1&&e.id!==Number(Helpers.StageType.getStageID())&&(n="loading");var a=new UI.GridItem({id:e.id,imageSrc:s,cssClass:n+" selected "+o});a.requestImage(),a.getElement().attr("data-index",t),i.appendChild(a).render(i.$multipleThumbnailsList),i._thumbnails["_"+e.id]=a.getElement(),a.bind("gridItemClicked",Utils.bindFn(i)(i._thumbnailClickHandler))},_prepareMultiPurchaseThumbnailsLayout:function(){var e=this,t=e.getMultiPurchaseService().count(),i={TWO:2,THREE:3};t===i.TWO||t===i.THREE?(e.$multiplePurchaseContainer.css("align-items","center"),e.$multipleThumbnailsList.css("text-align","center")):(e.$multiplePurchaseContainer.parent().css("align-items","flex-start"),e.$multipleThumbnailsList.css("text-align","left"))},_getThumbnailsDisplayClass:function(){var e=this,t="size-many",i=e.getMultiPurchaseService().count();return i===e.constructor.CURRENT_ONE_DEFAULT_ADDED_STAGE&&(t="size-one"),i===e.constructor.TWO_STAGES_ADDED&&(t="size-two"),t},updateThumbnailSource:function(e,t){Boolean(e)!==!1&&Boolean(this._thumbnails["_"+e])!==!1&&this._thumbnails["_"+e].removeClass("loading").find("img").attr("src",t)}}}),Class(UI,"SinglePurchasesModal").inherits(Widget).includes(Translator,ThemeSupport)({html:'    <div class="modal single-purchase-overlay" tabindex="-1" role="dialog" aria-labelledby="downloadOverlayLabel" aria-hidden="true">      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">          <span aria-hidden="true">\xd7</span>      </button>      <div class="animation-info">2 Ways to Purchase!</div>       <div class="modal-dialog">        <div class="modal-content">          <div class="modal-body">            <div class="area1" data-area="left"></div>            <div class="or-div">OR</div>            <div class="area2" data-area="right"></div>          </div>        </div>      </div>    </div>',
TEXT_SUBSCRIPTIONS_PARTIAL_TITLE:"2. Get the Unlimited Subscription!",prototype:{$modalBody:null,$modalContent:null,$closeBtn:null,$modalFooter:null,$leftArea:null,$rightArea:null,categoryName:null,previewData:null,updateImageBeforeActivate:!1,showPreview:!1,leftChild:null,rightChild:null,LOADING_IMAGE_PATH:"/assets/fade-spinner.gif",reverseOrder:!1,_resumePurchasePromise:null,init:function(e){Widget.prototype.init.call(this,e),this.$modalBody=this.element.find(".modal-body"),this.$modalContent=this.element.find(".modal-content"),this.$closeBtn=this.element.find(".close"),this.$modalFooter=this.element.find(".modal-footer"),this.$leftArea=this.element.find(".area1"),this.$rightArea=this.element.find(".area2"),this.$orDiv=this.element.find(".or-div"),this.$animationInfo=this.element.find(".animation-info"),this.categoryName=Helpers.StageType.getStageData().category_name||"Logos",this._bindEvents(),this._initializeWidgets(),this._bindChildEvents(),this._configureRecurly(),this._reverseOrder(this.reverseOrder)},_bindEvents:function(){var e=this,t=function(t){t.target===this&&e.element.modal("hide")};return e.element.on("hidden.bs.modal",this.detach.bind(this)),e.$closeBtn.click(function(){Helpers.GlobalEventTracker.track("Purchase:UserCanceled",{stage_id:Helpers.StageType.getStageID()})}),e.$modalBody.on("click",t),e.$modalContent.on("click",t),this},_bindChildEvents:function(){var e=this;this.element.on("show.bs.modal",function(){e.rightChild&&e.rightChild.setPreview(),e.leftChild._showModalHandler()}),this.element.on("shown.bs.modal",function(){e.rightChild&&(e.rightChild.showAnimate?e.rightChild.showAnimate():e.rightChild.show()),e.leftChild.show(),e.leftChild._showModalHandler(),e.leftChild.show(),$("body").addClass("single-purchase-modal-open")}),this.element.on("hidden.bs.modal",function(){e.rightChild&&e.rightChild.hide(),$("body").removeClass("single-purchase-modal-open")}),this.rightChild.bind("subscribe:button:clicked",function(){e.rightChild.subscribeButtonClick()}),this.rightChild.bind("purchase.success",function(){e.dispatch("purchase.success",{message:"Your subscription is now active. You can begin downloading!"})}),this.rightChild.bind("subscription.success",function(t){e.dispatch("subscription.success",t.data)}),this.rightChild.bind("subscription.failure",function(t){e.dispatch("subscription.failure",t.data)}),this.rightChild.bind("purchase.not_logged_in",function(t){e._notLoggedInHandler(t)}),this.leftChild.bind("purchase.not_logged_in",function(t){e._notLoggedInHandler(t)}),this.leftChild.bind("low_res_download.not_logged_in",function(t){e.dispatch("low_res_download.not_logged_in")}),this.leftChild.bind("deactivate",function(t){var i=t.data.callback;e.deactivate(i)}),this.leftChild.bind("purchase.success",function(){e.dispatch("purchase.success")}),this.leftChild.bind("purchase.failed",function(t){e.dispatch("purchase.failed",t.data)})},_initializeWidgets:function(){var e=this,t=this.categoryName;t&&(t=t.substring(0,t.length-1),t=t.split(" ")[0]),e._initializeWidgetsByCategory(t);var i=Helpers.App.isMerchPreviewEnabled()&&Service.MultiplePurchase&&Boolean(Service.MultiplePurchase.getInstance());i&&(this.ctrl=new UI.StageDownload.Controller({purchasesModalRef:this.leftChild,preview:this.previewData}))},_initializeWidgetsByCategory:function(e){var t=this;t.leftChild=t._initializeLeftWidget(t.$leftArea,e),t.rightChild=t._initializeRightWidget(t.$rightArea,e)},_initializeRightWidget:function(e,t){var i;return null===this.rightChild&&(this.showPreview&&(i=t),this.rightChild=new UI.SubscriptionsPartial({name:"subscriptionsPartialCompare",type:"compare",previewCategory:i,title:this.constructor.TEXT_SUBSCRIPTIONS_PARTIAL_TITLE,label:"Popular",mockupsStagesCount:window._pl_mockupsStagesCount})),this.rightChild.render(e),this.appendChild(this.rightChild),this.rightChild},_initializeLeftWidget:function(e,t){return null===this.leftChild&&(this.leftChild=new UI.Purchases({categoryName:t})),this.leftChild.render(e),this.appendChild(this.leftChild),this.leftChild},_notLoggedInHandler:function(e){var t=this,i=null;return this._resumePurchasePromise=null,e.target===this.leftChild&&(i=this.leftChild.directDownload.bind(this.leftChild)),e.target===this.rightChild&&(i=function(){var e=Helpers.App.getSubscription();(!e||e.is_paused)&&t.rightChild.subscribeButtonClick()}),null!==i?(this._resumePurchasePromise=P.runner(Promise.resolve(i)),this._resumePurchasePromise.then(function(e){e()}),this.deactivate(),this.dispatch("purchase.not_logged_in"),this):void 0},resumePurchase:function(){this._resumePurchasePromise&&(this._resumePurchasePromise.run(),this._resumePurchasePromise=null)},detach:function(){return this.element.data("modal",null),this.element.detach(),this},activate:function(){var e=this;return Helpers.StageType.getTheme().then(function(t){e.setTheme(t),e.leftChild.setTheme&&e.leftChild.setTheme(t)})["catch"](function(t){throw e.setPaidTheme(),new Error(t)}),this.updateImageBeforeActivate&&(engine&&engine.ready?(engine._deactivateInteractions(),engine._refresh(),this.previewData.source=engine.getImage()):this.previewData.source=this.LOADING_IMAGE_PATH,this.setPreviewOnChildren(this.previewData)),this._controllerForMultiPurchasesExists()?(this.ctrl.setSubscriptionsRef(this.rightChild),this.ctrl.activateModal(),void this.ctrl.updatePreview(this.previewData)):(this.$modalFooter.addClass("hidden"),this.wasAnimationTriggered()||null===this.rightChild?this.$animationInfo.remove():this._handleAnimation(),this._activateChildWidgets(),void setTimeout(function(){e.element.modal("show")},150))},_reverseOrder:function(e){return e===!1?void this.element.removeClass("reverse"):void this.element.addClass("reverse")},_activateChildWidgets:function(){Widget.prototype.activate.call(this),this.leftChild.activate()},deactivate:function(e){if("function"==typeof e){var t=function(){e()};this.element.one("hidden.bs.modal",t.bind(this))}this.element.modal("hide"),Widget.prototype.deactivate.call(this)},instantiatePurchaseOverlay:function(e){var t=void 0!==this.purchaseOverlay;t&&this.purchaseOverlay.destroy();var i={name:"purchaseOverlay",purchaseRecord:e};return this.appendChild(this._createPurchaseOverlayWidget(i)),this.purchaseOverlay.bind("purchase.success",function(e){var t=null;e.data.coupon&&(t=e.data.coupon),Helpers.GlobalEventTracker.purchaseSuccess({amount_in_cents:e.data.amount_in_cents,license_id:e.data.license_id,resolution_id:e.data.resolution_id,stage_id:Helpers.StageType.getStageID(),user_id:Helpers.App.getUser().id,invoice_number:e.data.invoice_number}),this.dispatch("purchase.success",t)}.bind(this)).bind("purchase.failed",function(e){var t=e&&e.data?e.data.status:0,i=e&&e.data?e.data.message:"";422===t?this.dispatch("stage.error",{error:!0,errorType:"broken-stage",message:i}):"purchaseOverlay"!=e.target.name&&this.dispatch("purchase.failed",e.data)}.bind(this)),this.purchaseOverlay},_createPurchaseOverlayWidget:function(e){var t=new PurchaseWidgetStrategy(PurchaseWidgetStrategy.PurchaseOverlay);return console.log(this.constructor.className+" -> Creating the purchase overlay"),t.create(e)},setResolutionData:function(e){this.leftChild&&this.leftChild.setResolutionData&&this.leftChild.setResolutionData(e)},isAttached:function(){return this._controllerForMultiPurchasesExists()?this.ctrl.isModalAttached():$.contains(document,this.element[0])},setPreview:function(e){e&&(this.previewData=e,this.updateImageBeforeActivate=e.interactive||!1,this.updateImageBeforeActivate&&this.isAttached()!==!0||this.setPreviewOnChildren(this.previewData))},setPreviewOnChildren:function(e){this.data=e,this.leftChild&&this.leftChild.setPreview&&this.leftChild.setPreview(e),this.rightChild&&this.rightChild.setPreview&&this.rightChild.setPreview(e),this._controllerForMultiPurchasesExists()&&this.ctrl.updatePreview(e)},_configureRecurly:function(){var e={currency:window.recurlyConfig.currency,publicKey:window.recurlyConfig.publicKey};e.fields={all:{style:{fontSize:"16px",fontColor:"#555555",padding:"1px",placeholder:{color:"#55555 !important"}}},number:{selector:"#recurly-number",style:{placeholder:{content:""}}},cvv:{selector:"#recurly-cvv",style:{placeholder:{content:""}}},month:{selector:"#recurly-month",style:{placeholder:{content:""}}},year:{selector:"#recurly-year",style:{placeholder:{content:""}}},vat_number:{selector:"#recurly-vat-number",style:{placeholder:{content:""}}}},recurly.configure(e)},setAnimationTriggered:function(){$.cookie("_pl_purchase_animation",!0,{path:"/",expires:3650})},wasAnimationTriggered:function(){return Helpers.StageType.isFree()?!0:"true"===$.cookie("_pl_purchase_animation")||!1},_handleAnimation:function(){var e=this;this.element.find(".modal-body > *").css("opacity","0"),this.element.one("shown.bs.modal",function(){e.setAnimationTriggered(),e.element.addClass("animate")}),this.element.one("hidden.bs.modal",function(){e.$animationInfo.remove(),e.element.find(".modal-body > *").css("opacity","1")})},skipModalAndDownloadImmediately:function(){this.leftChild.directDownload()},_isLogoStageProcessing:function(){var e=Service.MultiplePurchase.getInstance(),t=Boolean(Helpers.StageType.isLogo()),i=Helpers.App.isMerchPreviewEnabled(),n=t&&0===page.stage.$body.find(".merch-preview-container").length;return t===!1||i===!1?!1:n?!1:Boolean(page.stage.merchPreviewController)===!1&&i?!0:null===this.previewData?!0:e.isProcessingStarted()===!1},downloadInmediatelyOrActivate:function(){this._isLogoStageProcessing()||(Helpers.App.isSubscriptionValid()===!0?this.skipModalAndDownloadImmediately():this.activate())},setFreeTheme:function(){this.$orDiv.hide(),this.rightChild&&(this.rightChild.element.css("marginLeft","10px"),this.rightChild.setTitle(),this.$rightArea.show())},setPaidTheme:function(){this.$orDiv.show(),this.rightChild&&(this.rightChild.setTitle(this.constructor.TEXT_SUBSCRIPTIONS_PARTIAL_TITLE),this.rightChild.element.css("marginLeft","0px"),this.$rightArea.show()),Helpers.App.isInWatermarkExperiment()&&this.element.addClass("purchases__watermark-download")},setAdminTheme:function(){this.setFreeTheme(),Helpers.App.getSubscription()&&this.rightChild&&this.$rightArea.hide()},setSubscribedTheme:function(){this.setFreeTheme(),this.rightChild&&this.$rightArea.hide()},_controllerForMultiPurchasesExists:function(){return this.ctrl&&Helpers.App.isMerchPreviewEnabled()&&Helpers.StageType.isLogo()&&Boolean(Service.MultiplePurchase.getInstance())&&page.stage.$body.find(".merch-preview-container").length>0}}}),Class(UI,"PurchasesModalTabs").inherits(Widget)({prototype:{$tabsWrapper:null,$tabs:null,$regularButton:null,init:function(e){Widget.prototype.init.call(this,e),this.$tabsWrapper=this.element.find(".download-tabs"),this.$tabContainers=this.$tabsWrapper.find("li.btn"),this.$tabs=this.$tabsWrapper.find('a[data-toggle="tab"]'),this.$regularButton=this.$tabs.filter('a[href="#normalDownload"]'),this._bindEvents()},_bindEvents:function(){return this},activateRegularTab:function(){return this.$regularButton.tab("show"),this},showTabs:function(){return this.$tabsWrapper.show(),this},hideTabs:function(){return this.$tabContainers.removeClass("active"),this.$tabsWrapper.hide(),this},destroy:function(){this.$tabsWrapper=null,this.$tabs=null,this.$regularButton=null,Widget.prototype.destroy.call(this)}}}),Class(UI,"SinglePurchaseVarB").inherits(UI.SinglePurchasesModal)({html:'    <div class="modal single-purchase-overlay" tabindex="-1" role="dialog" aria-labelledby="downloadOverlayLabel" aria-hidden="true">        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">            <span aria-hidden="true">\xd7</span>        </button>        <div class="modal-dialog">            <div class="modal-content">                <div class="modal-body">                    <div class="area1" data-area="left"></div>                    <div class="or-div">OR</div>                    <div class="area2" data-area="right"></div>                </div>            </div>        </div>    </div>',prototype:{activate:function(){var e=this;Helpers.StageType.getTheme().then(function(t){e.setTheme(t),e.leftChild.setTheme&&e.leftChild.setTheme(t)})["catch"](function(t){throw e.setPaidTheme(),new Error(t)}),this.updateImageBeforeActivate&&(engine&&engine.ready?(engine._deactivateInteractions(),engine._refresh(),this.previewData.source=engine.getImage()):this.previewData.source=this.LOADING_IMAGE_PATH,this.setPreviewOnChildren(this.previewData)),this.$modalFooter.addClass("hidden"),this.$animationInfo.remove(),this.$orDiv.hide(),this.$rightArea.hide(),this._activateChildWidgets(),e.element.modal("show")},setPaidTheme:function(){this.$orDiv.hide(),this.rightChild&&(this.rightChild.element.css("display","none"),this.$rightArea.hide()),Helpers.App.isInWatermarkExperiment()&&this.element.addClass("purchases__watermark-download")}}}),Class(UI,"PurchaseResolutions").inherits(Widget)({prototype:{_activeGroupLabel:null,radios:null,keep_selection_storage:null,groups:null,init:function(e){Widget.prototype.init.call(this,e),this.radios=this.element.find(".resolution-options input:radio"),this.keep_selection_storage={},this.groups={},this._setGroup("video_product",this.element.find(".download-overlay__image-size.is_video_product")),this._setGroup("smart_template",this.element.find(".download-overlay__image-size.is_smart_template")),this._bindEvents()},_bindEvents:function(){var e=function(e){var t;e.target.checked=!0,this.radios.each(function(e,t){t.parentNode.classList.remove("selected")}),e.target.parentNode.classList.add("selected"),t=Registry.Resolutions.getByKey("id",~~e.target.value),Helpers.Resolutions.setActive(t),this.setActiveGroup(e.target),this.dispatch("resolution-selected")}.bind(this);this.radios.on("click",e)},_setGroup:function(e,t){void 0===this.groups[e]&&(this.groups[e]={},this.keep_selection_storage[e]=null),this.groups[e].element=t,this.groups[e].first=t.find("input[type=radio]")[0]},_hideAllGroups:function(){for(var e in this.groups)this.groups.hasOwnProperty(e)&&this.groups[e].element.hide()},showOptions:function(e){this._hideAllGroups(),this.groups[e].element.show(),this.setActiveGroupLabel(e),this.isActiveGroup(e)===!1&&this.setActiveGroup(this.groups[e].first),this.getActiveGroup().click()},setActiveGroupLabel:function(e){this._activeGroupLabel=e},setActiveGroup:function(e){this.keep_selection_storage[this._activeGroupLabel]=e},getActiveGroup:function(){return this.keep_selection_storage[this._activeGroupLabel]},getActiveGroupByName:function(e){return this.keep_selection_storage[e]},isActiveGroup:function(e){return this.keep_selection_storage[e]?this.keep_selection_storage[e]:!1},getByID:function(e){var t=this.radios.filter(e);return t?t:!1},selectByID:function(e){var t=this.radios.filter(e);t?t.click():console.warn("resolution not found")},getSelected:function(){return this.radios.filter(":checked")}}}),Class("RecurlyClient")({configure:function(e){e.fraud&&this._configureForFraud(e),recurly.configure(e)},_configureForFraud:function(e){recurly.fraud&&(recurly.fraud.destroy(),delete recurly.fraud)}}),Class(UI,"BillingInfo").inherits(Widget)({html:'<div class="container"></div>      <div class="widget billing-info">    <div class="billing_error_message">      </div>        <div class="form-widget-container"></div>        <div class="footer">          <button type="submit" class="button primary long">Update</button>        </div>      </div>    ',prototype:{accountRecord:null,submitBtn:null,billingForm:null,errorMessage:null,init:function(e){Widget.prototype.init.call(this,e),this.submitBtn=this.element.find(".footer > button"),this.formContainer=this.element.find(".form-widget-container"),this.errorMessage=this.element.find(".billing_error_message"),this.billingForm=new UI.BillingForm({name:"billingForm",accountRecord:this.accountRecord}),this._setBindings()},_setBindings:function(){return this.submitBtn.on("click",this._submitEventHandler.bind(this)),this.billingForm.bind("country.change",function(e){~this.billingForm.euCountries.indexOf(e.data.$countryCode.toUpperCase())?this.billingForm.showVatField():this.billingForm.hideVatField()}.bind(this)),this},_submitEventHandler:function(e){e.preventDefault();var t=this;this._setLoadingCardForm(!0),this.hideServerError(),this.billingForm.getToken().then(function(e){var i=t.billingForm.getContactData();$.ajax({url:"/account/billing",type:"PUT",data:{email:i.email,token:e.id}}).done(function(e){t.dispatch("update.success")}).fail(function(e){var i=e.responseJSON.message;t.dispatch("update.failed",i),t._setLoadingCardForm(!1),t.billingForm.markInvalidBillingInfo()})})["catch"](function(e){t._setLoadingCardForm(!1)})},showServerError:function(e){var t=$('<div class="alert alert-danger alert-dismissible"></div>'),i=$('<span class="billing_error_message">'+e+'</span> <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a></div>');t.append(i),this.errorMessage.append(t),this.errorMessage.removeClass("hide")},hideServerError:function(){this.errorMessage.addClass("hide"),this.errorMessage.html("")},_setLoadingCardForm:function(e){e===!0?(this.submitBtn.html(""),this.submitBtn.addClass("no-text-btn light-spinner"),this.submitBtn.css({"pointer-events":"none"})):e===!1&&(this.submitBtn.html("Update"),this.submitBtn.removeClass("no-text-btn light-spinner"),this.submitBtn.css({"pointer-events":"auto"}))},render:function(e,t){return Widget.prototype.render.call(this,e,t),this.billingForm.render(this.formContainer),this},destroy:function(){this.submitBtn=null,this.billingForm.destroy(),this.billingForm=null,Widget.prototype.destroy.call(this)}}}),Class(UI,"BillingForm").inherits(Widget).includes(Translator)({html:'<div class="widget billing-form">        <form class="recurly billing_form">          <div class="contact_info">            <div class="title">Billing Contact</div>            <div class="floating-label-input name">              <label class="">Name<i class="field-dot-required">*</i></label>              <input id="recurly-first-name" data-recurly="first_name" required>            </div>            <div class="floating-label-input last-name">              <label class="">Last Name<i class="field-dot-required">*</i></label>              <input id="recurly-last-name" data-recurly="last_name" required>            </div>            <div class="floating-label-input business-name">              <label class="">Business Name (optional)</label>              <input id="recurly-company" data-recurly="company">            </div>            <div class="floating-label-input email">              <label class="">Email</label>              <input type="email" class="form-control" id="recurly-email" required>            </div>          </div>          <div class="billing_info">            <div class="title">Billing Info </div>            <div class="floating-label-input card-number">                <label class="">Card Number<i class="field-dot-required">*</i></label>                <div id="recurly-number" class="card_number" data-recurly="number"></div>            </div>            <div class="floating-label-input month">                <label class="">Expiry Month<i class="field-dot-required">*</i></label>                <div id="recurly-month" data-recurly="month"></div>            </div>            <div class="floating-label-input year">                <label class="">Expiry Year<i class="field-dot-required">*</i></label>                <div id="recurly-year" data-recurly="year"></div>            </div>            <div class="floating-label-input cvv">                <label class="">Security Code<i class="field-dot-required">*</i></label>                <div id="recurly-cvv" class="card_number" data-recurly="cvv"></div>            </div>            <div class="floating-label-input country">                <label class="">Country</label>                <input class="recurly-country" autocomplete="nope">                <input type="hidden" class="recurly-country_code" data-recurly="country" />            </div>            <div class="floating-label-input zip">                <label class="">Zip/Postal<i class="field-dot-required">*</i></label>                <input id="recurly-postal-code" data-recurly="postal_code">            </div>            <div class="floating-label-input vat">                <label>VAT Number (Optional)</label>                <input id="recurly-vat-number" data-recurly="vat_number" maxlength="20">            </div>          </form>        </div>    ',BRAZIL_CPF_FIELD:'<div class="floating-label-input cpf">        <label>CPF<i class="field-dot-required">*</i></label>        <input id="recurly-tax-identifier" data-recurly="tax_identifier" required>        <input id="recurly-tax-identifier-type" data-recurly="tax_identifier_type" class="hidden" value="cpf">    </div>',TEXT_FIELD_ERROR:"Wrong",TEXT_FIELD_REQUIRED:"Required",BRAZIL_CURRENCY:"BRL",prototype:{accountRecord:null,withTitles:!0,$formElement:null,$errorContainer:null,$firstNameElement:null,$lastNameElement:null,$emailElement:null,$country:null,$zipCode:null,$countryCode:null,$vatNumber:null,$vatField:null,euCountries:null,lastFieldsState:null,contactInfo:null,billingInfo:null,init:function(e){Widget.prototype.init.call(this,e),this.currentCurrency=window.currencyHelper.getLabel(window.recurlyConfig.currency),this.$formElement=this.element.find("> .recurly.billing_form"),this.$errorContainer=this.element.find(".server_errors"),this.$firstNameElement=this.element.find("#recurly-first-name"),this.$lastNameElement=this.element.find("#recurly-last-name"),this.companyElement=this.element.find("#recurly-company"),this.$emailElement=this.element.find("#recurly-email"),this.$country=this.element.find(".recurly-country"),this.$zipCode=this.element.find("#recurly-postal-code"),this.$countryCode=this.element.find(".recurly-country_code"),this.$vatNumber=this.element.find(".vat"),this.$vatField=this.element.find("#recurly-vat-number"),this.euCountries=Helpers.App.getEUCountries(),this.contactInfo=this.element.find(".contact_info"),this.billingInfo=this.element.find(".billing_info"),this.identifiers={number:Helpers.App.generateUid(),month:Helpers.App.generateUid(),year:Helpers.App.generateUid(),cvv:Helpers.App.generateUid()},this.element.find("#recurly-number").attr("recurly-identifier",this.identifiers.number),this.element.find("#recurly-month").attr("recurly-identifier",this.identifiers.month),this.element.find("#recurly-year").attr("recurly-identifier",this.identifiers.year),this.element.find("#recurly-cvv").attr("recurly-identifier",this.identifiers.cvv),this.currentCurrency===this.constructor.BRAZIL_CURRENCY?(this._addCPFField(),this.$formElement.find(".floating-label-input.country").addClass("brazil-country")):this.$formElement.find(".floating-label-input.country").removeClass("brazil-country"),this._populateFields(),this._setBindings()},_configureRecurly:function(){var e={currency:window.recurlyConfig.currency,publicKey:window.recurlyConfig.publicKey,required:["cvv"]};e.fields={all:{style:{fontSize:"16px",fontColor:"#555555",padding:"1px",placeholder:{color:"#55555 !important"}}},number:{selector:'[recurly-identifier="'+this.identifiers.number+'"]',style:{placeholder:{content:"1111 1111 1111 1111"}}},cvv:{selector:'[recurly-identifier="'+this.identifiers.cvv+'"]',style:{placeholder:{content:""}}},month:{selector:'[recurly-identifier="'+this.identifiers.month+'"]',style:{placeholder:{content:"MM"}}},year:{selector:'[recurly-identifier="'+this.identifiers.year+'"]',style:{placeholder:{content:"YYYY"}}}},e.fraud={kount:{dataCollector:!0,form:this.$formElement[0]}},RecurlyClient.configure(e)},_addCPFField:function(){var e=$(this.constructor.BRAZIL_CPF_FIELD);this.$formElement.find(".billing_info").append(e)},_populateFields:function(){return this.accountRecord&&(this.$firstNameElement.val(this.accountRecord.billing_info.firstName),this.$lastNameElement.val(this.accountRecord.billing_info.lastName),this.companyElement.val(this.accountRecord.billing_info.company),this.$zipCode.val(this.accountRecord.billing_info.zip),this.$vatField.val(this.accountRecord.billing_info.$vatNumber),this.$emailElement.val(this.accountRecord.contact_info.email||Helpers.App.getUser().email),this.accountRecord.billing_info.country||(this.accountRecord.billing_info.country="us",window.isIndianIp&&(this.accountRecord.billing_info.country="in")),this.currentCurrency===this.constructor.BRAZIL_CURRENCY&&(this.accountRecord.billing_info.country="br")),this},_setBindings:function(){var e=this;this.$country.on("change init",function(e){this.dispatch("country.change",{$countryCode:this.getSelectedCountry()})}.bind(this)),this.$country.on("click",function(e){var t=this;setTimeout(function(){t.element.find(".selected-flag").first().trigger("click")},0)}.bind(this)),recurly.on("change",function(e){this.lastFieldsState=e}.bind(this)),this.element.find(".floating-label-input>input").on("focusin",function(e){$(e.target).parent().addClass("active")}),this.element.find(".floating-label-input>input").on("focusout",function(e){var t=$(e.target);t.val()||t.parent().removeClass("active")});var t=Helpers.App.debounce(this._vatFieldChanged,1e3).bind(e);return this.$vatField.bind("keyup",function(){t()}),this._userStartedFilling(),this},getVatNumber:function(){return this.$vatField.val()||""},getSelectedCountry:function(){var e="US";this.currentCurrency===this.constructor.BRAZIL_CURRENCY&&(e="BR");var t=this.$country.countrySelect("getSelectedCountryData");return this.$countryCode.val(t.iso2),this.$countryCode[0].value||e},_vatFieldChanged:function(){this.dispatch("vatNumber.change",{vatNumber:this.getVatNumber()})},_userStartedFilling:function(){var e=this,t=!1;e.element.find(".floating-label-input>input").keypress(function(e){t||(Helpers.GlobalEventTracker.cardFormForPlanStartedFilling(),t=!0)}),recurly.on("change",function(e){if(!t){var i=e.fields;Object.keys(i).forEach(function(e){i[e].focus&&!i[e].empty&&(Helpers.GlobalEventTracker.cardFormForPlanStartedFilling(),t=!0)})}})},isFieldStateEmpty:function(e){var t=!0;return this.lastFieldsState&&(t=this.lastFieldsState.fields[e].empty),t},showVatField:function(){this.$vatNumber.show()},hideVatField:function(){this.$vatField.val(""),this.$vatNumber.hide()},getToken:function(){var e=this,t=this.$formElement.get(0);return e.currentCurrency===e.constructor.BRAZIL_CURRENCY&&(e.accountRecord.billing_info.country="br",e.$country.countrySelect("selectCountry",e.accountRecord.billing_info.country)),new Promise(function(i,n){recurly.token(t,function(t,s){var r=[];t&&("validation"===t.code||"invalid-parameter"===t.code)&&(r=r.concat(t.fields)),e._isEmailInvalid()===!0&&r.push("email"),e.currentCurrency===e.constructor.BRAZIL_CURRENCY&&""===e.element.find("#recurly-tax-identifier").val()&&r.push("tax_identifier"),r.length?(e.validateFields(r),n(t||{message:"Error processing data",fields:r})):(e.markFieldsAsValid(),i(s))})})},_isEmailInvalid:function(){var e=this.getContactData(),t=!1;if(e.email){var i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;t=!i.test(String(e.email).toLowerCase())}return t},getContactData:function(){return{firstName:this.$firstNameElement.val(),lastName:this.$lastNameElement.val(),company:this.companyElement.val(),zip:this.$zipCode.val(),vat:this.$vatField.val(),email:this.$emailElement.val()}},validateFields:function(e){this.markFieldsAsValid();this.$formElement.get(0);return e.forEach(function(e){var e=e.replace(/\_/g,"-"),t=this.element.find("#recurly-"+e),i=t.parent(),n=i.children(".placeholder"),s="";i.addClass("invalid");var r=this.lastFieldsState.fields[e];r?r.empty?s=n.text()+" "+this.constructor.TEXT_FIELD_REQUIRED:r.valid===!1&&(s=this.constructor.TEXT_FIELD_ERROR+" "+n.text()):s=t.val()?this.constructor.TEXT_FIELD_ERROR+" "+n.text():n.text()+" "+this.constructor.TEXT_FIELD_REQUIRED,i.append($('<label class="error-helper-text">'+s+"</label>"))}.bind(this)),this},markInvalidBillingInfo:function(){return this.validateFields(["number","month","year","cvv"]),this},markFieldsAsValid:function(){return this.element.find(".error-helper-text").remove(),this.element.find(".invalid").removeClass("invalid"),this},render:function(e,t){Widget.prototype.render.call(this,e,t);var i="us";return this._configureRecurly(),this.$country.countrySelect({responsiveDropdown:!0}),this.accountRecord&&this.accountRecord.billing_info.country&&(i=this.accountRecord.billing_info.country),this.currentCurrency===this.constructor.BRAZIL_CURRENCY&&(i="br"),this.$country.countrySelect("selectCountry",i),this.$countryCode.val(i),~this.euCountries.indexOf(i)&&(this.$vatNumber.show(),this.$country.trigger("change")),this.withTitles===!1&&this.element.find(".title").remove(),this},triggerChangeCountry:function(){this.$country.trigger("change")},enableForm:function(){this.element.find(".floating-label-input").removeClass("disabled")},disableForm:function(){this.element.find(".floating-label-input").addClass("disabled")},moveContactInfoAfter:function(e){this.contactInfo.after(e)},showFormFields:function(){this.getElement().addClass("show-form")},hideFormFields:function(){this.getElement().removeClass("show-form")},destroy:function(){this.$formElement=null,this.$errorContainer=null,this.$firstNameElement=null,this.$lastNameElement=null,this.companyElement=null,this.$emailElement=null,this.$country=null,this.$zipCode=null,this.$countryCode=null,this.$vatNumber=null,this.$vatField=null,this.euCountries=null,Widget.prototype.destroy.call(this)}}}),Class(UI,"PayPalModal").inherits(Widget).includes(Translator)({html:'        <div class="modal paypal-modal fade" id="paypalModal" data-keyboard="false" role="dialog" aria-labelledby="modal-title" aria-hidden="true">          <div class="modal-dialog">            <div class="modal-content">              <div class="modal-header grayed">                <h4 id="modal-title">Waiting for PayPal...</h4>              </div>              <div class="modal-body">                <div class="text-center content">                  <h3> Please complete the payment on the PayPal window </h3>                  <p> Do <b><u>not</b></u> close this window. If something went wrong, <a id="retry"> click here to restart the process </a>. </p>                </div>                <div class="text-center spinner">                  <img src="/assets/paypal_loader.gif">                </div>              </div>            </div>          </div>        </div>    ',prototype:{init:function(e){return Widget.prototype.init.call(this,e),this.retry=this.element.find("#retry"),this.element.bind("hidden.bs.modal",function(e){this.dispatch("paypal.deactivate")}.bind(this)),this.retry.bind("click",function(e){this.dispatch("paypal.retry")}.bind(this)),this},initPayment:function(e){return recurly.paypal(e,function(e,t){e?this.dispatch("paypal.reject",e):this.dispatch("paypal.success",t)}.bind(this)),this},activate:function(){return Widget.prototype.activate.call(this),this.element.modal("show"),this},deactivate:function(){return this.element.modal("hide"),Widget.prototype.deactivate.call(this),this},render:function(e,t){return Widget.prototype.render.call(this,e,t),this.element.modal("show"),this},destroy:function(){this.retry=null,Widget.prototype.destroy.call(this)}}}),Class(UI,"CTABlockSection").inherits(Widget).includes(Helpers.SubscriptionHelper,Helpers.CouponHelper,BubblingSupport,Translator,CurrencyLabelSetter)({TEXT_SUBSCRIPTION_ACTIVATION_ERROR:"Your subscription could not be activated, Please try again later",TEXT_INVALID_OR_CANCELED_SUBSCRIPTION:"Invalid subscription or already canceled subscription",TEXT_ERROR_CHARGING_STORE_CARD:"There was an error charging your stored card. Please use another payment option.",prototype:{$monthlyButton:null,$monthlyPrice:null,$monthlyOriginalPrice:null,$annualButton:null,$annualPrice:null,_taxRequestInProgress:null,_singleCtaBlock:null,PERIOD_MONTHLY:"monthly",PERIOD_ANNUAL:"annual",init:function(e){Widget.prototype.init.call(this,e),this.$annualSave=this.element.find(".annual-save"),this.$monthlyButton=this.element.find(".cta-button-monthly"),this.$annualButton=this.element.find(".cta-button-annual"),this.$taxInformation=this.element.find(".plan-tax"),this.$monthlyPrice=this.element.find(".monthly-price"),this.$monthlyOriginalPrice=this.element.find(".monthly-original-price"),this.$annualPrice=this.element.find(".annual-price"),this.$annualMonthlyAmount=this.element.find(".annual-monthly-amount"),this["buttonWrapper_"+Registry.Plans.PLAN_MONTHLY]=this.element.find(".plan-button-wrapper.plan-monthly"),this["buttonWrapper_"+Registry.Plans.PLAN_ANNUAL]=this.element.find(".plan-button-wrapper.plan-annual"),
this._bindEvents(),this._configureRecurly(),this._updatePriceAndTax(),this._singleSubscriptionCta()},_bindEvents:function(){this.$monthlyButton.click(this._onSubscriptionButtonClick.bind(this)),this.$annualButton.click(this._onSubscriptionButtonClick.bind(this)),Helpers.CouponHelper.bind("coupon.validated",this._updatePriceAndTax.bind(this)),Helpers.CouponHelper.bind("coupon.removed",this._updatePriceAndTax.bind(this)),this.bind("purchase.success",this._handleSubscriptionSuccess.bind(this))},_setTaxMessage:function(e){var t=this,i=t.getTaxMessage(e);i.then(function(e){t.$taxInformation.text(e)})["catch"](function(e){t.$taxInformation.text(e)})},_updateTaxRate:function(){var e,t,i;i=this,e=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),t=Helpers.Price.plan(e),t.price.then(function(e){i._setTaxMessage(e),t.priceWithDiscount.then(function(e){i._setTaxMessage(e)})})},_onSubscriptionButtonClick:function(e){var t,i=e.currentTarget;window.isIndianIp&&$(i).data("period")===this.PERIOD_MONTHLY||this.$monthlyButton.attr("disabled")&&this.$annualButton.attr("disabled")||(this.$monthlyButton.attr("disabled",!0),this.$annualButton.attr("disabled",!0),t=$(i).data("period")===this.PERIOD_ANNUAL?Registry.Plans.get(Registry.Plans.PLAN_ANNUAL):Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),Helpers.GlobalEventTracker.planCTAClicked({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id},$(i).data("period")),sessionStorage.setItem("plan",$(i).data("period")),this.dispatch("subscribe:button:clicked"))},subscribeButtonClick:function(){Helpers.App.isLoggedIn()?this._handlePlanSubscribe():(this.dispatch("purchase.not_logged_in"),Helpers.App.setSubscribeFromModal("cta-block"),setTimeout(function(){this.$monthlyButton.attr("disabled",!1),this.$annualButton.attr("disabled",!1)}.bind(this)))},_handlePlanSubscribe:function(){var e,t=this;switch(sessionStorage.getItem("plan")){case this.PERIOD_MONTHLY:e=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),this.period=this.PERIOD_MONTHLY;break;case this.PERIOD_ANNUAL:e=Registry.Plans.get(Registry.Plans.PLAN_ANNUAL),this.period=this.PERIOD_ANNUAL}t.signRequestWithRecurly(e,t.discount,function(e){Helpers.GlobalEventTracker.recurlyFormAfterPlanSelected({plan_code:e.plan_code,amount_in_cents:e.amount_in_cents,description:e.description}),t._showPaymentForm(e)})},_showStoredBillingInfo:function(e){this.instantiateStoredBillingInfoOverlay(),this.storedBillingInfoOverlay.refresh(e),this.storedBillingInfoOverlay.activate(),setTimeout(function(){this.$monthlyButton.attr("disabled",!1),this.$annualButton.attr("disabled",!1)}.bind(this),0)},instantiateStoredBillingInfoOverlay:function(){void 0===this.storedBillingInfoOverlay&&(this.appendChild(new UI.StoredBillingInfoOverlay({name:"storedBillingInfoOverlay"})),this.storedBillingInfoOverlay.bind("change-card",function(e){this._showPaymentForm(e.data.recurlyData)}.bind(this)).bind("use-stored-card",function(e){this._useStoredBillingInfo(e.data.recurlyData)}.bind(this)))},_showPaymentForm:function(e){var t,i,n;i=this.getEventTrackerName(),n=EventTracker.info({type:i,data:{}}),t=null,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(e.plan_recurly_uuid)&&(t=Helpers.CouponHelper.getCode());var s={ajaxUrl:"/subscriptions/{{token}}/transaction",ajaxParams:{plan_recurly_uuid:e.plan_recurly_uuid,coupon_code:t,eventData:n}};$.extend(!0,e,s),this.purchaseOverlay&&this.purchaseOverlay.destroy();var r={name:"purchaseOverlay",purchaseRecord:e,paymentType:"subscription",discount:this.discount};this.appendChild(this._createPurchaseOverlayWidget(r)),this.purchaseOverlay.bind("purchase.failed",function(e){if("purchaseOverlay"!==e.target.name){var t=this.constructor.TEXT_SUBSCRIPTION_ACTIVATION_ERROR;this.dispatch("subscription.failure",{message:t})}}.bind(this)),this.purchaseOverlay.initSubscriptionForm().render($("body")).activate(),setTimeout(function(){this.$monthlyButton.attr("disabled",!1),this.$annualButton.attr("disabled",!1)}.bind(this))},_createPurchaseOverlayWidget:function(e){var t=new PurchaseWidgetStrategy(PurchaseWidgetStrategy.PurchaseOverlay);return console.log(this.constructor.className+" -> Creating the purchase overlay"),t.create(e)},getEventTrackerName:function(){var e;switch(e="Subscription:success:",this.period){case this.PERIOD_MONTHLY:e+="Unlimited";break;case this.PERIOD_ANNUAL:e+="Unlimited:Annual"}return e},_configureRecurly:function(){var e={currency:window.recurlyConfig.currency,publicKey:window.recurlyConfig.publicKey};e.fields={all:{style:{fontSize:"16px",fontColor:"#555555",padding:"1px",placeholder:{color:"#55555 !important"}}},number:{selector:"#recurly-number",style:{placeholder:{content:""}}},cvv:{selector:"#recurly-cvv",style:{placeholder:{content:""}}},month:{selector:"#recurly-month",style:{placeholder:{content:""}}},year:{selector:"#recurly-year",style:{placeholder:{content:""}}},vat_number:{selector:"#recurly-vat-number",style:{placeholder:{content:""}}}},recurly.configure(e)},_handleSubscriptionSuccess:function(e){Helpers.App._getPurchases(function(t){var i;window.page.appNavBar.updateStatus();var n={};n.message="Your subscription is now activated",this.dispatch("subscription.success",n),i=Helpers.App.getSubscriptionEventName(e.data.plan_recurly_uuid),Helpers.GlobalEventTracker.subscriptionSuccess({plan_name:Helpers.App.getSubscription().plan.name,plan_recurly_uuid:e.data.plan_recurly_uuid,amount_in_cents:Helpers.App.getSubscription().plan.amount_in_cents,user_id:Helpers.App.getUser().id,event:i,invoice_number:e.data.invoice_number})}.bind(this))},_renderPlanButtons:function(){this._renderPlanButton(Registry.Plans.PLAN_MONTHLY),this._renderPlanButton(Registry.Plans.PLAN_ANNUAL)},_updatePriceAndTax:function(){this._renderPlanButtons(),this._updateTaxRate()},_singleSubscriptionCta:function(){this._singleCtaBlock=new UI.SubscriptionCta.SubscriptionCtaBlockController({monthlyCta:this.$monthlyButton,annualCta:this.$annualButton,forPricingPage:"pricingv2"===pageType.type})}}}),Class(UI,"FooterController").inherits(Widget).includes(BubblingSupport)({prototype:{$footerFeedbackSection:null,$userVoiceButton:null,init:function(e){if(Widget.prototype.init.call(this,e),this.footerContainer=$("#footer-header"),this.footerContainer.length>0){this.footerColumns=$("#footer-header .column"),this.footerListItems=$("#footer-header .column .footer-links li"),this.footerLicenseLink=$('#footer-header a:contains("License")'),this.olarkElementsLink=$('#footer-header a:contains("Chat with Us")').parent(),this.$pricingButton=$(".js-btn-footer-pricing"),this.$freeAccount=$(".free-account");var t="&nbsp;<img src='/assets/bubble-chat-grey.gif' />";this.olarkElementsLink.append(t),this.bindings(),this._appendPricingButton(),this.updatePricingButton()}},bindings:function(){var e=this;this.footerLicenseLink.click(function(e){return e.preventDefault(),e.stopPropagation(),Helpers.GlobalEventTracker.openLicenseModal(),(new UI.FriendlyLicenseModal).activate()}),this.olarkElementsLink.click(function(e){e.preventDefault(),e.stopPropagation(),OlarkClient.show()}),this.$freeAccount.click(function(){e.dispatch("click",{originalDispatcher:{name:"freeAccountButton"}})})},updatePricingButton:function(){if(this.pricingButton){var e=Helpers.App.getSubscription();this.pricingButton.update(e)}},_appendPricingButton:function(){this.appendChild(new UI.PricingButton({name:"pricingButton",element:this.$pricingButton}))},hideFreeAccountButton:function(){this.$freeAccount.hide()}}}),Class(UI,"ShortcutDownloadStep").inherits(Widget)({html:'        <div>            <p class="title">Get Your Video!</p>            <div class="shortcut__video-wrapper shortcut__video-wrapper--paused">                <div class="shortcut__video-play-button">                </div>                <video muted="" playsinline=""></video>            </div>            <div class="btn-group video-actions">                <button type="button" class="btn btn-primary dowload-shortcut-button">Download to Camera Roll</button>                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button>                <ul class="dropdown-menu">                    <li><a href="javascript:void(0)" class="instagram-shortcut-button">Publish to Instagram</a></li>                </ul>            </div>            <hr>            <p>Is the Button Above Not Working?</p>            <p><small>You need the <a class="shortcut-external-links" href="https://itunes.apple.com/app/shortcuts/id915249334" target="_blank">Shortcuts App</a> and the <a class="shortcut-external-links" href="https://www.icloud.com/shortcuts/afa2c3877c6a4d9eb3e860bec818dfe0" target="_blank">Placeit Shortcut</a>. Both are 100% Safe + FREE.<small></p>        </div>    ',prototype:{$video:null,$videoPlayButton:null,videoDownloadURL:null,videoPreviewURL:null,PAUSE_CLASS:"shortcut__video-wrapper--paused",init:function(e){Widget.prototype.init.call(this,e),this.$video=this.element.find("video"),this.$videoPlayButton=this.element.find(".shortcut__video-play-button"),this.$videoWrapper=this.element.find(".shortcut__video-wrapper"),this.$downloadButton=this.element.find(".dowload-shortcut-button"),this.$instagramButton=this.element.find(".instagram-shortcut-button"),this.$videoWrapper.hide(),this.$video.attr("src",this.videoPreviewURL).load(),this._removeVideoURLParams(),this._bindEvents(),Helpers.GlobalEventTracker.iosShortcutEvent("videoDownloadModal")},_getErrorURI:function(){var e=new URL(window.location.href);e.searchParams.append("videoDownloadURL",this.videoDownloadURL),e.searchParams.append("videoPreviewURL",this.videoPreviewURL);var t=e.href;return this._browserIsFirefox()?t="firefox://open-url?url="+encodeURIComponent(t):this._browserIsSafari()||(t=t.replace("https","googlechromes")),encodeURIComponent(t)},_getShortcutURL:function(){var e=this._getErrorURI();return"shortcuts://x-callback-url/run-shortcut?name=Placeit%20Video%20for%20iPhone&x-cancel="+e+"&x-error="+e+"&input="},_downloadVideo:function(){Helpers.GlobalEventTracker.iosShortcutEvent("download.cameraRoll"),this._runShortcut(this.videoDownloadURL)},_publishToInstagram:function(){Helpers.GlobalEventTracker.iosShortcutEvent("download.instagram"),this._runShortcut(this.videoDownloadURL+"?publishToInstagram")},_runShortcut:function(e){var t=this._getShortcutURL()+e;this._browserIsSafari()?window.open(t):window.location.href=t},_browserIsSafari:function(){return Helpers.App.isIOSSafari()&&!window.navigator.userAgent.match(/FxiOS/i)},_browserIsFirefox:function(){return Helpers.App.isIOSSafari()&&window.navigator.userAgent.match(/FxiOS/i)},_playVideo:function(){this.$videoWrapper.removeClass(this.PAUSE_CLASS),this.$video.get(0).play()},_pauseVideo:function(){this.$videoWrapper.addClass(this.PAUSE_CLASS),this.$video.get(0).pause()},_removeVideoURLParams:function(){this.videoDownloadURL&&(this.videoDownloadURL=this.videoDownloadURL.split("?")[0])},_bindEvents:function(){var e=this;e.$videoPlayButton.on("click",function(){e._playVideo()}),e.$video.on("click",function(){e._pauseVideo()}),e.$video.on("ended",function(){e.$video.get(0).load(),e._pauseVideo()}),e.$video.on("loadstart",function(){e.$videoWrapper.show()}),e.$downloadButton.on("click",function(){e._downloadVideo()}),e.$instagramButton.on("click",function(){e._publishToInstagram()})}}}),Class(UI,"ShortcutInstruction5").inherits(Widget)({html:'        <div>            <p class="title">That\'s It!</p>            <p class="message">                Look for any video in your Downloads Page and tap the "Download" button.            </p>            <button class="button primary">Done</button>        </div>    ',prototype:{$primaryButton:null,init:function(e){Widget.prototype.init.call(this,e),this.$primaryButton=this.element.find(".primary"),this.bindEvents()},bindEvents:function(){var e=this;e.$primaryButton.on("click",function(t){e.dispatch("finish")})}}}),Class(UI,"ShortcutInstruction1").inherits(Widget)({html:'        <div>            <p class="title">1. You Need the Shortcuts App!</p>            <p class="message">                With the Apple Shotcuts app, you can download Placeit videos to your phone!                <b>It\u2019s 100% safe & free.</b>            </p>            <button class="button primary">Get the FREE Apple Shortcuts App</button>            <button class="secondary btn btn-link">I already have it</button>        </div>    ',prototype:{$primaryButton:null,$secondaryButton:null,init:function(e){Widget.prototype.init.call(this,e),this.$primaryButton=this.element.find(".primary"),this.$secondaryButton=this.element.find(".secondary"),this.bindEvents(),Helpers.GlobalEventTracker.iosShortcutEvent("openInstructions")},bindEvents:function(){var e=this;e.$primaryButton.on("click",function(t){e.dispatch("goNext",{nextStep:2}),window.open("https://itunes.apple.com/app/shortcuts/id915249334")}),e.$secondaryButton.on("click",function(t){e.dispatch("goNext",{nextStep:3})})}}}),Class(UI,"ShortcutFlow").inherits(Widget)({html:'    <div class="modal shortcut-flow fade" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">        <span aria-hidden="true">\xd7</span>    </button>      <div class="modal-dialog">        <div class="modal-content">          <div class="modal-body">          </div>        </div>      </div>    </div>',prototype:{$modalBody:null,$modalContent:null,$closeBtn:null,$modalFooter:null,currentStepInstance:null,alertMessages:{alert:"Something went wrong, please try again.",warning:"Shortcut stopped, if you need to restart the process please try downloading again."},init:function(e){Widget.prototype.init.call(this,e);var t=this;this.$modalBody=this.element.find(".modal-body"),this.$modalContent=this.element.find(".modal-content"),this.$modalFooter=this.element.find(".modal-footer"),this.notification=new UI.Notification({}),this.element.on("hide.bs.modal",function(){t.notification.close()})},getNextStep:function(e){return new this.steps[e]({videoDownloadURL:this.videoDownloadURL,videoPreviewURL:this.videoPreviewURL})},showNextStep:function(e){var t=this;t.currentStepInstance&&(t.currentStepInstance.unbind("goNext"),t.currentStepInstance.unbind("finish"),t.currentStepInstance.destroy()),t.currentStepInstance=e,t.appendChild(t.currentStepInstance).render(t.$modalBody),t.currentStepInstance.bind("goNext",function(e){var i=e.data.nextStep;i>t.steps.length||t.showNextStep(t.getNextStep(i-1))}),t.currentStepInstance.bind("finish",function(){t.deactivate()})},userHasCompletedTheFlow:function(){return Helpers.App.getIOSVideoDownloadInstructionsCookie()},activate:function(){this.element.modal("show"),this.$modalFooter.addClass("hidden"),Widget.prototype.activate.call(this);var e=0;this.userHasCompletedTheFlow()&&(e=this.steps.length-1),this.showNextStep(this.getNextStep(e)),this._showErrorAlert()},deactivate:function(){this.element.modal("hide"),Widget.prototype.deactivate.call(this)},_removeErrorURLParams:function(){var e=Helpers.App.removeParams(["videoDownloadURL","videoPreviewURL","errorDomain","errorMessage"],window.location.href);window.history.pushState(window.history.state,"",e)},_showErrorAlert:function(){if(Helpers.App.getUrlParam("videoDownloadURL")&&Helpers.App.getUrlParam("videoPreviewURL")){var e=Helpers.App.getUrlParam("errorMessage");this._trackErrorEvent(e);var t=e?"alert":"warning";this.notification[t](this.alertMessages[t]).render($("body"),!0);var i=this.notification.element;i.css({top:"35px"}),this.$modalContent.css({"margin-top":0,top:i.offset().top+i.outerHeight()}),this._removeErrorURLParams()}},_trackErrorEvent:function(e){var t=e?"unexpected":"manual";Helpers.GlobalEventTracker.iosShortcutEvent("error."+t,e)}}}),Class(UI,"ShortcutInstruction4").inherits(Widget)({html:'        <div>            <div class="illustration" style="background: url(/assets/shortcut/step-2.svg)"></div>            <span class="illustration-subtitle">STEP 2 OF 2</span>            <button class="button primary">I Have the Shortcut</button>            <button class="secondary btn btn-link">I don\'t have the shortcut</button>        </div>    ',prototype:{$primaryButton:null,$secondaryButton:null,init:function(e){Widget.prototype.init.call(this,e),this.$primaryButton=this.element.find(".primary"),this.$secondaryButton=this.element.find(".secondary"),this.bindEvents()},bindEvents:function(){var e=this;e.$primaryButton.on("click",function(t){Helpers.App.setIOSVideoDownloadInstructionsCookie(),e.dispatch("goNext",{nextStep:5})}),e.$secondaryButton.on("click",function(e){window.open("https://www.icloud.com/shortcuts/afa2c3877c6a4d9eb3e860bec818dfe0")})}}}),Class(UI,"ShortcutInstruction2").inherits(Widget)({html:'        <div>            <div class="illustration" style="background: url(/assets/shortcut/step-1.svg)"></div>            <span class="illustration-subtitle">STEP 1 OF 2</span>            <button class="button primary">I Have the Shortcuts App</button>            <button class="secondary btn btn-link">I don\'t have the app</button>        </div>    ',prototype:{$primaryButton:null,$secondaryButton:null,init:function(e){Widget.prototype.init.call(this,e),this.$primaryButton=this.element.find(".primary"),this.$secondaryButton=this.element.find(".secondary"),this.bindEvents()},bindEvents:function(){var e=this;e.$primaryButton.on("click",function(t){e.dispatch("goNext",{nextStep:3})}),e.$secondaryButton.on("click",function(e){window.open("https://itunes.apple.com/app/shortcuts/id915249334")})}}}),Class(UI,"ShortcutInstruction3").inherits(Widget)({html:'        <div>            <p class="title">2. Get the Placeit Shortcut</p>            <p class="message">                This shortcut initiates the download from the Apple Shortcuts App! This is the last step            </p>            <button class="button primary">Get the FREE Placeit Shortcut</button>            <button class="secondary btn btn-link">I already have it</button>        </div>    ',prototype:{$primaryButton:null,$secondaryButton:null,init:function(e){Widget.prototype.init.call(this,e),this.$primaryButton=this.element.find(".primary"),this.$secondaryButton=this.element.find(".secondary"),this.bindEvents()},bindEvents:function(){var e=this;e.$primaryButton.on("click",function(t){e.dispatch("goNext",{nextStep:4}),window.open("https://www.icloud.com/shortcuts/afa2c3877c6a4d9eb3e860bec818dfe0")}),e.$secondaryButton.on("click",function(t){Helpers.App.setIOSVideoDownloadInstructionsCookie(),e.dispatch("goNext",{nextStep:5})})}}}),Class(UI,"KeyframeVideoPresenter")({$video:null,videoEl:null,keytime:null,_pausedByUser:null,prototype:{init:function(e,t){this.$video=e,this.videoEl=e.get(0),this.keytime=this.videoEl.currentTime=t,this._pausedByUser=!1,this._bindEvents()},_bindEvents:function(){this.$video.on("ended",function(){this._pausedByUser=!1,this.videoEl.currentTime=this.keytime}.bind(this)).on("loadeddata",function(){this.videoEl.currentTime=this.keytime}.bind(this))},play:function(){this._pausedByUser||(this.videoEl.currentTime=0);var e=this.videoEl.play();e&&e.then(function(){})["catch"](function(){})},pause:function(){this.videoEl.pause(),this._pausedByUser=!0},isPlaying:function(){return this.videoEl.currentTime>0&&!this.videoEl.paused&&!this.videoEl.ended&&this.videoEl.readyState>2},setKeytime:function(e){this.keytime=e}}}),Class(UI,"SubscriptionPlanChangeModal").inherits(Widget).includes(Helpers.SubscriptionHelper,Translator)({html:'    <div class="modal subscription-plan-change-modal" tabindex="-1" role="dialog" aria-labelledby="downloadOverlayLabel" aria-hidden="true">      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">          <span aria-hidden="true">\xd7</span>      </button>      <div class="modal-dialog">        <div class="modal-content">          <div class="modal-body">            <div class="plans-switch">              <h1>Change your plan</h1>              <p class="subtitle">Our Plans include unlimited downloads on mockups, designs, logos, and videos.</p>              <ul class="plan-list">                <li class="disabled" data-plan="monthly"><p>Monthly <br> <span id="cp-monthly-price"></span></p></li>                <li class="disabled" data-plan="annual"><p>Yearly <br> <span id="cp-annual-price"></span><br><span>You save <span id="cp-annual-save"></span>%!</span></p></li>              </ul>              <button class="button primary change_plan btn-block">Change Plan</button>              <p class="selected-plan-billing-info"></p>              <p class="coupon-info">Coupons are non-transferable, any existing coupons will be cancelled after changing to a new plan.</p>            </div>            <div class="plans-confirmation">              <p class="confirmation-text">You\u2019re about to switch to an <br><strong><span class="plan-label"></span> Subscription Plan</strong>, Continue?</p>              <button type="button" class="button secondary change-plan-cancel" data-dismiss="modal">Cancel</button>              <button type="button" class="button primary confirm-change-plan">Yes, Continue</button>            </div>          </div>        </div>      </div>    </div>',BILLING_INFO:{monthly:"We will charge you the new plan price at the end of your current billing cycle.",annualLabel:"Annual",monthlyLabel:"Monthly"},prototype:{selectedPlan:null,currentPlans:{annual:Registry.Plans.PLAN_ANNUAL,monthly:Registry.Plans.PLAN_MONTHLY},userCurrentPlan:null,$selectPlanButton:null,$plansContainer:null,$confirmationContainer:null,$planInfo:null,$planLabel:null,$confirmPlanChange:null,$changePlanCancel:null,$close:null,init:function(e){Widget.prototype.init.call(this,e),this.element.find('li[data-plan="monthly"]').attr("data-plan",this.currentPlans.monthly),this.element.find('li[data-plan="annual"]').attr("data-plan",this.currentPlans.annual),this.$selectPlanButton=this.element.find("button.change_plan"),this.$planInfo=this.element.find(".selected-plan-billing-info"),this.$planOptions=this.element.find("li"),this.$plansContainer=this.element.find(".plans-switch"),this.$changePlanBtn=this.element.find(".change_plan"),this.$confirmationContainer=this.element.find(".plans-confirmation"),this.$planLabel=this.element.find(".plan-label"),this.$confirmPlanChange=this.element.find(".confirm-change-plan"),this.$changePlanCancel=this.element.find(".change-plan-cancel"),this.$close=this.element.find(".close"),this._setupPlanPrices(),this._startPlanOptions(),this._bindEvents()},_bindEvents:function(){var e=this;this.$planOptions.on("click",function(t){e._selectPlan($(this).data("plan"))}),this.$changePlanBtn.on("click",function(){e.selectedPlan&&(e.$plansContainer.hide(),e.$confirmationContainer.show())}),this.$confirmPlanChange.on("click",function(){Helpers.GlobalEventTracker.cancelSubscriptionSwitch("switched",{new_plan:e.selectedPlan}),e.dispatch("select:plan",{selectedPlan:e.selectedPlan})})},attachHideEvent:function(){var e=this;this.element.on("hide.bs.modal",function(){Helpers.GlobalEventTracker.cancelSubscriptionSwitch("cancelled",{new_plan:e.getSelectedPlan()})})},removeHideEvent:function(){this.element.off("hide.bs.modal")},setLoading:function(){var e=this;e.$confirmPlanChange.addClass("disabled"),e.$changePlanCancel.addClass("disabled"),this.element.css({"pointer-events":"none"})},_startPlanOptions:function(){this.userCurrentPlan!=this.currentPlans.annual&&this.userCurrentPlan!=this.currentPlans.monthly?(this._allowSelect(this.currentPlans.annual),this._allowSelect(this.currentPlans.monthly),this._selectPlan(this.currentPlans.annual)):this.userCurrentPlan===this.currentPlans.monthly?(this._allowSelect(this.currentPlans.annual),this._selectPlan(this.currentPlans.annual)):this.userCurrentPlan===this.currentPlans.annual&&(this._allowSelect(this.currentPlans.monthly),this._selectPlan(this.currentPlans.monthly))},_allowSelect:function(e){this.element.find('[data-plan="{planCode}"]'.replace("{planCode}",e)).removeClass("disabled")},_selectPlan:function(e){var t=this.element.find('[data-plan="{planCode}"]'.replace("{planCode}",e));t.hasClass("disabled")!==!0&&e!==this.selectedPlan&&(this._deselecPlans(),t.addClass("selected"),this._setPlanInfoText(e),this.selectedPlan=e)},_setPlanInfoText:function(e){var t="",i=this.constructor.BILLING_INFO.annualLabel;e==this.currentPlans.monthly&&(i=this.constructor.BILLING_INFO.monthlyLabel),this.isAnnualPlan===!0&&(t=this.constructor.BILLING_INFO.monthly),this.$planLabel.text(i),this.$planInfo.text(t)},_deselecPlans:function(){this.selectedPlan=null,this.$planOptions.removeClass("selected")},getSelectedPlan:function(){return this.selectedPlan},_setupPlanPrices:function(){var e,t,i,n,s,r;e=this,n=e.element.find("#cp-monthly-price"),s=e.element.find("#cp-annual-price"),r=e.element.find("#cp-annual-save"),i=Helpers.Price.monthlyPlan(),t=Helpers.Price.annualPlan(),i.price.then(function(t){var i;i=e._formatPrice(t),n.text(i)}),t.price.then(function(t){var i,n;i=e._formatPrice(t),n=parseInt(e._calculateAnnualSavePercent(t)),s.text(i),window.is_july_fourth_sale?(s.addClass("has-discount"),s.after("<span class='discount-price'>$76.24</span>"),r.text("15")):r.text(n)})},show:function(){this.$plansContainer.show(),this.$confirmationContainer.hide(),this._startPlanOptions(),this.removeHideEvent(),this.attachHideEvent(),this.element.modal("show")},showConfirmation:function(){this.show(),this.$plansContainer.hide(),this.$confirmationContainer.show()},close:function(){this.$confirmPlanChange.removeClass("disabled"),this.$changePlanCancel.removeClass("disabled"),this.element.css({"pointer-events":""}),this._deselecPlans(),this.removeHideEvent(),this.element.modal("hide")}}}),Class(UI,"GoAnnualModal").inherits(Widget).includes(Helpers.SubscriptionHelper,Translator)({elementClass:"go-annual-modal",html:'    <div class="modal" tabindex="-1" role="dialog" aria-hidden="true">      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">          <span aria-hidden="true">\xd7</span>      </button>      <div class="modal-dialog">        <div class="modal-content">          <div class="modal-body">            <svg class="subscription-icon" xmlns="http://www.w3.org/2000/svg" width="29" height="26" fill="none"><g filter="url(#filter0_d)"><path fill="url(#paint0_linear)" d="M5.3 21.3c0-.5.5-1 1-1h16.4c.5 0 1 .5 1 1v1.4c0 .5-.5 1-1 1H6.3a1 1 0 01-1-1v-1.4z"/><path fill="url(#paint1_linear)" d="M26.5 6.6a1.2 1.2 0 00-1.3 0l-5.7 3.8-4-7.8a1.1 1.1 0 00-1-.6 1.1 1.1 0 00-1 .6l-4 7.8-5.7-3.8a1.2 1.2 0 00-1.3 0l-.4.5v.7l2.2 10c0 .2.2.5.4.6.2.2.5.3.7.3h18.2c.2 0 .5-.1.7-.3.2-.1.3-.4.4-.6l2.3-10a1.1 1.1 0 00-.5-1.2z"/></g><defs><linearGradient id="paint0_linear" x1="5.3" x2="23.7" y1="22" y2="22" gradientUnits="userSpaceOnUse"><stop stop-color="#501AA8"/><stop offset="1" stop-color="#870DE8"/></linearGradient><linearGradient id="paint1_linear" x1="2" x2="27" y1="10.3" y2="10.3" gradientUnits="userSpaceOnUse"><stop stop-color="#501AA8"/><stop offset="1" stop-color="#870DE8"/></linearGradient><filter id="filter0_d" width="29" height="25.7" x="0" y="0" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset/><feGaussianBlur stdDeviation="1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/><feBlend in="SourceGraphic" in2="effect1_dropShadow" result="shape"/></filter></defs></svg>            <span class="modal-title">Annual Subscription</span>            <span class="savings-title">Save <span class="savings"></span>%!</span>            <span class="pricing">                <span class="annual-price"></span>/Year (Just <span class="annual-price-month"></span>/Month)                <span class="discount-info">                    <span>$76.24</span>/Year (Just <span class="">$6.35</span>/Month)</span>                </span>            </span>            <span class="message">You are currently paying <span class="monthly-price"></span>/Month</span>            <button id="goAnnual">Go Annual!</button>            <span class="footnote">Coupons are non-transferable, any existing coupons will be cancelled after changing to a new plan.</span>          </div>        </div>      </div>    </div>',prototype:{$button:null,init:function(e){Widget.prototype.init.call(this,e),this.$button=this.element.find("#goAnnual"),this._setPrices(),this._bindEvents()},show:function(){this.element.modal("show")},hide:function(){this.element.modal("hide")},_setPrices:function(){var e=this,t=Helpers.Price.annualPlan(),i=Helpers.Price.monthlyPlan();t.price.then(function(t){var i={savings:parseInt(e._calculateAnnualSavePercent(t)),"annual-price":e._formatPrice(t),"annual-price-month":e._formatPrice(t/12)};window.is_cyberweek&&(i.savings=33,i["annual-price"]="$60",i["annual-price-month"]="$5"),window.is_holiday_coupon&&(i.savings=55,i["annual-price"]="$80.72",i["annual-price-month"]="$6.73"),Object.keys(i).forEach(function(t){var n=i[t];e.element.find("."+t).text(n)})}),i.price.then(function(t){var i=e._formatPrice(t);e.element.find(".monthly-price").text(i)}),window.is_july_fourth_sale&&(e.element.find(".pricing").addClass("has-discount"),e.element.find(".savings-title").text("15% Off!"))},_bindEvents:function(){var e=this;e.$button.click(function(){e.dispatch("buttonClick"),e.hide()}),e.element.bind("hidden.bs.modal",function(){e._unbindEvents(),e.destroy()})},_unbindEvents:function(){this.$button.unbind(),this.element.unbind()}}}),Class(UI,"SmartDropdown").inherits(Widget).includes(BubblingSupport)({html:'<div class="smart-dropdown">        <label class="title"> </label>        <div class="btn-input-container is-button">            <input type="button" class="btn-input">            <span class="sp-dd p-icon down-arrow"></span>            <span style="display:none" class="glyphicon glyphicon-remove-circle"></span>        </div>        <div class="menu"></div>    </div>',elementClass:"smart-dropdown",prototype:{noResultsHtml:'<div style="display:none;" class="no-results">                <div class="title"></div>                <div class="message"></div>            </div',initialValue:null,isMobile:!1,$menu:null,$list:null,options:null,_selectedItems:null,placeholder:"Search",modalName:"dropdownModal",propertyToSearch:"name",childProperty:"children",_previousSearchValue:null,isMultiSelection:!0,noResultsMessage:"No matches",noResultsTitle:"Try another keyword or browse our options below",list:null,simpleList:!1,init:function(e){this.options=[],this._selectedItems=[],Widget.prototype.init.call(this,e),this.$menu=this.element.find(".menu"),this.$btnInputContainer=this.element.find(".btn-input-container"),this.$btnInput=this.$btnInputContainer.find(".btn-input"),this.$downArrowIcon=this.$btnInputContainer.find(".down-arrow"),this.$removeIcon=this.$btnInputContainer.find(".glyphicon-remove-circle"),this.changeInputToButton(),this.isMobile=Helpers.App.isMobile(),Array.isArray(this.options)===!0&&this.options.length>0&&this.setUp(e)},setUp:function(e){$.extend(this,e),this.list=new UI.SmartList({labelProperty:this.labelProperty,childProperty:this.childProperty,propertyToSearch:this.propertyToSearch,name:"list",isMultiSelection:this.isMultiSelection,cssClass:"list",simpleList:this.simpleList}),this.$list=this.list.getElement();var t={value:"root"};t[this.childProperty]=this.options,this._data=this.list.parseToArray(t),this.list.setUp({},this._data),this.appendChild(this.list),this.renderList(this.list),this._bindings(),this.dispatch("ready")},rebuildList:function(e,t){this.list.buildList(e,t)},renderList:function(e){var t=this.$menu;this.isMobile===!0&&(this.modal=this.buildModal(),this.$mobileInput=this.modal.element.find(".btn-input"),this.appendChild(this.modal).render($(document.body)),this.$mobileInput.attr("placeholder",this.placeholder),this.$removeIconMobile=this.modal.element.find(".glyphicon-remove-circle"),this.$foldIcon=e.getElement().find(".icon.fold"),t=this.modal.getElement().find(".list-container")),e.render(t),this.$noResults=$(this.noResultsHtml).insertBefore(this.list.getElement()),this.setNoResultsMessage(this.noResultsMessage).setNoResultsTitle(this.noResultsTitle)},setNoResultsMessage:function(e){return this.$noResults.find(".message").html(e),this},setNoResultsTitle:function(e){return this.$noResults.find(".title").html(e),this},changeInputToButton:function(){return this.isMobile===!0?this:(this.$btnInput.attr("type","button"),this.$btnInputContainer.removeClass("text").addClass("is-button"),this.showDownArrowIcon(),
void this.setPlaceholder())},setPlaceholder:function(){var e=this.placeholder;if(this.isMultiSelection!==!0){var t=this.getSelected()[0],i=t&&t.name;"string"==typeof i&&i.length>0&&(e=i)}this.$btnInput.val(e).attr("placeholder",e)},changeButtonToInput:function(){return this.$btnInput.attr("type","text"),this.$btnInputContainer.removeClass("is-button").hasClass("text"),this.$btnInput.val(""),this.hideDownArrowIcon(),this},buildModal:function(){var e,t;return e='<div class="input-container search-container">                <input type="text" class="btn-input">                <span style="display:none" class="glyphicon glyphicon-remove-circle"></span>            </div>',t=new UI.SimpleModal({name:this.modalName,cssClass:"modal-smart-list"}),t.setHeaderContent(e),t.setContent('<div class="list-container"></div>'),t},_bindings:function(){var e=this;e.$removeIcon.bind("click",function(t){e.cleanSearch(t)}),$(document.body).bind("click",function(t){var i=e.element;e.isMobile&&(i=e.modal.getElement().find(".modal-content")),$.contains(i[0],t.target)!==!0&&(e.changeInputToButton(),e.hideList())}),this.$btnInput.bind("focus",function(){e.changeButtonToInput(),e.showList()}),this.$btnInputContainer.bind("click",function(){e.$btnInput.focus()}),this.list.bind("change",function(t){t.stopPropagation(),e.setPlaceholder(),e._selectedItems=e.list.getSelectedItems(),e.dispatch("change",{selected:e.getSelected(),itemClicked:t.data.item,originalDispatcher:e})}),this.isMobile!==!0?(e.$btnInput.bind("keyup",function(t){e.keyUpEventHandler(t)}),$(window).resize(function(){e.windowHeight!==window.innerHeight&&e.setDropDownHeight()})):this._mobileBindings()},_mobileBindings:function(){var e=this;e.$mobileInput.bind("keyup",function(t){e.keyUpEventHandler(t)}),e.$removeIconMobile.bind("click",function(t){e.cleanSearch(t),e.$list.removeClass("results"),e.rebuildList(e._data)}),e.$mobileInput.bind("focus",function(){""!==e.$mobileInput.val()&&e.showRemoveIcon()}),this.modal.element.on("shown.bs.modal",function(){e.setPlaceholder(),e.$mobileInput.focus()})},selectItemUsedKeyboard:function(e){this.isMobile||(40===e.keyCode?this.keyDownHandler():38===e.keyCode?this.keyUpHandler():13===e.keyCode&&this.$list.find(".pre-selected").find(".item").trigger("click"))},keyDownHandler:function(){var e,t=0;return this.$list.hasClass("results")===!1?this:(e=this.$list.find(".pre-selected"),e.index()+1<this.$list.children().length==!1?this:0===this.$list.find(".pre-selected").length?(this.$list.find("li:first-child").addClass("pre-selected"),this):(e=e.removeClass("pre-selected").next().addClass("pre-selected"),t=this.$menu.height()-(e.position().top+e.height()),0>t&&this.$menu.scrollTop(this.$menu.scrollTop()+Math.abs(t)),this))},keyUpHandler:function(){var e,t,i=this,n=0;e=i.$list.find(".pre-selected");var s=i.$btnInput.val();if(i.$btnInput.val("").val(s),e.is(":first-child")===!0)return this;for(e.removeClass("pre-selected").prev().addClass("pre-selected"),t=0;t<i.$list.find(".pre-selected").index();t++)n+=$(i.$list.children()[t]).height();return i.$menu.scrollTop(n),this},keyUpEventHandler:function(e){var t=$(e.target).val();this._previousSearchValue===t?this.selectItemUsedKeyboard(e):(this._previousSearchValue=t,this.search(t))},search:function(e){var t,i=this,n=i._selectedItems.map(function(e){return e.id});return e&&e.length>0?this.showRemoveIcon():this.hideRemoveIcon(),t=this._search(e),e&&e.length>0&&t.length>0?(this.$noResults.hide(),this.rebuildList(t,!0),this.$list.addClass("results"),void this.list.getItems().forEach(function(t){t.setContent(i.highlighted(t.content,e)),n.includes(t.id)!==!1&&t.activate()})):(e&&e.length>0?this.$noResults.show():this.$noResults.hide(),this.$list.removeClass("results"),this.rebuildList(this._data),void i.list.getItems().forEach(function(e){n.includes(e.id)!==!1&&e.activate()}))},_search:function(e){var t=this.propertyToSearch;return this._data.filter(function(e){return e.hasChildren===!1}).sort(function(e,i){return e.record[t].localeCompare(i.record[t])}).filter(function(i){return"string"!=typeof i.record[t]?!1:i.record[t].toLowerCase().indexOf(e.toLowerCase())>-1})},highlighted:function(e,t){var i=e.substr(e.toLowerCase().indexOf(t.toLowerCase()),t.length);return e=e.replace(i,"<strong>"+i+"</strong>")},cleanSearch:function(){return this.isMobile?this.$mobileInput.val("").focus():this.$btnInput.val("").focus(),this.$noResults.hide(),this.hideRemoveIcon(),this},isListVisible:function(){return this[this.modalName]?this[this.modalName].element.is(":visible")===!0:this.$menu.is(":visible")===!0},showList:function(){return this.isListVisible()===!0?this:(this[this.modalName]?this[this.modalName].activate():(this.setDropDownHeight(),this.$menu.show()),this.dispatch("activate"),this)},hideList:function(){return this.isListVisible()===!1?this:(this[this.modalName]?this[this.modalName].deactivate():this.$menu.hide(),this.dispatch("deactivate"),this)},toggle:function(){this.isListVisible()?this.hideList():this.showList()},getSelected:function(){return this.list?this.list.getSelected():[]},setDropDownHeight:function(){var e=this;e.windowHeight=window.innerHeight;var t=window.innerHeight-e.$menu.offset().top-10;e.$menu.css("max-height",t+"px"),e.$menu.css("overflow-y","auto")},showDownArrowIcon:function(){return this.isMobile?this:(this.$downArrowIcon.show(),this)},hideDownArrowIcon:function(){return this.isMobile?this:(this.$downArrowIcon.hide(),this)},hideRemoveIcon:function(){var e=this.$removeIcon;return this.isMobile&&(e=this.$removeIconMobile),e.hide(),this},showRemoveIcon:function(){var e=this.$removeIcon;return this.isMobile&&(e=this.$removeIconMobile),e.show(),this},selectItem:function(e,t){return this.list?(this.list.selectItem(e,t),this._selectedItems=this.list.getSelectedItems(),this):this.list}}}),Class(UI,"SmartList").inherits(Widget).includes(BubblingSupport)({html:'<ul class="list"></<ul>',prototype:{_data:null,record:null,propertyToSearch:"name",childProperty:"children",labelProperty:"name",isMultiSelection:!0,simpleList:!1,init:function(e){this._data=[],Widget.prototype.init.call(this,e),"object"==typeof this.record&&null!==this.record&&(this._data=this.parseToArray(this.record)),this.setUp(e,this._data),this._bindings()},setUp:function(e,t){$.extend(this,e),Array.isArray(t)===!0&&(this._data=t),this._data.length>0&&this.buildList(this._data)},_bindings:function(){var e=this;this.bind("click",function(t){var i=t.data&&t.data.originalDispatcher;return e.toggleChildList(i),i.noSelectable===!0?this:(this.isMultiSelection!==!0?e.toggleItem(i):e._multiSelectionHandler(i),void e.dispatch("change",{selected:e.getSelected(),item:i,originalDispatcher:e}))})},_multiSelectionHandler:function(e){var t=this,i=t._getParentItem(e),n=e.id;return e.isActive===!0&&e.record.deselectSiblings===!0?void e.deactivate():(e.isActive===!1&&(e.record.deselectSiblings===!0&&t.deselectSiblings(i),e.record.deselectChildren===!0&&t.deselectChildren(e),e.isActive===!1&&e.record.deselectAll===!0&&t.deselectAll(e)),t.getSelectedItems().forEach(function(e){var t=e.record&&e.record.deselectSiblings,s=i&&i.id;(e.id!==n||e.isActive!==!1)&&t===!0&&e.parentId===s&&e.deactivate()}),void t.toggleItem(e))},buildList:function(e,t){var i=this;this.removeItems(),e.forEach(function(e,n){if("root"!==e.record.value){var s=i.appendChild(i.buildItem(e,n));i.renderItem(s,t)}})},removeItems:function(){this.getItems().forEach(function(e){e.destroy()}),this.element.find("li").remove()},buildItem:function(e,t){var i;return i="item"+e.id,new UI.SmartListItem({name:i,id:e.id,index:t,parentId:e.parentId,content:e.record[this.labelProperty],record:e.record,hasChildren:e.hasChildren,noSelectable:e.record.noSelectable,isActive:e.record.isActive,foldIcon:this.foldIcon||this._getIcon("closeDark"),unfoldIcon:this.unfoldIcon||this._getIcon("openDark")})},renderItem:function(e,t){var i,n,s,r,o=t||this.simpleList;if(s=e.id,r=e.parentId,n=this.element,i=$("<li></li>"),i.attr("id",e.name).attr("data-id",s),e.render(i),o===!0)return void this.element.append(i);if(n=this.element.find("#parent"+r).length>0?this.element.find("#parent"+r):this.element,n.append(i),e.hasChildren===!0){var a=$('<ul class="hidden children"></ul>').attr("id","parent"+s).attr("data-parent-id",s);i.append(a)}else i.addClass("child")},toggleItem:function(e){e.toggle(),this.isMultiSelection!==!0&&this.deselectItems(e)},deselectItems:function(e){this.getSelectedItems().forEach(function(t){t.id!==e.id&&t.deactivate()})},selectItem:function(e,t){var i=this.getItems().find(function(i){return i.record?i.record[e]===t:!1});return"undefined"==typeof i?this:(i.activate(),this.isMultiSelection===!0?this:(this.deselectItems(i),this))},toggleChildList:function(e){if(e.hasChildren!==!0)return this;var t=this.element.find("#parent"+e.id);return 0===t.length?this:(t.is(":visible")===!0?this.hideChildList(e):this.showChildList(e),this)},showChildList:function(e){return this.element.find("#parent"+e.id).removeClass("hidden"),e.showUnfoldIcon(),this},hideChildList:function(e){return this.element.find("#parent"+e.id).addClass("hidden"),e.showFoldIcon(),this},getSelected:function(){return this.getSelectedItems().map(function(e){return e.record})},getSelectedItems:function(){return this.getItems().filter(function(e){return e.isActive===!0})},getItems:function(){return this.children.filter(function(e){return"SmartListItem"===e.constructor.className})},parseToArray:function(e){var t=this.childProperty,i=[],n=function s(e,n){var r=i.length,o=Array.isArray(e[t]),a=null;n>0&&(a=n),i.push({record:e,id:r,parentId:a,hasChildren:o}),o!==!1&&e[t].forEach(function(e){s(e,r)})};return n(e,null),i.unshift(),i},getData:function(){return this._data},deselectChildren:function(e){var t=this,i=this.element.find("#parent"+e.id);return 0===i.length?this:(i.find("li").toArray().forEach(function(e){var i=parseInt(e.dataset.id),n=t.getSelectedItems().find(function(e){return e.id===i});void 0!==n&&n.deactivate()}),this)},deselectSiblings:function(e){return"undefined"==typeof e?this:(this.deselectChildren(e),this)},_getParentItem:function(e){return this.getItems().find(function(t){return t.id===e.parentId})},deselectAll:function(){var e=this.getSelectedItems();return e.forEach(function(e){e.deactivate()}),this},_getIcon:function(e){return"closeDark"===e?'<svg width="8px" height="11px" viewBox="0 0 8 11" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">                        <g id="closed-dark" transform="translate(-617.000000, -123.000000)" fill="#4A4A4A" fill-rule="nonzero">                            <g id="Group-11" transform="translate(606.000000, 85.000000)">                                <g id="Dropdown-Menu-Copy-2">                                    <polygon id="triangle-closed" transform="translate(15.000000, 43.500000) rotate(-90.000000) translate(-15.000000, -43.500000) " points="15 47 10 40 20 40"></polygon>                                </g>                            </g>                        </g>                    </g>                </svg>':"openDark"===e?'<svg width="11px" height="8px" viewBox="0 0 11 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">                            <g id="open-dark" transform="translate(-615.000000, -151.000000)" fill="#4A4A4A" fill-rule="nonzero">                                <g id="Group-11" transform="translate(606.000000, 85.000000)">                                    <g id="Dropdown-Menu-Copy-2">                                        <polygon id="Triangle" points="14.5 73.5 9.5 66.5 19.5 66.5"></polygon>                                    </g>                                </g>                            </g>                        </g>                    </svg>':void 0}}}),Class(UI,"SmartListItem").inherits(Widget).includes(BubblingSupport,NodeSupport)({html:'<div class="item">            <div class="icon fold"></div>            <div class="content"></div>            <i class="glyphicon glyphicon-ok icon-ok check-mark hidden"></i>    </div>',prototype:{isActive:!1,record:null,noSelectable:!1,hasChildren:!1,foldIcon:"",unfoldIcon:"",init:function(e){this.record={},Widget.prototype.init.call(this,e),this.$icon=this.element.find(".icon"),this.$content=this.element.find(".content"),this.setContent(this.content),this.$checkIcon=this.element.find(".check-mark"),this.hasChildren===!0&&this.showFoldIcon(),this.isActive===!0&&this.activate(),this._bindings()},_bindings:function(){var e=this;this.$icon.bind("click",function(){e.noSelectable===!0&&e.dispatch("iconClick")}),this.element.bind("click",function(){e.dispatch("click",{originalDispatcher:e})})},toggle:function(){this.isActive===!0?this.deactivate():this.activate()},setContent:function(e){this.$content.html(e)},activate:function(){return this.noSelectable===!0?this:(Widget.prototype.activate.call(this),this.isActive=!0,this.$checkIcon.removeClass("hidden"),this)},deactivate:function(){return this.noSelectable===!0?this:(Widget.prototype.deactivate.call(this),this.isActive=!1,this.$checkIcon.addClass("hidden"),this)},showFoldIcon:function(){this.$icon.html(this.foldIcon)},showUnfoldIcon:function(){this.$icon.html(this.unfoldIcon)}}}),Class(UI,"PricingButton").inherits(Widget).includes(Translator,BubblingSupport,Helpers.SubscriptionHelper)({TEXT_PRICING:"Pricing",TEXT_UPGRADE_ANNUAL:"Go Annual!",prototype:{$button:null,canUpgradeToAnnual:null,init:function(e){Widget.prototype.init.call(this,e),this.$anchor=this.element.find("a"),this._bindEvents()},update:function(e){if(e){if(Helpers.SubscriptionHelper.shouldDisableSwitchPlans())return void this.hide();this.canUpgradeToAnnual=e.can_upgrade_to_annual,this.canUpgradeToAnnual===!0?this._setUpgradeToAnnualText():this.hide()}},_bindEvents:function(){var e,t=this;t.element.click(function(){Helpers.App.isNewPricingCopyEnabled()===!0&&Helpers.App.isMobile()===!1&&(e=Helpers.App.getUserType(),Helpers.GlobalEventTracker.track("NavBar:PricingCTA:Clicked",{session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id,fired_on_login:!0,user_type_name:e.name,user_type_id:e.id})),t.dispatch("click",{originalDispatcher:t}),t.canUpgradeToAnnual===!0&&Helpers.GlobalEventTracker.track("GoAnnual:CTA:Clicked",{session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id})})},_setUpgradeToAnnualText:function(){var e=this,t=Helpers.Price.annualPlan();t.price.then(function(t){var i=parseInt(e._calculateAnnualSavePercent(t)),n=e.constructor.TEXT_UPGRADE_ANNUAL.replace("{{annualDiscountPercentage}}",i);e.$anchor.text(n)})}}}),Class(UI,"CelebrationModal").inherits(Widget).includes(Helpers.SubscriptionHelper,Translator,SaleSupport)({elementClass:"celebration-modal",html:'    <div class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">          <span aria-hidden="true">\xd7</span>      </button>      <div class="modal-dialog">        <div class="modal-content">          <div class="modal-body">            <svg class="subscription-icon" xmlns="http://www.w3.org/2000/svg" width="29" height="26" fill="none"><g filter="url(#filter0_d)"><path fill="url(#paint0_linear)" d="M5.3 21.3c0-.5.5-1 1-1h16.4c.5 0 1 .5 1 1v1.4c0 .5-.5 1-1 1H6.3a1 1 0 01-1-1v-1.4z"/><path fill="url(#paint1_linear)" d="M26.5 6.6a1.2 1.2 0 00-1.3 0l-5.7 3.8-4-7.8a1.1 1.1 0 00-1-.6 1.1 1.1 0 00-1 .6l-4 7.8-5.7-3.8a1.2 1.2 0 00-1.3 0l-.4.5v.7l2.2 10c0 .2.2.5.4.6.2.2.5.3.7.3h18.2c.2 0 .5-.1.7-.3.2-.1.3-.4.4-.6l2.3-10a1.1 1.1 0 00-.5-1.2z"/></g><defs><linearGradient id="paint0_linear" x1="5.3" x2="23.7" y1="22" y2="22" gradientUnits="userSpaceOnUse"><stop stop-color="#501AA8"/><stop offset="1" stop-color="#870DE8"/></linearGradient><linearGradient id="paint1_linear" x1="2" x2="27" y1="10.3" y2="10.3" gradientUnits="userSpaceOnUse"><stop stop-color="#501AA8"/><stop offset="1" stop-color="#870DE8"/></linearGradient><filter id="filter0_d" width="29" height="25.7" x="0" y="0" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset/><feGaussianBlur stdDeviation="1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/><feBlend in="SourceGraphic" in2="effect1_dropShadow" result="shape"/></filter></defs></svg>            <span class="title"></span>            <span class="subtitle"></span>            <img src="/assets/subscription-celebration.png"/>            <div class="footnote"></div>            <svg width="102" height="13" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M47.7 11h-.6l1.4-7.2h.8l-.4 2-.2.9.8-.5c.2-.2.5-.2.8-.2.4 0 .8.1 1 .4.3.3.4.7.4 1.3a3.9 3.9 0 01-.8 2.4l-.8.7a2 2 0 01-1 .2c-.2 0-.5 0-.7-.2l-.4-.5-.3.6zM50 6.5c-.2 0-.4 0-.7.2-.3.1-.5.3-.7.6L48 9.7l.5.5.5.2c.2 0 .4 0 .7-.2.2-.2.4-.3.5-.6.2-.2.4-.5.4-.8.2-.3.2-.6.2-1s0-.7-.2-.9a.7.7 0 00-.7-.3zM52 13h-.3a1 1 0 01-.3-.1l.2-.6h.4c.2 0 .4 0 .6-.2.3-.2.4-.5.6-.8l.2-.4-.8-4.8h.7l.4 2.7a15.2 15.2 0 01.1 1.4 2346.2 2346.2 0 01.8-1.4L56 6.1h.7L54 11.3l-.4.7a2.7 2.7 0 01-1 .9l-.6.1z" fill="#8A8A8A"/><path fill-rule="evenodd" clip-rule="evenodd" d="M10 0h3l-1.8 8.8v.5c0 .2 0 .3.3.3l.7-.2-.2 1.2c-.4.2-1 .4-1.5.4-.8 0-1.4-.4-1.4-1.3v-.9l1.6-7.3h-1L10 0zM7.7 6.5a4 4 0 001.4-3c0-1-.3-1.5-.8-2-.6-.5-1.6-.7-3-.7H1L.7 2.3h1L0 10.8h2.2l.7-3.3h1.4c1.5 0 2.6-.3 3.4-1zM6.6 2.7c.2.2.3.5.3.9 0 .7-.3 1.5-.8 2-.4.3-1 .5-2 .5H3L4 2.3h1.2c.7 0 1.2.1 1.5.4zm14.2.5l-1.1.3c-.4-.3-1-.5-1.7-.5a5.1 5.1 0 00-5 5.2c0 1.7.9 2.8 2.4 2.8 1 0 1.8-.4 2.2-1 .1.6.7 1 1.3 1 .5 0 1-.2 1.5-.5l.2-1.2-.7.2c-.2 0-.3 0-.3-.3v-.4l1.2-5.6zm-3 4.5l.7-3.2a1 1 0 00-.5-.2c-1.8 0-3 2.3-3 3.9 0 .9.4 1.4 1 1.4s1-.2 1.2-.6c.3-.3.5-.8.6-1.3zm10.5-2v-.5c0-1.3-1-2.2-2.5-2.2-2.7 0-4.6 2.5-4.6 5.1 0 2 1.4 2.9 3.2 2.9 1 0 2-.4 2.7-.8l.3-1.5c-.8.5-1.8.9-2.6.9-1 0-1.5-.5-1.5-1.5 0-.8.3-1.9.7-2.6.4-.6 1-1.1 1.6-1.1.6 0 .8.4.8 1v.3h2zm7.4-.6C35.7 6.7 34.2 8 32 8l-1.4-.1V8c0 1 .7 1.6 1.6 1.6.8 0 1.9-.4 2.6-.8l-.3 1.4c-.7.5-1.8.8-2.8.8-1.8 0-3.1-1-3.1-2.9 0-2.6 2-5 4.7-5 1.5 0 2.5.6 2.5 2zM33 4.4c.6 0 .8.3.8.7 0 1-.7 1.6-2.2 1.6h-.8C31 5.5 32 4.4 33 4.4z" fill="#8A8A8A"/><path d="M39.7.9c0 .4-.4.7-.8.7-.3 0-.5-.2-.5-.5 0-.4.4-.7.8-.7.2 0 .5.2.5.5zM37.2 3.2h1.9l-1.3 6.3-.1.5c0 .2.1.3.4.3.2 0 .4 0 .6-.2l-.1.6c-.2.2-.6.3-.8.3-.7 0-1-.4-1-1v-.5l1.3-5.7h-1l.1-.6zM42.2 3.2H44l-.2.6H42l-1 4.9v.7c0 .6.3.9.9.9.4 0 1-.2 1.3-.4l-.1.7c-.4.2-1 .4-1.4.4-1 0-1.7-.5-1.7-1.5l.1-.8 1-4.9h-1l.1-.6h1l.5-2 1-.5-.5 2.5zM64.7 3.6c-.2-.2-.8 0-1.5.2a5.5 5.5 0 00-2.5 4.4h-.1c-.4-.7-.5-1.4-.2-2.5l-.2-.2-.5.7a3.4 3.4 0 001.2 4.5 3 3 0 004.3-1.2c1-1.9 0-5.6-.5-6z" fill="#8A8A8A"/><path fill-rule="evenodd" clip-rule="evenodd" d="M67.3 7.9c0-2 1.3-3.4 3.2-3.4 1.6 0 2.6 1 2.9 2.7v.4c0 .4-.2.6-.7.6h-4a2 2 0 001.8 1.9 2 2 0 001.6-.7l.4-.2c.3 0 .5.2.5.5 0 .1 0 .3-.2.5a3 3 0 01-2.3 1c-1.9 0-3.2-1.4-3.2-3.3zm4.8-.6c0-1-.6-1.7-1.6-1.7s-1.8.7-1.9 1.7h3.5z" fill="#8A8A8A"/><path d="M77.4 4.5c-.9 0-1.7.5-2 1.2v-.4c0-.7-.6-.7-.7-.7-.3 0-.6.2-.6.7v5.1c0 .7.5.8.7.8 0 0 .6 0 .6-.8V7.7c0-1.2.7-2 1.6-2 1 0 1.4.6 1.4 1.8v3c0 .6.5.7.6.7.2 0 .7 0 .7-.8V7.1c0-1.2-.6-2.6-2.3-2.6zM85.3 4.8c-.3 0-.5.2-.6.5L83 9.7l-1.7-4.4c-.1-.3-.3-.5-.6-.5-.4 0-.7.3-.7.6l.1.4 2 4.7c.2.6.6.7.9.7.2 0 .6-.1.8-.7l2-4.8v-.3c0-.4-.2-.6-.5-.6z" fill="#8A8A8A"/><path fill-rule="evenodd" clip-rule="evenodd" d="M87 5.2c.5-.4 1.3-.7 2-.7 1.6 0 2.6 1 2.6 2.5v3.4c0 .7-.5.7-.6.7-.3 0-.6-.2-.6-.7v-.3c-.4.7-1.1 1-2 1-1 0-2.2-.5-2.2-1.9 0-1.9 2.1-2.1 4.2-2.1v-.2c0-.8-.5-1.3-1.5-1.3-.4 0-.9.1-1.3.5l-.4.1c-.3 0-.5-.2-.5-.5 0-.2.1-.4.3-.5zM90.4 8H90c-1.1 0-2.6.1-2.6 1.2 0 .9 1 1 1.2 1 1 0 1.7-.8 1.7-1.9V8z" fill="#8A8A8A"/><path d="M94.9 6c.5 0 .6-.5.6-.6 0-.3-.2-.5-.6-.5h-1.1V3.7c0-.5-.4-.7-.6-.7-.1 0-.7 0-.7.7v5.5c0 1.3.6 2 1.8 2 .3 0 .6 0 .8-.2.2-.1.3-.3.3-.5 0-.3-.2-.5-.5-.5h-.2a1 1 0 01-.2 0c-.5 0-.7-.2-.7-1V6h1z" fill="#8A8A8A"/><path fill-rule="evenodd" clip-rule="evenodd" d="M95.5 7.8c0-1.9 1.3-3.3 3.2-3.3 2 0 3.3 1.4 3.3 3.3 0 2-1.4 3.4-3.3 3.4-.9 0-1.7-.4-2.3-1-.6-.6-1-1.4-1-2.4zm1.2 0c0 1.1.7 2.3 2 2.3 1 0 2-.7 2-2.3 0-1.5-1-2.2-2-2.2s-2 .7-2 2.2z" fill="#8A8A8A"/></svg>          </div>        </div>      </div>    </div>',TEXTS:{monthly:{title:"Congratulations!",subtitle:"You are now a subscriber!",footnote:'<span><b>Save <span class="savings"></span>%</b> with our annual subscription! <button id="goAnnual" class="btn">Go Annual!</button></span>'},annual:{title:"Congratulations!",subtitle:"You are now an annual subscriber!",footnote:'<span class="small">If you want to switch back to your monthly<br> subscription go to your account page.</span>'}},prototype:{$button:null,init:function(e){Widget.prototype.init.call(this,e),this._setTexts(),this.$button=this.element.find("#goAnnual"),this._bindEvents()},show:function(){this.element.modal("show"),this.initCyberweekUfo()},hide:function(){this.element.modal("hide")},_setTexts:function(){var e=this.isAnnual?"annual":"monthly",t=this.constructor.TEXTS[e],i=this.element;Object.keys(t).forEach(function(e){var n=t[e];i.find("."+e).html(n)}),this._setSavings()},_setSavings:function(){var e=this,t=Helpers.Price.annualPlan();t.price.then(function(t){var i=parseInt(e._calculateAnnualSavePercent(t));e.element.find(".savings").text(i)})},_bindEvents:function(){var e=this;e.$button.click(function(){e.hide(),e.dispatch("goAnnualClick"),Helpers.GlobalEventTracker.track("GoAnnual:CTA:Clicked",{session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id})}),e.element.bind("hidden.bs.modal",function(){e._unbindEvents(),e.destroyCyberweekUfo(),e.destroy()})},_unbindEvents:function(){this.$button.unbind(),this.element.unbind()}}}),Class(UI,"EnvatoUsername").inherits(Widget).includes(Translator)({USERTYPE_LABELS:{free_account:"<span>Free account</span>",unlimited:'<svg><use xlink:href="#subscription_icon"></use></svg><span class="subscribed">Unlimited</span>'},prototype:{init:function(e){Widget.prototype.init.call(this,e),this.$username=this.element.find(".username"),this.$usertypeLabel=this.element.find(".usertype-label")},update:function(e,t){var i=this.constructor.USERTYPE_LABELS;this.$username.text(e),t?this.$usertypeLabel.html(i.unlimited):this.$usertypeLabel.html(i.free_account)}}}),Class(UI,"UserTypeBanner").inherits(Widget).includes(BubblingSupport)({prototype:{$button:null,bannerId:null,_wasEventShownSent:!1,init:function(e){Widget.prototype.init.call(this,e),this._bindEvents();var t=Helpers.App.getUserType();return Helpers.SubscriptionHelper.shouldDisableSwitchPlans()?void this.element.hide():void(t.bannerUrl?(this.element.attr("src",t.bannerUrl),this.element.attr("data-banner-id",t.bannerId),this.element.show()):this.element.hide())},update:function(){var e=this,t=function(t){return Helpers.SubscriptionHelper.shouldDisableSwitchPlans()?void e.element.hide():(t.banner?(e.element.attr("src",t.banner.url),e.element.attr("data-banner-id",t.banner.id),e.element.show()):e.element.hide(),void e.dispatch("updated",t))};$.ajax({method:"GET",url:"/api/v1/get_user_type_banner",dataType:"json"}).done(t).fail(function(e){Helpers.GlobalEventTracker.noticeError("userTypeBanner:getBannerError",{response:e.responseText})})},sendShownEvent:function(){if(!this._wasEventShownSent&&this.isVisible()!==!1){var e=Helpers.App.getUserType(),t=this.element.data("banner-id");Helpers.GlobalEventTracker.track("DropdownBanner:Shown",{user_type_name:e.name,user_type_id:e.id,banner_id:t}),this._wasEventShownSent=!0}},_bindEvents:function(){var e=this;e.element.click(function(){var t=Helpers.App.getUserType();Helpers.GlobalEventTracker.track("DropdownBanner:Clicked",{user_type_name:t.name,user_type_id:t.id,banner_id:e.element.data("banner-id")}),e.dispatch("click",{originalDispatcher:e})})}}}),Class(UI,"GlobalNotification").inherits(Widget)({html:'<div class="global-notification hide"><div class="close-cross"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC44NCAxMC4xNyA1LjE2IDYuNDljLS4xODEtLjE4Mi0uMjEyLS40NDQtLjA3LS41ODZsLjY0NC0uNjQ0Yy4xNDItLjE0Mi40MDQtLjExLjU4NS4wN0wxMCA5LjAxMWwzLjY4LTMuNjhjLjE4Mi0uMTgyLjQ0NC0uMjEzLjU4Ni0uMDcxbC42NDQuNjQ0Yy4xNDIuMTQyLjExMS40MDQtLjA3LjU4NWwtMy42OCAzLjY4MSAzLjY4IDMuNjgyYy4xODIuMTguMjEzLjQ0My4wNy41ODVsLS42NDMuNjQ0Yy0uMTQyLjE0Mi0uNDA0LjExLS41ODUtLjA3TDEwIDExLjMyOWwtMy42ODIgMy42ODJjLS4xOC4xOC0uNDQzLjIxMi0uNTg1LjA3bC0uNjQ0LS42NDRjLS4xNDItLjE0Mi0uMTEtLjQwNC4wNy0uNTg1bDMuNjgyLTMuNjgyeiIgZmlsbD0iI0VGRUZFRiIvPgo8L3N2Zz4K"/></div><div class="illustration"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDQiIGhlaWdodD0iNDQiIHZpZXdCb3g9IjAgMCA0NCA0NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik00Ljk5IDIyLjU0NmMyLjk3IDQuODgzIDIuODUzIDcuODE0IDIuMjgzIDEyLjYzOC0uNTcxIDQuODI0LjM5IDYuOTMzIDIuMjgzIDguMTAzIDIuNDUxIDEuNTE3IDYuMDU2LjY3NSA4LjA4Ni0zLjEyMSAyLjAyOS0zLjc5NyAzLjE3LTcuMDc2IDkuMzItNS4zMzggNi4xNTEgMS43MzggMTEuMDkzLjA0IDEzLjQ0LTQuMjA3IDIuMzQ1LTQuMjQ3IDIuNTQ4LTExLjc4NS0yLjQwNS0xNC45NjItNC45NS0zLjE3Ni05LjM4NC0uMjU2LTE2LjkzLTYuNDMxQzEzLjUyIDMuMDUzIDcuMTc1IDQuMzQ4IDQuMTk5IDcuNjgzYy0yLjU3MiAyLjg4OC0zLjU1NCA3LjcyLjc5IDE0Ljg2M3oiIGZpbGw9IiM4OTg5Q0EiLz4KICAgIDxwYXRoIGQ9Ik0xNS40NCAxMi43VjkuNjkyaDQuNTcxVjEyLjciIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0xNS40NCAxMi43VjkuNjkyaDMuMDQ4VjEyLjciIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0yNy42MyA0MS4yNTZjMS42ODMgMCAzLjA0Ny0xLjM0NiAzLjA0Ny0zLjAwNnYtLjczNmMwLS41MDMtLjEyOC0uOTk4LS4zNzEtMS40NGwtOC43Ny0xNS44NTlWMTIuN2gtNy42MTJ2Ny41MTVsLTguNzcgMTUuODZhMi45OCAyLjk4IDAgMCAwLS4zNzIgMS40Mzl2LjczNmMwIDEuNjYgMS4zNjUgMy4wMDYgMy4wNDggMy4wMDZoMTkuOHoiIGZpbGw9IiNEOUQ3RDgiLz4KICAgIDxwYXRoIGQ9Ik0yOC4zOTIgMzguMjV2LS43MzZjMC0uNTAzLS4xMjgtLjk5OC0uMzcyLTEuNDRsLTguNzctMTUuODU5VjEyLjdoLTUuMzI2djcuNTE1bC04Ljc3IDE1Ljg2YTIuOTggMi45OCAwIDAgMC0uMzcyIDEuNDM5di43MzZjMCAxLjY2IDEuMzY1IDMuMDA2IDMuMDQ4IDMuMDA2aDE3LjUxNWMxLjY4MyAwIDMuMDQ3LTEuMzQ2IDMuMDQ3LTMuMDA2eiIgZmlsbD0iI0Q5RDdEOCIvPgogICAgPHBhdGggZD0iTTMwLjY3NyAzOC4yNXYtLjczNmMwLS41MDMtLjEyOC0uOTk4LS4zNzEtMS40NGwtNS40NDYtOS44NDdoLTEuMTdjLS40MDQgMC0uNzkyLjE1OC0xLjA3Ny40NGwtLjYzMS42MjJjLS4yODYuMjgyLS42NzQuNDQtMS4wNzguNDRoLS4yNmMtLjQwNSAwLS43OTItLjE1OC0xLjA3OC0uNDRsLS42My0uNjIyYTEuNTM3IDEuNTM3IDAgMCAwLTEuMDc5LS40NGgtLjI2Yy0uNDA1IDAtLjc5My4xNTgtMS4wNzguNDRsLS42MzEuNjIyYy0uMjg3LjI4Mi0uNjc0LjQ0LTEuMDc4LjQ0aC0uMjYxYy0uNDA0IDAtLjc5Mi0uMTU4LTEuMDc4LS40NGwtLjYzLS42MjJhMS41MzcgMS41MzcgMCAwIDAtMS4wNzktLjQ0SDEwLjZsLTUuNDQ2IDkuODQ4YTIuOTggMi45OCAwIDAgMC0uMzcyIDEuNDM5di43MzZjMCAxLjY2IDEuMzY1IDMuMDA2IDMuMDQ4IDMuMDA2aDE5LjhjMS42ODMgMCAzLjA0Ny0xLjM0NiAzLjA0Ny0zLjAwNnoiIGZpbGw9IiM4RTU5Q0YiLz4KICAgIDxwYXRoIGQ9Ik0yOS4xNTQgMjEuNzE4djYuNDA1Yy0yLjY2Mi45MjktNC41NzIgMy40MjYtNC41NzIgNi4zNyAwIDMuNzM2IDMuMDcgNi43NjMgNi44NTcgNi43NjMgMy43ODcgMCA2Ljg1Ny0zLjAyNyA2Ljg1Ny02Ljc2MyAwLTIuOTQ0LTEuOTEtNS40NDEtNC41NzEtNi4zN3YtNi40MDUiIGZpbGw9IiNEOUQ3RDgiLz4KICAgIDxwYXRoIGQ9Ik0yNC41ODIgMzQuNDkzYzAgMy40OCAyLjY2OCA2LjM0NCA2LjA5NSA2LjcxOSAzLjQyOC0uMzc1IDYuMDk1LTMuMjM4IDYuMDk1LTYuNzIgMC0yLjk0My0xLjkxLTUuNDQtNC41NzEtNi4zN3YtNi40MDRoLTMuMDQ3djYuNDA1Yy0yLjY2Mi45MjktNC41NzIgMy40MjYtNC41NzIgNi4zN3oiIGZpbGw9IiNEOUQ3RDgiLz4KICAgIDxwYXRoIGQ9Ik0zOC4yOTYgMzQuNDkzYzAtLjI1NS0uMDItLjUwNS0uMDQ4LS43NTJoLS44NDVjLS40MDQgMC0uNzkyLjE1OS0xLjA3OC40NGwtLjYzLjYyM2MtLjI4Ni4yODItLjY3NC40NC0xLjA3OC40NGgtLjI2Yy0uNDA1IDAtLjc5Mi0uMTU4LTEuMDc4LS40NGwtLjYzMS0uNjIzYTEuNTM3IDEuNTM3IDAgMCAwLTEuMDc4LS40NGgtLjI2MWMtLjQwNCAwLS43OTIuMTU5LTEuMDc3LjQ0bC0uNjMxLjYyM2MtLjI4Ny4yODItLjY3NC40NC0xLjA3OC40NGgtLjI2MWMtLjQwNCAwLS43OTItLjE1OC0xLjA3OC0uNDRsLS42My0uNjIzYTEuNTM3IDEuNTM3IDAgMCAwLTEuMDc5LS40NGgtLjg0NWE2LjU4OCA2LjU4OCAwIDAgMC0uMDQ3Ljc1MmMwIDMuNzM1IDMuMDY5IDYuNzYzIDYuODU2IDYuNzYzczYuODU3LTMuMDI4IDYuODU3LTYuNzYzeiIgZmlsbD0iIzM0OTJERSIvPgogICAgPHBhdGggZD0iTTE2Ljk2NCAzNS4yNDRjMCAuODMtLjY4MiAxLjUwMy0xLjUyMyAxLjUwM2ExLjUxMyAxLjUxMyAwIDAgMS0xLjUyNC0xLjUwM2MwLS44My42ODItMS41MDMgMS41MjQtMS41MDMuODQxIDAgMS41MjMuNjczIDEuNTIzIDEuNTAzek0yMi4yOTggMzIuMjM4YzAgLjgzLS42ODIgMS41MDMtMS41MjQgMS41MDNhMS41MTQgMS41MTQgMCAwIDEtMS41MjQtMS41MDNjMC0uODMuNjgzLTEuNTAzIDEuNTI0LTEuNTAzLjg0MiAwIDEuNTI0LjY3MyAxLjUyNCAxLjUwM3pNMTAuODcgMzYuNzQ3YzAgLjgzLS42ODIgMS41MDMtMS41MjQgMS41MDNhMS41MTQgMS41MTQgMCAwIDEtMS41MjMtMS41MDNjMC0uODMuNjgyLTEuNTAzIDEuNTIzLTEuNTAzLjg0MiAwIDEuNTI0LjY3MyAxLjUyNCAxLjUwM3oiIGZpbGw9IiNCNzkyRTQiLz4KICAgIDxwYXRoIGQ9Ik0yNy42MyAzLjAwNmMwIDEuNjYtMS4zNjQgMy4wMDYtMy4wNDcgMy4wMDZzLTMuMDQ4LTEuMzQ2LTMuMDQ4LTMuMDA2QzIxLjUzNSAxLjM0NiAyMi45IDAgMjQuNTgzIDBzMy4wNDcgMS4zNDYgMy4wNDcgMy4wMDZ6IiBmaWxsPSIjOEU1OUNGIi8+CiAgICA8cGF0aCBkPSJNMTUuNDQgMi44OGMwIC44My0uNjgyIDEuNTA0LTEuNTI0IDEuNTA0YTEuNTE0IDEuNTE0IDAgMCAxLTEuNTIzLTEuNTAzYzAtLjgzLjY4Mi0xLjUwMyAxLjUyMy0xLjUwMy44NDIgMCAxLjUyNC42NzMgMS41MjQgMS41MDN6IiBmaWxsPSIjQjc5MkU0Ii8+CiAgICA8cGF0aCBkPSJNMTIuMzkzIDkuNjQ0YzAgMS4yNDUtMS4wMjMgMi4yNTUtMi4yODUgMi4yNTUtMS4yNjIgMC0yLjI4NS0xLjAxLTIuMjg1LTIuMjU1IDAtMS4yNDUgMS4wMjMtMi4yNTQgMi4yODUtMi4yNTQgMS4yNjIgMCAyLjI4NSAxLjAxIDIuMjg1IDIuMjU0eiIgZmlsbD0iIzAyN0FEQSIvPgogICAgPHBhdGggZD0iTTI2Ljg2OCAyMC45NjZoOS4xNDJ2MS41MDNoLTkuMTQydi0xLjUwM3oiIGZpbGw9IiMwMDAiLz4KICAgIDxwYXRoIGQ9Ik0yNi44NjggMjAuOTY2aDkuMTQydjEuNTAzaC05LjE0MnYtMS41MDN6IiBmaWxsPSIjQ0I5RTc4Ii8+CiAgICA8cGF0aCBkPSJNMjYuODY4IDIwLjk2Nmg2Ljg1N3YxLjUwM2gtNi44NTd2LTEuNTAzek0yOS4xNTQgMjMuOTcyaDQuNTd2MS41MDNoLTQuNTd2LTEuNTAzeiIgZmlsbD0iI0NCOUU3OCIvPgogICAgPHBhdGggZD0iTTI5LjE1NCAyMy45NzJIMzIuMnYxLjUwM2gtMy4wNDd2LTEuNTAzek0xMS42MzEgMTQuOTU0aDEyLjE5djEuNTAzSDExLjYzdi0xLjUwM3oiIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0xMS42MzEgMTQuOTU0aDcuNjE5djEuNTAzSDExLjYzdi0xLjUwM3oiIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0yMS41MzUgMzguMjVjMC0uNDE2LjMzNi0uNzUyLjc1MS0uNzUyaC4wMjFhLjc1MS43NTEgMCAxIDEgMCAxLjUwM2gtLjAyYS43NTEuNzUxIDAgMCAxLS43NTItLjc1MnpNMjAuMDEyIDM2Ljc0N2MwLS40MTUuMzM2LS43NTIuNzUxLS43NTJoLjAyMWEuNzUxLjc1MSAwIDEgMSAwIDEuNTAzaC0uMDJhLjc1MS43NTEgMCAwIDEtLjc1Mi0uNzUxek0xOC40ODggMzguMjVjMC0uNDE2LjMzNy0uNzUyLjc1Mi0uNzUyaC4wMmEuNzUxLjc1MSAwIDEgMSAwIDEuNTAzaC0uMDJhLjc1MS43NTEgMCAwIDEtLjc1Mi0uNzUyek0xMi4zOTMgMzEuNDg3YzAtLjQxNS4zMzctLjc1Mi43NTItLjc1MmguMDJhLjc1MS43NTEgMCAxIDEgMCAxLjUwM2gtLjAyYS43NTEuNzUxIDAgMCAxLS43NTItLjc1MXoiIGZpbGw9IiNCNzkyRTQiLz4KPC9zdmc+Cg=="/> </div><div class="content"><div class="title"></div><div class="text"></div><div class="global-notification-buttons"><button class="button-secondary hide"></button><button class="button-primary hide"></button></div></div></div>',prototype:{title:"We have chosen you as a beta tester!",text:"We are working on improving your experience. We are testing <b>{{experimentName}}</b> and we would like for your to try it!",buttons:{close:null,primary:null,secondary:null},init:function(e){var t=this;Widget.prototype.init.call(t,e),t.experiment||(t.experiment="",console.warn("GlobalNotification: experiment is not defined.")),t.element.find(".title").text(t.title),t.element.find(".text").html(t.text.replace("{{experimentName}}",t.experiment)),t._setButtons(),t._bindEvents()},_setButtons:function(){var e=this;e.buttons.close=e.element.find(".close-cross"),e.primary&&(e.buttons.primary=e.element.find(".button-primary"),e.buttons.primary.html(e.primary).removeClass("hide")),e.secondary&&(e.buttons.secondary=e.element.find(".button-secondary"),e.buttons.secondary.html(e.secondary).removeClass("hide"))},_bindEvents:function(){var e=this;e.buttons.close.on("click",Utils.bindFn(this)(this.hide)),e.buttons.primary&&e.buttons.primary.on("click",function(){e.dispatch("primary")}),e.buttons.secondary&&e.buttons.secondary.on("click",function(){e.dispatch("secondary")})},_unbindEvents:function(){this.buttons.close.off("click"),this.buttons.primary&&this.buttons.primary.off("click"),this.buttons.secondary&&this.buttons.secondary.off("click")},_isHidden:function(){return this.element.get(0).classList.contains("hide")},show:function(e){var t=this;t._isHidden()!==!1&&(t.element.removeClass("hide"),Utils.promisifyEventBuilder(t.element)("transitionend").then(Utils.bindFn(t)(t._show)).then(Utils.bindFn(t)(t._autoclose(e))))},_show:function(){this.dispatch("show")},_autoclose:function(e){var t=this;return function(){return e?P.delay(e).then(Utils.bindFn(t)(t.hide)):void 0}},hide:function(){var e=this;e._isHidden()!==!0&&(e.element.addClass("hide"),Utils.promisifyEventBuilder(e.element)("transitionend").then(function(){e.dispatch("hide")}))},destroy:function(){this._unbindEvents(),Widget.prototype.destroy.call(this)}}}),Class(UI,"BaseNotification").inherits(Widget)({html:'<div class="base-notification hide"><div class="arrow"></div><div class="close-cross"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC44NCAxMC4xNyA1LjE2IDYuNDljLS4xODEtLjE4Mi0uMjEyLS40NDQtLjA3LS41ODZsLjY0NC0uNjQ0Yy4xNDItLjE0Mi40MDQtLjExLjU4NS4wN0wxMCA5LjAxMWwzLjY4LTMuNjhjLjE4Mi0uMTgyLjQ0NC0uMjEzLjU4Ni0uMDcxbC42NDQuNjQ0Yy4xNDIuMTQyLjExMS40MDQtLjA3LjU4NWwtMy42OCAzLjY4MSAzLjY4IDMuNjgyYy4xODIuMTguMjEzLjQ0My4wNy41ODVsLS42NDMuNjQ0Yy0uMTQyLjE0Mi0uNDA0LjExLS41ODUtLjA3TDEwIDExLjMyOWwtMy42ODIgMy42ODJjLS4xOC4xOC0uNDQzLjIxMi0uNTg1LjA3bC0uNjQ0LS42NDRjLS4xNDItLjE0Mi0uMTEtLjQwNC4wNy0uNTg1bDMuNjgyLTMuNjgyeiIgZmlsbD0iI0VGRUZFRiIvPgo8L3N2Zz4K"/></div><div class="body"></div></div>',
TYPE:{fixed:"fixed",absolute:"absolute"},prototype:{windowWidth:0,translate:0,margin:0,follow:!0,topColor:"transparent",bottomColor:"transparent",arrowElement:null,buttons:null,mobileBreakpointLg:414,resizeTimeHandler:null,_resizeHandlerReference:null,_type:"absolute",_initialTargetOffset:null,init:function(e){Widget.prototype.init.call(this,e),this.buttons={close:null},this._validateConfiguration(e)!==!1&&(this.windowWidth=this._getWindowWidth(),this.arrowElement=this.element.find("div.arrow"),this.buttons.close=this.element.find(".close-cross"),this._type=this.constructor.TYPE.absolute,e.cssClass&&this.element.addClass(e.cssClass),this._setColors(),this._bindEvents(),this._setContents())},_getWindowWidth:function(){return window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth},_validateConfiguration:function(e){return e?e.target?e.contents?!0:(console.warn("BaseNotification: contents is not defined."),!1):(console.warn("BaseNotification: target is not defined."),!1):(console.warn("BaseNotification: configuration is missing."),!1)},_setCssVariable:function(e,t){this.element.get(0).style.setProperty(e,t)},_setColors:function(){this._setCssVariable("--top-color",this.topColor),this._setCssVariable("--bottom-color",this.bottomColor),this.element.css("background","linear-gradient(to bottom, var(--top-color), var(--bottom-color))")},_bindEvents:function(){var e=this;e.bind("render",function(){e._setPosition()}),e.buttons.close.on("click",Utils.bindFn(e)(e.hide)),e._resizeHandlerReference=Utils.bindFn(e)(e._resizeHandler),window.addEventListener("resize",e._resizeHandlerReference),e._scrollHandlerReference=Utils.bindFn(e)(e._scrollHandler),window.addEventListener("scroll",e._scrollHandlerReference)},_unbindEvents:function(){this.unbind("render"),this.buttons.close.off("click"),window.removeEventListener("resize",this._resizeHandlerReference)},_setContents:function(){this.element.find(".body").html(this.contents)},_resizeHandler:function(){var e=this,t=e._getWindowWidth();e.windowWidth!==t&&(e.windowWidth=t,clearTimeout(e.resizeTimeHandler),e.resizeTimeHandler=setTimeout(Utils.bindFn(e)(e._setPosition),200))},_setNotificationFixed:function(){var e=this;e._type=e.constructor.TYPE.fixed,e.getElement().css("position","fixed")},_setPosition:function(){var e=this;e.placement=e.placement?e._capitalize(e.placement):"Top",e.element.addClass(e.placement.toLowerCase()),e._setArrowPosition(),e["_set"+e.placement+"Position"]()},_setArrowPosition:function(){var e=this._getTranslate();this._setCssVariable("--arrow-position","calc(50% - "+e+"px)")},_getTranslate:function(){if(isPlacementTopOrBottom="Top"===this.placement||"Bottom"===this.placement,this.follow===!1)return 0;var e=this._getWindowWidth();if(isPlacementTopOrBottom&&e<=this.mobileBreakpointLg){var t=this._getOffset();return-1*(t.left+this.target.prop("offsetWidth")/2-e/2)}return this.translate},_capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},_getNewTopPosition:function(){var e=this._getOffset();return{top:e.top-this.element.prop("offsetHeight")-this.margin+"px",left:e.left+this.target.prop("offsetWidth")/2+this.translate+"px",transform:"translateX(-50%)"}},_getNewRightPosition:function(){var e=this._getOffset();return{top:e.top+this.target.prop("offsetHeight")/2+this.translate+"px",left:e.left+this.target.prop("offsetWidth")+this.margin+"px",transform:"translateY(-50%)"}},_getNewBottomPosition:function(){var e=this._getOffset();return{top:e.top+this.target.prop("offsetHeight")+this.margin+"px",left:e.left+this.target.prop("offsetWidth")/2+this.translate+"px",transform:"translateX(-50%)"}},_getNewLeftPosition:function(){var e=this._getOffset();return{top:e.top+this.target.prop("offsetHeight")/2+this.translate+"px",left:e.left-this.element.prop("offsetWidth")-this.margin+"px",transform:"translateY(-50%)"}},_setTopPosition:function(){this.arrowElement.css("background","var(--bottom-color)"),this.element.css(this._getNewTopPosition())},_setRightPosition:function(){this.arrowElement.css("background","linear-gradient(to bottom, var(--top-color), var(--bottom-color))"),this.element.css(this._getNewRightPosition())},_setBottomPosition:function(){this.arrowElement.css("background","var(--top-color)"),this.element.css(this._getNewBottomPosition())},_setLeftPosition:function(){this.arrowElement.css("background","linear-gradient(to bottom, var(--top-color), var(--bottom-color))"),this.element.css(this._getNewLeftPosition())},show:function(){this.element.removeClass("hide"),this.dispatch("show")},hide:function(){this.element.addClass("hide"),this.dispatch("hide")},destroy:function(){this._unbindEvents(),Widget.prototype.destroy.call(this)},_isNotificationPositionFixed:function(){var e=this.target.offset();return e.top!==this._initialTargetOffset.top||e.bottom!==this._initialTargetOffset.bottom},_scrollHandler:function(){var e=this,t=Boolean(e._initialTargetOffset)===!1;t&&(e._initialTargetOffset=e.target.offset()),e._isNotificationPositionFixed()&&(e._setNotificationFixed(),e._setPosition(),window.removeEventListener("scroll",e._scrollHandlerReference))},_getOffset:function(){var e=this.target.offset();return this._type===this.constructor.TYPE.fixed&&(e=this.target.position()),e}}}),Module(UI.BaseNotification,"Popover")({prototype:{_setButtons:function(){Boolean(this.primary)===!0&&(this.buttons.primary=this.element.find(".button-primary"),this.buttons.primary.html(this.primary).removeClass("hide")),Boolean(this.secondary)===!0&&(this.buttons.secondary=this.element.find(".button-secondary"),this.buttons.secondary.html(this.secondary).removeClass("hide")),this._bindButtonsEvents()},_bindButtonsEvents:function(){var e=this;e.buttons.primary&&e.buttons.primary.on("click",function(){e.dispatch("primary")}),e.buttons.secondary&&e.buttons.secondary.on("click",function(){e.dispatch("secondary")})},_unbindButtonEvents:function(){this.buttons.primary&&this.buttons.primary.off("click"),this.buttons.secondary&&this.buttons.secondary.off("click")},destroy:function(){this._unbindButtonEvents(),UI.BaseNotification.prototype.destroy.call(this)}}}),Class(UI,"TooltipNotification").inherits(UI.BaseNotification).includes(UI.BaseNotification.Popover)({prototype:{tooltipNotificationTemplate:'<div class="illustration"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDQiIGhlaWdodD0iNDQiIHZpZXdCb3g9IjAgMCA0NCA0NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik00Ljk5IDIyLjU0NmMyLjk3IDQuODgzIDIuODUzIDcuODE0IDIuMjgzIDEyLjYzOC0uNTcxIDQuODI0LjM5IDYuOTMzIDIuMjgzIDguMTAzIDIuNDUxIDEuNTE3IDYuMDU2LjY3NSA4LjA4Ni0zLjEyMSAyLjAyOS0zLjc5NyAzLjE3LTcuMDc2IDkuMzItNS4zMzggNi4xNTEgMS43MzggMTEuMDkzLjA0IDEzLjQ0LTQuMjA3IDIuMzQ1LTQuMjQ3IDIuNTQ4LTExLjc4NS0yLjQwNS0xNC45NjItNC45NS0zLjE3Ni05LjM4NC0uMjU2LTE2LjkzLTYuNDMxQzEzLjUyIDMuMDUzIDcuMTc1IDQuMzQ4IDQuMTk5IDcuNjgzYy0yLjU3MiAyLjg4OC0zLjU1NCA3LjcyLjc5IDE0Ljg2M3oiIGZpbGw9IiM4OTg5Q0EiLz4KICAgIDxwYXRoIGQ9Ik0xNS40NCAxMi43VjkuNjkyaDQuNTcxVjEyLjciIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0xNS40NCAxMi43VjkuNjkyaDMuMDQ4VjEyLjciIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0yNy42MyA0MS4yNTZjMS42ODMgMCAzLjA0Ny0xLjM0NiAzLjA0Ny0zLjAwNnYtLjczNmMwLS41MDMtLjEyOC0uOTk4LS4zNzEtMS40NGwtOC43Ny0xNS44NTlWMTIuN2gtNy42MTJ2Ny41MTVsLTguNzcgMTUuODZhMi45OCAyLjk4IDAgMCAwLS4zNzIgMS40Mzl2LjczNmMwIDEuNjYgMS4zNjUgMy4wMDYgMy4wNDggMy4wMDZoMTkuOHoiIGZpbGw9IiNEOUQ3RDgiLz4KICAgIDxwYXRoIGQ9Ik0yOC4zOTIgMzguMjV2LS43MzZjMC0uNTAzLS4xMjgtLjk5OC0uMzcyLTEuNDRsLTguNzctMTUuODU5VjEyLjdoLTUuMzI2djcuNTE1bC04Ljc3IDE1Ljg2YTIuOTggMi45OCAwIDAgMC0uMzcyIDEuNDM5di43MzZjMCAxLjY2IDEuMzY1IDMuMDA2IDMuMDQ4IDMuMDA2aDE3LjUxNWMxLjY4MyAwIDMuMDQ3LTEuMzQ2IDMuMDQ3LTMuMDA2eiIgZmlsbD0iI0Q5RDdEOCIvPgogICAgPHBhdGggZD0iTTMwLjY3NyAzOC4yNXYtLjczNmMwLS41MDMtLjEyOC0uOTk4LS4zNzEtMS40NGwtNS40NDYtOS44NDdoLTEuMTdjLS40MDQgMC0uNzkyLjE1OC0xLjA3Ny40NGwtLjYzMS42MjJjLS4yODYuMjgyLS42NzQuNDQtMS4wNzguNDRoLS4yNmMtLjQwNSAwLS43OTItLjE1OC0xLjA3OC0uNDRsLS42My0uNjIyYTEuNTM3IDEuNTM3IDAgMCAwLTEuMDc5LS40NGgtLjI2Yy0uNDA1IDAtLjc5My4xNTgtMS4wNzguNDRsLS42MzEuNjIyYy0uMjg3LjI4Mi0uNjc0LjQ0LTEuMDc4LjQ0aC0uMjYxYy0uNDA0IDAtLjc5Mi0uMTU4LTEuMDc4LS40NGwtLjYzLS42MjJhMS41MzcgMS41MzcgMCAwIDAtMS4wNzktLjQ0SDEwLjZsLTUuNDQ2IDkuODQ4YTIuOTggMi45OCAwIDAgMC0uMzcyIDEuNDM5di43MzZjMCAxLjY2IDEuMzY1IDMuMDA2IDMuMDQ4IDMuMDA2aDE5LjhjMS42ODMgMCAzLjA0Ny0xLjM0NiAzLjA0Ny0zLjAwNnoiIGZpbGw9IiM4RTU5Q0YiLz4KICAgIDxwYXRoIGQ9Ik0yOS4xNTQgMjEuNzE4djYuNDA1Yy0yLjY2Mi45MjktNC41NzIgMy40MjYtNC41NzIgNi4zNyAwIDMuNzM2IDMuMDcgNi43NjMgNi44NTcgNi43NjMgMy43ODcgMCA2Ljg1Ny0zLjAyNyA2Ljg1Ny02Ljc2MyAwLTIuOTQ0LTEuOTEtNS40NDEtNC41NzEtNi4zN3YtNi40MDUiIGZpbGw9IiNEOUQ3RDgiLz4KICAgIDxwYXRoIGQ9Ik0yNC41ODIgMzQuNDkzYzAgMy40OCAyLjY2OCA2LjM0NCA2LjA5NSA2LjcxOSAzLjQyOC0uMzc1IDYuMDk1LTMuMjM4IDYuMDk1LTYuNzIgMC0yLjk0My0xLjkxLTUuNDQtNC41NzEtNi4zN3YtNi40MDRoLTMuMDQ3djYuNDA1Yy0yLjY2Mi45MjktNC41NzIgMy40MjYtNC41NzIgNi4zN3oiIGZpbGw9IiNEOUQ3RDgiLz4KICAgIDxwYXRoIGQ9Ik0zOC4yOTYgMzQuNDkzYzAtLjI1NS0uMDItLjUwNS0uMDQ4LS43NTJoLS44NDVjLS40MDQgMC0uNzkyLjE1OS0xLjA3OC40NGwtLjYzLjYyM2MtLjI4Ni4yODItLjY3NC40NC0xLjA3OC40NGgtLjI2Yy0uNDA1IDAtLjc5Mi0uMTU4LTEuMDc4LS40NGwtLjYzMS0uNjIzYTEuNTM3IDEuNTM3IDAgMCAwLTEuMDc4LS40NGgtLjI2MWMtLjQwNCAwLS43OTIuMTU5LTEuMDc3LjQ0bC0uNjMxLjYyM2MtLjI4Ny4yODItLjY3NC40NC0xLjA3OC40NGgtLjI2MWMtLjQwNCAwLS43OTItLjE1OC0xLjA3OC0uNDRsLS42My0uNjIzYTEuNTM3IDEuNTM3IDAgMCAwLTEuMDc5LS40NGgtLjg0NWE2LjU4OCA2LjU4OCAwIDAgMC0uMDQ3Ljc1MmMwIDMuNzM1IDMuMDY5IDYuNzYzIDYuODU2IDYuNzYzczYuODU3LTMuMDI4IDYuODU3LTYuNzYzeiIgZmlsbD0iIzM0OTJERSIvPgogICAgPHBhdGggZD0iTTE2Ljk2NCAzNS4yNDRjMCAuODMtLjY4MiAxLjUwMy0xLjUyMyAxLjUwM2ExLjUxMyAxLjUxMyAwIDAgMS0xLjUyNC0xLjUwM2MwLS44My42ODItMS41MDMgMS41MjQtMS41MDMuODQxIDAgMS41MjMuNjczIDEuNTIzIDEuNTAzek0yMi4yOTggMzIuMjM4YzAgLjgzLS42ODIgMS41MDMtMS41MjQgMS41MDNhMS41MTQgMS41MTQgMCAwIDEtMS41MjQtMS41MDNjMC0uODMuNjgzLTEuNTAzIDEuNTI0LTEuNTAzLjg0MiAwIDEuNTI0LjY3MyAxLjUyNCAxLjUwM3pNMTAuODcgMzYuNzQ3YzAgLjgzLS42ODIgMS41MDMtMS41MjQgMS41MDNhMS41MTQgMS41MTQgMCAwIDEtMS41MjMtMS41MDNjMC0uODMuNjgyLTEuNTAzIDEuNTIzLTEuNTAzLjg0MiAwIDEuNTI0LjY3MyAxLjUyNCAxLjUwM3oiIGZpbGw9IiNCNzkyRTQiLz4KICAgIDxwYXRoIGQ9Ik0yNy42MyAzLjAwNmMwIDEuNjYtMS4zNjQgMy4wMDYtMy4wNDcgMy4wMDZzLTMuMDQ4LTEuMzQ2LTMuMDQ4LTMuMDA2QzIxLjUzNSAxLjM0NiAyMi45IDAgMjQuNTgzIDBzMy4wNDcgMS4zNDYgMy4wNDcgMy4wMDZ6IiBmaWxsPSIjOEU1OUNGIi8+CiAgICA8cGF0aCBkPSJNMTUuNDQgMi44OGMwIC44My0uNjgyIDEuNTA0LTEuNTI0IDEuNTA0YTEuNTE0IDEuNTE0IDAgMCAxLTEuNTIzLTEuNTAzYzAtLjgzLjY4Mi0xLjUwMyAxLjUyMy0xLjUwMy44NDIgMCAxLjUyNC42NzMgMS41MjQgMS41MDN6IiBmaWxsPSIjQjc5MkU0Ii8+CiAgICA8cGF0aCBkPSJNMTIuMzkzIDkuNjQ0YzAgMS4yNDUtMS4wMjMgMi4yNTUtMi4yODUgMi4yNTUtMS4yNjIgMC0yLjI4NS0xLjAxLTIuMjg1LTIuMjU1IDAtMS4yNDUgMS4wMjMtMi4yNTQgMi4yODUtMi4yNTQgMS4yNjIgMCAyLjI4NSAxLjAxIDIuMjg1IDIuMjU0eiIgZmlsbD0iIzAyN0FEQSIvPgogICAgPHBhdGggZD0iTTI2Ljg2OCAyMC45NjZoOS4xNDJ2MS41MDNoLTkuMTQydi0xLjUwM3oiIGZpbGw9IiMwMDAiLz4KICAgIDxwYXRoIGQ9Ik0yNi44NjggMjAuOTY2aDkuMTQydjEuNTAzaC05LjE0MnYtMS41MDN6IiBmaWxsPSIjQ0I5RTc4Ii8+CiAgICA8cGF0aCBkPSJNMjYuODY4IDIwLjk2Nmg2Ljg1N3YxLjUwM2gtNi44NTd2LTEuNTAzek0yOS4xNTQgMjMuOTcyaDQuNTd2MS41MDNoLTQuNTd2LTEuNTAzeiIgZmlsbD0iI0NCOUU3OCIvPgogICAgPHBhdGggZD0iTTI5LjE1NCAyMy45NzJIMzIuMnYxLjUwM2gtMy4wNDd2LTEuNTAzek0xMS42MzEgMTQuOTU0aDEyLjE5djEuNTAzSDExLjYzdi0xLjUwM3oiIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0xMS42MzEgMTQuOTU0aDcuNjE5djEuNTAzSDExLjYzdi0xLjUwM3oiIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0yMS41MzUgMzguMjVjMC0uNDE2LjMzNi0uNzUyLjc1MS0uNzUyaC4wMjFhLjc1MS43NTEgMCAxIDEgMCAxLjUwM2gtLjAyYS43NTEuNzUxIDAgMCAxLS43NTItLjc1MnpNMjAuMDEyIDM2Ljc0N2MwLS40MTUuMzM2LS43NTIuNzUxLS43NTJoLjAyMWEuNzUxLjc1MSAwIDEgMSAwIDEuNTAzaC0uMDJhLjc1MS43NTEgMCAwIDEtLjc1Mi0uNzUxek0xOC40ODggMzguMjVjMC0uNDE2LjMzNy0uNzUyLjc1Mi0uNzUyaC4wMmEuNzUxLjc1MSAwIDEgMSAwIDEuNTAzaC0uMDJhLjc1MS43NTEgMCAwIDEtLjc1Mi0uNzUyek0xMi4zOTMgMzEuNDg3YzAtLjQxNS4zMzctLjc1Mi43NTItLjc1MmguMDJhLjc1MS43NTEgMCAxIDEgMCAxLjUwM2gtLjAyYS43NTEuNzUxIDAgMCAxLS43NTItLjc1MXoiIGZpbGw9IiNCNzkyRTQiLz4KPC9zdmc+Cg=="/> </div><div class="content"><div class="title"></div><div class="text">We are working on improving your experience. We are testing <b>{{experimentName}}</b> and we would like for your to try it!</div><div class="tooltip-notification-buttons"><button type="button" class="button-secondary hide"></button><button type="button" class="button-primary hide"></button></div></div>',translate:0,follow:!0,cssClass:"tooltip-notification popover-gradient",margin:10,topColor:"#8e59cf",bottomColor:"#52b8d8",init:function(e){this._validateConfiguration(e)!==!1&&(e.contents=this.tooltipNotificationTemplate,UI.BaseNotification.prototype.init.call(this,e),this._setExperimentName(),this._setButtons())},_validateConfiguration:function(e){return e?e.target?!0:(console.warn("TooltipNotification: target is not defined."),!1):(console.warn("TooltipNotification: configuration is missing."),!1)},_setExperimentName:function(){var e=this;return Boolean(e.experiment)===!1?e.element.find(".text").html(function(e,t){return t.replace("{{experimentName}}","")}):e.element.find(".text").html(function(t,i){return i.replace("{{experimentName}}",e.experiment)})}}}),Class(UI,"NewFeatureNotification").inherits(UI.BaseNotification).includes(UI.BaseNotification.Popover)({NEW_FEATURE_ONBOARDING_WIDTH:332,prototype:{newFeatureNotificationTemplate:'<div class="header"><div class="illustration"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjciIHZpZXdCb3g9IjAgMCAyNiAyNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik03LjQ4MyAyLjY1N2ExIDEgMCAwIDEgMS43OSAwbDEuNzQgMy40OTVhMSAxIDAgMCAwIC40NS40NWwzLjQ5NCAxLjczOWExIDEgMCAwIDEgMCAxLjc5bC0zLjQ5NSAxLjc0YTEgMSAwIDAgMC0uNDUuNDVsLTEuNzM5IDMuNDk1YTEgMSAwIDAgMS0xLjc5IDBsLTEuNzQtMy40OTVhMSAxIDAgMCAwLS40NS0uNDVsLTMuNDk1LTEuNzRhMSAxIDAgMCAxIDAtMS43OWwzLjQ5NS0xLjc0YTEgMSAwIDAgMCAuNDUtLjQ1bDEuNzQtMy40OTR6TTE4Ljc1IDEwLjE2OGExIDEgMCAwIDEgMS43OSAwbDEuMDY3IDIuMTQ0YTEgMSAwIDAgMCAuNDUuNDVsMi4xNDUgMS4wNjdhMSAxIDAgMCAxIDAgMS43OWwtMi4xNDUgMS4wNjlhMSAxIDAgMCAwLS40NS40NWwtMS4wNjcgMi4xNDRhMSAxIDAgMCAxLTEuNzkgMGwtMS4wNjgtMi4xNDVhMSAxIDAgMCAwLS40NS0uNDVsLTIuMTQ1LTEuMDY3YTEgMSAwIDAgMSAwLTEuNzlsMi4xNDUtMS4wNjhhMSAxIDAgMCAwIC40NS0uNDVsMS4wNjctMi4xNDR6TTkuMjE2IDE4LjgzNWExIDEgMCAwIDEgMS43OSAwbC41ODggMS4xOGExIDEgMCAwIDAgLjQ1LjQ1bDEuMTguNTg3YTEgMSAwIDAgMSAwIDEuNzlsLTEuMTguNTg4YTEgMSAwIDAgMC0uNDUuNDVsLS41ODggMS4xOGExIDEgMCAwIDEtMS43OSAwbC0uNTg4LTEuMThhMSAxIDAgMCAwLS40NS0uNDVsLTEuMTgtLjU4N2ExIDEgMCAwIDEgMC0xLjc5MWwxLjE4LS41ODdhMSAxIDAgMCAwIC40NS0uNDVsLjU4OC0xLjE4eiIgZmlsbD0iI0ZGQ0QzOCIvPgo8L3N2Zz4K"/></div><div class="title">New Feature</div></div><div class="content"><div class="message-body"></div><div class="new-feature-buttons"><button type="button" class="button-secondary hide"></button><button type="button" class="button-primary hide"></button></div></div>',translate:0,follow:!0,cssClass:"new-feature-notification popover-gradient",margin:10,topColor:"#7724da",bottomColor:"#7724da",mobileBreakpointLg:320,_desktopScrollAreaOffset:40,init:function(e){this._validateConfiguration(e)!==!1&&(Helpers.App.isMobile()&&(this._desktopScrollAreaOffset=0),e.contents=this.newFeatureNotificationTemplate,UI.BaseNotification.prototype.init.call(this,e),this._setFeatureMessage(),this._setButtons())},_validateConfiguration:function(e){return e?e.target?!0:(console.warn("NewFeatureNotification: target is not defined."),!1):(console.warn("NewFeatureNotification: configuration is missing."),!1)},_setFeatureMessage:function(){Boolean(this.message)!==!1&&this.element.find(".message-body").html(this.message)},_updateTranslateOnNegativePosition:function(e,t){var i=0>t&&e.left<this._getWindowWidth()/2;i&&(this.translate=Math.abs(t),this._setArrowPosition())},_isOffsetExceedingViewport:function(e,t){return t+this.constructor.NEW_FEATURE_ONBOARDING_WIDTH+this._desktopScrollAreaOffset>this._getWindowWidth()-this._desktopScrollAreaOffset&&e.left>this._getWindowWidth()/2},_updateTranslateOnExceedingViewport:function(e,t){if(this._isOffsetExceedingViewport(e,t)){var i=-(t+this.constructor.NEW_FEATURE_ONBOARDING_WIDTH-this._getWindowWidth()+this.target.prop("offsetWidth"));this.translate=i,this._setArrowPosition()}},_updateTranslatePosition:function(){var e=this._getOffset(),t=e.left-Math.floor(this.constructor.NEW_FEATURE_ONBOARDING_WIDTH/2);this._updateTranslateOnNegativePosition(e,t),this._updateTranslateOnExceedingViewport(e,t)},_getNewBottomPosition:function(){var e=this._getOffset();this._updateTranslatePosition();var t=e.left+this.target.prop("offsetWidth")/2+this.translate;return{top:e.top+this.target.prop("offsetHeight")+this.margin+"px",left:t+"px",transform:"translateX(-50%)"}}}}),Class(UI,"SurveyNotification").inherits(Widget).includes(GenericDestroySupport)({html:'<div class="survey-alert bottom right">      <div class="alert-body">        <div class="close-survey">          <span class="close-btn"></span>        </div>       <div class="header">          <div class="title">            Win a $200 gift card!          </div>        </div>        <div class="body">          Complete our survey for an opportunity to win 1 of 5 $200 USD gift cards.        </div>        <div class="actions">          <a href="#" target="_blank" class="survey-link">Start Survey</a>        </div>        </div>    </div>',prototype:{userId:null,_link:"https://envato.qualtrics.com/jfe/form/SV_ebxlX5F36PZdLim?reference={userId}",init:function(e){Widget.prototype.init.call(this,e),this.$closeBtn=this.element.find(".close-survey"),this.$surveyLink=this.element.find(".survey-link"),this.setLink(this._link.replace("{userId}",e.userId)),this._bindEvents()},_bindEvents:function(){this.$closeBtn.on("click",Utils.bindFn(this)(this.destroy)),this.$surveyLink.on("click",Utils.bindFn(this)(this.destroy))},destroy:function(){this.dispatch("close"),this.genericDestroy()},setLink:function(e){this.$surveyLink.attr("href",e)}}}),Class(UI,"ButtonWidget").inherits(Widget).includes(BubblingSupport)({html:"<button></button>",content:null,prototype:{init:function(e){Widget.prototype.init.call(this,e),this.setContent(e.content),this.element.bind("click",Utils.bindFn(this)(this._clickEventHandler))},_clickEventHandler:function(){this.dispatch("click")},setContent:function(e){return this.element.html(e),this},disable:function(){this.element.attr("disabled",!0)},enable:function(){this.element.attr("disabled",!1)},isDisabled:function(){return"disabled"===this.element.attr("disabled")}}}),Class(UI,"DialogTopbar").inherits(Widget).includes(BubblingSupport)({html:'<div class="component dialog-topbar"></div>',prototype:{closeButton:null,init:function(e){Widget.prototype.init.call(this,e),e.showDragIcon&&this.element.append($('<div class="ic-drag"></div>')),this.closeButton=new UI.ButtonWidget({name:"closeButton",cssClass:"close-button"}),this.closeButton.bind("click",this._closeButtonClickHandler.bind(this)),this.element.append(this.closeButton.element)},_closeButtonClickHandler:function(){this.dispatch("close")}}}),Class(UI,"Headerstrip").inherits(Widget).includes(BubblingSupport)({prototype:{$cta:null,$closeButton:null,$pricingButton:null,saleStartDate:null,saleEndDate:null,init:function(e){Widget.prototype.init.call(this,e),this.$cta=this.getElement().find(".cta"),this.$closeButton=this.getElement().find(".close-button"),this.$repeatableText=this.getElement().find(".repeatable"),this.$holidayTimer=this.getElement().find(".hd-countdown-timer");var t=document.querySelector("body");window.is_july_fourth_sale&&(this._setJulyBindings(),t.classList.add("july-fourth-campaign")),window.is_cyberweek&&this._setCyberWeekBindings(),window.is_holiday_sale&&(this._holidayCampaignDaySelector(),this._holidayShowCountdown(),this._setHolidayBindings()),this.updateSubscriptionStatus()},_setCtaClickHandler:function(e){var t=this;t.$cta.bind("click",e)},_setCloseClickHandler:function(e){var t=this;t.$closeButton.bind("click",e)},_setCyberWeekBindings:function(){var e=this;this._setCloseClickHandler(function(){Helpers.GlobalEventTracker._baseSend("Cyberweekheaderstrip:closed"),e._cyberweekHeaderstripClosed()})},_setHolidayBindings:function(){var e=this;this._setCloseClickHandler(function(){Helpers.GlobalEventTracker._baseSend("Christmasheaderstrip:closed"),e._holidayHeaderstripClosed()}),this._setCtaClickHandler(function(){Helpers.GlobalEventTracker._baseSend("Christmasheaderstrip:clicked"),e._holidayHeaderstripClicked()}),this.saleCountdown.bind("countdown.finished",function(){e.dispatch("countdown.finished")})},_cyberweekHeaderstripClosed:function(){Helpers.App.setCookie("CW_HS_closed","completed"),document.body.classList.remove("cyberweek-headerstrip-open"),this.getElement().hide()},_holidayHeaderstripClosed:function(){Helpers.App.setCookie("HD_HS_closed","completed"),document.body.classList.remove("holiday-headerstrip-open"),this.getElement().hide()},_holidayHeaderstripClicked:function(){var e=this._holidayGetSaleDay();"day5"==e&&(window.location.href="/c/mockups/stages/mockup-of-a-floor-pillow-placed-over-a-jute-mat-m30946"),"day6"==e&&(window.location.href="/c/mockups/stages/t-shirt-mockup-of-a-woman-with-a-grunge-outfit-featuring-a-graffiti-background-for-a-clothing-ad-m5681"),"day7"==e&&(window.location.href="/c/logos/stages/gaming-themed-logo-maker-featuring-a-retro-arcade-controller-5481"),"day8"==e&&(window.location.href="/c/mockups/stages/tiktok-themed-video-featuring-a-man-wearing-a-sweatshirt-and-a-dad-hat-6122v"),"day9"==e&&(window.location.href="/c/design-templates/stages/linkedin-cover-letter-template-for-a-fashion-designer-role-5772-el1")},_holidayShowCountdown:function(){var e=new Date,t=this.getElement().find(".hd-counterdown-container"),i='                                <div>                                    <div class="hd-countdown-timer">                                        {{hour_number}} : {{minute_number}} : {{second_number}}                                    </div>                                </div>';if(e.getDate()<=this.saleEndDate.getDate()&&t.length){var n=new UI.CountdownTimer({name:"saleCountdown",content:i,endDate:this.saleEndDate,refreshInterval:1}).render(t);this.appendChild(n),n.show()}},_holidayGetSaleDay:function(){var e=new URLSearchParams(window.location.search),t=new Date,i=window.location.search.length?e.get("saleDay"):"",n=new Date("December 5, 2022 10:00:00 GMT-06:00"),s=new Date("December 6, 2022 10:00:00 GMT-06:00"),r=new Date("December 7, 2022 10:00:00 GMT-06:00"),o=new Date("December 8, 2022 10:00:00 GMT-06:00"),a=new Date("December 9, 2022 10:00:00 GMT-06:00"),l=new Date("December 9, 2022 23:59:59 GMT-06:00");return i=i?i.toLowerCase():"",t.getTime()>n.getTime()&&t.getTime()<s.getTime()&&(i="day5"),t.getTime()>s.getTime()&&t.getTime()<r.getTime()&&(i="day6"),t.getTime()>r.getTime()&&t.getTime()<o.getTime()&&(i="day7"),t.getTime()>o.getTime()&&t.getTime()<a.getTime()&&(i="day8"),t.getTime()>a.getTime()&&t.getTime()<l.getTime()&&(i="day9"),i},_holidayCampaignDaySelector:function(){var e=this._holidayGetSaleDay();"day5"==e&&(this.saleEndDate=new Date("Dec 6, 2022 09:59 GMT-6")),"day6"==e&&(this.saleEndDate=new Date("Dec 7, 2022 09:59 GMT-6")),"day7"==e&&(this.saleEndDate=new Date("Dec 8, 2022 09:59 GMT-6")),"day8"==e&&(this.saleEndDate=new Date("Dec 9, 2022 09:59 GMT-6")),"day9"==e&&(this.saleEndDate=new Date("Dec 9, 2022 23:59 GMT-6"))},_setJulyBindings:function(){var e=this;e._setCtaClickHandler(function(){Helpers.GlobalEventTracker._baseSend("4thofJulyHeaderstrip:clicked"),e.$pricingButton.click()}),e._setCloseClickHandler(function(){Helpers.GlobalEventTracker._baseSend("4thofJulyHeaderstrip:closed"),document.body.classList.remove("july-fourth-campaign")})},updateSubscriptionStatus:function(){var e=Helpers.App.getSubscription();e!==!1&&(e.can_upgrade_to_annual||this.$cta.hide())}}}),Class("SalePopup").inherits(Widget)({html:'      <div class="sale-popup">        <button type="button" class="close">            <svg width="41" height="41" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg">                <path opacity="0.9" fill-rule="evenodd" clip-rule="evenodd" d="M20.5 41C31.8218 41 41 31.8218 41 20.5C41 9.17816 31.8218 0 20.5 0C9.17816 0 0 9.17816 0 20.5C0 31.8218 9.17816 41 20.5 41Z" fill="white"/>                <path fill-rule="evenodd" clip-rule="evenodd" d="M18.8225 20.5L13.4952 15.1727C13.2333 14.9108 13.1878 14.5315 13.3937 14.3256L14.3257 13.3936C14.5316 13.1878 14.9108 13.2332 15.1728 13.4952L20.5 18.8224L25.8272 13.4952C26.0892 13.2332 26.4684 13.1878 26.6743 13.3936L27.6063 14.3256C27.8122 14.5315 27.7668 14.9108 27.5048 15.1727L22.1776 20.5L27.5048 25.8272C27.7667 26.0891 27.8122 26.4684 27.6063 26.6743L26.6743 27.6062C26.4684 27.8121 26.0892 27.7667 25.8272 27.5047L20.5 22.1775L15.1728 27.5047C14.9108 27.7667 14.5316 27.8121 14.3257 27.6062L13.3937 26.6743C13.1878 26.4684 13.2333 26.0891 13.4952 25.8272L18.8225 20.5Z" fill="#303030"/>            </svg>        </button>            <div class="content">                <div class="template-image-wrapper">                    <img class="templates-image" src="https://placeitmarketing.s3.amazonaws.com/public/campaigns/popup_templates.png" alt="">                </div>                <div class="body-text">                    <h1><span style="color:#FF4055">Red</span>, White, & <span style="color:#30c1ff">Blue Savings</span></h1>                    <h2>Get a <span style="color:#30c1ff">15%</span> Discount on Your Annual Subscription</h2>                    <button class="cta-button">Subscribe Now</button>                </div>                <div class="illustration-wrapper">                    <img class="illustration" src="https://placeitmarketing.s3.amazonaws.com/public/campaigns/popup_illustration.svg" alt="Illustration of the Statue of Liberty\'s Hand">                </div>            </div>      </div>',prototype:{$closeBtn:null,$dealBtn:null,$mainImg:null,init:function(e){Widget.prototype.init.call(this,e),this.$closeBtn=this.getElement().find(".close"),this.$dealBtn=this.getElement().find(".cta-button"),this.$mainImg=this.getElement().find(".templates-image"),this._setCtabutton(),this._bindEvents()},activate:function(){this.$mainImg.complete!==!0&&this.$mainImg.bind("load",function(){this.getElement().addClass("show")}.bind(this))},_bindEvents:function(){this.$closeBtn.bind("click",function(){this.getElement().removeClass("show")}.bind(this)),this.$dealBtn.bind("click",function(){Helpers.GlobalEventTracker._baseSend("4thofJulyPopUp"),page.showSubscriptionModal()}.bind(this))},_setCtabutton:function(){var e=Helpers.App.getSubscription();e?this.$dealBtn.text("Switch to Annual"):this.$dealBtn.text("Subscribe Now")}}}),Class(Service,"SessionState")({_instance:null,getInstance:function(e){return null===Service.SessionState._instance&&(Service.SessionState._instance=new Service.SessionState(e)),Service.SessionState._instance},prototype:{showLogin:null,loginCallbackBuilder:null,init:function(e){this.showLogin=e.showLogin||function(){},this.loginCallbackBuilder=e.loginCallbackBuilder||function(){}},isLoggedIn:function(){return Helpers.App.isLoggedIn()},loginDependentFunction:function(e){return this.isLoggedIn()?void e():(this.showLogin(),void this.loginCallbackBuilder(e))}}}),Class(UI,"CountdownTimer").inherits(Widget).includes(GenericDestroySupport)({elementClass:"countdown-widget",prototype:{content:null,refreshInterval:null,startDate:null,endDate:null,intervalId:null,init:function(e){Widget.prototype.init.call(this,e),e.endDate||(this.endDate=new Date),e.refreshInterval||(this.refreshInterval=1)},start:function(){this.stop(),this._refresh(),this.intervalId=setInterval(this._refresh.bind(this),1e3*this.refreshInterval)},stop:function(){clearInterval(this.intervalId),this.intervalId=null},setContent:function(e){this.content=e},show:function(){this.start(),Widget.prototype.show.call(this)},hide:function(){Widget.prototype.hide.call(this),this.stop()},destroy:function(){this.stop(),this.genericDestroy()},_refresh:function(){var e,t;return e=this._getDateDiff(),e===!1?(this.hide(),void this.dispatch("countdown.finished")):(t=this.content,t=this._renderUnitTime(t,"day"),t=this._renderUnitTime(t,"hour"),t=this._renderUnitTime(t,"minute"),t=this._renderUnitTime(t,"second"),void this.element.html(t))},_getDateDiff:function(){var e,t,i,n;return e=this.startDate?this.startDate:new Date,t=e.getTime(),i=this.endDate.getTime(),n=i-t,1>n?!1:{day:this._getDayDiff(t,i),hour:this._getHourDiff(t,i),minute:this._getMinuteDiff(t,i),second:this._getSecondDiff(t,i)}},_getDayDiff:function(e,t){var i=t-e;return 1>i?0:Math.floor(i/864e5)},_getHourDiff:function(e,t){var i=t-e;return 1>i?0:Math.floor(i%864e5/36e5)},_getMinuteDiff:function(e,t){var i=t-e;return 1>i?0:Math.floor(i%36e5/6e4)},_getSecondDiff:function(e,t){var i=t-e;return 1>i?0:Math.floor(i%6e4/1e3)},_renderUnitTime:function(e,t){var i=this._getDateDiff();return i===!1?e:(e=e.replace("{{"+t+"_number}}",i[t]),e=e.replace("{{"+t+"_unit}}",t+(1===i[t]?"":"s")))}}}),Class(UI,"BundleIndicator").inherits(Widget)({COLORLIST1:["#604F5F","#E57B83","#F89697","#FED6BC","#F6F1D3","#B9C7DB","#C8E26C","#47B3AC","#D7D7D5","#FF8BAE","#9E7864","#D8F4F0","#3E5480","#FCD5D5","#6883A7","#BBC8DB"],COLORLIST2:["#F7EED7","#D4FFCD","#D6D5FC","#96B8CC","#BCFFF5","#C4A990","#FFD7E3","#F9F9ED","#6CAEC4","#EBFEA9","#ADCFFF","#FFE9E4","#FFE7D7","#DDBDD6","#EEB5BA","#8B708A"],$bundleIndicatorBackgroundCard:null,$bundleIndicatorForegroundCard:null,prototype:{init:function(e){Widget.prototype.init.call(this,e),this.$bundleIndicatorBackgroundCard=e.backgroundCard,this.$bundleIndicatorForegroundCard=e.foregroundCard,this.fillPathColors()},randomListItem:function(){return Math.floor(16*Math.random())},fillPathColors:function(){var e=this,t=this.constructor.COLORLIST1,i=this.constructor.COLORLIST2;this.$bundleIndicatorBackgroundCard.find("path").each(function(){$(this).css("fill",t[e.randomListItem()])}),this.$bundleIndicatorForegroundCard.find("path").each(function(){$(this).css("fill",i[e.randomListItem()])})}}}),Class(UI,"GenericDropdown").inherits(Widget)({html:'         <div class="dropdown">             <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> </button>             <svg xmlns="http://www.w3.org/2000/svg" width="8" height="10" fill="none" viewBox="0 0 12 8"><path d="M.264.305c-.364.385-.34 1.107 0 1.5l.632.731 2.74 3.172 1.717 1.987c.351.407.944.407 1.295 0l.633-.732 2.74-3.172 1.717-1.987c.363-.417.336-1.075 0-1.499-.333-.42-.957-.392-1.296 0l-.632.732-2.74 3.172c-.572.66-1.146 1.326-1.717 1.987h1.295l-.632-.732-2.74-3.172L1.559.305C1.199-.112.63-.084.264.305z"></path></svg>             <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">                 <ul></ul>             </div>         </div>',prototype:{_selected:null,_options:null,init:function(e){var t=e.element;delete e.element;var i=JSON.parse(JSON.stringify(e));this._options=JSON.parse(JSON.stringify(i.options)),i.element=t,Widget.prototype.init.call(this,i),this.element.find(".dropdown").dropdown(),this.$dropdownButton=this.element.find(".dropdown-toggle"),this.$dropdownMenu=this.element.find(".dropdown-menu"),this._selected=this._options.find(function(e){return e.isSelected}),this._selected?this._updateButtonText(this._selected.label):(this._updateButtonText(this.defaultLabel),this._selected=this._options[0],this._selected.isSelected=!0),this._buildOptions(),this._bindings()},_updateButtonText:function(e){this.$dropdownButton.text(e)},_buildOptions:function(){var e=this._options.map(function(e){var t=$("<a>");return t.text(e.label),t.addClass("dropdown-item"),e.isSelected&&t.addClass("selected"),t.data("value",e.value),t});this.$dropdownMenu.find("ul").append(e)},_bindings:function(){var e=this;this.element.click(function(t){var i=$(t.target);if(i.hasClass("dropdown-item")){e._selected.isSelected=!1,e.element.find(".selected").removeClass("selected"),i.addClass("selected");var n=i.data("value");e._selected=e._options.find(function(e){return e.value==n}),e._selected.isSelected=!0,e._updateButtonText(e._selected.label),e.dispatch("selected",e._selected)}}),this.element.find("> svg").click(function(t){t.stopPropagation(),e.element.find(".dropdown-toggle").click()})},getSelected:function(){return this._selected},close:function(){this.element.hasClass("open")&&this.element.find(".dropdown-toggle").dropdown("toggle")}}}),UI.GlobalSearch={},Class(UI.GlobalSearch,"SearchContainer").inherits(Widget)({html:'        <div class="global-search-container">             <span class="cancel-btn">Cancel</span>             <div class="dropdowns-container"></div>             <form>                 <div class="form-group"></div>                 <button type="submit" class="btn btn-primary search-btn search-white">                     <div class="search-white"></div>                 </button>                 <span class="results-spinner"></span>             </form>         </div>',
prototype:{categoriesData:[],_searchInput:null,_categoryDropdown:null,_subCategoryDropdown:null,$counts:null,_isActive:!0,init:function(e){Widget.prototype.init.call(this,e),this._isActive=Helpers.App.isMobile()===!1,this.$dropdownsContainer=this.element.find(".dropdowns-container"),this.$form=this.element.find("form"),this.$cancel=this.element.find(".cancel-btn"),this.$spinner=this.element.find(".results-spinner"),this.$dropdownCategory=this.$dropdownsContainer.find("button"),this._searchInput=new UI.GlobalSearch.SearchInput({name:"_searchInput",value:this.searchTerm||"",placeholder:this.searchPlaceholder,type:"text",hasClearButton:!0,cssClass:"global-search-input",element:this.$form.find(".global-search-input")}),this.appendChild(this._searchInput);var t=this.$dropdownCategory.text(),i=this.categoriesData.map(function(e){return{label:e.label,value:e.value,isSelected:t.includes(e.label)}});this._categoryDropdown=new UI.GenericDropdown({name:"_categoryDropdown",defaultLabel:i[0].label,options:i,cssClass:"categories-dropdown",element:this.element.find(".categories-dropdown")}),this.appendChild(this._categoryDropdown);var n=i.find(function(e){return e.isSelected});n&&this._createSubcategoryDropdown(n),this._bindings()},_bindings:function(){var e=this;this.$form.submit(function(t){t.preventDefault();var i=null;e._subCategoryDropdown&&(i=e._subCategoryDropdown.getSelected());var n=e._searchInput.getValue().trim();""!==n&&e.dispatch("search",{searchTerm:n,category:e._categoryDropdown.getSelected(),subCategory:i})}),this._searchInput.bind("change",function(t,i){var n=i.value.trim();""===n&&e.hideCount(),e.dispatch("newSearchTerm",n)}),this._categoryDropdown.bind("selected",function(t,i){var n=i;e.dispatch("categorySelected",n),e._subCategoryDropdown&&e._subCategoryDropdown.destroy(),null!==n.value&&e._createSubcategoryDropdown(n),e._focusOnInput()}),Helpers.App.isMobile()&&(this.$cancel.click(function(){e._isActive=!1,$("body").removeClass("search-overlay-active"),e.element.removeClass("active"),e.hideSpinner(),e.hideCount()}),this._searchInput.bind("focus",function(){e._isActive=!0,$("body").addClass("search-overlay-active"),e.element.addClass("active")}),this.element.on("show.bs.dropdown",function(){e.$form.hide()}),this.element.on("hide.bs.dropdown",function(){e.$form.show()}))},_createSubcategoryDropdown:function(e){return},_subCategoryDropdownBindings:function(){var e=this;this._subCategoryDropdown.bind("selected",function(t,i){e.dispatch("subcategorySelected",i),e._focusOnInput()})},setPlaceholder:function(e){this._searchInput.setPlaceholder(e)},setCount:function(e){this._isActive!==!1&&(null===this.$counts&&(this.$counts=$('<span class="results-count">'),this.$form.append(this.$counts)),this.$counts.toggleClass("no-results",0===e),0===e&&(e="No"),this.$counts.text("("+e+" results)"),this.$counts.show(),e>0&&this.hideCount())},hideCount:function(){this.$counts&&this.$counts.hide()},showSpinner:function(){this._isActive!==!1&&this.$spinner.show()},hideSpinner:function(){this.$spinner.hide()},getSearchInput:function(){return this._searchInput.getInputElement()},_focusOnInput:function(){this.getSearchInput().click().focus()},closeAllDropdowns:function(){this._categoryDropdown.close(),this._subCategoryDropdown&&this._subCategoryDropdown.close()}}}),Class(UI.GlobalSearch,"SearchController")({CATEGORIES_NAVBAR_TO_NAME_MAP:{Mockups:"Mockups",Designs:"Design Templates",Logos:"Logos",Videos:"Videos"},CATEGORIES_PLACEHOLDER_MAP:{"All Categories":"Search Mockups, Logos, Design Templates, Text Animations, Instagram Stories, Flyers...",Mockups:"Search Tshirt, Mask, Book, Mug, Hoodie, iPhone...",Designs:"Search Banner, YouTube Banner, OBS Stream Overlay, Fortnite...",Logos:"Search Gaming, Pubg, Dragon, Skull...",Videos:"Search Intro Video, Outro, Music, Anime...",Gaming:"Search Fortnite, Pubg, Free Fire..."},CATEGORY_REAL_URL_MAP:{"/video-maker":"/c/videos","/logo-maker":"/logo-maker?industry=all","/online-logo-maker":"/online-logo-maker?industry=all"},prototype:{_searchContainer:null,searchService:null,_categoriesData:null,_selectedCategory:null,_selectedSubcategory:null,_searchTerm:null,_autocomplete:null,init:function(e){var t=this;this._searchTerm=this.getSearchTermFromUrl(),this.searchService=e.searchService;var i=this._isSearchResultsPage();this._categoriesData=e.categoriesData.map(function(e){var n=t._isSelectedCategory(e.title)&&i,s={label:e.title,value:e.slug,isSelected:n,url:e.url,category_id:UI.GlobalSearch.SearchController.CATEGORIES_NAVBAR_TO_NAME_MAP[e.title]||null};return s.isSelected&&(t._selectedCategory=s),s}),this._categoriesData.unshift({label:"All Categories",value:null,isSelected:null===this._selectedCategory,url:null,category_id:null}),null===this._selectedCategory&&(this._selectedCategory=this._categoriesData[0])},_isSearchResultsPage:function(){return window.pageType.is_search&&!window.pageType.no_results},_isSelectedCategory:function(e){var t=window.pageType;if("custom_experiences"!==t.type&&t.no_results===!0&&t.is_search===!1)return!1;if(Helpers.StageType&&Helpers.StageType.isTool())return!1;if("bookmarks"===t.type)return!1;var i=/\/gaming-templates|\/gaming-br/.test(window.location.pathname);return"Gaming"===e&&i?!0:UI.GlobalSearch.SearchController.CATEGORIES_NAVBAR_TO_NAME_MAP[e]===window._pl_category&&!i},_isSelectedSubcategory:function(e){var t=e.replace(/\/apparel\//,"/mockups/"),i=new URL(window.location.href);-1===t.indexOf("search")?i.searchParams["delete"]("search"):i.searchParams["delete"](null);var n=new URL(t,window.location.origin);t=n.pathname;var s=n.searchParams.toString();return s&&(t+="?"+s),-1!==i.toString().indexOf(t)},_bindings:function(){var e=this;this._searchContainer.bind("categorySelected",function(t,i){e._selectedCategory=e._categoriesData.find(function(e){return e.value===i.value});var n=e._selectedCategory&&e._selectedCategory.url;n?e._isCategoryUrl(n)===!1&&void 0===UI.GlobalSearch.SearchController.CATEGORY_REAL_URL_MAP[n]&&e.searchService.getCEFullUrl(e._selectedCategory.url):e._selectedSubcategory=null,e._setAutocomplete(e._selectedCategory),e._setPlaceholder(),e._searchTerm&&e._searchContainer.dispatch("newSearchTerm",e._searchTerm)}),this._searchContainer.bind("subcategorySelected",function(t,i){e._selectedSubcategory=e._selectedCategory.subcategories.find(function(e){return e.value===i.value});var n=e._selectedSubcategory&&e._selectedSubcategory.url;n&&e._isCategoryUrl(n)===!1&&e.searchService.getCEFullUrl(e._selectedSubcategory.url),null!==e._selectedSubcategory.value&&e._destroyAutocomplete(),e._searchTerm&&e._searchContainer.dispatch("newSearchTerm",e._searchTerm),e._setPlaceholder()}),this._searchContainer.bind("newSearchTerm",function(t,i){e._searchContainer.hideCount(),e._searchTerm=i,e._searchTermTimeout&&clearTimeout(e._searchTermTimeout),e._searchContainer.hideSpinner(),e._searchTerm&&(e._searchTermTimeout=setTimeout(function(){e._getResultsCount(e._searchTerm)},2e3))}),this._searchContainer.bind("search",function(t,i){e._searchTermTimeout&&clearTimeout(e._searchTermTimeout),e._search(i)})},setSearchContainer:function(e){this._searchContainer=e,this._bindings(),this._setAutocomplete(this._selectedCategory),this._setPlaceholder()},_setSelectedCategory:function(e){this._selectedCategory=this._categoriesData.find(function(t){return t.value===e.value})},_setAutocomplete:function(e){if(this._destroyAutocomplete(),!this._selectedSubcategory||null===this._selectedSubcategory.value){var t=this._searchContainer.getSearchInput();if(null===e.value)return this._autocomplete=this.searchService.setAutocomplete(null,t),void this._bindAutocomplete();var i=UI.GlobalSearch.SearchController.CATEGORIES_NAVBAR_TO_NAME_MAP[e.label]||null;i&&(this._autocomplete=this.searchService.setAutocomplete(i,t),this._bindAutocomplete())}},_bindAutocomplete:function(){var e=this;this._autocomplete.on("autocomplete:selected",function(t,i,n){e._search({searchTerm:i.query})})},_destroyAutocomplete:function(){this._autocomplete&&(this._autocomplete.autocomplete.destroy(),this._autocomplete=null)},_getResultsCount:function(e){var t=this,i=this._selectedCategory,n=!1;i.url&&(n=/^\/c\//.test(i.url)),this._selectedSubcategory&&null!==this._selectedSubcategory.value&&(i=this._selectedSubcategory,n=!1);var s=null===this._selectedCategory.value;/\/logo-maker|\/online-logo-maker/.test(i.url)&&(i=JSON.parse(JSON.stringify(i)),i.url=this._updateLogoMakerUrl(i.url)),/\/video-maker/.test(i.url)&&(i=JSON.parse(JSON.stringify(i)),i.url=this._updateVideoMakerUrl(i.url));var r=this.searchService.getCount(e,i,n||s);return r.then(function(i){return t._searchContainer.hideSpinner(),e===t._searchTerm&&t._searchContainer.setCount(i),0===i&&Helpers.GlobalEventTracker.searchNoResults({searchTerm:e}),i>0&&10>=i&&Helpers.GlobalEventTracker.searchFewResults({searchTerm:e,numberOfMatches:i}),i>10&&Helpers.GlobalEventTracker.searchSuccessfulResults({searchTerm:e,numberOfMatches:i}),i}),r},_search:function(e,t){var i=this;this._searchTerm=e.searchTerm,this._getResultsCount(e.searchTerm).then(function(n){if(0===n){var s=null===i._selectedCategory.category_id;return t!==!0&&s===!1?(i._previousSelected=i._selectedCategory,i._selectedCategory=i._categoriesData[0],i._search(e,!0)):void(t===!0&&(i._selectedCategory=i._previousSelected,i._previousSelected=null))}i.searchService.requestSearch({searchTerm:e.searchTerm,category:i._selectedCategory,subCategory:i._selectedSubcategory})})},getCategoriesData:function(){return this._categoriesData},getSearchTermFromUrl:function(){var e=Helpers.App.getUrlParam("search",!1);return"_"===e?null:e||null},_isCategoryUrl:function(e){return/\/c\/[a-z0-9]*/.test(e)},_setPlaceholder:function(){var e=UI.GlobalSearch.SearchController.CATEGORIES_PLACEHOLDER_MAP[this._selectedCategory.label];return null===this._selectedSubcategory?void this._searchContainer.setPlaceholder(e):this._selectedSubcategory&&null===this._selectedSubcategory.value?void this._searchContainer.setPlaceholder(e):void this._searchContainer.setPlaceholder("Search...")},_updateLogoMakerUrl:function(e){var t=e;return t=t.replace(/\/logo-maker|\/online-logo-maker/,"/c/logos"),t=t.replace("industry","f_tags")},_updateVideoMakerUrl:function(e){var t=e;return t=t.replace("/video-maker","/c/videos")},toggleAutocompleteDropdown:function(e){var t=$(".aa-dropdown-menu"),i=t.is(":visible");(!e||this._aaWasOpen)&&(!e&&i&&(this._aaWasOpen=!0),e&&this._aaWasOpen&&(this._aaWasOpen=!1),t.toggle(e))}}}),Class(UI.GlobalSearch,"SearchInput").inherits(Widget)({html:'         <div>             <input type="search" class="form-control search-input-control" placeholder="" aria-label="" aria-describedby="" id="testing" />             <button type="button" class="close" aria-label="Close">                 <span aria-hidden="true">&times;</span>             </button>         </div>',prototype:{$clearBtn:null,$input:null,init:function(e){Widget.prototype.init.call(this,e),this.$input=this.element.find(".search-input-control"),this.$clearBtn=this.element.find(".close"),this.$input.val(this.value),this.$input.attr("placeholder",this.placeholder),this.$input.attr("type",this.type),this.hasClearButton?this.$clearBtn.toggleClass("hide",""===this.value):(this.$clearBtn.remove(),this.$clearBtn=null),this._bindings()},_bindings:function(){var e=this;this.$clearBtn&&this.$clearBtn.click(function(){e.$clearBtn.addClass("hide"),e.setValue("")}),this.$input.focus(function(){e.dispatch("focus")}),this.$input.keyup(function(){e.setValue(e.getValue()),null!==this.$clearBtn&&(""===e.getValue()?e.$clearBtn.addClass("hide"):e.$clearBtn.removeClass("hide"))})},getValue:function(){return this.$input.val()},setValue:function(e){this.value=e,this.$input.val(this.value),this.dispatch("change",{value:this.value})},setPlaceholder:function(e){this.$input.attr("placeholder",e)},getInputElement:function(){return this.$input}}}),Class(UI.GlobalSearch,"SearchService")({prototype:{_slugURLMap:null,_termCountMap:null,algoliaConfig:null,categoryUrlRegex:/\/c\/[a-z0-9]*/,init:function(e){this._slugURLMap={},this._termCountMap={},this.algoliaConfig=e.algoliaConfig},setAutocomplete:function(e,t){var i=algoliasearch(this.algoliaConfig.appId,this.algoliaConfig.readApiKey),n=i.initIndex(this.algoliaConfig.queryIndexName),s={hitsPerPage:5,facets:["*","Stage_production.facets.exact_matches.category_name.value"],facetFilters:[["Stage_production.facets.exact_matches.category_name.value:"+e]]};return null===e&&(delete s.facets,delete s.facetFilters),autocomplete("#"+$(t).attr("id"),{hint:!1},[{source:autocomplete.sources.hits(n,s),displayKey:"query",templates:{suggestion:function(t){if(e){t.Stage_production.facets.exact_matches.category_name.find(function(t){return t.value===e})}var i=t._highlightResult.query.value;return i}}}])},getCount:function(e,t,i){var n=$.md5(JSON.stringify(arguments));if(!this._termCountMap[n]){var s=this._getCount.call(this,e,t,i);this._termCountMap[n]=s}return this._termCountMap[n]},_getCount:function(e,t,i){var n=this,s=t.category_id&&encodeURIComponent(t.category_id),r="";if(s&&(r="&category_id="+s),i)return this._getStagesCountFromTerm(e,r);var o=UI.GlobalSearch.SearchController.CATEGORY_REAL_URL_MAP[o]||t.url,a=o.split("?")[1]||"";return this._isCategoryURL(o)?(a+=r,n._getStagesCountFromTerm(e,a)):this.getCEFullUrl(o).then(function(i){if(i.v3_enabled)return n.getCountV3(e,t);var s=i.full_url.split("?")[1];return s+="&"+a+r,n._getStagesCountFromTerm(e,s)})},_isCategoryURL:function(e){return this.categoryUrlRegex.test(e)},_getStagesCountFromTerm:function(e,t){var i="/api/v1/stages/get_stages_count_from_term";t&&/^&/.test(t)===!1&&(t="&"+t);var n=i+"?search="+e+t;return P.get(n)},getCountV3:function(e,t){return new Promise(function(i,n){var s=t.url.replace("/","");$.get("/api/v2/custom_experiences/get_stages_count_from_term_v3?slug="+s+"&search="+e).done(function(e){i(e)}).fail(function(e){n(e)})})},requestSearch:function(e){var t=e.category.url;e.subCategory&&null!==e.subCategory.value&&(t=e.subCategory.url);var i=UI.GlobalSearch.SearchController.CATEGORY_REAL_URL_MAP[t];i&&(t=i),t=t||"";var n=new URL(t,window.location.origin);n.searchParams.set("search",e.searchTerm),window.location=n.toString()},getCEFullUrl:function(e){var t=this;return new Promise(function(i,n){return e=e.split("?")[0],t._slugURLMap[e]?void i(t._slugURLMap[e]):void $.get("/api/v2/custom_experiences/get_full_url?slug="+e.replace("/","")).done(function(n){t._slugURLMap[e]=n,i(n)}).fail(function(e){n(e)})})}}}),UI.PricingPage={},Class("FaqVideo").inherits(Widget)({html:'    <div class="modal pricing-page-modal fade" tabindex="-1" role="dialog" aria-labelledby="downloadOverlayLabel" aria-hidden="true">        <div class="modal-dialog">            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">                <span aria-hidden="true">\xd7</span>            </button>            <div class="modal-content">                <div class="modal-body">                    <div class="content">                        <div class="body">                            <div class="yt-video-wrapper">                                <iframe src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>                            </div>                        </div>                    </div>                </div>            </div>        </div>    </div>',prototype:{videoUrl:null,$modalBody:null,$modalContent:null,$closeBtn:null,$modalFooter:null,$videoSrc:null,init:function(e){Widget.prototype.init.call(this,e),this.videoUrl=e.videoUrl,this.$modalBody=this.element.find(".modal-body"),this.$modalContent=this.element.find(".modal-content"),this.$closeBtn=this.element.find(".close"),this.$modalFooter=this.element.find(".modal-footer"),this.$videoSrc=this.element.find(".yt-video-wrapper iframe"),this.$videoSrc[0].src=this.videoUrl,this._bindEvents()},_bindEvents:function(){this.element.on("hidden.bs.modal",this.detach.bind(this))},activate:function(){this.$modalFooter.addClass("hidden"),this.element.modal("show")},detach:function(){this.element.data("modal",null),this.element.detach()},deactivate:function(e){this.element.modal("hide"),Widget.prototype.deactivate.call(this)}}}),Class(UI,"PricingPageVariantCD").inherits(Widget).includes(CustomEventSupport,NodeSupport,Translator,CurrencyLabelSetter)({BENEFITS_FOOTER_TEXT:"<strong>*Cancel anytime</strong><br>Unlimited subscription billed yearly in {{currency_label}}.",FAQ_ANSWER_2_TEXT:'<p> You can always buy per item, but we totally recommend our subscription. </p> <p> For ${{monthly_price}} {{currency_label}} per month* or ${{annual_price}} {{currency_label}} per year*, you will have access to <i>all</i> of Placeit\u2019s <span style="color: #9c19e0" ><a href="https://placeit.net/c/mockups" rel="noopener" style="color: #9c19e0" target="_blank" >mockups</a >, <a href="https://placeit.net/c/design-templates" rel="noopener" style="color: #9c19e0" target="_blank" >design templates</a >, </span ><a href="https://placeit.net/video-maker" rel="noopener" target="_blank" ><span style="color: #007ee4" ><span style="color: #9c19e0">videos,</span></span ></a > and <a href="https://placeit.net/logo-maker" ><span style="color: #9c19e0">logos</span></a >. </p> <p> We include our <span style="color: #9c19e0" ><a href="https://placeit.net/#license" rel="noopener" style="color: #9c19e0" target="_blank" >commercial license</a ></span > for all purchases! </p> <p style="font-size: 0.8em">*Billed per month or year according to chosen plan.</p>',prototype:{ctaBlock:null,$startNowBtn:null,$faqvideo:null,$pricingBtn:null,init:function(e){Widget.prototype.init.call(this,{name:"pricingPageVariantCD",element:$(".pricing-page")}),this.ctaBlock=e.ctaBlockSection,this.appNavBar=e.appNavBar,this.$startNowBtn=this.element.find(".subscription-cta, .fotter-cta"),this.$faqvideo=this.element.find(".faqvideo"),this.$modalBody=this.element.find(".modal-body"),this.$modalContent=this.element.find(".modal-content"),this.$closeBtn=this.element.find(".close"),this.$modalFooter=this.element.find(".modal-footer"),this.$pricingBtn=$(document.body).find(".pricing"),this.$benefitsFooter=this.element.find(".benefits-footer"),this.$faqAnswer2=this.element.find("#answer-2"),this._setTexts(),this.setBindings(),this._shouldDisableStartNow()&&this._disableStartNowBtn()},setBindings:function(){var e=this;this.$pricingBtn.addClass("hidden"),this.ctaBlock&&this.ctaBlock.bind("subscription.success",this._onSubscriptionSuccess.bind(this)),this.appNavBar.bind("login.success",function(){e._shouldDisableStartNow()&&e._disableStartNowBtn()}),this.$faqvideo.map(function(t,i){i.addEventListener("click",function(){var t=i.attributes.name.value;e._showVideo(t)})})},_onSubscriptionSuccess:function(e){this._disableStartNowBtn()},_shouldDisableStartNow:function(){var e=Helpers.App.getSubscription();return e===!1?!1:e.is_annual===!1?!1:!0},_disableStartNowBtn:function(){this.$startNowBtn.addClass("disabled")},_showVideo:function(e){var t=this._getVideoUrl(e);this.faqVid=new FaqVideo({videoUrl:t}),this.faqVid.activate()},_getVideoUrl:function(e){var t={question1:"https://www.youtube.com/embed/jBuGvT3V-rs",question5a:"https://www.youtube.com/embed/yCC1_oWUuxg",question5b:"https://www.youtube.com/embed/QoPs9lHcR-Q",question6:"https://www.youtube.com/embed/k_AYOWnf8KU",question8a:"https://www.youtube.com/embed/MS-kPGZLfZw",question8b:"https://www.youtube.com/embed/4bsCICt4WaE",question9:"https://www.youtube.com/embed/stKGeQ1Vek8"};return t[e]?t[e]:t[question1]},_setTexts:function(){var e=this;this.$benefitsFooter.html(this.constructor.BENEFITS_FOOTER_TEXT),this._setPricesInText().then(function(){e.$faqAnswer2.html(e.constructor.FAQ_ANSWER_2_TEXT)})},_setPricesInText:function(){var e=this,t=Helpers.Price.monthlyPlan(),i=Helpers.Price.annualPlan();return Promise.all([t.price.then(function(t){e.constructor.FAQ_ANSWER_2_TEXT=e.constructor.FAQ_ANSWER_2_TEXT.replace("{{monthly_price}}",t)}),i.price.then(function(t){e.constructor.FAQ_ANSWER_2_TEXT=e.constructor.FAQ_ANSWER_2_TEXT.replace("{{annual_price}}",t)})])},checkRequestedStartNow:function(){if(-1!==window.location.hash.indexOf("#start-now")){var e=this;if(setTimeout(function(){var t=Helpers.CouponHelper.getCode();if(!t)return void e.$startNowBtn.first().click();var i=function(){e.$startNowBtn.first().click(),Helpers.CouponHelper.unbind("coupon.validated",i),Helpers.CouponHelper.unbind("coupon.removed",i)};Helpers.CouponHelper.bind("coupon.validated",i),Helpers.CouponHelper.bind("coupon.removed",i)},0),history.replaceState){var t=window.location.pathname+window.location.search;history.replaceState(null,document.title,t)}else window.location.hash=""}}}}),UI.SubscriptionCta={},Class(UI.SubscriptionCta,"SubscriptionCtaBlock").inherits(Widget)({html:'        <div class="subscription-cta-container">            <h2 class="subscription-title"> </h2>            <div class="subscription-price-container">                <span class="from-txt">From:</span> <span class="subscription-price original-price">  </span>                <span class="subscription-discount-price final-price"> </span>                <span class="subscription-price-month"> </span>            </div>             <p class="subscription-subtitle"> </p>            <button class="subscription-cta"> </button>            <span class="subscription-info-footer"></span>        </div>',prototype:{$title:null,$subtitle:null,$startNowBtn:null,$priceContainer:null,$originalPrice:null,$discountPrice:null,$fromText:null,_monthlyCssClass:"monthly",$footerText:null,$perMonth:null,$footerOriginalPrice:null,$footerDiscountPrice:null,$footerStartNowBtn:null,enableFooterCTA:!1,init:function(e){Widget.prototype.init.call(this,e),this.$originalPrice=this.element.find(".original-price"),this.$discountPrice=this.element.find(".final-price"),this.$footerOriginalPrice=$(".footer-price"),this.$footerDiscountPrice=$(".footer-discount-price"),this.$priceContainer=this.element.find(".subscription-price-container"),this.$title=this.element.find(".subscription-title"),this.$subtitle=this.element.find(".subscription-subtitle"),this.$startNowBtn=this.element.find(".subscription-cta"),this.$discountHighlight=this.element.find(".discount-highlight"),this.enableFooterCTA&&(this.$footerStartNowBtn=$(".fotter-cta")),this.$discountHighlight&&this.$discountHighlight.hide(),this.$footerText=this.element.find(".subscription-info-footer"),this.$fromText=this.element.find(".from-txt"),this.$perMonth=this.element.find(".subscription-price-month"),this.updateTitle(e.title),this.updateSubtitle(e.subtitle),this.$fromText.text(e.fromText),this.$startNowBtn.text(e.ctaText),this.$perMonth.text(e.perMonth),this.$footerStartNowBtn&&this.$footerStartNowBtn.text(e.ctaText),this._setBindings()},_setBindings:function(){this.$startNowBtn.click(this._onCtaClicked.bind(this)),this.$footerStartNowBtn&&this.$footerStartNowBtn.click(this._onCtaClicked.bind(this))},updateUIForMonthly:function(e,t){this.$priceContainer.addClass(this._monthlyCssClass);var i=this.$footerText.html(),n=new RegExp(t,"g"),s=i.replace(n,e);this.$footerText.html(s)},updateUIForAnnual:function(e,t){this._monthlyCssClass&&this.$priceContainer.removeClass(this._monthlyCssClass);var i=this.$footerText.html(),n=new RegExp(e,"g"),s=i.replace(n,t);this.$footerText.html(s)},updateUIForDiscount:function(){this.$discountPrice.show(),this.$originalPrice.addClass("dashed"),this.$footerDiscountPrice.show(),this.$footerOriginalPrice.addClass("dashed"),this.$subtitle.addClass("discount-bold")},updateUIForNoDiscount:function(){this.$discountPrice.hide(),this.$originalPrice.removeClass("dashed"),this.$footerDiscountPrice.hide(),this.$footerOriginalPrice.removeClass("dashed"),this.$subtitle.removeClass("discount-bold")},setOriginalPrice:function(e){this.$originalPrice.text(e),this.$footerOriginalPrice.text(e)},setDiscountPrice:function(e,t){this.$discountPrice.text(e),this.$footerDiscountPrice.text(e),this._setDiscountHighlight(Helpers.App.getDiscountHighlightVersion(),t)},_setDiscountHighlight:function(e,t){if(0!==this.$discountHighlight.length){this.$discountHighlight.show();var i=this.$discountHighlight.find(".percentage-container");if(i.text(t+"%"),"C"===e){var n=this.$discountHighlight.find(".code-hash");n.text(Helpers.CouponHelper.getCode())}}},_onCtaClicked:function(e){e.preventDefault();var t=Helpers.App.getSubscription();t===!1&&this.dispatch("cta:clicked"),t.is_annual===!1&&page.showSubscriptionModal()},updateTitle:function(e){this.$title.text(e)},updateSubtitle:function(e){this.$subtitle.text(e)},updateFooterHtml:function(e){this.$footerText.html(e)},updateCtaText:function(e){this.$startNowBtn.text(e),this.$footerStartNowBtn&&this.$footerStartNowBtn.text(e)}}}),Class(UI.SubscriptionCta,"SubscriptionCtaBlockController").inherits(Widget).includes(Translator,CurrencyLabelSetter)({TITLE:"Unlimited Subscription",SUBTITLE:"Unlimited Downloads",FROM:"From:",PER_MONTH:"/mo*",CTA_TEXT:"Start Now",CTA_TEXT_UNLIMITED:"Go Unlimited",MONTHLY_TITLE:"Monthly Subscription",DISCOUNT_SUBTITLE:"Limited time discount",YEARLY:"yearly",MONTHLY:"monthly",MONTHLY_CANCEL_FOOTER:"<p><span>*</span><strong>Cancel anytime.</strong> Unlimited subscription billed monthly in {{currency_label}}.</p>    <p style='font-size: 8.5px'>1 month minimum commitment if subscribers have downloaded any templates. </p>",ANNUAL_CANCEL_FOOTER:"<p><span>*</span><strong>Cancel anytime.</strong> Unlimited subscription billed yearly in {{currency_label}}.</p>    <p style='font-size: 8.5px'>1 month minimum commitment if subscribers have downloaded any templates. </p>",prototype:{monthlyCta:null,annualCta:null,_subscriptionCtaBlock:null,_isMonthlyPriceEnabled:!1,_planPricePromises:null,containerRef:null,forPricingPage:!1,init:function(e){Widget.prototype.init.call(this,e),this.monthlyCta=e.monthlyCta,this.annualCta=e.annualCta,this.containerRef=e.container,this.forPricingPage?this._initCtaForPricingPage():(this._initCtaForFooter(),this._updateFooter()),this._updateUI(),this._bindings()},_bindings:function(){var e=this,t=Utils.bindFn(this);Helpers.CouponHelper.bind("coupon.validated",t(this._updateUI)),Helpers.CouponHelper.bind("coupon.removed",t(this._updateUI)),this._subscriptionCtaBlock.bind("cta:clicked",function(){e._isMonthlyPriceEnabled?e.monthlyCta.click():e.annualCta.click()})},_initCtaForFooter:function(){this._subscriptionCtaBlock=new UI.SubscriptionCta.SubscriptionCtaBlock({title:this.constructor.TITLE,subtitle:this.constructor.SUBTITLE,fromText:this.constructor.FROM,ctaText:this.constructor.CTA_TEXT,perMonth:this.constructor.PER_MONTH}).render(this.containerRef||$(".subscription-cta-container"))},_initCtaForPricingPage:function(){this._subscriptionCtaBlock=new UI.SubscriptionCta.SubscriptionCtaBlock({element:$(".subscription-container"),enableFooterCTA:!0})},updateCtaText:function(e){this._subscriptionCtaBlock.updateCtaText(e)},_shouldShowMonthlyPrice:function(){var e=Helpers.CouponHelper.isValid()||!1,t=e&&Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_MONTHLY),i=e&&Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_ANNUAL);t&&!i?(this._planPricePromises=Helpers.Price.monthlyPlan(),this._isMonthlyPriceEnabled=!0):(this._planPricePromises=Helpers.Price.annualPlan(),this._isMonthlyPriceEnabled=!1)},_updateUI:function(){var e=this;this._shouldShowMonthlyPrice(),this._planPricePromises.price.then(function(t){var i=e._isMonthlyPriceEnabled?t:t/12;e._subscriptionCtaBlock.setOriginalPrice(e._formatPrice(i)),e._planPricePromises.priceWithDiscount.then(function(i){if(t>i){e._subscriptionCtaBlock.updateUIForDiscount();var n=e._isMonthlyPriceEnabled?i:i/12,s=parseInt((t-i)/t*100);e._subscriptionCtaBlock.setDiscountPrice(e._formatPrice(n),s),e._subscriptionCtaBlock.updateSubtitle(this.constructor.DISCOUNT_SUBTITLE)}else e._subscriptionCtaBlock.updateUIForNoDiscount()})}),this._isMonthlyPriceEnabled?(this._subscriptionCtaBlock.updateUIForMonthly(this.constructor.MONTHLY,this.constructor.YEARLY),this._subscriptionCtaBlock.updateTitle(this.constructor.MONTHLY_TITLE),this._subscriptionCtaBlock.updateSubtitle(this.constructor.DISCOUNT_SUBTITLE),this.dispatch("set:monthly:disclaimer")):(this._subscriptionCtaBlock.updateUIForAnnual(this.constructor.MONTHLY,this.constructor.YEARLY),this._subscriptionCtaBlock.updateTitle(this.constructor.TITLE),this._subscriptionCtaBlock.updateSubtitle(this.constructor.SUBTITLE),this.dispatch("set:annual:disclaimer"))},_formatPrice:function(e){return e=e.toFixed(2),e=e.replace(/\.?0+$/,""),e=window.currencyHelper.getSymbol(recurlyConfig.currency)+e},_updateFooter:function(){if(this._isMonthlyPriceEnabled)var e=this.constructor.MONTHLY_CANCEL_FOOTER;else var e=this.constructor.ANNUAL_CANCEL_FOOTER;this._subscriptionCtaBlock.updateFooterHtml(e)}}}),Class("HalloweenGhost").inherits(Widget).includes(BubblingSupport,CustomEventSupport,NodeSupport)({html:'<div class="modal halloween fade" tabindex="-1" role="dialog" aria-labelledby="halloweenGhost" aria-hidden="true"><div class="modal-dialog"><button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span aria-hidden="true">\xd7</span></button><div class="modal-content"><div class="modal-body"><div class="content"><object id="svgNode" data="/assets/halloween_ghost.svg"></object></div></div></div></div></div>',prototype:{$modalBody:null,$modalContent:null,$closeBtn:null,objDoc:null,init:function(e){Widget.prototype.init.call(this,e),this.$modalBody=this.element.find(".modal-body"),this.$modalContent=this.element.find(".modal-content"),this.$closeBtn=this.element.find(".close"),this.$animation=this.element.find("#svgNode"),this.objDoc=this.$animation[0],this._bindEvents()},_bindEvents:function(){var e=this;this.$animation.on("hidden.bs.modal",this.detach.bind(this)),this.objDoc.addEventListener("load",function(){$("#ee7boBxnclV1").ready(function(){this.svgNode=e.objDoc.contentDocument.getElementById("ee7boBxnclV1"),setTimeout(e.deactivate.bind(e),2e3),e.objDoc.contentDocument.onclick=function(){e.deactivate()}})})},detach:function(){this.element.data("modal",null),this.element.detach()},activate:function(){this.element.modal({show:!0,backdrop:!0})},deactivate:function(e){this.element.modal("hide"),Widget.prototype.deactivate.call(this)}}}),UI.CyberWeek={},Class("CyberweekUfo").inherits(HalloweenGhost)({html:'<div class="modal halloween fade" tabindex="-1" role="dialog" aria-labelledby="cyberweekUfo" aria-hidden="true">      <div class="modal-dialog">        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">            <span aria-hidden="true">\xd7</span>        </button>        <div class="modal-content">          <div class="modal-body">            <div class="content">                <object id="svgNode" data="/assets/cyberweek-ufo.svg"></object>            </div>          </div>        </div>      </div>    </div>',prototype:{init:function(e){Widget.prototype.init.call(this,e),this.$modalBody=this.getElement().find(".modal-body"),this.$modalContent=this.getElement().find(".modal-content"),this.$closeBtn=this.getElement().find(".close"),this.$animation=this.getElement().find("#svgNode"),this.objDoc=this.$animation[0],this._bindEvents(),this.activate()}}}),Class(UI,"TriggeringAnimation").inherits(Widget).includes(BubblingSupport)({html:'<div class="modal triggering-animation fade" tabindex="-1" role="dialog" aria-labelledby="triggering-animation" aria-hidden="true">        <div class="modal-dialog">            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">                <span aria-hidden="true">\xd7</span>            </button>            <div class="modal-content">                <div class="modal-body">                    <div class="content">                        <object class="animation-svg" data=""></object>                    </div>                </div>            </div>        </div>    </div>',prototype:{animationContainer:null,animationObject:null,animationTime:3e3,init:function(e){return Widget.prototype.init.call(this,e),this.animationContainer=this.getElement().find(".animation-svg"),this.animationContainer.attr("data",e.animationSource),this.animationObject=this.animationContainer[0],this._bindEvents(),this},_bindEvents:function(){var e=this;this.animationContainer.on("hidden.bs.modal",this.detach.bind(this)),this.animationObject.addEventListener("load",function(){var t=$(e.animationObject.contentDocument);t.ready(function(){P.delay(e.animationTime).then(e.deactivate.bind(e)),t.on("click",e.deactivate.bind(e))})})},detach:function(){this.element.data("modal",null),this.element.detach()},activate:function(){this.element.modal({
show:!0,backdrop:!0})},deactivate:function(){this.element.modal("hide"),"function"==typeof this.animationCallback&&this.animationCallback(),Widget.prototype.deactivate.call(this)}}});var time1=Date.now();window.isInnerPage||document.addEventListener("DOMContentLoaded",function(){var e;$(document.body);if(DataCollector.loadDataCollector()["catch"](function(e){Helpers.GlobalEventTracker.track("braintree:datacollector:error",e)}),videojs.options.techOrder=["html5","flash"],videojs.options.flash.swf="/assets/vendor/video-js.swf",e=function(){var e=!1,t=navigator.userAgent||navigator.vendor||window.opera;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|ipad|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},"Explorer"===BrowserDetect.browser&&BrowserDetect.version<=9||"Safari"===BrowserDetect.browser&&BrowserDetect.version<534.59)return!1;$(".account-dropdown input, .account-dropdown label,             .account-dropdown button, .account-dropdown a").click(function(e){e.stopPropagation()}),$("#shareURLInput").bind("click focus mouseup",function(e){e.preventDefault(),$(this).select()}),$(".remove").remove(),window.currencyHelper=new CurrencyHelper({USD:{label:"USD",symbol:"$"},BRL:{label:"BRL",symbol:"R$"}});var t=window.pageType.type,i=window.getPageStrategy();console.log("typePage: "+t),console.log("strategy: "+i),window.page=new PageController({typePage:t,strategy:i}),window.dispatchEvent(new Event("pageReady"))}),window.getPageStrategy=function(){var e="default",t=window.pageType.type,i={home:"home",category:"home",search:"home",stage:"stage",custom_pages:"custom",custom_experiences:"custom",pricing:"custom",bookmarks:"bookmarks",account:"account",purchases:"purchases",cancel:"cancel",cancel_subscription:"cancel",unsubscribe_email_list:"emailListUnsubscribe",about:"about",saved_drafts:"saved_drafts",switch_subscription:"switchSubscription",ApiGridView:"ApiGridView",ApiStageView:"ApiStageView",ApiPurchasesModal:"ApiPurchasesModal",ApiLogin:"ApiLoginView",ApiSubscription:"ApiSubscriptionView",pricingv2:"custom",my_placeit:"my_placeit",user_brand_page:"user_brand_page",my_folders:"my_folders"};return t&&i[t]&&(e=i[t]),e},$(function(){if("Explorer"===BrowserDetect.browser&&BrowserDetect.version<=10||"IE11"===BrowserDetect.browser||"Safari"===BrowserDetect.browser&&BrowserDetect.version<=534.59)return new UI.IncompatibleBrowser,!1;var e,t;e=function(e){e.preventDefault()},t=document.querySelector(".stage-object-image"),t&&t.addEventListener("contextmenu",e)}),window.addEventListener("load",function(){setTimeout(function(){window.performanceTimings=new PerformanceTimeMonitor,window.performanceTimings.supported===!0&&PerformanceLogger.sendTimings(window.performanceTimings)},0)});